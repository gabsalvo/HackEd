"use strict";(self.webpackChunkHackEd=self.webpackChunkHackEd||[]).push([[179],{8653:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{J:()=>OfflinePageComponent});var _angular_core__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(5879),_angular_common__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(6814),ngx_monaco_editor_v2__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(2352),_angular_forms__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(95);function OfflinePageComponent_div_8_Template(Qe,he){if(1&Qe&&(_angular_core__WEBPACK_IMPORTED_MODULE_0__.TgZ(0,"div")(1,"h2"),_angular_core__WEBPACK_IMPORTED_MODULE_0__._uU(2,"Feedback"),_angular_core__WEBPACK_IMPORTED_MODULE_0__.qZA(),_angular_core__WEBPACK_IMPORTED_MODULE_0__.TgZ(3,"p"),_angular_core__WEBPACK_IMPORTED_MODULE_0__._uU(4),_angular_core__WEBPACK_IMPORTED_MODULE_0__.qZA()()),2&Qe){const k=_angular_core__WEBPACK_IMPORTED_MODULE_0__.oxw();_angular_core__WEBPACK_IMPORTED_MODULE_0__.xp6(4),_angular_core__WEBPACK_IMPORTED_MODULE_0__.Oqu(k.feedback)}}let OfflinePageComponent=(()=>{class OfflinePageComponent{constructor(){this.instructions="Correggi il codice sottostante affinch\xe9 la funzione restituisca il valore corretto.",this.code="\nfunction add(a, b) {\n  return a - b; // Questo dovrebbe essere un + \n}\n\nadd(1, 2); // Dovrebbe restituire 3\n",this.feedback="",this.editorOptions={theme:"vs-dark",language:"javascript"}}ngOnInit(){}checkSolution(){try{const result=eval(this.code);this.feedback=3===result?"Ottimo lavoro! Hai corretto il codice.":"Non proprio giusto. Riprova!"}catch(Qe){this.feedback="Ops! Sembra che ci sia un errore nel tuo codice."}}static#_=this.\u0275fac=function Qe(he){return new(he||OfflinePageComponent)};static#_2=this.\u0275cmp=_angular_core__WEBPACK_IMPORTED_MODULE_0__.Xpm({type:OfflinePageComponent,selectors:[["app-offline-page"]],decls:9,vars:4,consts:[[3,"options","ngModel","ngModelChange"],[3,"click"],[4,"ngIf"]],template:function Qe(he,k){1&he&&(_angular_core__WEBPACK_IMPORTED_MODULE_0__.TgZ(0,"div")(1,"h1"),_angular_core__WEBPACK_IMPORTED_MODULE_0__._uU(2,"Debug the Code!"),_angular_core__WEBPACK_IMPORTED_MODULE_0__.qZA(),_angular_core__WEBPACK_IMPORTED_MODULE_0__.TgZ(3,"p"),_angular_core__WEBPACK_IMPORTED_MODULE_0__._uU(4),_angular_core__WEBPACK_IMPORTED_MODULE_0__.qZA(),_angular_core__WEBPACK_IMPORTED_MODULE_0__.TgZ(5,"ngx-monaco-editor",0),_angular_core__WEBPACK_IMPORTED_MODULE_0__.NdJ("ngModelChange",function(g){return k.code=g}),_angular_core__WEBPACK_IMPORTED_MODULE_0__.qZA(),_angular_core__WEBPACK_IMPORTED_MODULE_0__.TgZ(6,"button",1),_angular_core__WEBPACK_IMPORTED_MODULE_0__.NdJ("click",function(){return k.checkSolution()}),_angular_core__WEBPACK_IMPORTED_MODULE_0__._uU(7,"Controlla la Soluzione"),_angular_core__WEBPACK_IMPORTED_MODULE_0__.qZA(),_angular_core__WEBPACK_IMPORTED_MODULE_0__.YNc(8,OfflinePageComponent_div_8_Template,5,1,"div",2),_angular_core__WEBPACK_IMPORTED_MODULE_0__.qZA()),2&he&&(_angular_core__WEBPACK_IMPORTED_MODULE_0__.xp6(4),_angular_core__WEBPACK_IMPORTED_MODULE_0__.Oqu(k.instructions),_angular_core__WEBPACK_IMPORTED_MODULE_0__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_0__.Q6J("options",k.editorOptions)("ngModel",k.code),_angular_core__WEBPACK_IMPORTED_MODULE_0__.xp6(3),_angular_core__WEBPACK_IMPORTED_MODULE_0__.Q6J("ngIf",k.feedback))},dependencies:[_angular_common__WEBPACK_IMPORTED_MODULE_1__.O5,ngx_monaco_editor_v2__WEBPACK_IMPORTED_MODULE_2__.PG,_angular_forms__WEBPACK_IMPORTED_MODULE_3__.JJ,_angular_forms__WEBPACK_IMPORTED_MODULE_3__.On],styles:["ngx-monaco-editor[_ngcontent-%COMP%]{height:200px}button[_ngcontent-%COMP%]{margin:10px}"]})}return OfflinePageComponent})()},3083:(Qe,he,k)=>{var b={};k.r(b),k.d(b,{Decoder:()=>GN,Encoder:()=>l4,PacketType:()=>Ut,protocol:()=>c4});var g=k(5879),H=k(6814);class ue extends H.w_{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class oe extends ue{static makeCurrent(){(0,H.HT)(new oe)}onAndCancel(e,t,r){return e.addEventListener(t,r),()=>{e.removeEventListener(t,r)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function Te(){return ve=ve||document.querySelector("base"),ve?ve.getAttribute("href"):null}();return null==t?null:function Me(n){Le=Le||document.createElement("a"),Le.setAttribute("href",n);const e=Le.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){ve=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return(0,H.Mx)(document.cookie,e)}}let Le,ve=null,ee=(()=>{class n{build(){return new XMLHttpRequest}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac})}return n})();const ae=new g.OlP("EventManagerPlugins");let ze=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>{i.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(a=>a.supports(t)),!r)throw new g.vHH(5101,!1);return this._eventNameToPlugin.set(t,r),r}static#e=this.\u0275fac=function(r){return new(r||n)(g.LFG(ae),g.LFG(g.R0b))};static#t=this.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac})}return n})();class me{constructor(e){this._doc=e}}const Ie="ng-app-id";let Q=(()=>{class n{constructor(t,r,i,a={}){this.doc=t,this.appId=r,this.nonce=i,this.platformId=a,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=(0,H.PM)(a),this.resetHostNodes()}addStyles(t){for(const r of t)1===this.changeUsageCount(r,1)&&this.onStyleAdded(r)}removeStyles(t){for(const r of t)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){const t=this.styleNodesInDOM;t&&(t.forEach(r=>r.remove()),t.clear());for(const r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(const r of this.getAllStyles())this.addStyleToHost(t,r)}removeHost(t){this.hostNodes.delete(t)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(t){for(const r of this.hostNodes)this.addStyleToHost(r,t)}onStyleRemoved(t){const r=this.styleRef;r.get(t)?.elements?.forEach(i=>i.remove()),r.delete(t)}collectServerRenderedStyles(){const t=this.doc.head?.querySelectorAll(`style[${Ie}="${this.appId}"]`);if(t?.length){const r=new Map;return t.forEach(i=>{null!=i.textContent&&r.set(i.textContent,i)}),r}return null}changeUsageCount(t,r){const i=this.styleRef;if(i.has(t)){const a=i.get(t);return a.usage+=r,a.usage}return i.set(t,{usage:r,elements:[]}),r}getStyleElement(t,r){const i=this.styleNodesInDOM,a=i?.get(r);if(a?.parentNode===t)return i.delete(r),a.removeAttribute(Ie),a;{const c=this.doc.createElement("style");return this.nonce&&c.setAttribute("nonce",this.nonce),c.textContent=r,this.platformIsServer&&c.setAttribute(Ie,this.appId),c}}addStyleToHost(t,r){const i=this.getStyleElement(t,r);t.appendChild(i);const a=this.styleRef,c=a.get(r)?.elements;c?c.push(i):a.set(r,{elements:[i],usage:1})}resetHostNodes(){const t=this.hostNodes;t.clear(),t.add(this.doc.head)}static#e=this.\u0275fac=function(r){return new(r||n)(g.LFG(H.K0),g.LFG(g.AFp),g.LFG(g.Ojb,8),g.LFG(g.Lbi))};static#t=this.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac})}return n})();const Se={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},qe=/%COMP%/g,ce=new g.OlP("RemoveStylesOnCompDestroy",{providedIn:"root",factory:()=>!1});function Ce(n,e){return e.map(t=>t.replace(qe,n))}let mt=(()=>{class n{constructor(t,r,i,a,c,h,p,y=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=a,this.doc=c,this.platformId=h,this.ngZone=p,this.nonce=y,this.rendererByCompId=new Map,this.platformIsServer=(0,H.PM)(h),this.defaultRenderer=new Ze(t,c,p,this.platformIsServer)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===g.ifc.ShadowDom&&(r={...r,encapsulation:g.ifc.Emulated});const i=this.getOrCreateRenderer(t,r);return i instanceof Mo?i.applyToHost(t):i instanceof Cr&&i.applyStyles(),i}getOrCreateRenderer(t,r){const i=this.rendererByCompId;let a=i.get(r.id);if(!a){const c=this.doc,h=this.ngZone,p=this.eventManager,y=this.sharedStylesHost,I=this.removeStylesOnCompDestroy,D=this.platformIsServer;switch(r.encapsulation){case g.ifc.Emulated:a=new Mo(p,y,r,this.appId,I,c,h,D);break;case g.ifc.ShadowDom:return new Fa(p,y,t,r,c,h,this.nonce,D);default:a=new Cr(p,y,r,I,c,h,D)}i.set(r.id,a)}return a}ngOnDestroy(){this.rendererByCompId.clear()}static#e=this.\u0275fac=function(r){return new(r||n)(g.LFG(ze),g.LFG(Q),g.LFG(g.AFp),g.LFG(ce),g.LFG(H.K0),g.LFG(g.Lbi),g.LFG(g.R0b),g.LFG(g.Ojb))};static#t=this.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac})}return n})();class Ze{constructor(e,t,r,i){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?this.doc.createElementNS(Se[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(ts(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(ts(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?this.doc.querySelector(e):e;if(!r)throw new g.vHH(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;const a=Se[i];a?e.setAttributeNS(a,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const i=Se[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(g.JOm.DashCase|g.JOm.Important)?e.style.setProperty(t,r,i&g.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&g.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){if("string"==typeof e&&!(e=(0,H.q)().getGlobalEventTarget(this.doc,e)))throw new Error(`Unsupported event target ${e} for event ${t}`);return this.eventManager.addEventListener(e,t,this.decoratePreventDefault(r))}decoratePreventDefault(e){return t=>{if("__ngUnwrap__"===t)return e;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))&&t.preventDefault()}}}function ts(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class Fa extends Ze{constructor(e,t,r,i,a,c,h,p){super(e,a,c,p),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const y=Ce(i.id,i.styles);for(const I of y){const D=document.createElement("style");h&&D.setAttribute("nonce",h),D.textContent=I,this.shadowRoot.appendChild(D)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class Cr extends Ze{constructor(e,t,r,i,a,c,h,p){super(e,a,c,h),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i,this.styles=p?Ce(p,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}}class Mo extends Cr{constructor(e,t,r,i,a,c,h,p){const y=i+"-"+r.id;super(e,t,r,a,c,h,p,y),this.contentAttr=function we(n){return"_ngcontent-%COMP%".replace(qe,n)}(y),this.hostAttr=function be(n){return"_nghost-%COMP%".replace(qe,n)}(y)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}let Al=(()=>{class n extends me{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}static#e=this.\u0275fac=function(r){return new(r||n)(g.LFG(H.K0))};static#t=this.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac})}return n})();const W=["alt","control","meta","shift"],K={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},te={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let ne=(()=>{class n extends me{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,i){const a=n.parseEventName(r),c=n.eventCallback(a.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>(0,H.q)().onAndCancel(t,a.domEventName,c))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const a=n._normalizeKey(r.pop());let c="",h=r.indexOf("code");if(h>-1&&(r.splice(h,1),c="code."),W.forEach(y=>{const I=r.indexOf(y);I>-1&&(r.splice(I,1),c+=y+".")}),c+=a,0!=r.length||0===a.length)return null;const p={};return p.domEventName=i,p.fullKey=c,p}static matchEventFullKeyCode(t,r){let i=K[t.key]||t.key,a="";return r.indexOf("code.")>-1&&(i=t.code,a="code."),!(null==i||!i)&&(i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),W.forEach(c=>{c!==i&&(0,te[c])(t)&&(a+=c+".")}),a+=i,a===r)}static eventCallback(t,r,i){return a=>{n.matchEventFullKeyCode(a,t)&&i.runGuarded(()=>r(a))}}static _normalizeKey(t){return"esc"===t?"escape":t}static#e=this.\u0275fac=function(r){return new(r||n)(g.LFG(H.K0))};static#t=this.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac})}return n})();const on=(0,g.eFA)(g._c5,"browser",[{provide:g.Lbi,useValue:H.bD},{provide:g.g9A,useValue:function Xn(){oe.makeCurrent()},multi:!0},{provide:H.K0,useFactory:function Yt(){return(0,g.RDi)(document),document},deps:[]}]),kn=new g.OlP(""),$n=[{provide:g.rWj,useClass:class Y{addToWindow(e){g.dqk.getAngularTestability=(r,i=!0)=>{const a=e.findTestabilityInTree(r,i);if(null==a)throw new g.vHH(5103,!1);return a},g.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),g.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),g.dqk.frameworkStabilizers||(g.dqk.frameworkStabilizers=[]),g.dqk.frameworkStabilizers.push(r=>{const i=g.dqk.getAllAngularTestabilities();let a=i.length,c=!1;const h=function(p){c=c||p,a--,0==a&&r(c)};i.forEach(p=>{p.whenStable(h)})})}findTestabilityInTree(e,t,r){return null==t?null:e.getTestability(t)??(r?(0,H.q)().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:g.lri,useClass:g.dDg,deps:[g.R0b,g.eoX,g.rWj]},{provide:g.dDg,useClass:g.dDg,deps:[g.R0b,g.eoX,g.rWj]}],Gt=[{provide:g.zSh,useValue:"root"},{provide:g.qLn,useFactory:function ot(){return new g.qLn},deps:[]},{provide:ae,useClass:Al,multi:!0,deps:[H.K0,g.R0b,g.Lbi]},{provide:ae,useClass:ne,multi:!0,deps:[H.K0]},mt,Q,ze,{provide:g.FYo,useExisting:mt},{provide:H.JF,useClass:ee,deps:[]},[]];let fr=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:g.AFp,useValue:t.appId}]}}static#e=this.\u0275fac=function(r){return new(r||n)(g.LFG(kn,12))};static#t=this.\u0275mod=g.oAB({type:n});static#n=this.\u0275inj=g.cJS({providers:[...Gt,...$n],imports:[H.ez,g.hGG]})}return n})(),Vi=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static#e=this.\u0275fac=function(r){return new(r||n)(g.LFG(H.K0))};static#t=this.\u0275prov=g.Yz7({token:n,factory:function(r){let i=null;return i=r?new r:function ii(){return new Vi((0,g.LFG)(H.K0))}(),i},providedIn:"root"})}return n})();typeof window<"u"&&window;let io=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=g.Yz7({token:n,factory:function(r){let i=null;return i=r?new(r||n):g.LFG(Ol),i},providedIn:"root"})}return n})(),Ol=(()=>{class n extends io{constructor(t){super(),this._doc=t}sanitize(t,r){if(null==r)return null;switch(t){case g.q3G.NONE:return r;case g.q3G.HTML:return(0,g.qzn)(r,"HTML")?(0,g.z3N)(r):(0,g.EiD)(this._doc,String(r)).toString();case g.q3G.STYLE:return(0,g.qzn)(r,"Style")?(0,g.z3N)(r):r;case g.q3G.SCRIPT:if((0,g.qzn)(r,"Script"))return(0,g.z3N)(r);throw new g.vHH(5200,!1);case g.q3G.URL:return(0,g.qzn)(r,"URL")?(0,g.z3N)(r):(0,g.mCW)(String(r));case g.q3G.RESOURCE_URL:if((0,g.qzn)(r,"ResourceURL"))return(0,g.z3N)(r);throw new g.vHH(5201,!1);default:throw new g.vHH(5202,!1)}}bypassSecurityTrustHtml(t){return(0,g.JVY)(t)}bypassSecurityTrustStyle(t){return(0,g.L6k)(t)}bypassSecurityTrustScript(t){return(0,g.eBb)(t)}bypassSecurityTrustUrl(t){return(0,g.LAX)(t)}bypassSecurityTrustResourceUrl(t){return(0,g.pB0)(t)}static#e=this.\u0275fac=function(r){return new(r||n)(g.LFG(H.K0))};static#t=this.\u0275prov=g.Yz7({token:n,factory:function(r){let i=null;return i=r?new r:function Ml(n){return new Ol(n.get(H.K0))}(g.LFG(g.zs3)),i},providedIn:"root"})}return n})();var er=k(5592),pr=k(4674),qt=k(7715),We=k(2096),At=k(5619),ko=k(7453),xt=k(2737),oo=k(7400),is=k(9940),Fo=k(2714),fn=k(8251),Lo=k(7103);function bs(...n){const e=(0,is.yG)(n),t=(0,is.jO)(n),{args:r,keys:i}=(0,ko.D)(n);if(0===r.length)return(0,qt.D)([],e);const a=new er.y(function gr(n,e,t=xt.y){return r=>{oi(e,()=>{const{length:i}=n,a=new Array(i);let c=i,h=i;for(let p=0;p<i;p++)oi(e,()=>{const y=(0,qt.D)(n[p],e);let I=!1;y.subscribe((0,fn.x)(r,D=>{a[p]=D,I||(I=!0,h--),h||r.next(t(a.slice()))},()=>{--c||r.complete()}))},r)},r)}}(r,e,i?c=>(0,Fo.n)(i,c):xt.y));return t?a.pipe((0,oo.Z)(t)):a}function oi(n,e,t){n?(0,Lo.f)(t,n,e):e()}const tr=(0,k(2306).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var _t=k(7537);function Si(...n){return function Ai(){return(0,_t.J)(1)}()((0,qt.D)(n,(0,is.yG)(n)))}var Ui=k(4829);function ss(n){return new er.y(e=>{(0,Ui.Xf)(n()).subscribe(e)})}var Bi=k(8407);function $r(n,e){const t=(0,pr.m)(n)?n:()=>n,r=i=>i.error(t());return new er.y(e?i=>e.schedule(r,0,i):r)}var Hr=k(6232),ao=k(7394),An=k(9360);function Cs(){return(0,An.e)((n,e)=>{let t=null;n._refCount++;const r=(0,fn.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const i=n._connection,a=t;t=null,i&&(!a||i===a)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class Vo extends er.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,An.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new ao.w0;const t=this.getSubject();e.add(this.source.subscribe((0,fn.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=ao.w0.EMPTY)}return e}refCount(){return Cs()(this)}}var Sn=k(8645),ct=k(7398),Mn=k(4664);function Hn(n){return n<=0?()=>Hr.E:(0,An.e)((e,t)=>{let r=0;e.subscribe((0,fn.x)(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function Ds(...n){const e=(0,is.yG)(n);return(0,An.e)((t,r)=>{(e?Si(n,t,e):Si(n,t)).subscribe(r)})}function Gn(n,e){return(0,An.e)((t,r)=>{let i=0;t.subscribe((0,fn.x)(r,a=>n.call(e,a,i++)&&r.next(a)))})}var Fn=k(1631);function Ln(n){return(0,An.e)((e,t)=>{let r=!1;e.subscribe((0,fn.x)(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function ji(n=Uo){return(0,An.e)((e,t)=>{let r=!1;e.subscribe((0,fn.x)(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function Uo(){return new tr}function Ri(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Gn((i,a)=>n(i,a,r)):xt.y,Hn(1),t?Ln(e):ji(()=>new tr))}function As(n,e){return(0,pr.m)(e)?(0,Fn.z)(n,e,1):(0,Fn.z)(n,1)}function vn(n,e,t){const r=(0,pr.m)(n)||e||t?{next:n,error:e,complete:t}:n;return r?(0,An.e)((i,a)=>{var c;null===(c=r.subscribe)||void 0===c||c.call(r);let h=!0;i.subscribe((0,fn.x)(a,p=>{var y;null===(y=r.next)||void 0===y||y.call(r,p),a.next(p)},()=>{var p;h=!1,null===(p=r.complete)||void 0===p||p.call(r),a.complete()},p=>{var y;h=!1,null===(y=r.error)||void 0===y||y.call(r,p),a.error(p)},()=>{var p,y;h&&(null===(p=r.unsubscribe)||void 0===p||p.call(r)),null===(y=r.finalize)||void 0===y||y.call(r)}))}):xt.y}function uo(n){return(0,An.e)((e,t)=>{let a,r=null,i=!1;r=e.subscribe((0,fn.x)(t,void 0,void 0,c=>{a=(0,Ui.Xf)(n(c,uo(n)(e))),r?(r.unsubscribe(),r=null,a.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,a.subscribe(t))})}function Ll(n){return n<=0?()=>Hr.E:(0,An.e)((e,t)=>{let r=[];e.subscribe((0,fn.x)(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(const i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function Bo(n){return(0,ct.U)(()=>n)}function jo(n){return(0,An.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}var La=k(2420);function co(n){return(0,An.e)((e,t)=>{(0,Ui.Xf)(n).subscribe((0,fn.x)(t,()=>t.complete(),La.Z)),!t.closed&&e.subscribe(t)})}const st="primary",Ss=Symbol("RouteTitle");class $o{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function os(n){return new $o(n)}function Vu(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const i={};for(let a=0;a<r.length;a++){const c=r[a],h=n[a];if(c.startsWith(":"))i[c.substring(1)]=h;else if(c!==h.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function Ht(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let a=0;a<t.length;a++)if(i=t[a],!zn(n[i],e[i]))return!1;return!0}function zn(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((i,a)=>r[a]===i)}return n===e}function $i(n){return n.length>0?n[n.length-1]:null}function pn(n){return function No(n){return!!n&&(n instanceof er.y||(0,pr.m)(n.lift)&&(0,pr.m)(n.subscribe))}(n)?n:(0,g.QGY)(n)?(0,qt.D)(Promise.resolve(n)):(0,We.of)(n)}const Va={exact:function Bu(n,e,t){if(!jt(n.segments,e.segments)||!Bt(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!Bu(n.children[r],e.children[r],t))return!1;return!0},subset:Re},Ua={exact:function Uu(n,e){return Ht(n,e)},subset:function Zt(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>zn(n[t],e[t]))},ignored:()=>!0};function Rs(n,e,t){return Va[t.paths](n.root,e.root,t.matrixParams)&&Ua[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function Re(n,e,t){return nt(n,e,e.segments,t)}function nt(n,e,t,r){if(n.segments.length>t.length){const i=n.segments.slice(0,t.length);return!(!jt(i,t)||e.hasChildren()||!Bt(i,t,r))}if(n.segments.length===t.length){if(!jt(n.segments,t)||!Bt(n.segments,t,r))return!1;for(const i in e.children)if(!n.children[i]||!Re(n.children[i],e.children[i],r))return!1;return!0}{const i=t.slice(0,n.segments.length),a=t.slice(n.segments.length);return!!(jt(n.segments,i)&&Bt(n.segments,i,r)&&n.children[st])&&nt(n.children[st],e,a,r)}}function Bt(n,e,t){return e.every((r,i)=>Ua[t](n[i].parameters,r.parameters))}class gn{constructor(e=new Tt([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=os(this.queryParams)),this._queryParamMap}toString(){return lo.serialize(this)}}class Tt{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Hi(this)}}class an{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=os(this.parameters)),this._parameterMap}toString(){return Pi(this)}}function jt(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}let ci=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=g.Yz7({token:n,factory:function(){return new et},providedIn:"root"})}return n})();class et{parse(e){const t=new fo(e);return new gn(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${Gr(e.root,!0)}`,r=function hi(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(i=>`${Gi(t)}=${Gi(i)}`).join("&"):`${Gi(t)}=${Gi(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function ho(n){return encodeURI(n)}(e.fragment)}`:""}`}}const lo=new et;function Hi(n){return n.segments.map(e=>Pi(e)).join("/")}function Gr(n,e){if(!n.hasChildren())return Hi(n);if(e){const t=n.children[st]?Gr(n.children[st],!1):"",r=[];return Object.entries(n.children).forEach(([i,a])=>{i!==st&&r.push(`${i}:${Gr(a,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function ui(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===st&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==st&&(t=t.concat(e(i,r)))}),t}(n,(r,i)=>i===st?[Gr(n.children[st],!1)]:[`${i}:${Gr(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[st]?`${Hi(n)}/${t[0]}`:`${Hi(n)}/(${t.join("//")})`}}function un(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Gi(n){return un(n).replace(/%3B/gi,";")}function zr(n){return un(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function li(n){return decodeURIComponent(n)}function Ho(n){return li(n.replace(/\+/g,"%20"))}function Pi(n){return`${zr(n.path)}${function di(n){return Object.keys(n).map(e=>`;${zr(e)}=${zr(n[e])}`).join("")}(n.parameters)}`}const as=/^[^\/()?;#]+/;function ft(n){const e=n.match(as);return e?e[0]:""}const Gh=/^[^\/()?;=#]+/,ju=/^[^=?&#]+/,xs=/^[^&#]+/;class fo{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Tt([],{}):new Tt([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[st]=new Tt(e,t)),r}parseSegment(){const e=ft(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new g.vHH(4009,!1);return this.capture(e),new an(li(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=function Go(n){const e=n.match(Gh);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const i=ft(this.remaining);i&&(r=i,this.capture(r))}e[li(t)]=li(r)}parseQueryParam(e){const t=function mr(n){const e=n.match(ju);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const c=function Ms(n){const e=n.match(xs);return e?e[0]:""}(this.remaining);c&&(r=c,this.capture(r))}const i=Ho(t),a=Ho(r);if(e.hasOwnProperty(i)){let c=e[i];Array.isArray(c)||(c=[c],e[i]=c),c.push(a)}else e[i]=a}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=ft(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new g.vHH(4010,!1);let a;r.indexOf(":")>-1?(a=r.slice(0,r.indexOf(":")),this.capture(a),this.capture(":")):e&&(a=st);const c=this.parseChildren();t[a]=1===Object.keys(c).length?c[st]:new Tt([],c),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new g.vHH(4011,!1)}}function En(n){return n.segments.length>0?new Tt([],{[st]:n}):n}function zh(n){const e={};for(const r of Object.keys(n.children)){const a=zh(n.children[r]);if(r===st&&0===a.segments.length&&a.hasChildren())for(const[c,h]of Object.entries(a.children))e[c]=h;else(a.segments.length>0||a.hasChildren())&&(e[r]=a)}return function nr(n){if(1===n.numberOfChildren&&n.children[st]){const e=n.children[st];return new Tt(n.segments.concat(e.segments),e.children)}return n}(new Tt(n.segments,e))}function cn(n){return n instanceof gn}function zi(n){let e;const i=En(function t(a){const c={};for(const p of a.children){const y=t(p);c[p.outlet]=y}const h=new Tt(a.url,c);return a===n&&(e=h),h}(n.root));return e??i}function po(n,e,t,r){let i=n;for(;i.parent;)i=i.parent;if(0===e.length)return $u(i,i,i,t,r);const a=function Om(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new qh(!0,0,n);let e=0,t=!1;const r=n.reduce((i,a,c)=>{if("object"==typeof a&&null!=a){if(a.outlets){const h={};return Object.entries(a.outlets).forEach(([p,y])=>{h[p]="string"==typeof y?y.split("/"):y}),[...i,{outlets:h}]}if(a.segmentPath)return[...i,a.segmentPath]}return"string"!=typeof a?[...i,a]:0===c?(a.split("/").forEach((h,p)=>{0==p&&"."===h||(0==p&&""===h?t=!0:".."===h?e++:""!=h&&i.push(h))}),i):[...i,a]},[]);return new qh(t,e,r)}(e);if(a.toRoot())return $u(i,i,new Tt([],{}),t,r);const c=function Nm(n,e,t){if(n.isAbsolute)return new Ba(e,!0,0);if(!t)return new Ba(e,!1,NaN);if(null===t.parent)return new Ba(t,!0,0);const r=Dr(n.commands[0])?0:1;return function km(n,e,t){let r=n,i=e,a=t;for(;a>i;){if(a-=i,r=r.parent,!r)throw new g.vHH(4005,!1);i=r.segments.length}return new Ba(r,!1,i-a)}(t,t.segments.length-1+r,n.numberOfDoubleDots)}(a,i,n),h=c.processChildren?Jt(c.segmentGroup,c.index,a.commands):Fm(c.segmentGroup,c.index,a.commands);return $u(i,c.segmentGroup,h,t,r)}function Dr(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function Os(n){return"object"==typeof n&&null!=n&&n.outlets}function $u(n,e,t,r,i){let c,a={};r&&Object.entries(r).forEach(([p,y])=>{a[p]=Array.isArray(y)?y.map(I=>`${I}`):`${y}`}),c=n===e?t:Hu(n,e,t);const h=En(zh(c));return new gn(h,a,i)}function Hu(n,e,t){const r={};return Object.entries(n.children).forEach(([i,a])=>{r[i]=a===e?t:Hu(a,e,t)}),new Tt(n.segments,r)}class qh{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&Dr(r[0]))throw new g.vHH(4003,!1);const i=r.find(Os);if(i&&i!==$i(r))throw new g.vHH(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Ba{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function Fm(n,e,t){if(n||(n=new Tt([],{})),0===n.segments.length&&n.hasChildren())return Jt(n,e,t);const r=function Lm(n,e,t){let r=0,i=e;const a={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return a;const c=n.segments[i],h=t[r];if(Os(h))break;const p=`${h}`,y=r<t.length-1?t[r+1]:null;if(i>0&&void 0===p)break;if(p&&y&&"object"==typeof y&&void 0===y.outlets){if(!w(p,y,c))return a;r+=2}else{if(!w(p,{},c))return a;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const a=new Tt(n.segments.slice(0,r.pathIndex),{});return a.children[st]=new Tt(n.segments.slice(r.pathIndex),n.children),Jt(a,0,i)}return r.match&&0===i.length?new Tt(n.segments,{}):r.match&&!n.hasChildren()?Wh(n,e,t):r.match?Jt(n,0,i):Wh(n,e,t)}function Jt(n,e,t){if(0===t.length)return new Tt(n.segments,{});{const r=function QI(n){return Os(n[0])?n[0].outlets:{[st]:n}}(t),i={};if(Object.keys(r).some(a=>a!==st)&&n.children[st]&&1===n.numberOfChildren&&0===n.children[st].segments.length){const a=Jt(n.children[st],e,t);return new Tt(n.segments,a.children)}return Object.entries(r).forEach(([a,c])=>{"string"==typeof c&&(c=[c]),null!==c&&(i[a]=Fm(n.children[a],e,c))}),Object.entries(n.children).forEach(([a,c])=>{void 0===r[a]&&(i[a]=c)}),new Tt(n.segments,i)}}function Wh(n,e,t){const r=n.segments.slice(0,e);let i=0;for(;i<t.length;){const a=t[i];if(Os(a)){const p=A(a.outlets);return new Tt(r,p)}if(0===i&&Dr(t[0])){r.push(new an(n.segments[e].path,R(t[0]))),i++;continue}const c=Os(a)?a.outlets[st]:`${a}`,h=i<t.length-1?t[i+1]:null;c&&h&&Dr(h)?(r.push(new an(c,R(h))),i+=2):(r.push(new an(c,{})),i++)}return new Tt(r,{})}function A(n){const e={};return Object.entries(n).forEach(([t,r])=>{"string"==typeof r&&(r=[r]),null!==r&&(e[t]=Wh(new Tt([],{}),0,r))}),e}function R(n){const e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function w(n,e,t){return n==t.path&&Ht(e,t.parameters)}const M="imperative";class U{constructor(e,t){this.id=e,this.url=t}}class Ve extends U{constructor(e,t,r="imperative",i=null){super(e,t),this.type=0,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Je extends U{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class qn extends U{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class fi extends U{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=16}}class xi extends U{constructor(e,t,r,i){super(e,t),this.error=r,this.target=i,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class qr extends U{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class pi extends U{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Gu extends U{constructor(e,t,r,i,a){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=a,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class zu extends U{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class rr extends U{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Vl{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Wr{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Ul{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Vm{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Um{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Kh{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ja{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class Bl{}class qu{constructor(e){this.url=e}}class jm{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new $a,this.attachRef=null}}let $a=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(t,r){const i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){const r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new jm,this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();class Yh{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=Ha(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=Ha(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=qo(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return qo(e,this._root).map(t=>t.value)}}function Ha(n,e){if(n===e.value)return e;for(const t of e.children){const r=Ha(n,t);if(r)return r}return null}function qo(n,e){if(n===e.value)return[e];for(const t of e.children){const r=qo(n,t);if(r.length)return r.unshift(e),r}return[]}class Ar{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function Wo(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class $m extends Yh{constructor(e,t){super(e),this.snapshot=t,Qh(this,e)}toString(){return this.snapshot.toString()}}function Hm(n,e){const t=function sA(n,e){const c=new Wu([],{},{},"",{},st,e,null,{});return new jl("",new Ar(c,[]))}(0,e),r=new At.X([new an("",{})]),i=new At.X({}),a=new At.X({}),c=new At.X({}),h=new At.X(""),p=new Ga(r,i,c,h,a,st,e,t.root);return p.snapshot=t.root,new $m(new Ar(p,[]),t)}class Ga{constructor(e,t,r,i,a,c,h,p){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=a,this.outlet=c,this.component=h,this._futureSnapshot=p,this.title=this.dataSubject?.pipe((0,ct.U)(y=>y[Ss]))??(0,We.of)(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=a}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,ct.U)(e=>os(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,ct.U)(e=>os(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Gm(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const i=t[r],a=t[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(a.component)break;r--}}return function oA(n){return n.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(r))}class Wu{get title(){return this.data?.[Ss]}constructor(e,t,r,i,a,c,h,p,y){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=a,this.outlet=c,this.component=h,this.routeConfig=p,this._resolve=y}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=os(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=os(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class jl extends Yh{constructor(e,t){super(t),this.url=e,Qh(this,t)}toString(){return $l(this._root)}}function Qh(n,e){e.value._routerState=n,e.children.forEach(t=>Qh(n,t))}function $l(n){const e=n.children.length>0?` { ${n.children.map($l).join(", ")} } `:"";return`${n.value}${e}`}function zm(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Ht(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),Ht(e.params,t.params)||n.paramsSubject.next(t.params),function wt(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Ht(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.urlSubject.next(t.url),Ht(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function qm(n,e){const t=Ht(n.params,e.params)&&function Ps(n,e){return jt(n,e)&&n.every((t,r)=>Ht(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||qm(n.parent,e.parent))}let Ko=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=st,this.activateEvents=new g.vpe,this.deactivateEvents=new g.vpe,this.attachEvents=new g.vpe,this.detachEvents=new g.vpe,this.parentContexts=(0,g.f3M)($a),this.location=(0,g.f3M)(g.s_b),this.changeDetector=(0,g.f3M)(g.sBO),this.environmentInjector=(0,g.f3M)(g.lqb),this.inputBinder=(0,g.f3M)(v,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(t){if(t.name){const{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new g.vHH(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new g.vHH(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new g.vHH(4012,!1);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new g.vHH(4013,!1);this._activatedRoute=t;const i=this.location,c=t.snapshot.component,h=this.parentContexts.getOrCreateContext(this.name).children,p=new Wm(t,h,i.injector);this.activated=i.createComponent(c,{index:i.length,injector:p,environmentInjector:r??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275dir=g.lG2({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[g.TTD]})}return n})();class Wm{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===Ga?this.route:e===$a?this.childContexts:this.parent.get(e,t)}}const v=new g.OlP("");let P=(()=>{class n{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){const{activatedRoute:r}=t,i=bs([r.queryParams,r.params,r.data]).pipe((0,Mn.w)(([a,c,h],p)=>(h={...a,...c,...h},0===p?(0,We.of)(h):Promise.resolve(h)))).subscribe(a=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==r||null===r.component)return void this.unsubscribeFromRouteData(t);const c=(0,g.qFp)(r.component);if(c)for(const{templateName:h}of c.inputs)t.activatedComponentRef.setInput(h,a[h]);else this.unsubscribeFromRouteData(t)});this.outletDataSubscriptions.set(t,i)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac})}return n})();function S(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const i=function V(n,e,t){return e.children.map(r=>{for(const i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return S(n,r,i);return S(n,r)})}(n,e,t);return new Ar(r,i)}{if(n.shouldAttach(e.value)){const a=n.retrieve(e.value);if(null!==a){const c=a.route;return c.value._futureSnapshot=e.value,c.children=e.children.map(h=>S(n,h)),c}}const r=function z(n){return new Ga(new At.X(n.url),new At.X(n.params),new At.X(n.queryParams),new At.X(n.fragment),new At.X(n.data),n.outlet,n.component,n)}(e.value),i=e.children.map(a=>S(n,a));return new Ar(r,i)}}const se="ngNavigationCancelingError";function je(n,e){const{redirectTo:t,navigationBehaviorOptions:r}=cn(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=Wt(!1,0,e);return i.url=t,i.navigationBehaviorOptions=r,i}function Wt(n,e,t){const r=new Error("NavigationCancelingError: "+(n||""));return r[se]=!0,r.cancellationCode=e,t&&(r.url=t),r}function Rt(n){return n&&n[se]}let yt=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=g.Xpm({type:n,selectors:[["ng-component"]],standalone:!0,features:[g.jDz],decls:1,vars:0,template:function(r,i){1&r&&g._UZ(0,"router-outlet")},dependencies:[Ko],encapsulation:2})}return n})();function us(n){const e=n.children&&n.children.map(us),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==st&&(t.component=yt),t}function St(n){return n.outlet||st}function Yo(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class ZI{constructor(e,t,r,i,a){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=a}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),zm(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const i=Wo(t);e.children.forEach(a=>{const c=a.value.outlet;this.deactivateRoutes(a,i[c],r),delete i[c]}),Object.values(i).forEach(a=>{this.deactivateRouteAndItsChildren(a,r)})}deactivateRoutes(e,t,r){const i=e.value,a=t?t.value:null;if(i===a)if(i.component){const c=r.getContext(i.outlet);c&&this.deactivateChildRoutes(e,t,c.children)}else this.deactivateChildRoutes(e,t,r);else a&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,a=Wo(e);for(const c of Object.keys(a))this.deactivateRouteAndItsChildren(a[c],i);if(r&&r.outlet){const c=r.outlet.detach(),h=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:c,route:e,contexts:h})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,a=Wo(e);for(const c of Object.keys(a))this.deactivateRouteAndItsChildren(a[c],i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){const i=Wo(t);e.children.forEach(a=>{this.activateRoutes(a,i[a.value.outlet],r),this.forwardEvent(new Kh(a.value.snapshot))}),e.children.length&&this.forwardEvent(new Vm(e.value.snapshot))}activateRoutes(e,t,r){const i=e.value,a=t?t.value:null;if(zm(i),i===a)if(i.component){const c=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,c.children)}else this.activateChildRoutes(e,t,r);else if(i.component){const c=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const h=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),c.children.onOutletReAttached(h.contexts),c.attachRef=h.componentRef,c.route=h.route.value,c.outlet&&c.outlet.attach(h.componentRef,h.route.value),zm(h.route.value),this.activateChildRoutes(e,null,c.children)}else{const h=Yo(i.snapshot);c.attachRef=null,c.route=i,c.injector=h,c.outlet&&c.outlet.activateWith(i,c.injector),this.activateChildRoutes(e,null,c.children)}}else this.activateChildRoutes(e,null,r)}}class za{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class Sr{constructor(e,t){this.component=e,this.route=t}}function uA(n,e,t){const r=n._root;return Wi(r,e?e._root:null,t,[r.value])}function Ku(n,e){const t=Symbol(),r=e.get(n,t);return r===t?"function"!=typeof n||(0,g.Z0I)(n)?e.get(n):n:r}function Wi(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const a=Wo(e);return n.children.forEach(c=>{(function JI(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const a=n.value,c=e?e.value:null,h=t?t.getContext(n.value.outlet):null;if(c&&a.routeConfig===c.routeConfig){const p=function lA(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!jt(n.url,e.url);case"pathParamsOrQueryParamsChange":return!jt(n.url,e.url)||!Ht(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!qm(n,e)||!Ht(n.queryParams,e.queryParams);default:return!qm(n,e)}}(c,a,a.routeConfig.runGuardsAndResolvers);p?i.canActivateChecks.push(new za(r)):(a.data=c.data,a._resolvedData=c._resolvedData),Wi(n,e,a.component?h?h.children:null:t,r,i),p&&h&&h.outlet&&h.outlet.isActivated&&i.canDeactivateChecks.push(new Sr(h.outlet.component,c))}else c&&Yu(e,h,i),i.canActivateChecks.push(new za(r)),Wi(n,null,a.component?h?h.children:null:t,r,i)})(c,a[c.value.outlet],t,r.concat([c.value]),i),delete a[c.value.outlet]}),Object.entries(a).forEach(([c,h])=>Yu(h,t.getContext(c),i)),i}function Yu(n,e,t){const r=Wo(n),i=n.value;Object.entries(r).forEach(([a,c])=>{Yu(c,i.component?e?e.children.getContext(a):null:e,t)}),t.canDeactivateChecks.push(new Sr(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}function Qu(n){return"function"==typeof n}function Ym(n){return n instanceof tr||"EmptyError"===n?.name}const go=Symbol("INITIAL_VALUE");function Zu(){return(0,Mn.w)(n=>bs(n.map(e=>e.pipe(Hn(1),Ds(go)))).pipe((0,ct.U)(e=>{for(const t of e)if(!0!==t){if(t===go)return go;if(!1===t||t instanceof gn)return t}return!0}),Gn(e=>e!==go),Hn(1)))}function Qm(n){return(0,Bi.z)(vn(e=>{if(cn(e))throw je(0,e)}),(0,ct.U)(e=>!0===e))}class Oi{constructor(e){this.segmentGroup=e||null}}class Zh{constructor(e){this.urlTree=e}}function Qo(n){return $r(new Oi(n))}function rw(n){return $r(new Zh(n))}class Kr{constructor(e,t){this.urlSerializer=e,this.urlTree=t}noMatchError(e){return new g.vHH(4002,!1)}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return(0,We.of)(r);if(i.numberOfChildren>1||!i.children[st])return $r(new g.vHH(4e3,!1));i=i.children[st]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreateUrlTree(e,t,r,i){const a=this.createSegmentGroup(e,t.root,r,i);return new gn(a,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return Object.entries(e).forEach(([i,a])=>{if("string"==typeof a&&a.startsWith(":")){const h=a.substring(1);r[i]=t[h]}else r[i]=a}),r}createSegmentGroup(e,t,r,i){const a=this.createSegments(e,t.segments,r,i);let c={};return Object.entries(t.children).forEach(([h,p])=>{c[h]=this.createSegmentGroup(e,p,r,i)}),new Tt(a,c)}createSegments(e,t,r,i){return t.map(a=>a.path.startsWith(":")?this.findPosParam(e,a,i):this.findOrReturn(a,r))}findPosParam(e,t,r){const i=r[t.path.substring(1)];if(!i)throw new g.vHH(4001,!1);return i}findOrReturn(e,t){let r=0;for(const i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}}const cs={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function sw(n,e,t,r,i){const a=Zo(n,e,t);return a.matched?(r=function In(n,e){return n.providers&&!n._injector&&(n._injector=(0,g.MMx)(n.providers,e,`Route: ${n.path}`)),n._injector??e}(e,r),function Hl(n,e,t,r){const i=e.canMatch;if(!i||0===i.length)return(0,We.of)(!0);const a=i.map(c=>{const h=Ku(c,n);return pn(function hA(n){return n&&Qu(n.canMatch)}(h)?h.canMatch(e,t):n.runInContext(()=>h(e,t)))});return(0,We.of)(a).pipe(Zu(),Qm())}(r,e,t).pipe((0,ct.U)(c=>!0===c?a:{...cs}))):(0,We.of)(a)}function Zo(n,e,t){if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...cs}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const i=(e.matcher||Vu)(t,n,e);if(!i)return{...cs};const a={};Object.entries(i.posParams??{}).forEach(([h,p])=>{a[h]=p.path});const c=i.consumed.length>0?{...a,...i.consumed[i.consumed.length-1].parameters}:a;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:c,positionalParamSegments:i.posParams??{}}}function Vs(n,e,t,r){return t.length>0&&function vA(n,e,t){return t.some(r=>Ju(n,e,r)&&St(r)!==st)}(n,t,r)?{segmentGroup:new Tt(e,ow(r,new Tt(t,n.children))),slicedSegments:[]}:0===t.length&&function EA(n,e,t){return t.some(r=>Ju(n,e,r))}(n,t,r)?{segmentGroup:new Tt(n.segments,yA(n,0,t,r,n.children)),slicedSegments:t}:{segmentGroup:new Tt(n.segments,n.children),slicedSegments:t}}function yA(n,e,t,r,i){const a={};for(const c of r)if(Ju(n,t,c)&&!i[St(c)]){const h=new Tt([],{});a[St(c)]=h}return{...i,...a}}function ow(n,e){const t={};t[st]=e;for(const r of n)if(""===r.path&&St(r)!==st){const i=new Tt([],{});t[St(r)]=i}return t}function Ju(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}class IA{constructor(e,t,r,i,a,c,h){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=a,this.paramsInheritanceStrategy=c,this.urlSerializer=h,this.allowRedirects=!0,this.applyRedirects=new Kr(this.urlSerializer,this.urlTree)}noMatchError(e){return new g.vHH(4002,!1)}recognize(){const e=Vs(this.urlTree.root,[],[],this.config).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,st).pipe(uo(t=>{if(t instanceof Zh)return this.allowRedirects=!1,this.urlTree=t.urlTree,this.match(t.urlTree);throw t instanceof Oi?this.noMatchError(t):t}),(0,ct.U)(t=>{const r=new Wu([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},st,this.rootComponentType,null,{}),i=new Ar(r,t),a=new jl("",i),c=function zo(n,e,t=null,r=null){return po(zi(n),e,t,r)}(r,[],this.urlTree.queryParams,this.urlTree.fragment);return c.queryParams=this.urlTree.queryParams,a.url=this.urlSerializer.serialize(c),this.inheritParamsAndData(a._root),{state:a,tree:c}}))}match(e){return this.processSegmentGroup(this.injector,this.config,e.root,st).pipe(uo(r=>{throw r instanceof Oi?this.noMatchError(r):r}))}inheritParamsAndData(e){const t=e.value,r=Gm(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,t,r):this.processSegment(e,t,r,r.segments,i,!0)}processChildren(e,t,r){const i=[];for(const a of Object.keys(r.children))"primary"===a?i.unshift(a):i.push(a);return(0,qt.D)(i).pipe(As(a=>{const c=r.children[a],h=function Km(n,e){const t=n.filter(r=>St(r)===e);return t.push(...n.filter(r=>St(r)!==e)),t}(t,a);return this.processSegmentGroup(e,h,c,a)}),function Fl(n,e){return(0,An.e)(function kl(n,e,t,r,i){return(a,c)=>{let h=t,p=e,y=0;a.subscribe((0,fn.x)(c,I=>{const D=y++;p=h?n(p,I,D):(h=!0,I),r&&c.next(p)},i&&(()=>{h&&c.next(p),c.complete()})))}}(n,e,arguments.length>=2,!0))}((a,c)=>(a.push(...c),a)),Ln(null),function ai(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Gn((i,a)=>n(i,a,r)):xt.y,Ll(1),t?Ln(e):ji(()=>new tr))}(),(0,Fn.z)(a=>{if(null===a)return Qo(r);const c=e_(a);return function uw(n){n.sort((e,t)=>e.value.outlet===st?-1:t.value.outlet===st?1:e.value.outlet.localeCompare(t.value.outlet))}(c),(0,We.of)(c)}))}processSegment(e,t,r,i,a,c){return(0,qt.D)(t).pipe(As(h=>this.processSegmentAgainstRoute(h._injector??e,t,h,r,i,a,c).pipe(uo(p=>{if(p instanceof Oi)return(0,We.of)(null);throw p}))),Ri(h=>!!h),uo(h=>{if(Ym(h))return function aw(n,e,t){return 0===e.length&&!n.children[t]}(r,i,a)?(0,We.of)([]):Qo(r);throw h}))}processSegmentAgainstRoute(e,t,r,i,a,c,h){return function Zm(n,e,t,r){return!!(St(n)===r||r!==st&&Ju(e,t,n))&&("**"===n.path||Zo(e,n,t).matched)}(r,i,a,c)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(e,i,r,a,c,h):h&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,a,c):Qo(i):Qo(i)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,a,c){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,c):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,a,c)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,i){const a=this.applyRedirects.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?rw(a):this.applyRedirects.lineralizeSegments(r,a).pipe((0,Fn.z)(c=>{const h=new Tt(c,{});return this.processSegment(e,t,h,c,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,a,c){const{matched:h,consumedSegments:p,remainingSegments:y,positionalParamSegments:I}=Zo(t,i,a);if(!h)return Qo(t);const D=this.applyRedirects.applyRedirectCommands(p,i.redirectTo,I);return i.redirectTo.startsWith("/")?rw(D):this.applyRedirects.lineralizeSegments(i,D).pipe((0,Fn.z)(O=>this.processSegment(e,r,t,O.concat(y),c,!1)))}matchSegmentAgainstRoute(e,t,r,i,a,c){let h;if("**"===r.path){const p=i.length>0?$i(i).parameters:{},y=new Wu(i,p,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,t_(r),St(r),r.component??r._loadedComponent??null,r,n_(r));h=(0,We.of)({snapshot:y,consumedSegments:[],remainingSegments:[]}),t.children={}}else h=sw(t,r,i,e).pipe((0,ct.U)(({matched:p,consumedSegments:y,remainingSegments:I,parameters:D})=>p?{snapshot:new Wu(y,D,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,t_(r),St(r),r.component??r._loadedComponent??null,r,n_(r)),consumedSegments:y,remainingSegments:I}:null));return h.pipe((0,Mn.w)(p=>null===p?Qo(t):this.getChildConfig(e=r._injector??e,r,i).pipe((0,Mn.w)(({routes:y})=>{const I=r._loadedInjector??e,{snapshot:D,consumedSegments:O,remainingSegments:L}=p,{segmentGroup:J,slicedSegments:X}=Vs(t,O,L,y);if(0===X.length&&J.hasChildren())return this.processChildren(I,y,J).pipe((0,ct.U)(_e=>null===_e?null:[new Ar(D,_e)]));if(0===y.length&&0===X.length)return(0,We.of)([new Ar(D,[])]);const ie=St(r)===a;return this.processSegment(I,y,J,X,ie?st:a,!0).pipe((0,ct.U)(_e=>[new Ar(D,_e)]))}))))}getChildConfig(e,t,r){return t.children?(0,We.of)({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?(0,We.of)({routes:t._loadedRoutes,injector:t._loadedInjector}):function _r(n,e,t,r){const i=e.canLoad;if(void 0===i||0===i.length)return(0,We.of)(!0);const a=i.map(c=>{const h=Ku(c,n);return pn(function dA(n){return n&&Qu(n.canLoad)}(h)?h.canLoad(e,t):n.runInContext(()=>h(e,t)))});return(0,We.of)(a).pipe(Zu(),Qm())}(e,t,r).pipe((0,Fn.z)(i=>i?this.configLoader.loadChildren(e,t).pipe(vn(a=>{t._loadedRoutes=a.routes,t._loadedInjector=a.injector})):function iw(n){return $r(Wt(!1,3))}())):(0,We.of)({routes:[],injector:e})}}function Xm(n){const e=n.value.routeConfig;return e&&""===e.path}function e_(n){const e=[],t=new Set;for(const r of n){if(!Xm(r)){e.push(r);continue}const i=e.find(a=>r.value.routeConfig===a.value.routeConfig);void 0!==i?(i.children.push(...r.children),t.add(i)):e.push(r)}for(const r of t){const i=e_(r.children);e.push(new Ar(r.value,i))}return e.filter(r=>!t.has(r))}function t_(n){return n.data||{}}function n_(n){return n.resolve||{}}function cw(n){return"string"==typeof n.title||null===n.title}function i_(n){return(0,Mn.w)(e=>{const t=n(e);return t?(0,qt.D)(t).pipe((0,ct.U)(()=>e)):(0,We.of)(e)})}const Xu=new g.OlP("ROUTES");let s_=(()=>{class n{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=(0,g.f3M)(g.Sil)}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return(0,We.of)(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const r=pn(t.loadComponent()).pipe((0,ct.U)(Gl),vn(a=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=a}),jo(()=>{this.componentLoaders.delete(t)})),i=new Vo(r,()=>new Sn.x).pipe(Cs());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return(0,We.of)({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const a=function lw(n,e,t,r){return pn(n.loadChildren()).pipe((0,ct.U)(Gl),(0,Fn.z)(i=>i instanceof g.YKP||Array.isArray(i)?(0,We.of)(i):(0,qt.D)(e.compileModuleAsync(i))),(0,ct.U)(i=>{r&&r(n);let a,c,h=!1;return Array.isArray(i)?(c=i,!0):(a=i.create(t).injector,c=a.get(Xu,[],{optional:!0,self:!0}).flat()),{routes:c.map(us),injector:a}}))}(r,this.compiler,t,this.onLoadEndListener).pipe(jo(()=>{this.childrenLoaders.delete(r)})),c=new Vo(a,()=>new Sn.x).pipe(Cs());return this.childrenLoaders.set(r,c),c}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Gl(n){return function dw(n){return n&&"object"==typeof n&&"default"in n}(n)?n.default:n}let ls=(()=>{class n{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new Sn.x,this.transitionAbortSubject=new Sn.x,this.configLoader=(0,g.f3M)(s_),this.environmentInjector=(0,g.f3M)(g.lqb),this.urlSerializer=(0,g.f3M)(ci),this.rootContexts=(0,g.f3M)($a),this.inputBindingEnabled=null!==(0,g.f3M)(v,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>(0,We.of)(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=i=>this.events.next(new Wr(i)),this.configLoader.onLoadStartListener=i=>this.events.next(new Vl(i))}complete(){this.transitions?.complete()}handleNavigationRequest(t){const r=++this.navigationId;this.transitions?.next({...this.transitions.value,...t,id:r})}setupNavigations(t,r,i){return this.transitions=new At.X({id:0,currentUrlTree:r,currentRawUrl:r,currentBrowserUrl:r,extractedUrl:t.urlHandlingStrategy.extract(r),urlAfterRedirects:t.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:M,restoredState:null,currentSnapshot:i.snapshot,targetSnapshot:null,currentRouterState:i,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Gn(a=>0!==a.id),(0,ct.U)(a=>({...a,extractedUrl:t.urlHandlingStrategy.extract(a.rawUrl)})),(0,Mn.w)(a=>{this.currentTransition=a;let c=!1,h=!1;return(0,We.of)(a).pipe(vn(p=>{this.currentNavigation={id:p.id,initialUrl:p.rawUrl,extractedUrl:p.extractedUrl,trigger:p.source,extras:p.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),(0,Mn.w)(p=>{const y=p.currentBrowserUrl.toString(),I=!t.navigated||p.extractedUrl.toString()!==y||y!==p.currentUrlTree.toString();if(!I&&"reload"!==(p.extras.onSameUrlNavigation??t.onSameUrlNavigation)){const O="";return this.events.next(new fi(p.id,this.urlSerializer.serialize(p.rawUrl),O,0)),p.resolve(null),Hr.E}if(t.urlHandlingStrategy.shouldProcessUrl(p.rawUrl))return(0,We.of)(p).pipe((0,Mn.w)(O=>{const L=this.transitions?.getValue();return this.events.next(new Ve(O.id,this.urlSerializer.serialize(O.extractedUrl),O.source,O.restoredState)),L!==this.transitions?.getValue()?Hr.E:Promise.resolve(O)}),function r_(n,e,t,r,i,a){return(0,Fn.z)(c=>function Jm(n,e,t,r,i,a,c="emptyOnly"){return new IA(n,e,t,r,i,c,a).recognize()}(n,e,t,r,c.extractedUrl,i,a).pipe((0,ct.U)(({state:h,tree:p})=>({...c,targetSnapshot:h,urlAfterRedirects:p}))))}(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,t.paramsInheritanceStrategy),vn(O=>{a.targetSnapshot=O.targetSnapshot,a.urlAfterRedirects=O.urlAfterRedirects,this.currentNavigation={...this.currentNavigation,finalUrl:O.urlAfterRedirects};const L=new qr(O.id,this.urlSerializer.serialize(O.extractedUrl),this.urlSerializer.serialize(O.urlAfterRedirects),O.targetSnapshot);this.events.next(L)}));if(I&&t.urlHandlingStrategy.shouldProcessUrl(p.currentRawUrl)){const{id:O,extractedUrl:L,source:J,restoredState:X,extras:ie}=p,_e=new Ve(O,this.urlSerializer.serialize(L),J,X);this.events.next(_e);const Fe=Hm(0,this.rootComponentType).snapshot;return this.currentTransition=a={...p,targetSnapshot:Fe,urlAfterRedirects:L,extras:{...ie,skipLocationChange:!1,replaceUrl:!1}},(0,We.of)(a)}{const O="";return this.events.next(new fi(p.id,this.urlSerializer.serialize(p.extractedUrl),O,1)),p.resolve(null),Hr.E}}),vn(p=>{const y=new pi(p.id,this.urlSerializer.serialize(p.extractedUrl),this.urlSerializer.serialize(p.urlAfterRedirects),p.targetSnapshot);this.events.next(y)}),(0,ct.U)(p=>(this.currentTransition=a={...p,guards:uA(p.targetSnapshot,p.currentSnapshot,this.rootContexts)},a)),function pA(n,e){return(0,Fn.z)(t=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:a,canDeactivateChecks:c}}=t;return 0===c.length&&0===a.length?(0,We.of)({...t,guardsResult:!0}):function gA(n,e,t,r){return(0,qt.D)(n).pipe((0,Fn.z)(i=>function nw(n,e,t,r,i){const a=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!a||0===a.length)return(0,We.of)(!0);const c=a.map(h=>{const p=Yo(e)??i,y=Ku(h,p);return pn(function WN(n){return n&&Qu(n.canDeactivate)}(y)?y.canDeactivate(n,e,t,r):p.runInContext(()=>y(n,e,t,r))).pipe(Ri())});return(0,We.of)(c).pipe(Zu())}(i.component,i.route,t,e,r)),Ri(i=>!0!==i,!0))}(c,r,i,n).pipe((0,Fn.z)(h=>h&&function XI(n){return"boolean"==typeof n}(h)?function mA(n,e,t,r){return(0,qt.D)(e).pipe(As(i=>Si(function le(n,e){return null!==n&&e&&e(new Ul(n)),(0,We.of)(!0)}(i.route.parent,r),function _A(n,e){return null!==n&&e&&e(new Um(n)),(0,We.of)(!0)}(i.route,r),function tw(n,e,t){const r=e[e.length-1],a=e.slice(0,e.length-1).reverse().map(c=>function cA(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(c)).filter(c=>null!==c).map(c=>ss(()=>{const h=c.guards.map(p=>{const y=Yo(c.node)??t,I=Ku(p,y);return pn(function ew(n){return n&&Qu(n.canActivateChild)}(I)?I.canActivateChild(r,n):y.runInContext(()=>I(r,n))).pipe(Ri())});return(0,We.of)(h).pipe(Zu())}));return(0,We.of)(a).pipe(Zu())}(n,i.path,t),function Mt(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return(0,We.of)(!0);const i=r.map(a=>ss(()=>{const c=Yo(e)??t,h=Ku(a,c);return pn(function at(n){return n&&Qu(n.canActivate)}(h)?h.canActivate(e,n):c.runInContext(()=>h(e,n))).pipe(Ri())}));return(0,We.of)(i).pipe(Zu())}(n,i.route,t))),Ri(i=>!0!==i,!0))}(r,a,n,e):(0,We.of)(h)),(0,ct.U)(h=>({...t,guardsResult:h})))})}(this.environmentInjector,p=>this.events.next(p)),vn(p=>{if(a.guardsResult=p.guardsResult,cn(p.guardsResult))throw je(0,p.guardsResult);const y=new Gu(p.id,this.urlSerializer.serialize(p.extractedUrl),this.urlSerializer.serialize(p.urlAfterRedirects),p.targetSnapshot,!!p.guardsResult);this.events.next(y)}),Gn(p=>!!p.guardsResult||(this.cancelNavigationTransition(p,"",3),!1)),i_(p=>{if(p.guards.canActivateChecks.length)return(0,We.of)(p).pipe(vn(y=>{const I=new zu(y.id,this.urlSerializer.serialize(y.extractedUrl),this.urlSerializer.serialize(y.urlAfterRedirects),y.targetSnapshot);this.events.next(I)}),(0,Mn.w)(y=>{let I=!1;return(0,We.of)(y).pipe(function TA(n,e){return(0,Fn.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return(0,We.of)(t);let a=0;return(0,qt.D)(i).pipe(As(c=>function bA(n,e,t,r){const i=n.routeConfig,a=n._resolve;return void 0!==i?.title&&!cw(i)&&(a[Ss]=i.title),function Yr(n,e,t,r){const i=function qa(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===i.length)return(0,We.of)({});const a={};return(0,qt.D)(i).pipe((0,Fn.z)(c=>function wn(n,e,t,r){const i=Yo(e)??r,a=Ku(n,i);return pn(a.resolve?a.resolve(e,t):i.runInContext(()=>a(e,t)))}(n[c],e,t,r).pipe(Ri(),vn(h=>{a[c]=h}))),Ll(1),Bo(a),uo(c=>Ym(c)?Hr.E:$r(c)))}(a,n,e,r).pipe((0,ct.U)(c=>(n._resolvedData=c,n.data=Gm(n,t).resolve,i&&cw(i)&&(n.data[Ss]=i.title),null)))}(c.route,r,n,e)),vn(()=>a++),Ll(1),(0,Fn.z)(c=>a===i.length?(0,We.of)(t):Hr.E))})}(t.paramsInheritanceStrategy,this.environmentInjector),vn({next:()=>I=!0,complete:()=>{I||this.cancelNavigationTransition(y,"",2)}}))}),vn(y=>{const I=new rr(y.id,this.urlSerializer.serialize(y.extractedUrl),this.urlSerializer.serialize(y.urlAfterRedirects),y.targetSnapshot);this.events.next(I)}))}),i_(p=>{const y=I=>{const D=[];I.routeConfig?.loadComponent&&!I.routeConfig._loadedComponent&&D.push(this.configLoader.loadComponent(I.routeConfig).pipe(vn(O=>{I.component=O}),(0,ct.U)(()=>{})));for(const O of I.children)D.push(...y(O));return D};return bs(y(p.targetSnapshot.root)).pipe(Ln(),Hn(1))}),i_(()=>this.afterPreactivation()),(0,ct.U)(p=>{const y=function T(n,e,t){const r=S(n,e._root,t?t._root:void 0);return new $m(r,e)}(t.routeReuseStrategy,p.targetSnapshot,p.currentRouterState);return this.currentTransition=a={...p,targetRouterState:y},a}),vn(()=>{this.events.next(new Bl)}),((n,e,t,r)=>(0,ct.U)(i=>(new ZI(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)))(this.rootContexts,t.routeReuseStrategy,p=>this.events.next(p),this.inputBindingEnabled),Hn(1),vn({next:p=>{c=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Je(p.id,this.urlSerializer.serialize(p.extractedUrl),this.urlSerializer.serialize(p.urlAfterRedirects))),t.titleStrategy?.updateTitle(p.targetRouterState.snapshot),p.resolve(!0)},complete:()=>{c=!0}}),co(this.transitionAbortSubject.pipe(vn(p=>{throw p}))),jo(()=>{c||h||this.cancelNavigationTransition(a,"",1),this.currentNavigation?.id===a.id&&(this.currentNavigation=null)}),uo(p=>{if(h=!0,Rt(p))this.events.next(new qn(a.id,this.urlSerializer.serialize(a.extractedUrl),p.message,p.cancellationCode)),function Kt(n){return Rt(n)&&cn(n.url)}(p)?this.events.next(new qu(p.url)):a.resolve(!1);else{this.events.next(new xi(a.id,this.urlSerializer.serialize(a.extractedUrl),p,a.targetSnapshot??void 0));try{a.resolve(t.errorHandler(p))}catch(y){a.reject(y)}}return Hr.E}))}))}cancelNavigationTransition(t,r,i){const a=new qn(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(a),t.resolve(!1)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function hw(n){return n!==M}let zl=(()=>{class n{buildTitle(t){let r,i=t.root;for(;void 0!==i;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(a=>a.outlet===st);return r}getResolvedTitleForRoute(t){return t.data[Ss]}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=g.Yz7({token:n,factory:function(){return(0,g.f3M)(Jh)},providedIn:"root"})}return n})(),Jh=(()=>{class n extends zl{constructor(t){super(),this.title=t}updateTitle(t){const r=this.buildTitle(t);void 0!==r&&this.title.setTitle(r)}static#e=this.\u0275fac=function(r){return new(r||n)(g.LFG(Vi))};static#t=this.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Xh=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=g.Yz7({token:n,factory:function(){return(0,g.f3M)(fw)},providedIn:"root"})}return n})();class o_{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}let fw=(()=>{class n extends o_{static#e=this.\u0275fac=function(){let t;return function(i){return(t||(t=g.n5z(n)))(i||n)}}();static#t=this.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const ql=new g.OlP("",{providedIn:"root",factory:()=>({})});let CA=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=g.Yz7({token:n,factory:function(){return(0,g.f3M)(ec)},providedIn:"root"})}return n})(),ec=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var mo=function(n){return n[n.COMPLETE=0]="COMPLETE",n[n.FAILED=1]="FAILED",n[n.REDIRECTING=2]="REDIRECTING",n}(mo||{});function pw(n,e){n.events.pipe(Gn(t=>t instanceof Je||t instanceof qn||t instanceof xi||t instanceof fi),(0,ct.U)(t=>t instanceof Je||t instanceof fi?mo.COMPLETE:t instanceof qn&&(0===t.code||1===t.code)?mo.REDIRECTING:mo.FAILED),Gn(t=>t!==mo.REDIRECTING),Hn(1)).subscribe(()=>{e()})}function QN(n){throw n}function a_(n,e,t){return e.parse("/")}const ZN={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},DA={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Qr=(()=>{class n{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){return"computed"!==this.canceledNavigationResolution?this.currentPageId:this.location.getState()?.\u0275routerPageId??this.currentPageId}get events(){return this._events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=(0,g.f3M)(g.c2e),this.isNgZoneEnabled=!1,this._events=new Sn.x,this.options=(0,g.f3M)(ql,{optional:!0})||{},this.pendingTasks=(0,g.f3M)(g.HDt),this.errorHandler=this.options.errorHandler||QN,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||a_,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=(0,g.f3M)(CA),this.routeReuseStrategy=(0,g.f3M)(Xh),this.titleStrategy=(0,g.f3M)(zl),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=(0,g.f3M)(Xu,{optional:!0})?.flat()??[],this.navigationTransitions=(0,g.f3M)(ls),this.urlSerializer=(0,g.f3M)(ci),this.location=(0,g.f3M)(H.Ye),this.componentInputBindingEnabled=!!(0,g.f3M)(v,{optional:!0}),this.eventsSubscription=new ao.w0,this.isNgZoneEnabled=(0,g.f3M)(g.R0b)instanceof g.R0b&&g.R0b.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new gn,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=Hm(0,null),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe(t=>{this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){const t=this.navigationTransitions.events.subscribe(r=>{try{const{currentTransition:i}=this.navigationTransitions;if(null===i)return void(AA(r)&&this._events.next(r));if(r instanceof Ve)hw(i.source)&&(this.browserUrlTree=i.extractedUrl);else if(r instanceof fi)this.rawUrlTree=i.rawUrl;else if(r instanceof qr){if("eager"===this.urlUpdateStrategy){if(!i.extras.skipLocationChange){const a=this.urlHandlingStrategy.merge(i.urlAfterRedirects,i.rawUrl);this.setBrowserUrl(a,i)}this.browserUrlTree=i.urlAfterRedirects}}else if(r instanceof Bl)this.currentUrlTree=i.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(i.urlAfterRedirects,i.rawUrl),this.routerState=i.targetRouterState,"deferred"===this.urlUpdateStrategy&&(i.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,i),this.browserUrlTree=i.urlAfterRedirects);else if(r instanceof qn)0!==r.code&&1!==r.code&&(this.navigated=!0),(3===r.code||2===r.code)&&this.restoreHistory(i);else if(r instanceof qu){const a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),c={skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||hw(i.source)};this.scheduleNavigation(a,M,null,c,{resolve:i.resolve,reject:i.reject,promise:i.promise})}r instanceof xi&&this.restoreHistory(i,!0),r instanceof Je&&(this.navigated=!0),AA(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortSubject.next(i)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const t=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),M,t)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{this.navigateToSyncWithBrowser(t.url,r,t.state)},0)}))}navigateToSyncWithBrowser(t,r,i){const a={replaceUrl:!0},c=i?.navigationId?i:null;if(i){const p={...i};delete p.navigationId,delete p.\u0275routerPageId,0!==Object.keys(p).length&&(a.state=p)}const h=this.parseUrl(t);this.scheduleNavigation(h,r,c,a)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(us),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){const{relativeTo:i,queryParams:a,fragment:c,queryParamsHandling:h,preserveFragment:p}=r,y=p?this.currentUrlTree.fragment:c;let D,I=null;switch(h){case"merge":I={...this.currentUrlTree.queryParams,...a};break;case"preserve":I=this.currentUrlTree.queryParams;break;default:I=a||null}null!==I&&(I=this.removeEmptyProps(I));try{D=zi(i?i.snapshot:this.routerState.snapshot.root)}catch{("string"!=typeof t[0]||!t[0].startsWith("/"))&&(t=[]),D=this.currentUrlTree.root}return po(D,t,I,y??null)}navigateByUrl(t,r={skipLocationChange:!1}){const i=cn(t)?t:this.parseUrl(t),a=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(a,M,null,r)}navigate(t,r={skipLocationChange:!1}){return function JN(n){for(let e=0;e<n.length;e++)if(null==n[e])throw new g.vHH(4008,!1)}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,t)}return r}isActive(t,r){let i;if(i=!0===r?{...ZN}:!1===r?{...DA}:r,cn(t))return Rs(this.currentUrlTree,t,i);const a=this.parseUrl(t);return Rs(this.currentUrlTree,a,i)}removeEmptyProps(t){return Object.keys(t).reduce((r,i)=>{const a=t[i];return null!=a&&(r[i]=a),r},{})}scheduleNavigation(t,r,i,a,c){if(this.disposed)return Promise.resolve(!1);let h,p,y;c?(h=c.resolve,p=c.reject,y=c.promise):y=new Promise((D,O)=>{h=D,p=O});const I=this.pendingTasks.add();return pw(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(I))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,currentBrowserUrl:this.browserUrlTree,rawUrl:t,extras:a,resolve:h,reject:p,promise:y,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),y.catch(D=>Promise.reject(D))}setBrowserUrl(t,r){const i=this.urlSerializer.serialize(t);if(this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl){const c={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId)};this.location.replaceState(i,"",c)}else{const a={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId+1)};this.location.go(i,"",a)}}restoreHistory(t,r=!1){if("computed"===this.canceledNavigationResolution){const a=this.currentPageId-this.browserPageId;0!==a?this.location.historyGo(a):this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===a&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function AA(n){return!(n instanceof Bl||n instanceof qu)}let tc=(()=>{class n{constructor(t,r,i,a,c,h){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=a,this.el=c,this.locationStrategy=h,this.href=null,this.commands=null,this.onChanges=new Sn.x,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1;const p=c.nativeElement.tagName?.toLowerCase();this.isAnchorElement="a"===p||"area"===p,this.isAnchorElement?this.subscription=t.events.subscribe(y=>{y instanceof Je&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(t){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(t){null!=t?(this.commands=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(t,r,i,a,c){return!!(null===this.urlTree||this.isAnchorElement&&(0!==t||r||i||a||c||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!this.isAnchorElement)}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){this.href=null!==this.urlTree&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null;const t=null===this.href?null:(0,g.P3R)(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",t)}applyAttributeValue(t,r){const i=this.renderer,a=this.el.nativeElement;null!==r?i.setAttribute(a,t,r):i.removeAttribute(a,t)}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static#e=this.\u0275fac=function(r){return new(r||n)(g.Y36(Qr),g.Y36(Ga),g.$8M("tabindex"),g.Y36(g.Qsj),g.Y36(g.SBq),g.Y36(H.S$))};static#t=this.\u0275dir=g.lG2({type:n,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(r,i){1&r&&g.NdJ("click",function(c){return i.onClick(c.button,c.ctrlKey,c.shiftKey,c.altKey,c.metaKey)}),2&r&&g.uIk("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:["preserveFragment","preserveFragment",g.VuI],skipLocationChange:["skipLocationChange","skipLocationChange",g.VuI],replaceUrl:["replaceUrl","replaceUrl",g.VuI],routerLink:"routerLink"},standalone:!0,features:[g.Xq5,g.TTD]})}return n})();class nc{}let XN=(()=>{class n{constructor(t,r,i,a,c){this.router=t,this.injector=i,this.preloadingStrategy=a,this.loader=c}setUpPreloading(){this.subscription=this.router.events.pipe(Gn(t=>t instanceof Je),As(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const i=[];for(const a of r){a.providers&&!a._injector&&(a._injector=(0,g.MMx)(a.providers,t,`Route: ${a.path}`));const c=a._injector??t,h=a._loadedInjector??c;(a.loadChildren&&!a._loadedRoutes&&void 0===a.canLoad||a.loadComponent&&!a._loadedComponent)&&i.push(this.preloadConfig(c,a)),(a.children||a._loadedRoutes)&&i.push(this.processRoutes(h,a.children??a._loadedRoutes))}return(0,qt.D)(i).pipe((0,_t.J)())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;i=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(t,r):(0,We.of)(null);const a=i.pipe((0,Fn.z)(c=>null===c?(0,We.of)(void 0):(r._loadedRoutes=c.routes,r._loadedInjector=c.injector,this.processRoutes(c.injector??t,c.routes))));if(r.loadComponent&&!r._loadedComponent){const c=this.loader.loadComponent(r);return(0,qt.D)([a,c]).pipe((0,_t.J)())}return a})}static#e=this.\u0275fac=function(r){return new(r||n)(g.LFG(Qr),g.LFG(g.Sil),g.LFG(g.lqb),g.LFG(nc),g.LFG(s_))};static#t=this.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const ef=new g.OlP("");let c_=(()=>{class n{constructor(t,r,i,a,c={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=i,this.zone=a,this.options=c,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},c.scrollPositionRestoration=c.scrollPositionRestoration||"disabled",c.anchorScrolling=c.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof Ve?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Je?(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment)):t instanceof fi&&0===t.code&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof ja&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new ja(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static#e=this.\u0275fac=function(r){g.$Z()};static#t=this.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac})}return n})();function _o(n,e){return{\u0275kind:n,\u0275providers:e}}function nf(){const n=(0,g.f3M)(g.zs3);return e=>{const t=n.get(g.z2F);if(e!==t.components[0])return;const r=n.get(Qr),i=n.get(_w);1===n.get(rf)&&r.initialNavigation(),n.get(Ew,null,g.XFs.Optional)?.setUpPreloading(),n.get(ef,null,g.XFs.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}const _w=new g.OlP("",{factory:()=>new Sn.x}),rf=new g.OlP("",{providedIn:"root",factory:()=>1}),Ew=new g.OlP("");function sf(n){return _o(0,[{provide:Ew,useExisting:XN},{provide:nc,useExisting:n}])}const ww=new g.OlP("ROUTER_FORROOT_GUARD"),Zr=[H.Ye,{provide:ci,useClass:et},Qr,$a,{provide:Ga,useFactory:function ds(n){return n.routerState.root},deps:[Qr]},s_,[]];function MA(){return new g.PXZ("Router",Qr)}let d_=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[Zr,[],{provide:Xu,multi:!0,useValue:t},{provide:ww,useFactory:f_,deps:[[Qr,new g.FiY,new g.tp0]]},{provide:ql,useValue:r||{}},r?.useHash?{provide:H.S$,useClass:H.Do}:{provide:H.S$,useClass:H.b0},{provide:ef,useFactory:()=>{const n=(0,g.f3M)(H.EM),e=(0,g.f3M)(g.R0b),t=(0,g.f3M)(ql),r=(0,g.f3M)(ls),i=(0,g.f3M)(ci);return t.scrollOffset&&n.setOffset(t.scrollOffset),new c_(i,r,n,e,t)}},r?.preloadingStrategy?sf(r.preloadingStrategy).\u0275providers:[],{provide:g.PXZ,multi:!0,useFactory:MA},r?.initialNavigation?ic(r):[],r?.bindToComponentInputs?_o(8,[P,{provide:v,useExisting:P}]).\u0275providers:[],[{provide:Wa,useFactory:nf},{provide:g.tb,multi:!0,useExisting:Wa}]]}}static forChild(t){return{ngModule:n,providers:[{provide:Xu,multi:!0,useValue:t}]}}static#e=this.\u0275fac=function(r){return new(r||n)(g.LFG(ww,8))};static#t=this.\u0275mod=g.oAB({type:n});static#n=this.\u0275inj=g.cJS({})}return n})();function f_(n){return"guarded"}function ic(n){return["disabled"===n.initialNavigation?_o(3,[{provide:g.ip1,multi:!0,useFactory:()=>{const e=(0,g.f3M)(Qr);return()=>{e.setUpLocationChangeListener()}}},{provide:rf,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?_o(2,[{provide:rf,useValue:0},{provide:g.ip1,multi:!0,deps:[g.zs3],useFactory:e=>{const t=e.get(H.V_,Promise.resolve());return()=>t.then(()=>new Promise(r=>{const i=e.get(Qr),a=e.get(_w);pw(i,()=>{r(!0)}),e.get(ls).afterPreactivation=()=>(r(!0),a.closed?(0,We.of)(void 0):a),i.initialNavigation()}))}}]).\u0275providers:[]]}const Wa=new g.OlP("");function kA(n,e,t,r,i,a,c){try{var h=n[a](c),p=h.value}catch(y){return void t(y)}h.done?e(p):Promise.resolve(p).then(r,i)}function F(n){return function(){var e=this,t=arguments;return new Promise(function(r,i){var a=n.apply(e,t);function c(p){kA(a,r,i,c,h,"next",p)}function h(p){kA(a,r,i,c,h,"throw",p)}c(void 0)})}}const Ka=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=63&i|128):55296==(64512&i)&&r+1<n.length&&56320==(64512&n.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&n.charCodeAt(++r)),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=63&i|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=63&i|128)}return e},Dw={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){const a=n[i],c=i+1<n.length,h=c?n[i+1]:0,p=i+2<n.length,y=p?n[i+2]:0;let O=(15&h)<<2|y>>6,L=63&y;p||(L=64,c||(O=64)),r.push(t[a>>2],t[(3&a)<<4|h>>4],t[O],t[L])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(Ka(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):function(n){const e=[];let t=0,r=0;for(;t<n.length;){const i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const a=n[t++];e[r++]=String.fromCharCode((31&i)<<6|63&a)}else if(i>239&&i<365){const p=((7&i)<<18|(63&n[t++])<<12|(63&n[t++])<<6|63&n[t++])-65536;e[r++]=String.fromCharCode(55296+(p>>10)),e[r++]=String.fromCharCode(56320+(1023&p))}else{const a=n[t++],c=n[t++];e[r++]=String.fromCharCode((15&i)<<12|(63&a)<<6|63&c)}}return e.join("")}(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){const a=t[n.charAt(i++)],h=i<n.length?t[n.charAt(i)]:0;++i;const y=i<n.length?t[n.charAt(i)]:64;++i;const D=i<n.length?t[n.charAt(i)]:64;if(++i,null==a||null==h||null==y||null==D)throw new Wn;r.push(a<<2|h>>4),64!==y&&(r.push(h<<4&240|y>>2),64!==D&&r.push(y<<6&192|D))}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class Wn extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Jo=function(n){return function(n){const e=Ka(n);return Dw.encodeByteArray(e,!0)}(n).replace(/\./g,"")},uf=function(n){try{return Dw.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null},lf=()=>{try{return function cf(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const n=process.env.__FIREBASE_DEFAULTS__;return n?JSON.parse(n):void 0})()||(()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&uf(n[1]);return e&&JSON.parse(e)})()}catch(n){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`)}},UA=n=>{var e,t;return null===(t=null===(e=lf())||void 0===e?void 0:e.emulatorHosts)||void 0===t?void 0:t[n]},df=()=>{var n;return null===(n=lf())||void 0===n?void 0:n.config},Qa=n=>{var e;return null===(e=lf())||void 0===e?void 0:e[`_${n}`]};class BA{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),"function"==typeof e&&(this.promise.catch(()=>{}),1===e.length?e(t):e(t,r))}}}function sr(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Rw(){const n="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof n&&void 0!==n.id}function oc(){try{return"object"==typeof indexedDB}catch{return!1}}function g_(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var a;e((null===(a=i.error)||void 0===a?void 0:a.message)||"")}}catch(t){e(t)}})}function m_(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}class gi extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name="FirebaseError",Object.setPrototypeOf(this,gi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,yo.prototype.create)}}class yo{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},i=`${this.service}/${e}`,a=this.errors[e],c=a?function GA(n,e){return n.replace(zA,(t,r)=>{const i=e[r];return null!=i?String(i):`<${r}?>`})}(a,r):"Error";return new gi(i,`${this.serviceName}: ${c} (${i}).`,r)}}const zA=/\{\$([^}]+)}/g;function ac(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const i of t){if(!r.includes(i))return!1;const a=n[i],c=e[i];if(xw(a)&&xw(c)){if(!ac(a,c))return!1}else if(a!==c)return!1}for(const i of r)if(!t.includes(i))return!1;return!0}function xw(n){return null!==n&&"object"==typeof n}function gf(n){const e=[];for(const[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}class v_{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(void 0===e&&void 0===t&&void 0===r)throw new Error("Missing Observer.");i=function f1(n,e){if("object"!=typeof n||null===n)return!1;for(const t of e)if(t in n&&"function"==typeof n[t])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:r},void 0===i.next&&(i.next=Ql),void 0===i.error&&(i.error=Ql),void 0===i.complete&&(i.complete=Ql);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),a}unsubscribeOne(e){void 0===this.observers||void 0===this.observers[e]||(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Ql(){}const Ow=1e3,Nw=2,kw=144e5,uc=.5;function w_(n,e=Ow,t=Nw){const r=e*Math.pow(t,n),i=Math.round(uc*r*(Math.random()-.5)*2);return Math.min(kw,r+i)}function nn(n){return n&&n._delegate?n._delegate:n}class Rr{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const Ja="[DEFAULT]";class JA{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new BA;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const r=this.normalizeInstanceIdentifier(e?.identifier),i=null!==(t=e?.optional)&&void 0!==t&&t;if(!this.isInitialized(r)&&!this.shouldAutoInitialize()){if(i)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:r})}catch(a){if(i)return null;throw a}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,this.shouldAutoInitialize()){if(function Fw(n){return"EAGER"===n.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:Ja})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(t);try{const a=this.getOrInitializeService({instanceIdentifier:i});r.resolve(a)}catch{}}}}clearInstance(e=Ja){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){var e=this;return F(function*(){const t=Array.from(e.instances.values());yield Promise.all([...t.filter(r=>"INTERNAL"in r).map(r=>r.INTERNAL.delete()),...t.filter(r=>"_delete"in r).map(r=>r._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(e=Ja){return this.instances.has(e)}getOptions(e=Ja){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[a,c]of this.instancesDeferred.entries())r===this.normalizeInstanceIdentifier(a)&&c.resolve(i);return i}onInit(e,t){var r;const i=this.normalizeInstanceIdentifier(t),a=null!==(r=this.onInitCallbacks.get(i))&&void 0!==r?r:new Set;a.add(e),this.onInitCallbacks.set(i,a);const c=this.instances.get(i);return c&&e(c,i),()=>{a.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:(n=e,n===Ja?void 0:n),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}var n;return r||null}normalizeInstanceIdentifier(e=Ja){return this.component?this.component.multipleInstances?e:Ja:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class T_{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new JA(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const b_=[];var Pt=function(n){return n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",n}(Pt||{});const Lw={debug:Pt.DEBUG,verbose:Pt.VERBOSE,info:Pt.INFO,warn:Pt.WARN,error:Pt.ERROR,silent:Pt.SILENT},Vw=Pt.INFO,eS={[Pt.DEBUG]:"log",[Pt.VERBOSE]:"log",[Pt.INFO]:"info",[Pt.WARN]:"warn",[Pt.ERROR]:"error"},tS=(n,e,...t)=>{if(e<n.logLevel)return;const r=(new Date).toISOString(),i=eS[e];if(!i)throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`);console[i](`[${r}]  ${n.name}:`,...t)};class yr{constructor(e){this.name=e,this._logLevel=Vw,this._logHandler=tS,this._userLogHandler=null,b_.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Pt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel="string"==typeof e?Lw[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!=typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Pt.DEBUG,...e),this._logHandler(this,Pt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Pt.VERBOSE,...e),this._logHandler(this,Pt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Pt.INFO,...e),this._logHandler(this,Pt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Pt.WARN,...e),this._logHandler(this,Pt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Pt.ERROR,...e),this._logHandler(this,Pt.ERROR,...e)}}const C_=(n,e)=>e.some(t=>n instanceof t);let vr,cc;const $w=new WeakMap,_f=new WeakMap,Hw=new WeakMap,yf=new WeakMap,D_=new WeakMap;let A_={get(n,e,t){if(n instanceof IDBTransaction){if("done"===e)return _f.get(n);if("objectStoreNames"===e)return n.objectStoreNames||Hw.get(n);if("store"===e)return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Ki(n[e])},set:(n,e,t)=>(n[e]=t,!0),has:(n,e)=>n instanceof IDBTransaction&&("done"===e||"store"===e)||e in n};function iS(n){return"function"==typeof n?function R_(n){return n!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function jw(){return cc||(cc=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(n)?function(...e){return n.apply(P_(this),e),Ki($w.get(this))}:function(...e){return Ki(n.apply(P_(this),e))}:function(e,...t){const r=n.call(P_(this),e,...t);return Hw.set(r,e.sort?e.sort():[e]),Ki(r)}}(n):(n instanceof IDBTransaction&&function rS(n){if(_f.has(n))return;const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("complete",a),n.removeEventListener("error",c),n.removeEventListener("abort",c)},a=()=>{t(),i()},c=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",a),n.addEventListener("error",c),n.addEventListener("abort",c)});_f.set(n,e)}(n),C_(n,function Bw(){return vr||(vr=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(n,A_):n)}function Ki(n){if(n instanceof IDBRequest)return function Gw(n){const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("success",a),n.removeEventListener("error",c)},a=()=>{t(Ki(n.result)),i()},c=()=>{r(n.error),i()};n.addEventListener("success",a),n.addEventListener("error",c)});return e.then(t=>{t instanceof IDBCursor&&$w.set(t,n)}).catch(()=>{}),D_.set(e,n),e}(n);if(yf.has(n))return yf.get(n);const e=iS(n);return e!==n&&(yf.set(n,e),D_.set(e,n)),e}const P_=n=>D_.get(n),zw=["get","getKey","getAll","getAllKeys","count"],qw=["put","add","delete","clear"],Xo=new Map;function Zl(n,e){if(!(n instanceof IDBDatabase)||e in n||"string"!=typeof e)return;if(Xo.get(e))return Xo.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,i=qw.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!zw.includes(t))return;const a=function(){var c=F(function*(h,...p){const y=this.transaction(h,i?"readwrite":"readonly");let I=y.store;return r&&(I=I.index(p.shift())),(yield Promise.all([I[t](...p),i&&y.done]))[0]});return function(p){return c.apply(this,arguments)}}();return Xo.set(e,a),a}!function S_(n){A_=n(A_)}(n=>({...n,get:(e,t,r)=>Zl(e,t)||n.get(e,t,r),has:(e,t)=>!!Zl(e,t)||n.has(e,t)}));class Ww{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(function x_(n){const e=n.getComponent();return"VERSION"===e?.type}(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}return null}).filter(t=>t).join(" ")}}const lc="@firebase/app",Xa=new yr("@firebase/app"),ea="[DEFAULT]",rT={[lc]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},vo=new Map,tu=new Map;function iT(n,e){try{n.container.addComponent(e)}catch(t){Xa.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Pr(n){const e=n.name;if(tu.has(e))return Xa.debug(`There were multiple attempts to register component ${e}.`),!1;tu.set(e,n);for(const t of vo.values())iT(t,n);return!0}function Eo(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}const Io=new yo("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class oT{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Rr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Io.create("app-deleted",{appName:this._name})}}const nu="10.4.0";function Jl(n,e={}){let t=n;"object"!=typeof e&&(e={name:e});const r=Object.assign({name:ea,automaticDataCollectionEnabled:!1},e),i=r.name;if("string"!=typeof i||!i)throw Io.create("bad-app-name",{appName:String(i)});if(t||(t=df()),!t)throw Io.create("no-options");const a=vo.get(i);if(a){if(ac(t,a.options)&&ac(r,a.config))return a;throw Io.create("duplicate-app",{appName:i})}const c=new T_(i);for(const p of tu.values())c.addComponent(p);const h=new oT(t,r,c);return vo.set(i,h),h}function dc(n=ea){const e=vo.get(n);if(!e&&n===ea&&df())return Jl();if(!e)throw Io.create("no-app",{appName:n});return e}function ki(n,e,t){var r;let i=null!==(r=rT[n])&&void 0!==r?r:n;t&&(i+=`-${t}`);const a=i.match(/\s|\//),c=e.match(/\s|\//);if(a||c){const h=[`Unable to register library "${i}" with version "${e}":`];return a&&h.push(`library name "${i}" contains illegal characters (whitespace or "/")`),a&&c&&h.push("and"),c&&h.push(`version name "${e}" contains illegal characters (whitespace or "/")`),void Xa.warn(h.join(" "))}Pr(new Rr(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}const _S="firebase-heartbeat-database",hc=1,ta="firebase-heartbeat-store";let ed=null;function L_(){return ed||(ed=function sS(n,e,{blocked:t,upgrade:r,blocking:i,terminated:a}={}){const c=indexedDB.open(n,e),h=Ki(c);return r&&c.addEventListener("upgradeneeded",p=>{r(Ki(c.result),p.oldVersion,p.newVersion,Ki(c.transaction),p)}),t&&c.addEventListener("blocked",p=>t(p.oldVersion,p.newVersion,p)),h.then(p=>{a&&p.addEventListener("close",()=>a()),i&&p.addEventListener("versionchange",y=>i(y.oldVersion,y.newVersion,y))}).catch(()=>{}),h}(_S,hc,{upgrade:(n,e)=>{0===e&&n.createObjectStore(ta)}}).catch(n=>{throw Io.create("idb-open",{originalErrorMessage:n.message})})),ed}function wf(){return(wf=F(function*(n){try{return yield(yield L_()).transaction(ta).objectStore(ta).get(cT(n))}catch(e){if(e instanceof gi)Xa.warn(e.message);else{const t=Io.create("idb-get",{originalErrorMessage:e?.message});Xa.warn(t.message)}}})).apply(this,arguments)}function na(n,e){return V_.apply(this,arguments)}function V_(){return(V_=F(function*(n,e){try{const r=(yield L_()).transaction(ta,"readwrite");yield r.objectStore(ta).put(e,cT(n)),yield r.done}catch(t){if(t instanceof gi)Xa.warn(t.message);else{const r=Io.create("idb-set",{originalErrorMessage:t?.message});Xa.warn(r.message)}}})).apply(this,arguments)}function cT(n){return`${n.name}!${n.options.appId}`}class ES{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new IS(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){var e=this;return F(function*(){const r=e.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=Us();if(null===e._heartbeatsCache&&(e._heartbeatsCache=yield e._heartbeatsCachePromise),e._heartbeatsCache.lastSentHeartbeatDate!==i&&!e._heartbeatsCache.heartbeats.some(a=>a.date===i))return e._heartbeatsCache.heartbeats.push({date:i,agent:r}),e._heartbeatsCache.heartbeats=e._heartbeatsCache.heartbeats.filter(a=>{const c=new Date(a.date).valueOf();return Date.now()-c<=2592e6}),e._storage.overwrite(e._heartbeatsCache)})()}getHeartbeatsHeader(){var e=this;return F(function*(){if(null===e._heartbeatsCache&&(yield e._heartbeatsCachePromise),null===e._heartbeatsCache||0===e._heartbeatsCache.heartbeats.length)return"";const t=Us(),{heartbeatsToSend:r,unsentEntries:i}=function fc(n,e=1024){const t=[];let r=n.slice();for(const i of n){const a=t.find(c=>c.agent===i.agent);if(a){if(a.dates.push(i.date),lT(t)>e){a.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),lT(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}(e._heartbeatsCache.heartbeats),a=Jo(JSON.stringify({version:2,heartbeats:r}));return e._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(e._heartbeatsCache.heartbeats=i,yield e._storage.overwrite(e._heartbeatsCache)):(e._heartbeatsCache.heartbeats=[],e._storage.overwrite(e._heartbeatsCache)),a})()}}function Us(){return(new Date).toISOString().substring(0,10)}class IS{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return F(function*(){return!!oc()&&g_().then(()=>!0).catch(()=>!1)})()}read(){var e=this;return F(function*(){return(yield e._canUseIndexedDBPromise)&&(yield function uT(n){return wf.apply(this,arguments)}(e.app))||{heartbeats:[]}})()}overwrite(e){var t=this;return F(function*(){var r;if(yield t._canUseIndexedDBPromise){const a=yield t.read();return na(t.app,{lastSentHeartbeatDate:null!==(r=e.lastSentHeartbeatDate)&&void 0!==r?r:a.lastSentHeartbeatDate,heartbeats:e.heartbeats})}})()}add(e){var t=this;return F(function*(){var r;if(yield t._canUseIndexedDBPromise){const a=yield t.read();return na(t.app,{lastSentHeartbeatDate:null!==(r=e.lastSentHeartbeatDate)&&void 0!==r?r:a.lastSentHeartbeatDate,heartbeats:[...a.heartbeats,...e.heartbeats]})}})()}}function lT(n){return Jo(JSON.stringify({version:2,heartbeats:n})).length}!function wS(n){Pr(new Rr("platform-logger",e=>new Ww(e),"PRIVATE")),Pr(new Rr("heartbeat",e=>new ES(e),"PRIVATE")),ki(lc,"0.9.19",n),ki(lc,"0.9.19","esm2017"),ki("fire-js","")}(""),ki("firebase","10.4.0","app");const CS=(n,e)=>e.some(t=>n instanceof t);let U_,dT;const hT=new WeakMap,pc=new WeakMap,Bs=new WeakMap,ru=new WeakMap,Tf=new WeakMap;let gT={get(n,e,t){if(n instanceof IDBTransaction){if("done"===e)return pc.get(n);if("objectStoreNames"===e)return n.objectStoreNames||Bs.get(n);if("store"===e)return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return js(n[e])},set:(n,e,t)=>(n[e]=t,!0),has:(n,e)=>n instanceof IDBTransaction&&("done"===e||"store"===e)||e in n};function B_(n){return"function"==typeof n?function E1(n){return n!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function AS(){return dT||(dT=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(n)?function(...e){return n.apply(mT(this),e),js(hT.get(this))}:function(...e){return js(n.apply(mT(this),e))}:function(e,...t){const r=n.call(mT(this),e,...t);return Bs.set(r,e.sort?e.sort():[e]),js(r)}}(n):(n instanceof IDBTransaction&&function pT(n){if(pc.has(n))return;const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("complete",a),n.removeEventListener("error",c),n.removeEventListener("abort",c)},a=()=>{t(),i()},c=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",a),n.addEventListener("error",c),n.addEventListener("abort",c)});pc.set(n,e)}(n),CS(n,function DS(){return U_||(U_=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(n,gT):n)}function js(n){if(n instanceof IDBRequest)return function fT(n){const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("success",a),n.removeEventListener("error",c)},a=()=>{t(js(n.result)),i()},c=()=>{r(n.error),i()};n.addEventListener("success",a),n.addEventListener("error",c)});return e.then(t=>{t instanceof IDBCursor&&hT.set(t,n)}).catch(()=>{}),Tf.set(e,n),e}(n);if(ru.has(n))return ru.get(n);const e=B_(n);return e!==n&&(ru.set(n,e),Tf.set(e,n)),e}const mT=n=>Tf.get(n),RS=["get","getKey","getAll","getAllKeys","count"],PS=["put","add","delete","clear"],j_=new Map;function _T(n,e){if(!(n instanceof IDBDatabase)||e in n||"string"!=typeof e)return;if(j_.get(e))return j_.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,i=PS.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!RS.includes(t))return;const a=function(){var c=F(function*(h,...p){const y=this.transaction(h,i?"readwrite":"readonly");let I=y.store;return r&&(I=I.index(p.shift())),(yield Promise.all([I[t](...p),i&&y.done]))[0]});return function(p){return c.apply(this,arguments)}}();return j_.set(e,a),a}!function v1(n){gT=n(gT)}(n=>({...n,get:(e,t,r)=>_T(e,t)||n.get(e,t,r),has:(e,t)=>!!_T(e,t)||n.has(e,t)}));const $_="@firebase/installations",gc="0.6.4",H_=1e4,bf=`w:${gc}`,yT="FIS_v2",iu="https://firebaseinstallations.googleapis.com/v1",xS=36e5,wo=new yo("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function ET(n){return n instanceof gi&&n.code.includes("request-failed")}function z_({projectId:n}){return`${iu}/projects/${n}/installations`}function IT(n){return{token:n.token,requestStatus:2,expiresIn:TT(n.expiresIn),creationTime:Date.now()}}function Cf(n,e){return wT.apply(this,arguments)}function wT(){return(wT=F(function*(n,e){const r=(yield e.json()).error;return wo.create("request-failed",{requestName:n,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})})).apply(this,arguments)}function OS({apiKey:n}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n})}function kt(n){return su.apply(this,arguments)}function su(){return(su=F(function*(n){const e=yield n();return e.status>=500&&e.status<600?n():e})).apply(this,arguments)}function TT(n){return Number(n.replace("s","000"))}function td(){return(td=F(function*({appConfig:n,heartbeatServiceProvider:e},{fid:t}){const r=z_(n),i=OS(n),a=e.getImmediate({optional:!0});if(a){const y=yield a.getHeartbeatsHeader();y&&i.append("x-firebase-client",y)}const h={method:"POST",headers:i,body:JSON.stringify({fid:t,authVersion:yT,appId:n.appId,sdkVersion:bf})},p=yield kt(()=>fetch(r,h));if(p.ok){const y=yield p.json();return{fid:y.fid||t,registrationStatus:2,refreshToken:y.refreshToken,authToken:IT(y.authToken)}}throw yield Cf("Create Installation",p)})).apply(this,arguments)}function CT(n){return new Promise(e=>{setTimeout(e,n)})}const AT=/^[cdef][\w-]{21}$/,_c="";function w1(){try{const n=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(n),n[0]=112+n[0]%16;const t=function W_(n){return function DT(n){return btoa(String.fromCharCode(...n)).replace(/\+/g,"-").replace(/\//g,"_")}(n).substr(0,22)}(n);return AT.test(t)?t:_c}catch{return _c}}function yc(n){return`${n.appName}!${n.appId}`}const ra=new Map;function K_(n,e){const t=yc(n);RT(t,e),function Y_(n,e){const t=function PT(){return!$s&&"BroadcastChannel"in self&&($s=new BroadcastChannel("[Firebase] FID Change"),$s.onmessage=n=>{RT(n.data.key,n.data.fid)}),$s}();t&&t.postMessage({key:n,fid:e}),function Df(){0===ra.size&&$s&&($s.close(),$s=null)}()}(t,e)}function RT(n,e){const t=ra.get(n);if(t)for(const r of t)r(e)}let $s=null;const Af="firebase-installations-database",Hs=1,Gs="firebase-installations-store";let nd=null;function Q_(){return nd||(nd=function I1(n,e,{blocked:t,upgrade:r,blocking:i,terminated:a}={}){const c=indexedDB.open(n,e),h=js(c);return r&&c.addEventListener("upgradeneeded",p=>{r(js(c.result),p.oldVersion,p.newVersion,js(c.transaction))}),t&&c.addEventListener("blocked",()=>t()),h.then(p=>{a&&p.addEventListener("close",()=>a()),i&&p.addEventListener("versionchange",()=>i())}).catch(()=>{}),h}(Af,Hs,{upgrade:(n,e)=>{0===e&&n.createObjectStore(Gs)}})),nd}function Sf(n,e){return Rf.apply(this,arguments)}function Rf(){return(Rf=F(function*(n,e){const t=yc(n),i=(yield Q_()).transaction(Gs,"readwrite"),a=i.objectStore(Gs),c=yield a.get(t);return yield a.put(e,t),yield i.done,(!c||c.fid!==e.fid)&&K_(n,e.fid),e})).apply(this,arguments)}function ia(n){return Z_.apply(this,arguments)}function Z_(){return(Z_=F(function*(n){const e=yc(n),r=(yield Q_()).transaction(Gs,"readwrite");yield r.objectStore(Gs).delete(e),yield r.done})).apply(this,arguments)}function rd(n,e){return J_.apply(this,arguments)}function J_(){return(J_=F(function*(n,e){const t=yc(n),i=(yield Q_()).transaction(Gs,"readwrite"),a=i.objectStore(Gs),c=yield a.get(t),h=e(c);return void 0===h?yield a.delete(t):yield a.put(h,t),yield i.done,h&&(!c||c.fid!==h.fid)&&K_(n,h.fid),h})).apply(this,arguments)}function id(n){return Pf.apply(this,arguments)}function Pf(){return Pf=F(function*(n){let e;const t=yield rd(n.appConfig,r=>{const i=function NS(n){return kS(n||{fid:w1(),registrationStatus:0})}(r),a=function xT(n,e){if(0===e.registrationStatus){if(!navigator.onLine)return{installationEntry:e,registrationPromise:Promise.reject(wo.create("app-offline"))};const t={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=function X_(n,e){return MT.apply(this,arguments)}(n,t);return{installationEntry:t,registrationPromise:r}}return 1===e.registrationStatus?{installationEntry:e,registrationPromise:T1(n)}:{installationEntry:e}}(n,i);return e=a.registrationPromise,a.installationEntry});return t.fid===_c?{installationEntry:yield e}:{installationEntry:t,registrationPromise:e}}),Pf.apply(this,arguments)}function MT(){return MT=F(function*(n,e){try{const t=yield function q_(n,e){return td.apply(this,arguments)}(n,e);return Sf(n.appConfig,t)}catch(t){throw ET(t)&&409===t.customData.serverCode?yield ia(n.appConfig):yield Sf(n.appConfig,{fid:e.fid,registrationStatus:0}),t}}),MT.apply(this,arguments)}function T1(n){return ey.apply(this,arguments)}function ey(){return(ey=F(function*(n){let e=yield OT(n.appConfig);for(;1===e.registrationStatus;)yield CT(100),e=yield OT(n.appConfig);if(0===e.registrationStatus){const{installationEntry:t,registrationPromise:r}=yield id(n);return r||t}return e})).apply(this,arguments)}function OT(n){return rd(n,e=>{if(!e)throw wo.create("installation-not-found");return kS(e)})}function kS(n){return function b1(n){return 1===n.registrationStatus&&n.registrationTime+H_<Date.now()}(n)?{fid:n.fid,registrationStatus:0}:n}function ty(){return(ty=F(function*({appConfig:n,heartbeatServiceProvider:e},t){const r=function ny(n,{fid:e}){return`${z_(n)}/${e}/authTokens:generate`}(n,t),i=function mc(n,{refreshToken:e}){const t=OS(n);return t.append("Authorization",function bT(n){return`${yT} ${n}`}(e)),t}(n,t),a=e.getImmediate({optional:!0});if(a){const y=yield a.getHeartbeatsHeader();y&&i.append("x-firebase-client",y)}const h={method:"POST",headers:i,body:JSON.stringify({installation:{sdkVersion:bf,appId:n.appId}})},p=yield kt(()=>fetch(r,h));if(p.ok)return IT(yield p.json());throw yield Cf("Generate Auth Token",p)})).apply(this,arguments)}function sd(n){return sa.apply(this,arguments)}function sa(){return sa=F(function*(n,e=!1){let t;const r=yield rd(n.appConfig,a=>{if(!Of(a))throw wo.create("not-registered");const c=a.authToken;if(!e&&function iy(n){return 2===n.requestStatus&&!function Nf(n){const e=Date.now();return e<n.creationTime||n.creationTime+n.expiresIn<e+xS}(n)}(c))return a;if(1===c.requestStatus)return t=function ry(n,e){return od.apply(this,arguments)}(n,e),a;{if(!navigator.onLine)throw wo.create("app-offline");const h=function C1(n){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},n),{authToken:e})}(a);return t=function Mf(n,e){return oa.apply(this,arguments)}(n,h),h}});return t?yield t:r.authToken}),sa.apply(this,arguments)}function od(){return(od=F(function*(n,e){let t=yield vc(n.appConfig);for(;1===t.authToken.requestStatus;)yield CT(100),t=yield vc(n.appConfig);const r=t.authToken;return 0===r.requestStatus?sd(n,e):r})).apply(this,arguments)}function vc(n){return rd(n,e=>{if(!Of(e))throw wo.create("not-registered");return function sy(n){return 1===n.requestStatus&&n.requestTime+H_<Date.now()}(e.authToken)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}function oa(){return oa=F(function*(n,e){try{const t=yield function xf(n,e){return ty.apply(this,arguments)}(n,e),r=Object.assign(Object.assign({},e),{authToken:t});return yield Sf(n.appConfig,r),t}catch(t){if(!ET(t)||401!==t.customData.serverCode&&404!==t.customData.serverCode){const r=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});yield Sf(n.appConfig,r)}else yield ia(n.appConfig);throw t}}),oa.apply(this,arguments)}function Of(n){return void 0!==n&&2===n.registrationStatus}function oy(){return(oy=F(function*(n){const e=n,{installationEntry:t,registrationPromise:r}=yield id(e);return r?r.catch(console.error):sd(e).catch(console.error),t.fid})).apply(this,arguments)}function ay(){return ay=F(function*(n,e=!1){const t=n;return yield function FS(n){return ud.apply(this,arguments)}(t),(yield sd(t,e)).token}),ay.apply(this,arguments)}function ud(){return(ud=F(function*(n){const{registrationPromise:e}=yield id(n);e&&(yield e)})).apply(this,arguments)}function kf(n){return wo.create("missing-app-config-values",{valueName:n})}const Ff="installations",US=n=>{const e=n.getProvider("app").getImmediate(),t=function VS(n){if(!n||!n.options)throw kf("App Configuration");if(!n.name)throw kf("App Name");const e=["projectId","apiKey","appId"];for(const t of e)if(!n.options[t])throw kf(t);return{appName:n.name,projectId:n.options.projectId,apiKey:n.options.apiKey,appId:n.options.appId}}(e);return{app:e,appConfig:t,heartbeatServiceProvider:Eo(e,"heartbeat"),_delete:()=>Promise.resolve()}},LT=n=>{const t=Eo(n.getProvider("app").getImmediate(),Ff).getImmediate();return{getId:()=>function ad(n){return oy.apply(this,arguments)}(t),getToken:i=>function NT(n){return ay.apply(this,arguments)}(t,i)}};(function BS(){Pr(new Rr(Ff,US,"PUBLIC")),Pr(new Rr("installations-internal",LT,"PRIVATE"))})(),ki($_,gc),ki($_,gc,"esm2017");const cd="analytics",D1="firebase_id",jS="origin",Vf=6e4,$S="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",aa="https://www.googletagmanager.com/gtag/js",Rn=new yr("@firebase/analytics"),xr=new yo("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."});function GS(n){if(!n.startsWith(aa)){const e=xr.create("invalid-gtag-resource",{gtagURL:n});return Rn.warn(e.message),""}return n}function VT(n){return Promise.all(n.map(e=>e.catch(t=>t)))}function BT(){return(BT=F(function*(n,e,t,r,i,a){const c=r[i];try{if(c)yield e[c];else{const p=(yield VT(t)).find(y=>y.measurementId===i);p&&(yield e[p.appId])}}catch(h){Rn.error(h)}n("config",i,a)})).apply(this,arguments)}function Uf(){return(Uf=F(function*(n,e,t,r,i){try{let a=[];if(i&&i.send_to){let c=i.send_to;Array.isArray(c)||(c=[c]);const h=yield VT(t);for(const p of c){const y=h.find(D=>D.measurementId===p),I=y&&e[y.appId];if(!I){a=[];break}a.push(I)}}0===a.length&&(a=Object.values(e)),yield Promise.all(a),n("event",r,i||{})}catch(a){Rn.error(a)}})).apply(this,arguments)}const YS=30,HT=new class QS{constructor(e={},t=1e3){this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}};function A1(n){return new Headers({Accept:"application/json","x-goog-api-key":n})}function Bf(){return(Bf=F(function*(n){var e;const{appId:t,apiKey:r}=n,i={method:"GET",headers:A1(r)},a=$S.replace("{app-id}",t),c=yield fetch(a,i);if(200!==c.status&&304!==c.status){let h="";try{const p=yield c.json();null!==(e=p.error)&&void 0!==e&&e.message&&(h=p.error.message)}catch{}throw xr.create("config-fetch-failed",{httpStatus:c.status,responseMessage:h})}return c.json()})).apply(this,arguments)}function jf(){return(jf=F(function*(n,e=HT,t){const{appId:r,apiKey:i,measurementId:a}=n.options;if(!r)throw xr.create("no-app-id");if(!i){if(a)return{measurementId:a,appId:r};throw xr.create("no-api-key")}const c=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},h=new JS;return setTimeout(F(function*(){h.abort()}),void 0!==t?t:Vf),ZS({appId:r,apiKey:i,measurementId:a},c,h,e)})).apply(this,arguments)}function ZS(n,e,t){return ld.apply(this,arguments)}function ld(){return ld=F(function*(n,{throttleEndTimeMillis:e,backoffCount:t},r,i=HT){var a;const{appId:c,measurementId:h}=n;try{yield function ua(n,e){return new Promise((t,r)=>{const i=Math.max(e-Date.now(),0),a=setTimeout(t,i);n.addEventListener(()=>{clearTimeout(a),r(xr.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}(r,e)}catch(p){if(h)return Rn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${h} provided in the "measurementId" field in the local Firebase config. [${p?.message}]`),{appId:c,measurementId:h};throw p}try{const p=yield function GT(n){return Bf.apply(this,arguments)}(n);return i.deleteThrottleMetadata(c),p}catch(p){const y=p;if(!function fy(n){if(!(n instanceof gi&&n.customData))return!1;const e=Number(n.customData.httpStatus);return 429===e||500===e||503===e||504===e}(y)){if(i.deleteThrottleMetadata(c),h)return Rn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${h} provided in the "measurementId" field in the local Firebase config. [${y?.message}]`),{appId:c,measurementId:h};throw p}const I=503===Number(null===(a=y?.customData)||void 0===a?void 0:a.httpStatus)?w_(t,i.intervalMillis,YS):w_(t,i.intervalMillis),D={throttleEndTimeMillis:Date.now()+I,backoffCount:t+1};return i.setThrottleMetadata(c,D),Rn.debug(`Calling attemptFetch again in ${I} millis`),ZS(n,D,r,i)}}),ld.apply(this,arguments)}class JS{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}let zT,Hf;function dd(){return(dd=F(function*(n,e,t,r,i){if(i&&i.global)n("event",t,r);else{const a=yield e;n("event",t,Object.assign(Object.assign({},r),{send_to:a}))}})).apply(this,arguments)}function Gf(){return(Gf=F(function*(){if(!oc())return Rn.warn(xr.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield g_()}catch(n){return Rn.warn(xr.create("indexeddb-unavailable",{errorInfo:n?.toString()}).message),!1}return!0})).apply(this,arguments)}function yy(){return yy=F(function*(n,e,t,r,i,a,c){var h;const p=function fs(n){return jf.apply(this,arguments)}(n);p.then(L=>{t[L.measurementId]=L.appId,n.options.measurementId&&L.measurementId!==n.options.measurementId&&Rn.warn(`The measurement ID in the local Firebase config (${n.options.measurementId}) does not match the measurement ID fetched from the server (${L.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(L=>Rn.error(L)),e.push(p);const y=function KT(){return Gf.apply(this,arguments)}().then(L=>{if(L)return r.getId()}),[I,D]=yield Promise.all([p,y]);(function jT(n){const e=window.document.getElementsByTagName("script");for(const t of Object.values(e))if(t.src&&t.src.includes(aa)&&t.src.includes(n))return t;return null})(a)||function UT(n,e){const t=function zS(n,e){let t;return window.trustedTypes&&(t=window.trustedTypes.createPolicy(n,e)),t}("firebase-js-sdk-policy",{createScriptURL:GS}),r=document.createElement("script"),i=`${aa}?l=${n}&id=${e}`;r.src=t?t?.createScriptURL(i):i,r.async=!0,document.head.appendChild(r)}(a,I.measurementId),Hf&&(i("consent","default",Hf),function _y(n){Hf=n}(void 0)),i("js",new Date);const O=null!==(h=c?.config)&&void 0!==h?h:{};return O[jS]="firebase",O.update=!0,null!=D&&(O[D1]=D),i("config",I.measurementId,O),zT&&(i("set",zT),function WT(n){zT=n}(void 0)),I.measurementId}),yy.apply(this,arguments)}class rR{constructor(e){this.app=e}_delete(){return delete ps[this.app.options.appId],Promise.resolve()}}let ps={},au=[];const qs={};let QT,gs,To="dataLayer",zf=!1;function qf(n,e,t){!function fd(){const n=[];if(Rw()&&n.push("This is a browser extension environment."),m_()||n.push("Cookies are not available."),n.length>0){const e=n.map((r,i)=>`(${i+1}) ${r}`).join(" "),t=xr.create("invalid-analytics-context",{errorInfo:e});Rn.warn(t.message)}}();const r=n.options.appId;if(!r)throw xr.create("no-app-id");if(!n.options.apiKey){if(!n.options.measurementId)throw xr.create("no-api-key");Rn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${n.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=ps[r])throw xr.create("already-exists",{id:r});if(!zf){!function qS(n){let e=[];Array.isArray(window[n])?e=window[n]:window[n]=e}(To);const{wrappedGtag:a,gtagCore:c}=function KS(n,e,t,r,i){let a=function(...c){window[r].push(arguments)};return window[i]&&"function"==typeof window[i]&&(a=window[i]),window[i]=function WS(n,e,t,r){function a(){return a=F(function*(c,...h){try{if("event"===c){const[p,y]=h;yield function hy(n,e,t,r,i){return Uf.apply(this,arguments)}(n,e,t,p,y)}else if("config"===c){const[p,y]=h;yield function dy(n,e,t,r,i,a){return BT.apply(this,arguments)}(n,e,t,r,p,y)}else if("consent"===c){const[p]=h;n("consent","update",p)}else if("get"===c){const[p,y,I]=h;n("get",p,y,I)}else if("set"===c){const[p]=h;n("set",p)}else n(c,...h)}catch(p){Rn.error(p)}}),a.apply(this,arguments)}return function i(c){return a.apply(this,arguments)}}(a,n,e,t),{gtagCore:a,wrappedGtag:window[i]}}(ps,au,qs,To,"gtag");gs=a,QT=c,zf=!0}return ps[r]=function nR(n,e,t,r,i,a,c){return yy.apply(this,arguments)}(n,au,qs,e,QT,To,t),new rR(n)}const sR="@firebase/analytics";!function M1(){Pr(new Rr(cd,(e,{options:t})=>qf(e.getProvider("app").getImmediate(),e.getProvider("installations-internal").getImmediate(),t),"PUBLIC")),Pr(new Rr("analytics-internal",function n(e){try{const t=e.getProvider(cd).getImmediate();return{logEvent:(r,i,a)=>function eb(n,e,t,r){n=nn(n),function XS(n,e,t,r,i){return dd.apply(this,arguments)}(gs,ps[n.app.options.appId],e,t,r).catch(i=>Rn.error(i))}(t,r,i,a)}}catch(t){throw xr.create("interop-component-reg-failed",{reason:t})}},"PRIVATE")),ki(sR,"0.10.0"),ki(sR,"0.10.0","esm2017")}();var Kf=k(7582);const Ec=function tb(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},Yf=new yo("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),gd=new yr("@firebase/auth");function Ic(n,...e){gd.logLevel<=Pt.ERROR&&gd.error(`Auth (${nu}): ${n}`,...e)}function Mr(n,...e){throw by(n,...e)}function mi(n,...e){return by(n,...e)}function Zf(n,e,t){const r=Object.assign(Object.assign({},Ec()),{[e]:t});return new yo("auth","Firebase",r).create(e,{appName:n.name})}function by(n,...e){if("string"!=typeof n){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return Yf.create(n,...e)}function De(n,e,...t){if(!n)throw by(e,...t)}function ms(n){const e="INTERNAL ASSERTION FAILED: "+n;throw Ic(e),new Error(e)}function bo(n,e){n||ms(e)}function md(){var n;return typeof self<"u"&&(null===(n=self.location)||void 0===n?void 0:n.href)||""}function nb(){var n;return typeof self<"u"&&(null===(n=self.location)||void 0===n?void 0:n.protocol)||null}class _d{constructor(e,t){this.shortDelay=e,this.longDelay=t,bo(t>e,"Short delay should be less than long delay!"),this.isMobile=function jA(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(sr())}()||function HA(){return"object"==typeof navigator&&"ReactNative"===navigator.product}()}get(){return function rb(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(function Cy(){return"http:"===nb()||"https:"===nb()}()||Rw()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Dy(n,e){bo(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}class _i{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void ms("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void ms("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void ms("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const lR={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},dR=new _d(3e4,6e4);function Tn(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}function ln(n,e,t,r){return Jf.apply(this,arguments)}function Jf(){return(Jf=F(function*(n,e,t,r,i={}){return sb(n,i,F(function*(){let a={},c={};r&&("GET"===e?c=r:a={body:JSON.stringify(r)});const h=gf(Object.assign({key:n.config.apiKey},c)).slice(1),p=yield n._getAdditionalHeaders();return p["Content-Type"]="application/json",n.languageCode&&(p["X-Firebase-Locale"]=n.languageCode),_i.fetch()(ob(n,n.config.apiHost,t,h),Object.assign({method:e,headers:p,referrerPolicy:"no-referrer"},a))}))})).apply(this,arguments)}function sb(n,e,t){return Ay.apply(this,arguments)}function Ay(){return(Ay=F(function*(n,e,t){n._canInitEmulator=!1;const r=Object.assign(Object.assign({},lR),e);try{const i=new hR(n),a=yield Promise.race([t(),i.promise]);i.clearNetworkTimeout();const c=yield a.json();if("needConfirmation"in c)throw cu(n,"account-exists-with-different-credential",c);if(a.ok&&!("errorMessage"in c))return c;{const h=a.ok?c.errorMessage:c.error.message,[p,y]=h.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===p)throw cu(n,"credential-already-in-use",c);if("EMAIL_EXISTS"===p)throw cu(n,"email-already-in-use",c);if("USER_DISABLED"===p)throw cu(n,"user-disabled",c);const I=r[p]||p.toLowerCase().replace(/[_\s]+/g,"-");if(y)throw Zf(n,I,y);Mr(n,I)}}catch(i){if(i instanceof gi)throw i;Mr(n,"network-request-failed",{message:String(i)})}})).apply(this,arguments)}function Xf(){return(Xf=F(function*(n,e,t,r,i={}){const a=yield ln(n,e,t,r,i);return"mfaPendingCredential"in a&&Mr(n,"multi-factor-auth-required",{_serverResponse:a}),a})).apply(this,arguments)}function ob(n,e,t,r){const i=`${e}${t}?${r}`;return n.config.emulator?Dy(n.config,i):`${n.config.apiScheme}://${i}`}class hR{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(mi(this.auth,"network-request-failed")),dR.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function cu(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const i=mi(n,e,r);return i.customData._tokenResponse=t,i}function Yi(){return(Yi=F(function*(n,e){return ln(n,"POST","/v1/accounts:delete",e)})).apply(this,arguments)}function My(){return(My=F(function*(n,e){return ln(n,"POST","/v1/accounts:lookup",e)})).apply(this,arguments)}function Tc(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function yd(){return(yd=F(function*(n,e=!1){const t=nn(n),r=yield t.getIdToken(e),i=vd(r);De(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");const a="object"==typeof i.firebase?i.firebase:void 0,c=a?.sign_in_provider;return{claims:i,token:r,authTime:Tc(cb(i.auth_time)),issuedAtTime:Tc(cb(i.iat)),expirationTime:Tc(cb(i.exp)),signInProvider:c||null,signInSecondFactor:a?.sign_in_second_factor||null}})).apply(this,arguments)}function cb(n){return 1e3*Number(n)}function vd(n){const[e,t,r]=n.split(".");if(void 0===e||void 0===t||void 0===r)return Ic("JWT malformed, contained fewer than 3 sections"),null;try{const i=uf(t);return i?JSON.parse(i):(Ic("Failed to decode base64 JWT payload"),null)}catch(i){return Ic("Caught error parsing JWT payload as JSON",i?.toString()),null}}function Ws(n,e){return tp.apply(this,arguments)}function tp(){return(tp=F(function*(n,e,t=!1){if(t)return e;try{return yield e}catch(r){throw r instanceof gi&&function Oy({code:n}){return"auth/user-disabled"===n||"auth/user-token-expired"===n}(r)&&n.auth.currentUser===n&&(yield n.auth.signOut()),r}})).apply(this,arguments)}class Do{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),r}{this.errorBackoff=3e4;const i=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){var t=this;if(!this.isRunning)return;const r=this.getInterval(e);this.timerId=setTimeout(F(function*(){yield t.iteration()}),r)}iteration(){var e=this;return F(function*(){try{yield e.user.getIdToken(!0)}catch(t){return void("auth/network-request-failed"===t?.code&&e.schedule(!0))}e.schedule()})()}}class db{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Tc(this.lastLoginAt),this.creationTime=Tc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Ed(n){return Id.apply(this,arguments)}function Id(){return Id=F(function*(n){var e;const t=n.auth,r=yield n.getIdToken(),i=yield Ws(n,function ub(n,e){return My.apply(this,arguments)}(t,{idToken:r}));De(i?.users.length,t,"internal-error");const a=i.users[0];n._notifyReloadListener(a);const c=null!==(e=a.providerUserInfo)&&void 0!==e&&e.length?function rp(n){return n.map(e=>{var{providerId:t}=e,r=(0,Kf._T)(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}(a.providerUserInfo):[],h=function _R(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}(n.providerData,c),I=!!n.isAnonymous&&!(n.email&&a.passwordHash||h?.length),D={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:h,metadata:new db(a.createdAt,a.lastLoginAt),isAnonymous:I};Object.assign(n,D)}),Id.apply(this,arguments)}function np(){return(np=F(function*(n){const e=nn(n);yield Ed(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})).apply(this,arguments)}function ip(){return(ip=F(function*(n,e){const t=yield sb(n,{},F(function*(){const r=gf({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:a}=n.config,c=ob(n,i,"/v1/token",`key=${a}`),h=yield n._getAdditionalHeaders();return h["Content-Type"]="application/x-www-form-urlencoded",_i.fetch()(c,{method:"POST",headers:h,body:r})}));return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}})).apply(this,arguments)}class ca{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){De(e.idToken,"internal-error"),De(typeof e.idToken<"u","internal-error"),De(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):function lb(n){const e=vd(n);return De(e,"internal-error"),De(typeof e.exp<"u","internal-error"),De(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}getToken(e,t=!1){var r=this;return F(function*(){return De(!r.accessToken||r.refreshToken,e,"user-token-expired"),t||!r.accessToken||r.isExpired?r.refreshToken?(yield r.refresh(e,r.refreshToken),r.accessToken):null:r.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(e,t){var r=this;return F(function*(){const{accessToken:i,refreshToken:a,expiresIn:c}=yield function wd(n,e){return ip.apply(this,arguments)}(e,t);r.updateTokensAndExpiration(i,a,Number(c))})()}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*r}static fromJSON(e,t){const{refreshToken:r,accessToken:i,expirationTime:a}=t,c=new ca;return r&&(De("string"==typeof r,"internal-error",{appName:e}),c.refreshToken=r),i&&(De("string"==typeof i,"internal-error",{appName:e}),c.accessToken=i),a&&(De("number"==typeof a,"internal-error",{appName:e}),c.expirationTime=a),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new ca,this.toJSON())}_performRefresh(){return ms("not implemented")}}function lu(n,e){De("string"==typeof n||typeof n>"u","internal-error",{appName:e})}class du{constructor(e){var{uid:t,auth:r,stsTokenManager:i}=e,a=(0,Kf._T)(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Do(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new db(a.createdAt||void 0,a.lastLoginAt||void 0)}getIdToken(e){var t=this;return F(function*(){const r=yield Ws(t,t.stsTokenManager.getToken(t.auth,e));return De(r,t.auth,"internal-error"),t.accessToken!==r&&(t.accessToken=r,yield t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)),r})()}getIdTokenResult(e){return function ep(n){return yd.apply(this,arguments)}(this,e)}reload(){return function mR(n){return np.apply(this,arguments)}(this)}_assign(e){this!==e&&(De(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new du(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){De(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,t=!1){var r=this;return F(function*(){let i=!1;e.idToken&&e.idToken!==r.stsTokenManager.accessToken&&(r.stsTokenManager.updateFromServerResponse(e),i=!0),t&&(yield Ed(r)),yield r.auth._persistUserIfCurrent(r),i&&r.auth._notifyListenersIfCurrent(r)})()}delete(){var e=this;return F(function*(){const t=yield e.getIdToken();return yield Ws(e,function pR(n,e){return Yi.apply(this,arguments)}(e.auth,{idToken:t})),e.stsTokenManager.clearRefreshToken(),e.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,i,a,c,h,p,y,I;const D=null!==(r=t.displayName)&&void 0!==r?r:void 0,O=null!==(i=t.email)&&void 0!==i?i:void 0,L=null!==(a=t.phoneNumber)&&void 0!==a?a:void 0,J=null!==(c=t.photoURL)&&void 0!==c?c:void 0,X=null!==(h=t.tenantId)&&void 0!==h?h:void 0,ie=null!==(p=t._redirectEventId)&&void 0!==p?p:void 0,_e=null!==(y=t.createdAt)&&void 0!==y?y:void 0,Fe=null!==(I=t.lastLoginAt)&&void 0!==I?I:void 0,{uid:ke,emailVerified:tt,isAnonymous:vt,providerData:ut,stsTokenManager:sn}=t;De(ke&&sn,e,"internal-error");const Ti=ca.fromJSON(this.name,sn);De("string"==typeof ke,e,"internal-error"),lu(D,e.name),lu(O,e.name),De("boolean"==typeof tt,e,"internal-error"),De("boolean"==typeof vt,e,"internal-error"),lu(L,e.name),lu(J,e.name),lu(X,e.name),lu(ie,e.name),lu(_e,e.name),lu(Fe,e.name);const YI=new du({uid:ke,auth:e,email:O,emailVerified:tt,displayName:D,isAnonymous:vt,photoURL:J,phoneNumber:L,tenantId:X,stsTokenManager:Ti,createdAt:_e,lastLoginAt:Fe});return ut&&Array.isArray(ut)&&(YI.providerData=ut.map(iA=>Object.assign({},iA))),ie&&(YI._redirectEventId=ie),YI}static _fromIdTokenResponse(e,t,r=!1){return F(function*(){const i=new ca;i.updateFromServerResponse(t);const a=new du({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield Ed(a),a})()}}const Ny=new Map;function Ks(n){bo(n instanceof Function,"Expected a class definition");let e=Ny.get(n);return e?(bo(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,Ny.set(n,e),e)}const hb=(()=>{class n{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return F(function*(){return!0})()}_set(t,r){var i=this;return F(function*(){i.storage[t]=r})()}_get(t){var r=this;return F(function*(){const i=r.storage[t];return void 0===i?null:i})()}_remove(t){var r=this;return F(function*(){delete r.storage[t]})()}_addListener(t,r){}_removeListener(t,r){}}return n.type="NONE",n})();function Td(n,e,t){return`firebase:${n}:${e}:${t}`}class hu{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:i,name:a}=this.auth;this.fullUserKey=Td(this.userKey,i.apiKey,a),this.fullPersistenceKey=Td("persistence",i.apiKey,a),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){var e=this;return F(function*(){const t=yield e.persistence._get(e.fullUserKey);return t?du._fromJSON(e.auth,t):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){var t=this;return F(function*(){if(t.persistence===e)return;const r=yield t.getCurrentUser();return yield t.removeCurrentUser(),t.persistence=e,r?t.setCurrentUser(r):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,t,r="authUser"){return F(function*(){if(!t.length)return new hu(Ks(hb),e,r);const i=(yield Promise.all(t.map(function(){var y=F(function*(I){if(yield I._isAvailable())return I});return function(I){return y.apply(this,arguments)}}()))).filter(y=>y);let a=i[0]||Ks(hb);const c=Td(r,e.config.apiKey,e.name);let h=null;for(const y of t)try{const I=yield y._get(c);if(I){const D=du._fromJSON(e,I);y!==a&&(h=D),a=y;break}}catch{}const p=i.filter(y=>y._shouldAllowMigration);return a._shouldAllowMigration&&p.length?(a=p[0],h&&(yield a._set(c,h.toJSON())),yield Promise.all(t.map(function(){var y=F(function*(I){if(I!==a)try{yield I._remove(c)}catch{}});return function(I){return y.apply(this,arguments)}}())),new hu(a,e,r)):new hu(a,e,r)})()}}function bc(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(pb(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(fb(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Cc(e))return"Blackberry";if(mb(e))return"Webos";if(sp(e))return"Safari";if((e.includes("chrome/")||ky(e))&&!e.includes("edge/"))return"Chrome";if(gb(e))return"Android";{const r=n.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===r?.length)return r[1]}return"Other"}function fb(n=sr()){return/firefox\//i.test(n)}function sp(n=sr()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function ky(n=sr()){return/crios\//i.test(n)}function pb(n=sr()){return/iemobile/i.test(n)}function gb(n=sr()){return/android/i.test(n)}function Cc(n=sr()){return/blackberry/i.test(n)}function mb(n=sr()){return/webos/i.test(n)}function op(n=sr()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function _b(n=sr()){return op(n)||gb(n)||mb(n)||Cc(n)||/windows phone/i.test(n)||pb(n)}function yb(n,e=[]){let t;switch(n){case"Browser":t=bc(sr());break;case"Worker":t=`${bc(sr())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${nu}/${r}`}class vb{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=a=>new Promise((c,h)=>{try{c(e(a))}catch(p){h(p)}});r.onAbort=t,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){var t=this;return F(function*(){if(t.auth.currentUser===e)return;const r=[];try{for(const i of t.queue)yield i(e),i.onAbort&&r.push(i.onAbort)}catch(i){r.reverse();for(const a of r)try{a()}catch{}throw t.auth._errorFactory.create("login-blocked",{originalMessage:i?.message})}})()}}function Ly(){return(Ly=F(function*(n,e={}){return ln(n,"GET","/v2/passwordPolicy",Tn(n,e))})).apply(this,arguments)}class IR{constructor(e){var t,r,i,a;const c=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(t=c.minPasswordLength)&&void 0!==t?t:6,c.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=c.maxPasswordLength),void 0!==c.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=c.containsLowercaseCharacter),void 0!==c.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=c.containsUppercaseCharacter),void 0!==c.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=c.containsNumericCharacter),void 0!==c.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=c.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(i=null===(r=e.allowedNonAlphanumericCharacters)||void 0===r?void 0:r.join(""))&&void 0!==i?i:"",this.forceUpgradeOnSignin=null!==(a=e.forceUpgradeOnSignin)&&void 0!==a&&a,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,i,a,c,h;const p={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,p),this.validatePasswordCharacterOptions(e,p),p.isValid&&(p.isValid=null===(t=p.meetsMinPasswordLength)||void 0===t||t),p.isValid&&(p.isValid=null===(r=p.meetsMaxPasswordLength)||void 0===r||r),p.isValid&&(p.isValid=null===(i=p.containsLowercaseLetter)||void 0===i||i),p.isValid&&(p.isValid=null===(a=p.containsUppercaseLetter)||void 0===a||a),p.isValid&&(p.isValid=null===(c=p.containsNumericCharacter)||void 0===c||c),p.isValid&&(p.isValid=null===(h=p.containsNonAlphanumericCharacter)||void 0===h||h),p}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){let r;this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}class wR{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Eb(this),this.idTokenSubscription=new Eb(this),this.beforeStateQueue=new vb(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Yf,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,t){var r=this;return t&&(this._popupRedirectResolver=Ks(t)),this._initializationPromise=this.queue(F(function*(){var i,a;if(!r._deleted&&(r.persistenceManager=yield hu.create(r,e),!r._deleted)){if(null!==(i=r._popupRedirectResolver)&&void 0!==i&&i._shouldInitProactively)try{yield r._popupRedirectResolver._initialize(r)}catch{}yield r.initializeCurrentUser(t),r.lastNotifiedUid=(null===(a=r.currentUser)||void 0===a?void 0:a.uid)||null,!r._deleted&&(r._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var e=this;return F(function*(){if(e._deleted)return;const t=yield e.assertedPersistence.getCurrentUser();if(e.currentUser||t){if(e.currentUser&&t&&e.currentUser.uid===t.uid)return e._currentUser._assign(t),void(yield e.currentUser.getIdToken());yield e._updateCurrentUser(t,!0)}})()}initializeCurrentUser(e){var t=this;return F(function*(){var r;const i=yield t.assertedPersistence.getCurrentUser();let a=i,c=!1;if(e&&t.config.authDomain){yield t.getOrInitRedirectPersistenceManager();const h=null===(r=t.redirectUser)||void 0===r?void 0:r._redirectEventId,p=a?._redirectEventId,y=yield t.tryRedirectSignIn(e);(!h||h===p)&&y?.user&&(a=y.user,c=!0)}if(!a)return t.directlySetCurrentUser(null);if(!a._redirectEventId){if(c)try{yield t.beforeStateQueue.runMiddleware(a)}catch(h){a=i,t._popupRedirectResolver._overrideRedirectResult(t,()=>Promise.reject(h))}return a?t.reloadAndSetCurrentUserOrClear(a):t.directlySetCurrentUser(null)}return De(t._popupRedirectResolver,t,"argument-error"),yield t.getOrInitRedirectPersistenceManager(),t.redirectUser&&t.redirectUser._redirectEventId===a._redirectEventId?t.directlySetCurrentUser(a):t.reloadAndSetCurrentUserOrClear(a)})()}tryRedirectSignIn(e){var t=this;return F(function*(){let r=null;try{r=yield t._popupRedirectResolver._completeRedirectFn(t,e,!0)}catch{yield t._setRedirectUser(null)}return r})()}reloadAndSetCurrentUserOrClear(e){var t=this;return F(function*(){try{yield Ed(e)}catch(r){if("auth/network-request-failed"!==r?.code)return t.directlySetCurrentUser(null)}return t.directlySetCurrentUser(e)})()}useDeviceLanguage(){this.languageCode=function ib(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}()}_delete(){var e=this;return F(function*(){e._deleted=!0})()}updateCurrentUser(e){var t=this;return F(function*(){const r=e?nn(e):null;return r&&De(r.auth.config.apiKey===t.config.apiKey,t,"invalid-user-token"),t._updateCurrentUser(r&&r._clone(t))})()}_updateCurrentUser(e,t=!1){var r=this;return F(function*(){if(!r._deleted)return e&&De(r.tenantId===e.tenantId,r,"tenant-id-mismatch"),t||(yield r.beforeStateQueue.runMiddleware(e)),r.queue(F(function*(){yield r.directlySetCurrentUser(e),r.notifyAuthListeners()}))})()}signOut(){var e=this;return F(function*(){return yield e.beforeStateQueue.runMiddleware(null),(e.redirectPersistenceManager||e._popupRedirectResolver)&&(yield e._setRedirectUser(null)),e._updateCurrentUser(null,!0)})()}setPersistence(e){var t=this;return this.queue(F(function*(){yield t.assertedPersistence.setPersistence(Ks(e))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){var t=this;return F(function*(){t._getPasswordPolicyInternal()||(yield t._updatePasswordPolicy());const r=t._getPasswordPolicyInternal();return r.schemaVersion!==t.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(t._errorFactory.create("unsupported-password-policy-schema-version",{})):r.validatePassword(e)})()}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){var e=this;return F(function*(){const t=yield function Fy(n){return Ly.apply(this,arguments)}(e),r=new IR(t);null===e.tenantId?e._projectPasswordPolicy=r:e._tenantPasswordPolicies[e.tenantId]=r})()}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new yo("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}_setRedirectUser(e,t){var r=this;return F(function*(){const i=yield r.getOrInitRedirectPersistenceManager(t);return null===e?i.removeCurrentUser():i.setCurrentUser(e)})()}getOrInitRedirectPersistenceManager(e){var t=this;return F(function*(){if(!t.redirectPersistenceManager){const r=e&&Ks(e)||t._popupRedirectResolver;De(r,t,"argument-error"),t.redirectPersistenceManager=yield hu.create(t,[Ks(r._redirectPersistence)],"redirectUser"),t.redirectUser=yield t.redirectPersistenceManager.getCurrentUser()}return t.redirectPersistenceManager})()}_redirectUserForId(e){var t=this;return F(function*(){var r,i;return t._isInitialized&&(yield t.queue(F(function*(){}))),(null===(r=t._currentUser)||void 0===r?void 0:r._redirectEventId)===e?t._currentUser:(null===(i=t.redirectUser)||void 0===i?void 0:i._redirectEventId)===e?t.redirectUser:null})()}_persistUserIfCurrent(e){var t=this;return F(function*(){if(e===t.currentUser)return t.queue(F(function*(){return t.directlySetCurrentUser(e)}))})()}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};const a="function"==typeof t?t:t.next.bind(t);let c=!1;const h=this._isInitialized?Promise.resolve():this._initializationPromise;if(De(h,this,"internal-error"),h.then(()=>{c||a(this.currentUser)}),"function"==typeof t){const p=e.addObserver(t,r,i);return()=>{c=!0,p()}}{const p=e.addObserver(t);return()=>{c=!0,p()}}}directlySetCurrentUser(e){var t=this;return F(function*(){t.currentUser&&t.currentUser!==e&&t._currentUser._stopProactiveRefresh(),e&&t.isProactiveRefreshEnabled&&e._startProactiveRefresh(),t.currentUser=e,e?yield t.assertedPersistence.setCurrentUser(e):yield t.assertedPersistence.removeCurrentUser()})()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return De(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=yb(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var e=this;return F(function*(){var t;const r={"X-Client-Version":e.clientVersion};e.app.options.appId&&(r["X-Firebase-gmpid"]=e.app.options.appId);const i=yield null===(t=e.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===t?void 0:t.getHeartbeatsHeader();i&&(r["X-Firebase-Client"]=i);const a=yield e._getAppCheckToken();return a&&(r["X-Firebase-AppCheck"]=a),r})()}_getAppCheckToken(){var e=this;return F(function*(){var t;const r=yield null===(t=e.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===t?void 0:t.getToken();return r?.error&&function Ty(n,...e){gd.logLevel<=Pt.WARN&&gd.warn(`Auth (${nu}): ${n}`,...e)}(`Error while retrieving App Check token: ${r.error}`),r?.token})()}}function Un(n){return nn(n)}class Eb{constructor(e){this.auth=e,this.observer=null,this.addObserver=function QA(n,e){const t=new v_(n,e);return t.subscribe.bind(t)}(t=>this.observer=t)}get next(){return De(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Ib(n){return`__${n}${Math.floor(1e6*Math.random())}`}function bb(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function Ac(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}class la{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return ms("not implemented")}_getIdTokenResponse(e){return ms("not implemented")}_linkToIdToken(e,t){return ms("not implemented")}_getReauthenticationResolver(e){return ms("not implemented")}}function _a(n,e){return Sb.apply(this,arguments)}function Sb(){return(Sb=F(function*(n,e){return function Co(n,e,t,r){return Xf.apply(this,arguments)}(n,"POST","/v1/accounts:signInWithIdp",Tn(n,e))})).apply(this,arguments)}class Pc extends la{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Pc(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Mr("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"==typeof e?JSON.parse(e):e,{providerId:r,signInMethod:i}=t,a=(0,Kf._T)(t,["providerId","signInMethod"]);if(!r||!i)return null;const c=new Pc(r,i);return c.idToken=a.idToken||void 0,c.accessToken=a.accessToken||void 0,c.secret=a.secret,c.nonce=a.nonce,c.pendingToken=a.pendingToken||null,c}_getIdTokenResponse(e){return _a(e,this.buildRequest())}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,_a(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,_a(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=gf(t)}return e}}class va{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class Pb extends va{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}let zy=(()=>{class n extends Pb{constructor(){super("google.com"),this.addScope("profile")}static credential(t,r){return Pc._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:r})}static credentialFromResult(t){return n.credentialFromTaggedObject(t)}static credentialFromError(t){return n.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:r,oauthAccessToken:i}=t;if(!r&&!i)return null;try{return n.credential(r,i)}catch{return null}}}return n.GOOGLE_SIGN_IN_METHOD="google.com",n.PROVIDER_ID="google.com",n})();class Qi{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,t,r,i=!1){return F(function*(){const a=yield du._fromIdTokenResponse(e,r,i),c=Mb(r);return new Qi({user:a,providerId:c,_tokenResponse:r,operationType:t})})()}static _forOperation(e,t,r){return F(function*(){yield e._updateTokensIfNecessary(r,!0);const i=Mb(r);return new Qi({user:e,providerId:i,_tokenResponse:r,operationType:t})})()}}function Mb(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}class Pd extends gi{constructor(e,t,r,i){var a;super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,Pd.prototype),this.customData={appName:e.name,tenantId:null!==(a=e.tenantId)&&void 0!==a?a:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new Pd(e,t,r,i)}}function Ob(n,e,t,r){return("reauthenticate"===e?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(a=>{throw"auth/multi-factor-auth-required"===a.code?Pd._fromErrorAndOperation(n,a,e,r):a})}function Md(){return(Md=F(function*(n,e,t=!1){const r=yield Ws(n,e._linkToIdToken(n.auth,yield n.getIdToken()),t);return Qi._forOperation(n,"link",r)})).apply(this,arguments)}function Nd(){return(Nd=F(function*(n,e,t=!1){const{auth:r}=n,i="reauthenticate";try{const a=yield Ws(n,Ob(r,i,e,n),t);De(a.idToken,r,"internal-error");const c=vd(a.idToken);De(c,r,"internal-error");const{sub:h}=c;return De(n.uid===h,r,"user-mismatch"),Qi._forOperation(n,i,a)}catch(a){throw"auth/user-not-found"===a?.code&&Mr(r,"user-mismatch"),a}})).apply(this,arguments)}function Yy(){return(Yy=F(function*(n,e,t=!1){const r="signIn",i=yield Ob(n,r,e),a=yield Qi._fromIdTokenResponse(n,r,i);return t||(yield n._updateCurrentUser(a.user)),a})).apply(this,arguments)}function Fp(){return(Fp=F(function*(n){return nn(n).delete()})).apply(this,arguments)}const Hd="__sak";class lv{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Hd,"1"),this.storage.removeItem(Hd),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const $b=(()=>{class n extends lv{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,r)=>this.onStorageEvent(t,r),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function Vp(){const n=sr();return sp(n)||op(n)}()&&function ER(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=_b(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const r of Object.keys(this.listeners)){const i=this.storage.getItem(r),a=this.localCache[r];i!==a&&t(r,a,i)}}onStorageEvent(t,r=!1){if(!t.key)return void this.forAllChangedKeys((h,p,y)=>{this.notifyListeners(h,y)});const i=t.key;if(r?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const h=this.storage.getItem(i);if(t.newValue!==h)null!==t.newValue?this.storage.setItem(i,t.newValue):this.storage.removeItem(i);else if(this.localCache[i]===t.newValue&&!r)return}const a=()=>{const h=this.storage.getItem(i);!r&&this.localCache[i]===h||this.notifyListeners(i,h)},c=this.storage.getItem(i);!function vR(){return function hf(){const n=sr();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}()&&10===document.documentMode}()||c===t.newValue||t.newValue===t.oldValue?a():setTimeout(a,10)}notifyListeners(t,r){this.localCache[t]=r;const i=this.listeners[t];if(i)for(const a of Array.from(i))a(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:r,newValue:i}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,r){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),0===this.listeners[t].size&&delete this.listeners[t]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(t,r){var i=()=>super._set,a=this;return F(function*(){yield i().call(a,t,r),a.localCache[t]=JSON.stringify(r)})()}_get(t){var r=()=>super._get,i=this;return F(function*(){const a=yield r().call(i,t);return i.localCache[t]=JSON.stringify(a),a})()}_remove(t){var r=()=>super._remove,i=this;return F(function*(){yield r().call(i,t),delete i.localCache[t]})()}}return n.type="LOCAL",n})(),Hb=(()=>{class n extends lv{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,r){}_removeListener(t,r){}}return n.type="SESSION",n})();let Up=(()=>{class n{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const r=this.receivers.find(a=>a.isListeningto(t));if(r)return r;const i=new n(t);return this.receivers.push(i),i}isListeningto(t){return this.eventTarget===t}handleEvent(t){var r=this;return F(function*(){const i=t,{eventId:a,eventType:c,data:h}=i.data,p=r.handlersMap[c];if(!p?.size)return;i.ports[0].postMessage({status:"ack",eventId:a,eventType:c});const y=Array.from(p).map(function(){var D=F(function*(O){return O(i.origin,h)});return function(O){return D.apply(this,arguments)}}()),I=yield function dv(n){return Promise.all(n.map(function(){var e=F(function*(t){try{return{fulfilled:!0,value:yield t}}catch(r){return{fulfilled:!1,reason:r}}});return function(t){return e.apply(this,arguments)}}()))}(y);i.ports[0].postMessage({status:"done",eventId:a,eventType:c,response:I})})()}_subscribe(t,r){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(r)}_unsubscribe(t,r){this.handlersMap[t]&&r&&this.handlersMap[t].delete(r),(!r||0===this.handlersMap[t].size)&&delete this.handlersMap[t],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return n.receivers=[],n})();function Gd(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(10*Math.random());return n+t}class Gb{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,t,r=50){var i=this;return F(function*(){const a=typeof MessageChannel<"u"?new MessageChannel:null;if(!a)throw new Error("connection_unavailable");let c,h;return new Promise((p,y)=>{const I=Gd("",20);a.port1.start();const D=setTimeout(()=>{y(new Error("unsupported_event"))},r);h={messageChannel:a,onMessage(O){const L=O;if(L.data.eventId===I)switch(L.data.status){case"ack":clearTimeout(D),c=setTimeout(()=>{y(new Error("timeout"))},3e3);break;case"done":clearTimeout(c),p(L.data.response);break;default:clearTimeout(D),clearTimeout(c),y(new Error("invalid_response"))}}},i.handlers.add(h),a.port1.addEventListener("message",h.onMessage),i.target.postMessage({eventType:e,eventId:I,data:t},[a.port2])}).finally(()=>{h&&i.removeMessageHandler(h)})})()}}function On(){return window}function Bp(){return typeof On().WorkerGlobalScope<"u"&&"function"==typeof On().importScripts}function jp(){return(jp=F(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const Kb="firebaseLocalStorageDb",$p="firebaseLocalStorage",Yb="fbase_key";class zd{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Hp(n,e){return n.transaction([$p],e?"readwrite":"readonly").objectStore($p)}function hv(){const n=indexedDB.open(Kb,1);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore($p,{keyPath:Yb})}catch(i){t(i)}}),n.addEventListener("success",F(function*(){const r=n.result;r.objectStoreNames.contains($p)?e(r):(r.close(),yield function rP(){const n=indexedDB.deleteDatabase(Kb);return new zd(n).toPromise()}(),e(yield hv()))}))})}function Qb(n,e,t){return fv.apply(this,arguments)}function fv(){return(fv=F(function*(n,e,t){const r=Hp(n,!0).put({[Yb]:e,value:t});return new zd(r).toPromise()})).apply(this,arguments)}function pv(){return(pv=F(function*(n,e){const t=Hp(n,!1).get(e),r=yield new zd(t).toPromise();return void 0===r?null:r.value})).apply(this,arguments)}function Zb(n,e){const t=Hp(n,!0).delete(e);return new zd(t).toPromise()}const aP=(()=>{class n{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var t=this;return F(function*(){return t.db||(t.db=yield hv()),t.db})()}_withRetries(t){var r=this;return F(function*(){let i=0;for(;;)try{const a=yield r._openDb();return yield t(a)}catch(a){if(i++>3)throw a;r.db&&(r.db.close(),r.db=void 0)}})()}initializeServiceWorkerMessaging(){var t=this;return F(function*(){return Bp()?t.initializeReceiver():t.initializeSender()})()}initializeReceiver(){var t=this;return F(function*(){t.receiver=Up._getInstance(function tP(){return Bp()?self:null}()),t.receiver._subscribe("keyChanged",function(){var r=F(function*(i,a){return{keyProcessed:(yield t._poll()).includes(a.key)}});return function(i,a){return r.apply(this,arguments)}}()),t.receiver._subscribe("ping",function(){var r=F(function*(i,a){return["keyChanged"]});return function(i,a){return r.apply(this,arguments)}}())})()}initializeSender(){var t=this;return F(function*(){var r,i;if(t.activeServiceWorker=yield function qb(){return jp.apply(this,arguments)}(),!t.activeServiceWorker)return;t.sender=new Gb(t.activeServiceWorker);const a=yield t.sender._send("ping",{},800);a&&null!==(r=a[0])&&void 0!==r&&r.fulfilled&&null!==(i=a[0])&&void 0!==i&&i.value.includes("keyChanged")&&(t.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(t){var r=this;return F(function*(){if(r.sender&&r.activeServiceWorker&&function Wb(){var n;return(null===(n=navigator?.serviceWorker)||void 0===n?void 0:n.controller)||null}()===r.activeServiceWorker)try{yield r.sender._send("keyChanged",{key:t},r.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return F(function*(){try{if(!indexedDB)return!1;const t=yield hv();return yield Qb(t,Hd,"1"),yield Zb(t,Hd),!0}catch{}return!1})()}_withPendingWrite(t){var r=this;return F(function*(){r.pendingWrites++;try{yield t()}finally{r.pendingWrites--}})()}_set(t,r){var i=this;return F(function*(){return i._withPendingWrite(F(function*(){return yield i._withRetries(a=>Qb(a,t,r)),i.localCache[t]=r,i.notifyServiceWorker(t)}))})()}_get(t){var r=this;return F(function*(){const i=yield r._withRetries(a=>function iP(n,e){return pv.apply(this,arguments)}(a,t));return r.localCache[t]=i,i})()}_remove(t){var r=this;return F(function*(){return r._withPendingWrite(F(function*(){return yield r._withRetries(i=>Zb(i,t)),delete r.localCache[t],r.notifyServiceWorker(t)}))})()}_poll(){var t=this;return F(function*(){const r=yield t._withRetries(c=>{const h=Hp(c,!1).getAll();return new zd(h).toPromise()});if(!r)return[];if(0!==t.pendingWrites)return[];const i=[],a=new Set;for(const{fbase_key:c,value:h}of r)a.add(c),JSON.stringify(t.localCache[c])!==JSON.stringify(h)&&(t.notifyListeners(c,h),i.push(c));for(const c of Object.keys(t.localCache))t.localCache[c]&&!a.has(c)&&(t.notifyListeners(c,null),i.push(c));return i})()}notifyListeners(t,r){this.localCache[t]=r;const i=this.listeners[t];if(i)for(const a of Array.from(i))a(r)}startPolling(){var t=this;this.stopPolling(),this.pollTimer=setInterval(F(function*(){return t._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,r){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),0===this.listeners[t].size&&delete this.listeners[t]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return n.type="LOCAL",n})();function Ta(n,e){return e?Ks(e):(De(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}Ib("rcb"),new _d(3e4,6e4);class qp extends la{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return _a(e,this._buildIdpRequest())}_linkToIdToken(e,t){return _a(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return _a(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function dP(n){return function Ky(n,e){return Yy.apply(this,arguments)}(n.auth,new qp(n),n.bypassAuthState)}function uC(n){const{auth:e,user:t}=n;return De(t,e,"internal-error"),function Od(n,e){return Nd.apply(this,arguments)}(t,new qp(n),n.bypassAuthState)}function cC(n){return Wp.apply(this,arguments)}function Wp(){return(Wp=F(function*(n){const{auth:e,user:t}=n;return De(t,e,"internal-error"),function xd(n,e){return Md.apply(this,arguments)}(t,new qp(n),n.bypassAuthState)})).apply(this,arguments)}class vv{constructor(e,t,r,i,a=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){var e=this;return new Promise(function(){var t=F(function*(r,i){e.pendingPromise={resolve:r,reject:i};try{e.eventManager=yield e.resolver._initialize(e.auth),yield e.onExecution(),e.eventManager.registerConsumer(e)}catch(a){e.reject(a)}});return function(r,i){return t.apply(this,arguments)}}())}onAuthEvent(e){var t=this;return F(function*(){const{urlResponse:r,sessionId:i,postBody:a,tenantId:c,error:h,type:p}=e;if(h)return void t.reject(h);const y={auth:t.auth,requestUri:r,sessionId:i,tenantId:c||void 0,postBody:a||void 0,user:t.user,bypassAuthState:t.bypassAuthState};try{t.resolve(yield t.getIdpTask(p)(y))}catch(I){t.reject(I)}})()}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return dP;case"linkViaPopup":case"linkViaRedirect":return cC;case"reauthViaPopup":case"reauthViaRedirect":return uC;default:Mr(this.auth,"internal-error")}}resolve(e){bo(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){bo(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const hP=new _d(2e3,1e4);function lC(n,e,t){return Ev.apply(this,arguments)}function Ev(){return(Ev=F(function*(n,e,t){const r=Un(n);!function wc(n,e,t){if(!(e instanceof t))throw t.name!==e.constructor.name&&Mr(n,"argument-error"),Zf(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}(n,e,va);const i=Ta(r,t);return new Vc(r,"signInViaPopup",e,i).executeNotNull()})).apply(this,arguments)}let Vc=(()=>{class n extends vv{constructor(t,r,i,a,c){super(t,r,a,c),this.provider=i,this.authWindow=null,this.pollId=null,n.currentPopupAction&&n.currentPopupAction.cancel(),n.currentPopupAction=this}executeNotNull(){var t=this;return F(function*(){const r=yield t.execute();return De(r,t.auth,"internal-error"),r})()}onExecution(){var t=this;return F(function*(){bo(1===t.filter.length,"Popup operations only handle one event");const r=Gd();t.authWindow=yield t.resolver._openPopup(t.auth,t.provider,t.filter[0],r),t.authWindow.associatedEvent=r,t.resolver._originValidation(t.auth).catch(i=>{t.reject(i)}),t.resolver._isIframeWebStorageSupported(t.auth,i=>{i||t.reject(mi(t.auth,"web-storage-unsupported"))}),t.pollUserCancellation()})()}get eventId(){var t;return(null===(t=this.authWindow)||void 0===t?void 0:t.associatedEvent)||null}cancel(){this.reject(mi(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,n.currentPopupAction=null}pollUserCancellation(){const t=()=>{var r,i;this.pollId=null!==(i=null===(r=this.authWindow)||void 0===r?void 0:r.window)&&void 0!==i&&i.closed?window.setTimeout(()=>{this.pollId=null,this.reject(mi(this.auth,"popup-closed-by-user"))},8e3):window.setTimeout(t,hP.get())};t()}}return n.currentPopupAction=null,n})();const dC="pendingRedirect",Uc=new Map;class hC extends vv{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}execute(){var e=()=>super.execute,t=this;return F(function*(){let r=Uc.get(t.auth._key());if(!r){try{const a=(yield function fP(n,e){return gu.apply(this,arguments)}(t.resolver,t.auth))?yield e().call(t):null;r=()=>Promise.resolve(a)}catch(i){r=()=>Promise.reject(i)}Uc.set(t.auth._key(),r)}return t.bypassAuthState||Uc.set(t.auth._key(),()=>Promise.resolve(null)),r()})()}onAuthEvent(e){var t=()=>super.onAuthEvent,r=this;return F(function*(){if("signInViaRedirect"===e.type)return t().call(r,e);if("unknown"!==e.type){if(e.eventId){const i=yield r.auth._redirectUserForId(e.eventId);if(i)return r.user=i,t().call(r,e);r.resolve(null)}}else r.resolve(null)})()}onExecution(){return F(function*(){})()}cleanUp(){}}function gu(){return(gu=F(function*(n,e){const t=function Cv(n){return Td(dC,n.config.apiKey,n.name)}(e),r=function bv(n){return Ks(n._redirectPersistence)}(n);if(!(yield r._isAvailable()))return!1;const i="true"===(yield r._get(t));return yield r._remove(t),i})).apply(this,arguments)}function pP(n,e){Uc.set(n._key(),e)}function gC(n,e){return Dv.apply(this,arguments)}function Dv(){return(Dv=F(function*(n,e,t=!1){const r=Un(n),i=Ta(r,e),c=yield new hC(r,i,t).execute();return c&&!t&&(delete c.user._redirectEventId,yield r._persistUserIfCurrent(c.user),yield r._setRedirectUser(null,e)),c})).apply(this,arguments)}class EP{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!function nk(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return _C(n);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!_C(e)){const i=(null===(r=e.error.code)||void 0===r?void 0:r.split("auth/")[1])||"internal-error";t.onError(mi(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(mC(e))}saveEventToCache(e){this.cachedEventUids.add(mC(e)),this.lastProcessedEventTime=Date.now()}}function mC(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function _C({type:n,error:e}){return"unknown"===n&&"auth/no-auth-event"===e?.code}function Qp(){return(Qp=F(function*(n,e={}){return ln(n,"GET","/v1/projects",e)})).apply(this,arguments)}const wP=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,TP=/^https?/;function Sv(){return Sv=F(function*(n){if(n.config.emulator)return;const{authorizedDomains:e}=yield function IP(n){return Qp.apply(this,arguments)}(n);for(const t of e)try{if(yC(t))return}catch{}Mr(n,"unauthorized-domain")}),Sv.apply(this,arguments)}function yC(n){const e=md(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){const c=new URL(n);return""===c.hostname&&""===r?"chrome-extension:"===t&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):"chrome-extension:"===t&&c.hostname===r}if(!TP.test(t))return!1;if(wP.test(n))return r===n;const i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const bP=new _d(3e4,6e4);function Rv(){const n=On().___jsl;if(n?.H)for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}let Kd=null;function DP(n){return Kd=Kd||function CP(n){return new Promise((e,t)=>{var r,i,a;function c(){Rv(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Rv(),t(mi(n,"network-request-failed"))},timeout:bP.get()})}if(null!==(i=null===(r=On().gapi)||void 0===r?void 0:r.iframes)&&void 0!==i&&i.Iframe)e(gapi.iframes.getContext());else{if(null===(a=On().gapi)||void 0===a||!a.load){const h=Ib("iframefcb");return On()[h]=()=>{gapi.load?c():t(mi(n,"network-request-failed"))},function Vy(n){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{const a=mi("internal-error");a.customData=i,t(a)},r.type="text/javascript",r.charset="UTF-8",function TR(){var n,e;return null!==(e=null===(n=document.getElementsByTagName("head"))||void 0===n?void 0:n[0])&&void 0!==e?e:document}().appendChild(r)})}(`https://apis.google.com/js/api.js?onload=${h}`).catch(p=>t(p))}c()}}).catch(e=>{throw Kd=null,e})}(n),Kd}const Pv=new _d(5e3,15e3),AP="__/auth/iframe",vC="emulator/auth/iframe",EC={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},SP=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function RP(n){const e=n.config;De(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?Dy(e,vC):`https://${n.config.authDomain}/${AP}`,r={apiKey:e.apiKey,appName:n.name,v:nu},i=SP.get(n.config.apiHost);i&&(r.eid=i);const a=n._getFrameworks();return a.length&&(r.fw=a.join(",")),`${t}?${gf(r).slice(1)}`}function Yd(){return Yd=F(function*(n){const e=yield DP(n),t=On().gapi;return De(t,n,"internal-error"),e.open({where:document.body,url:RP(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:EC,dontclear:!0},r=>new Promise(function(){var i=F(function*(a,c){yield r.restyle({setHideOnLeave:!1});const h=mi(n,"network-request-failed"),p=On().setTimeout(()=>{c(h)},Pv.get());function y(){On().clearTimeout(p),a(r)}r.ping(y).then(y,()=>{c(h)})});return function(a,c){return i.apply(this,arguments)}}()))}),Yd.apply(this,arguments)}const xP={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class wC{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const LP="__/auth/handler",VP="emulator/auth/handler",TC=encodeURIComponent("fac");function xv(n,e,t,r,i,a){return Mv.apply(this,arguments)}function Mv(){return(Mv=F(function*(n,e,t,r,i,a){De(n.config.authDomain,n,"auth-domain-config-required"),De(n.config.apiKey,n,"invalid-api-key");const c={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:nu,eventId:i};if(e instanceof va){e.setDefaultLanguage(n.languageCode),c.providerId=e.providerId||"",function WA(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}(e.getCustomParameters())||(c.customParameters=JSON.stringify(e.getCustomParameters()));for(const[I,D]of Object.entries(a||{}))c[I]=D}if(e instanceof Pb){const I=e.getScopes().filter(D=>""!==D);I.length>0&&(c.scopes=I.join(","))}n.tenantId&&(c.tid=n.tenantId);const h=c;for(const I of Object.keys(h))void 0===h[I]&&delete h[I];const p=yield n._getAppCheckToken(),y=p?`#${TC}=${encodeURIComponent(p)}`:"";return`${function UP({config:n}){return n.emulator?Dy(n,VP):`https://${n.authDomain}/${LP}`}(n)}?${gf(h).slice(1)}${y}`})).apply(this,arguments)}const Zp="webStorageSupport",jP=class BP{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Hb,this._completeRedirectFn=gC,this._overrideRedirectResult=pP}_openPopup(e,t,r,i){var a=this;return F(function*(){var c;bo(null===(c=a.eventManagers[e._key()])||void 0===c?void 0:c.manager,"_initialize() not called before _openPopup()");const h=yield xv(e,t,r,md(),i);return function kP(n,e,t,r=500,i=600){const a=Math.max((window.screen.availHeight-i)/2,0).toString(),c=Math.max((window.screen.availWidth-r)/2,0).toString();let h="";const p=Object.assign(Object.assign({},xP),{width:r.toString(),height:i.toString(),top:a,left:c}),y=sr().toLowerCase();t&&(h=ky(y)?"_blank":t),fb(y)&&(e=e||"http://localhost",p.scrollbars="yes");const I=Object.entries(p).reduce((O,[L,J])=>`${O}${L}=${J},`,"");if(function yR(n=sr()){var e;return op(n)&&!(null===(e=window.navigator)||void 0===e||!e.standalone)}(y)&&"_self"!==h)return function FP(n,e){const t=document.createElement("a");t.href=n,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}(e||"",h),new wC(null);const D=window.open(e||"",h,I);De(D,n,"popup-blocked");try{D.focus()}catch{}return new wC(D)}(e,h,Gd())})()}_openRedirect(e,t,r,i){var a=this;return F(function*(){return yield a._originValidation(e),function zb(n){On().location.href=n}(yield xv(e,t,r,md(),i)),new Promise(()=>{})})()}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:i,promise:a}=this.eventManagers[t];return i?Promise.resolve(i):(bo(a,"If manager is not set, promise should be"),a)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}initAndGetManager(e){var t=this;return F(function*(){const r=yield function PP(n){return Yd.apply(this,arguments)}(e),i=new EP(e);return r.register("authEvent",a=>(De(a?.authEvent,e,"invalid-auth-event"),{status:i.onEvent(a.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),t.eventManagers[e._key()]={manager:i},t.iframes[e._key()]=r,i})()}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Zp,{type:Zp},i=>{var a;const c=null===(a=i?.[0])||void 0===a?void 0:a[Zp];void 0!==c&&t(!!c),Mr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function Wd(n){return Sv.apply(this,arguments)}(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return _b()||sp()||op()}};var AC="@firebase/auth";class $P{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}getToken(e){var t=this;return F(function*(){return t.assertAuthConfigured(),yield t.auth._initializationPromise,t.auth.currentUser?{accessToken:yield t.auth.currentUser.getIdToken(e)}:null})()}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){De(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const HP=Qa("authIdTokenMaxAge")||300;let GP=null;const Ov=n=>function(){var e=F(function*(t){const r=t&&(yield t.getIdTokenResult()),i=r&&((new Date).getTime()-Date.parse(r.issuedAtTime))/1e3;if(i&&i>HP)return;const a=r?.token;GP!==a&&(GP=a,yield fetch(n,{method:a?"POST":"DELETE",headers:a?{Authorization:`Bearer ${a}`}:{}}))});return function(t){return e.apply(this,arguments)}}();!function yu(n){Pr(new Rr("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:c,authDomain:h}=r.options;De(c&&!c.includes(":"),"invalid-api-key",{appName:r.name});const p={apiKey:c,authDomain:h,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:yb(n)},y=new wR(r,i,a,p);return function AR(n,e){const t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(Ks);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}(y,t),y},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),Pr(new Rr("auth-internal",e=>{const t=Un(e.getProvider("auth").getImmediate());return new $P(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),ki(AC,"1.3.0",function SC(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(n)),ki(AC,"1.3.0","esm2017")}("Browser");const zP=(n,e)=>e.some(t=>n instanceof t);let kv,Fv;const ng=new WeakMap,rg=new WeakMap,Lv=new WeakMap,ig=new WeakMap,sg=new WeakMap;let Vv={get(n,e,t){if(n instanceof IDBTransaction){if("done"===e)return rg.get(n);if("objectStoreNames"===e)return n.objectStoreNames||Lv.get(n);if("store"===e)return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Zs(n[e])},set:(n,e,t)=>(n[e]=t,!0),has:(n,e)=>n instanceof IDBTransaction&&("done"===e||"store"===e)||e in n};function ik(n){return"function"==typeof n?function xC(n){return n!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function PC(){return Fv||(Fv=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(n)?function(...e){return n.apply(Uv(this),e),Zs(ng.get(this))}:function(...e){return Zs(n.apply(Uv(this),e))}:function(e,...t){const r=n.call(Uv(this),e,...t);return Lv.set(r,e.sort?e.sort():[e]),Zs(r)}}(n):(n instanceof IDBTransaction&&function KP(n){if(rg.has(n))return;const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("complete",a),n.removeEventListener("error",c),n.removeEventListener("abort",c)},a=()=>{t(),i()},c=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",a),n.addEventListener("error",c),n.addEventListener("abort",c)});rg.set(n,e)}(n),zP(n,function qP(){return kv||(kv=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(n,Vv):n)}function Zs(n){if(n instanceof IDBRequest)return function WP(n){const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("success",a),n.removeEventListener("error",c)},a=()=>{t(Zs(n.result)),i()},c=()=>{r(n.error),i()};n.addEventListener("success",a),n.addEventListener("error",c)});return e.then(t=>{t instanceof IDBCursor&&ng.set(t,n)}).catch(()=>{}),sg.set(e,n),e}(n);if(ig.has(n))return ig.get(n);const e=ik(n);return e!==n&&(ig.set(n,e),sg.set(e,n)),e}const Uv=n=>sg.get(n);function MC(n,e,{blocked:t,upgrade:r,blocking:i,terminated:a}={}){const c=indexedDB.open(n,e),h=Zs(c);return r&&c.addEventListener("upgradeneeded",p=>{r(Zs(c.result),p.oldVersion,p.newVersion,Zs(c.transaction))}),t&&c.addEventListener("blocked",()=>t()),h.then(p=>{a&&p.addEventListener("close",()=>a()),i&&p.addEventListener("versionchange",()=>i())}).catch(()=>{}),h}function OC(n,{blocked:e}={}){const t=indexedDB.deleteDatabase(n);return e&&t.addEventListener("blocked",()=>e()),Zs(t).then(()=>{})}const QP=["get","getKey","getAll","getAllKeys","count"],ZP=["put","add","delete","clear"],og=new Map;function Bv(n,e){if(!(n instanceof IDBDatabase)||e in n||"string"!=typeof e)return;if(og.get(e))return og.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,i=ZP.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!QP.includes(t))return;const a=function(){var c=F(function*(h,...p){const y=this.transaction(h,i?"readwrite":"readonly");let I=y.store;return r&&(I=I.index(p.shift())),(yield Promise.all([I[t](...p),i&&y.done]))[0]});return function(p){return c.apply(this,arguments)}}();return og.set(e,a),a}!function YP(n){Vv=n(Vv)}(n=>({...n,get:(e,t,r)=>Bv(e,t)||n.get(e,t,r),has:(e,t)=>!!Bv(e,t)||n.has(e,t)}));const JP="/firebase-messaging-sw.js",XP="/firebase-cloud-messaging-push-scope",NC="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",ex="https://fcmregistrations.googleapis.com/v1",kC="google.c.a.c_id",tx="google.c.a.c_l",nx="google.c.a.ts";var Zd=function(n){return n.PUSH_RECEIVED="push-received",n.NOTIFICATION_CLICKED="notification-clicked",n}(Zd||{});function Js(n){const e=new Uint8Array(n);return btoa(String.fromCharCode(...e)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function FC(n){const t=(n+"=".repeat((4-n.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),r=atob(t),i=new Uint8Array(r.length);for(let a=0;a<r.length;++a)i[a]=r.charCodeAt(a);return i}const ag="fcm_token_details_db",LC=5,jv="fcm_token_object_Store";function VC(){return VC=F(function*(n){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(a=>a.name).includes(ag))return null;let e=null;return(yield MC(ag,LC,{upgrade:(r=F(function*(i,a,c,h){var p;if(a<2||!i.objectStoreNames.contains(jv))return;const y=h.objectStore(jv),I=yield y.index("fcmSenderId").get(n);if(yield y.clear(),I)if(2===a){const D=I;if(!D.auth||!D.p256dh||!D.endpoint)return;e={token:D.fcmToken,createTime:null!==(p=D.createTime)&&void 0!==p?p:Date.now(),subscriptionOptions:{auth:D.auth,p256dh:D.p256dh,endpoint:D.endpoint,swScope:D.swScope,vapidKey:"string"==typeof D.vapidKey?D.vapidKey:Js(D.vapidKey)}}}else if(3===a){const D=I;e={token:D.fcmToken,createTime:D.createTime,subscriptionOptions:{auth:Js(D.auth),p256dh:Js(D.p256dh),endpoint:D.endpoint,swScope:D.swScope,vapidKey:Js(D.vapidKey)}}}else if(4===a){const D=I;e={token:D.fcmToken,createTime:D.createTime,subscriptionOptions:{auth:Js(D.auth),p256dh:Js(D.p256dh),endpoint:D.endpoint,swScope:D.swScope,vapidKey:Js(D.vapidKey)}}}}),function(a,c,h,p){return r.apply(this,arguments)})})).close(),yield OC(ag),yield OC("fcm_vapid_details_db"),yield OC("undefined"),function sk(n){if(!n||!n.subscriptionOptions)return!1;const{subscriptionOptions:e}=n;return"number"==typeof n.createTime&&n.createTime>0&&"string"==typeof n.token&&n.token.length>0&&"string"==typeof e.auth&&e.auth.length>0&&"string"==typeof e.p256dh&&e.p256dh.length>0&&"string"==typeof e.endpoint&&e.endpoint.length>0&&"string"==typeof e.swScope&&e.swScope.length>0&&"string"==typeof e.vapidKey&&e.vapidKey.length>0}(e)?e:null;var r}),VC.apply(this,arguments)}const UC="firebase-messaging-database",sx=1,vu="firebase-messaging-store";let $v=null;function Hv(){return $v||($v=MC(UC,sx,{upgrade:(n,e)=>{0===e&&n.createObjectStore(vu)}})),$v}function jc(n){return Gv.apply(this,arguments)}function Gv(){return Gv=F(function*(n){const e=BC(n),r=yield(yield Hv()).transaction(vu).objectStore(vu).get(e);if(r)return r;{const i=yield function ix(n){return VC.apply(this,arguments)}(n.appConfig.senderId);if(i)return yield Jd(n,i),i}}),Gv.apply(this,arguments)}function Jd(n,e){return zv.apply(this,arguments)}function zv(){return(zv=F(function*(n,e){const t=BC(n),i=(yield Hv()).transaction(vu,"readwrite");return yield i.objectStore(vu).put(e,t),yield i.done,e})).apply(this,arguments)}function qv(){return(qv=F(function*(n){const e=BC(n),r=(yield Hv()).transaction(vu,"readwrite");yield r.objectStore(vu).delete(e),yield r.done})).apply(this,arguments)}function BC({appConfig:n}){return n.appId}const Er=new yo("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function ox(n,e){return Wv.apply(this,arguments)}function Wv(){return(Wv=F(function*(n,e){const t=yield Kv(n),r=Qv(e),i={method:"POST",headers:t,body:JSON.stringify(r)};let a;try{a=yield(yield fetch($c(n.appConfig),i)).json()}catch(c){throw Er.create("token-subscribe-failed",{errorInfo:c?.toString()})}if(a.error)throw Er.create("token-subscribe-failed",{errorInfo:a.error.message});if(!a.token)throw Er.create("token-subscribe-no-token");return a.token})).apply(this,arguments)}function cg(){return(cg=F(function*(n,e){const t=yield Kv(n),r=Qv(e.subscriptionOptions),i={method:"PATCH",headers:t,body:JSON.stringify(r)};let a;try{a=yield(yield fetch(`${$c(n.appConfig)}/${e.token}`,i)).json()}catch(c){throw Er.create("token-update-failed",{errorInfo:c?.toString()})}if(a.error)throw Er.create("token-update-failed",{errorInfo:a.error.message});if(!a.token)throw Er.create("token-update-no-token");return a.token})).apply(this,arguments)}function jC(n,e){return lg.apply(this,arguments)}function lg(){return(lg=F(function*(n,e){const r={method:"DELETE",headers:yield Kv(n)};try{const a=yield(yield fetch(`${$c(n.appConfig)}/${e}`,r)).json();if(a.error)throw Er.create("token-unsubscribe-failed",{errorInfo:a.error.message})}catch(i){throw Er.create("token-unsubscribe-failed",{errorInfo:i?.toString()})}})).apply(this,arguments)}function $c({projectId:n}){return`${ex}/projects/${n}/registrations`}function Kv(n){return Yv.apply(this,arguments)}function Yv(){return(Yv=F(function*({appConfig:n,installations:e}){const t=yield e.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n.apiKey,"x-goog-firebase-installations-auth":`FIS ${t}`})})).apply(this,arguments)}function Qv({p256dh:n,auth:e,endpoint:t,vapidKey:r}){const i={web:{endpoint:t,auth:e,p256dh:n}};return r!==NC&&(i.web.applicationPubKey=r),i}const ax=6048e5;function dg(){return dg=F(function*(n){const e=yield function $C(n,e){return Xv.apply(this,arguments)}(n.swRegistration,n.vapidKey),t={vapidKey:n.vapidKey,swScope:n.swRegistration.scope,endpoint:e.endpoint,auth:Js(e.getKey("auth")),p256dh:Js(e.getKey("p256dh"))},r=yield jc(n.firebaseDependencies);if(r){if(function HC(n,e){return e.vapidKey===n.vapidKey&&e.endpoint===n.endpoint&&e.auth===n.auth&&e.p256dh===n.p256dh}(r.subscriptionOptions,t))return Date.now()>=r.createTime+ax?function cx(n,e){return hg.apply(this,arguments)}(n,{token:r.token,createTime:Date.now(),subscriptionOptions:t}):r.token;try{yield jC(n.firebaseDependencies,r.token)}catch(i){console.warn(i)}return Jv(n.firebaseDependencies,t)}return Jv(n.firebaseDependencies,t)}),dg.apply(this,arguments)}function Zv(){return Zv=F(function*(n){const e=yield jc(n.firebaseDependencies);e&&(yield jC(n.firebaseDependencies,e.token),yield function ok(n){return qv.apply(this,arguments)}(n.firebaseDependencies));const t=yield n.swRegistration.pushManager.getSubscription();return!t||t.unsubscribe()}),Zv.apply(this,arguments)}function hg(){return hg=F(function*(n,e){try{const t=yield function ug(n,e){return cg.apply(this,arguments)}(n.firebaseDependencies,e),r=Object.assign(Object.assign({},e),{token:t,createTime:Date.now()});return yield Jd(n.firebaseDependencies,r),t}catch(t){throw yield function eh(n){return Zv.apply(this,arguments)}(n),t}}),hg.apply(this,arguments)}function Jv(n,e){return th.apply(this,arguments)}function th(){return(th=F(function*(n,e){const r={token:yield ox(n,e),createTime:Date.now(),subscriptionOptions:e};return yield Jd(n,r),r.token})).apply(this,arguments)}function Xv(){return(Xv=F(function*(n,e){return(yield n.pushManager.getSubscription())||n.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:FC(e)})})).apply(this,arguments)}function eE(n){const e={from:n.from,collapseKey:n.collapse_key,messageId:n.fcmMessageId};return function lx(n,e){if(!e.notification)return;n.notification={};const t=e.notification.title;t&&(n.notification.title=t);const r=e.notification.body;r&&(n.notification.body=r);const i=e.notification.image;i&&(n.notification.image=i);const a=e.notification.icon;a&&(n.notification.icon=a)}(e,n),function dx(n,e){e.data&&(n.data=e.data)}(e,n),function tE(n,e){var t,r,i,a,c;if(!(e.fcmOptions||null!==(t=e.notification)&&void 0!==t&&t.click_action))return;n.fcmOptions={};const h=null!==(i=null===(r=e.fcmOptions)||void 0===r?void 0:r.link)&&void 0!==i?i:null===(a=e.notification)||void 0===a?void 0:a.click_action;h&&(n.fcmOptions.link=h);const p=null===(c=e.fcmOptions)||void 0===c?void 0:c.analytics_label;p&&(n.fcmOptions.analyticsLabel=p)}(e,n),e}function rE(n,e){const t=[];for(let r=0;r<n.length;r++)t.push(n.charAt(r)),r<e.length&&t.push(e.charAt(r));return t.join("")}function nh(n){return Er.create("missing-app-config-values",{valueName:n})}rE("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),rE("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class hx{constructor(e,t,r){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const i=function iE(n){if(!n||!n.options)throw nh("App Configuration Object");if(!n.name)throw nh("App Name");const e=["projectId","apiKey","appId","messagingSenderId"],{options:t}=n;for(const r of e)if(!t[r])throw nh(r);return{appName:n.name,projectId:t.projectId,apiKey:t.apiKey,appId:t.appId,senderId:t.messagingSenderId}}(e);this.firebaseDependencies={app:e,appConfig:i,installations:t,analyticsProvider:r}}_delete(){return Promise.resolve()}}function sE(){return(sE=F(function*(n){try{n.swRegistration=yield navigator.serviceWorker.register(JP,{scope:XP}),n.swRegistration.update().catch(()=>{})}catch(e){throw Er.create("failed-service-worker-registration",{browserErrorMessage:e?.message})}})).apply(this,arguments)}function fg(){return(fg=F(function*(n,e){if(!e&&!n.swRegistration&&(yield function GC(n){return sE.apply(this,arguments)}(n)),e||!n.swRegistration){if(!(e instanceof ServiceWorkerRegistration))throw Er.create("invalid-sw-registration");n.swRegistration=e}})).apply(this,arguments)}function pg(){return(pg=F(function*(n,e){e?n.vapidKey=e:n.vapidKey||(n.vapidKey=NC)})).apply(this,arguments)}function aE(n,e){return gg.apply(this,arguments)}function gg(){return gg=F(function*(n,e){if(!navigator)throw Er.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw Er.create("permission-blocked");return yield function oE(n,e){return pg.apply(this,arguments)}(n,e?.vapidKey),yield function fx(n,e){return fg.apply(this,arguments)}(n,e?.serviceWorkerRegistration),function ux(n){return dg.apply(this,arguments)}(n)}),gg.apply(this,arguments)}function uE(){return(uE=F(function*(n,e,t){const r=function qC(n){switch(n){case Zd.NOTIFICATION_CLICKED:return"notification_open";case Zd.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}(e);(yield n.firebaseDependencies.analyticsProvider.get()).logEvent(r,{message_id:t[kC],message_name:t[tx],message_time:t[nx],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function cE(){return cE=F(function*(n,e){const t=e.data;if(!t.isFirebaseMessaging)return;n.onMessageHandler&&t.messageType===Zd.PUSH_RECEIVED&&("function"==typeof n.onMessageHandler?n.onMessageHandler(eE(t)):n.onMessageHandler.next(eE(t)));const r=t.data;(function nE(n){return"object"==typeof n&&!!n&&kC in n})(r)&&"1"===r["google.c.a.e"]&&(yield function zC(n,e,t){return uE.apply(this,arguments)}(n,t.messageType,r))}),cE.apply(this,arguments)}const lE="@firebase/messaging",Jr=n=>{const e=new hx(n.getProvider("app").getImmediate(),n.getProvider("installations-internal").getImmediate(),n.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",t=>function WC(n,e){return cE.apply(this,arguments)}(e,t)),e},Hc=n=>{const e=n.getProvider("messaging").getImmediate();return{getToken:r=>aE(e,r)}};function KC(){return(KC=F(function*(){try{yield g_()}catch{return!1}return typeof window<"u"&&oc()&&m_()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}function YC(){return(YC=F(function*(n,e){return aE(n=nn(n),e)})).apply(this,arguments)}!function px(){Pr(new Rr("messaging",Jr,"PUBLIC")),Pr(new Rr("messaging-internal",Hc,"PRIVATE")),ki(lE,"0.12.4"),ki(lE,"0.12.4","esm2017")}();var Oe,fE=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},vs={},pE=pE||{},lt=fE||self;function yg(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function Eu(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var gE="closure_uid_"+(1e9*Math.random()>>>0),vg=0;function mE(n,e,t){return n.call.apply(n.bind,arguments)}function lk(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),n.apply(e,i)}}return function(){return n.apply(e,arguments)}}function Ir(n,e,t){return(Ir=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?mE:lk).apply(null,arguments)}function Eg(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function Kn(n,e){function t(){}t.prototype=e.prototype,n.$=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.ac=function(r,i,a){for(var c=Array(arguments.length-2),h=2;h<arguments.length;h++)c[h-2]=arguments[h];return e.prototype[i].apply(r,c)}}function Fi(){this.s=this.s,this.o=this.o}Fi.prototype.s=!1,Fi.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),0)&&function QC(n){Object.prototype.hasOwnProperty.call(n,gE)&&n[gE]||(n[gE]=++vg)}(this)},Fi.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const _E=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1};function rh(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function yx(n,e){for(let t=1;t<arguments.length;t++){const r=arguments[t];if(yg(r)){const i=n.length||0,a=r.length||0;n.length=i+a;for(let c=0;c<a;c++)n[i+c]=r[c]}else n.push(r)}}function kr(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}kr.prototype.h=function(){this.defaultPrevented=!0};var dk=function(){if(!lt.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{lt.addEventListener("test",()=>{},e),lt.removeEventListener("test",()=>{},e)}catch{}return n}();function ih(n){return/^[\s\xa0]*$/.test(n)}function Ig(){var n=lt.navigator;return n&&(n=n.userAgent)?n:""}function Xs(n){return-1!=Ig().indexOf(n)}function wg(n){return wg[" "](n),n}wg[" "]=function(){};var Tg,n,vx=Xs("Opera"),Iu=Xs("Trident")||Xs("MSIE"),yE=Xs("Edge"),vE=yE||Iu,JC=Xs("Gecko")&&!(-1!=Ig().toLowerCase().indexOf("webkit")&&!Xs("Edge"))&&!(Xs("Trident")||Xs("MSIE"))&&!Xs("Edge"),XC=-1!=Ig().toLowerCase().indexOf("webkit")&&!Xs("Edge");function e0(){var n=lt.document;return n?n.documentMode:void 0}e:{var bg="",Cg=(n=Ig(),JC?/rv:([^\);]+)(\)|;)/.exec(n):yE?/Edge\/([\d\.]+)/.exec(n):Iu?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):XC?/WebKit\/(\S+)/.exec(n):vx?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(Cg&&(bg=Cg?Cg[1]:""),Iu){var Dg=e0();if(null!=Dg&&Dg>parseFloat(bg)){Tg=String(Dg);break e}}Tg=bg}var hk=lt.document&&Iu&&(e0()||parseInt(Tg,10))||void 0;function Gc(n,e){if(kr.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(JC){e:{try{wg(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:fk[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&Gc.$.h.call(this)}}Kn(Gc,kr);var fk={2:"touch",3:"pen",4:"mouse"};Gc.prototype.h=function(){Gc.$.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var Ag="closure_listenable_"+(1e6*Math.random()|0),pk=0;function gk(n,e,t,r,i){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.la=i,this.key=++pk,this.fa=this.ia=!1}function IE(n){n.fa=!0,n.listener=null,n.proxy=null,n.src=null,n.la=null}function n0(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function Ex(n){const e={};for(const t in n)e[t]=n[t];return e}const Ix="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function wE(n,e){let t,r;for(let i=1;i<arguments.length;i++){for(t in r=arguments[i],r)n[t]=r[t];for(let a=0;a<Ix.length;a++)t=Ix[a],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function zc(n){this.src=n,this.g={},this.h=0}function Sg(n,e){var t=e.type;if(t in n.g){var a,r=n.g[t],i=_E(r,e);(a=0<=i)&&Array.prototype.splice.call(r,i,1),a&&(IE(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function TE(n,e,t,r){for(var i=0;i<n.length;++i){var a=n[i];if(!a.fa&&a.listener==e&&a.capture==!!t&&a.la==r)return i}return-1}zc.prototype.add=function(n,e,t,r,i){var a=n.toString();(n=this.g[a])||(n=this.g[a]=[],this.h++);var c=TE(n,e,r,i);return-1<c?(e=n[c],t||(e.ia=!1)):((e=new gk(e,this.src,a,!!r,i)).ia=t,n.push(e)),e};var qc="closure_lm_"+(1e6*Math.random()|0),bE={};function wx(n,e,t,r,i){if(r&&r.once)return CE(n,e,t,r,i);if(Array.isArray(e)){for(var a=0;a<e.length;a++)wx(n,e[a],t,r,i);return null}return t=Wc(t),n&&n[Ag]?n.O(e,t,Eu(r)?!!r.capture:!!r,i):Tx(n,e,t,!1,r,i)}function Tx(n,e,t,r,i,a){if(!e)throw Error("Invalid event type");var c=Eu(i)?!!i.capture:!!i,h=AE(n);if(h||(n[qc]=h=new zc(n)),(t=h.add(e,t,r,c,a)).proxy)return t;if(r=function bx(){const e=_k;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)dk||(i=c),void 0===i&&(i=!1),n.addEventListener(e.toString(),r,i);else if(n.attachEvent)n.attachEvent(s0(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function CE(n,e,t,r,i){if(Array.isArray(e)){for(var a=0;a<e.length;a++)CE(n,e[a],t,r,i);return null}return t=Wc(t),n&&n[Ag]?n.P(e,t,Eu(r)?!!r.capture:!!r,i):Tx(n,e,t,!0,r,i)}function r0(n,e,t,r,i){if(Array.isArray(e))for(var a=0;a<e.length;a++)r0(n,e[a],t,r,i);else r=Eu(r)?!!r.capture:!!r,t=Wc(t),n&&n[Ag]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=TE(a=n.g[e],t,r,i))&&(IE(a[t]),Array.prototype.splice.call(a,t,1),0==a.length&&(delete n.g[e],n.h--))):n&&(n=AE(n))&&(e=n.g[e.toString()],n=-1,e&&(n=TE(e,t,r,i)),(t=-1<n?e[n]:null)&&DE(t))}function DE(n){if("number"!=typeof n&&n&&!n.fa){var e=n.src;if(e&&e[Ag])Sg(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(s0(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=AE(e))?(Sg(t,n),0==t.h&&(t.src=null,e[qc]=null)):IE(n)}}}function s0(n){return n in bE?bE[n]:bE[n]="on"+n}function _k(n,e){if(n.fa)n=!0;else{e=new Gc(e,this);var t=n.listener,r=n.la||n.src;n.ia&&DE(n),n=t.call(r,e)}return n}function AE(n){return(n=n[qc])instanceof zc?n:null}var wu="__closure_events_fn_"+(1e9*Math.random()>>>0);function Wc(n){return"function"==typeof n?n:(n[wu]||(n[wu]=function(e){return n.handleEvent(e)}),n[wu])}function ur(){Fi.call(this),this.i=new zc(this),this.S=this,this.J=null}function wr(n,e){var t,r=n.J;if(r)for(t=[];r;r=r.J)t.push(r);if(n=n.S,r=e.type||e,"string"==typeof e)e=new kr(e,n);else if(e instanceof kr)e.target=e.target||n;else{var i=e;wE(e=new kr(r,n),i)}if(i=!0,t)for(var a=t.length-1;0<=a;a--){var c=e.g=t[a];i=Rg(c,r,!0,e)&&i}if(i=Rg(c=e.g=n,r,!0,e)&&i,i=Rg(c,r,!1,e)&&i,t)for(a=0;a<t.length;a++)i=Rg(c=e.g=t[a],r,!1,e)&&i}function Rg(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,a=0;a<e.length;++a){var c=e[a];if(c&&!c.fa&&c.capture==t){var h=c.listener,p=c.la||c.src;c.ia&&Sg(n.i,c),i=!1!==h.call(p,r)&&i}}return i&&!r.defaultPrevented}Kn(ur,Fi),ur.prototype[Ag]=!0,ur.prototype.removeEventListener=function(n,e,t,r){r0(this,n,e,t,r)},ur.prototype.N=function(){if(ur.$.N.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)IE(t[r]);delete n.g[e],n.h--}}this.J=null},ur.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},ur.prototype.P=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var SE=lt.JSON.stringify;function Dx(){var n=PE;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var o0=new class Cx{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new Ax,n=>n.reset());class Ax{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function Sx(n){var e=1;n=n.split(":");const t=[];for(;0<e&&n.length;)t.push(n.shift()),e--;return n.length&&t.push(n.join(":")),t}function Rx(n){lt.setTimeout(()=>{throw n},0)}let sh,oh=!1,PE=new class RE{constructor(){this.h=this.g=null}add(e,t){const r=o0.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}},a0=()=>{const n=lt.Promise.resolve(void 0);sh=()=>{n.then(Px)}};var Px=()=>{for(var n;n=Dx();){try{n.h.call(n.g)}catch(t){Rx(t)}var e=o0;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}oh=!1};function ah(n,e){ur.call(this),this.h=n||1,this.g=e||lt,this.j=Ir(this.qb,this),this.l=Date.now()}function uh(n){n.ga=!1,n.T&&(n.g.clearTimeout(n.T),n.T=null)}function xE(n,e,t){if("function"==typeof n)t&&(n=Ir(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=Ir(n.handleEvent,n)}return 2147483647<Number(e)?-1:lt.setTimeout(n,e||0)}function u0(n){n.g=xE(()=>{n.g=null,n.i&&(n.i=!1,u0(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}Kn(ah,ur),(Oe=ah.prototype).ga=!1,Oe.T=null,Oe.qb=function(){if(this.ga){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-n):(this.T&&(this.g.clearTimeout(this.T),this.T=null),wr(this,"tick"),this.ga&&(uh(this),this.start()))}},Oe.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Oe.N=function(){ah.$.N.call(this),uh(this),delete this.g};class c0 extends Fi{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:u0(this)}N(){super.N(),this.g&&(lt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Kc(n){Fi.call(this),this.h=n,this.g={}}Kn(Kc,Fi);var xx=[];function Xr(n,e,t,r){Array.isArray(t)||(t&&(xx[0]=t.toString()),t=xx);for(var i=0;i<t.length;i++){var a=wx(e,t[i],r||n.handleEvent,!1,n.h||n);if(!a)break;n.g[a.key]=a}}function ME(n){n0(n.g,function(e,t){this.g.hasOwnProperty(t)&&DE(e)},n),n.g={}}function ch(){this.g=!0}function Yc(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function ba(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var a=i[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var c=1;c<i.length;c++)i[c]=""}}}return SE(t)}catch{return e}}(n,t)+(r?" "+r:"")})}Kc.prototype.N=function(){Kc.$.N.call(this),ME(this)},Kc.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},ch.prototype.Ea=function(){this.g=!1},ch.prototype.info=function(){};var Ca={},Pg=null;function Qc(){return Pg=Pg||new ur}function d0(n){kr.call(this,Ca.Ta,n)}function xg(n){const e=Qc();wr(e,new d0(e))}function NE(n,e){kr.call(this,Ca.STAT_EVENT,n),this.stat=e}function ei(n){const e=Qc();wr(e,new NE(e,n))}function h0(n,e){kr.call(this,Ca.Ua,n),this.size=e}function lh(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return lt.setTimeout(function(){n()},e)}Ca.Ta="serverreachability",Kn(d0,kr),Ca.STAT_EVENT="statevent",Kn(NE,kr),Ca.Ua="timingevent",Kn(h0,kr);var Mg={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},kE={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function f0(){}function p0(){}f0.prototype.h=null;var Og,Zc={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function g0(){kr.call(this,"d")}function dh(){kr.call(this,"c")}function hh(){}function fh(n,e,t,r){this.l=n,this.j=e,this.m=t,this.W=r||1,this.U=new Kc(this),this.P=m0,this.V=new ah(n=vE?125:void 0),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new LE}function LE(){this.i=null,this.g="",this.h=!1}Kn(g0,kr),Kn(dh,kr),Kn(hh,f0),hh.prototype.g=function(){return new XMLHttpRequest},hh.prototype.i=function(){return{}},Og=new hh;var m0=45e3,Da={},Tu={};function Ng(n,e,t){n.L=1,n.v=Lg(Aa(e)),n.s=t,n.S=!0,VE(n,null)}function VE(n,e){n.G=Date.now(),Jc(n),n.A=Aa(n.v);var t=n.A,r=n.W;Array.isArray(r)||(r=[String(r)]),Lx(t.i,"t",r),n.C=0,t=n.l.J,n.h=new LE,n.g=V0(n.l,t?e:null,!n.s),0<n.O&&(n.M=new c0(Ir(n.Pa,n,n.g),n.O)),Xr(n.U,n.g,"readystatechange",n.nb),e=n.I?Ex(n.I):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ha(n.A,n.u,n.s,e)):(n.u="GET",n.g.ha(n.A,n.u,null,e)),xg(),function Mx(n,e,t,r,i,a){n.info(function(){if(n.g)if(a)for(var c="",h=a.split("&"),p=0;p<h.length;p++){var y=h[p].split("=");if(1<y.length){var I=y[0];y=y[1];var D=I.split("_");c=2<=D.length&&"type"==D[1]?c+(I+"=")+y+"&":c+(I+"=redacted&")}}else c=null;else c=a;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+t+"\n"+c})}(n.j,n.u,n.A,n.m,n.W,n.s)}function _0(n){return!!n.g&&"GET"==n.u&&2!=n.L&&n.l.Ha}function y0(n,e,t){let i,r=!0;for(;!n.J&&n.C<t.length;){if(i=yk(n,t),i==Tu){4==e&&(n.o=4,ei(14),r=!1),Yc(n.j,n.m,null,"[Incomplete Response]");break}if(i==Da){n.o=4,ei(15),Yc(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}Yc(n.j,n.m,i,null),E0(n,i)}_0(n)&&i!=Tu&&i!=Da&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,ei(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.ba&&(n.ba=!0,(e=n.l).g==n&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+t.length),L0(e),e.M=!0,ei(11))):(Yc(n.j,n.m,t,"[Invalid Chunked Response]"),Xc(n),Fg(n))}function yk(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?Tu:(t=Number(e.substring(t,r)),isNaN(t)?Da:(r+=1)+t>e.length?Tu:(e=e.slice(r,r+t),n.C=r+t,e))}function Jc(n){n.Y=Date.now()+n.P,v0(n,n.P)}function v0(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=lh(Ir(n.lb,n),e)}function kg(n){n.B&&(lt.clearTimeout(n.B),n.B=null)}function Fg(n){0==n.l.H||n.J||Yx(n.l,n)}function Xc(n){kg(n);var e=n.M;e&&"function"==typeof e.sa&&e.sa(),n.M=null,uh(n.V),ME(n.U),n.g&&(e=n.g,n.g=null,e.abort(),e.sa())}function E0(n,e){try{var t=n.l;if(0!=t.H&&(t.g==n||Vg(t.i,n)))if(!n.K&&Vg(t.i,n)&&3==t.H){try{var r=t.Ja.g.parse(e)}catch{r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!t.u){if(t.g){if(!(t.g.G+3e3<n.G))break e;$g(t),tI(t)}F0(t),ei(18)}}else t.Fa=i[1],0<t.Fa-t.V&&37500>i[2]&&t.G&&0==t.A&&!t.v&&(t.v=lh(Ir(t.ib,t),6e3));if(1>=qE(t.i)&&t.oa){try{t.oa()}catch{}t.oa=void 0}}else rl(t,11)}else if((n.K||t.g==n)&&$g(t),!ih(e))for(i=t.Ja.g.parse(e),e=0;e<i.length;e++){let y=i[e];if(t.V=y[0],y=y[1],2==t.H)if("c"==y[0]){t.K=y[1],t.pa=y[2];const I=y[3];null!=I&&(t.ra=I,t.l.info("VER="+t.ra));const D=y[4];null!=D&&(t.Ga=D,t.l.info("SVER="+t.Ga));const O=y[5];null!=O&&"number"==typeof O&&0<O&&(t.L=r=1.5*O,t.l.info("backChannelRequestTimeoutMs_="+r)),r=t;const L=n.g;if(L){const J=L.g?L.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(J){var a=r.i;a.g||-1==J.indexOf("spdy")&&-1==J.indexOf("quic")&&-1==J.indexOf("h2")||(a.j=a.l,a.g=new Set,a.h&&(WE(a,a.h),a.h=null))}if(r.F){const X=L.g?L.g.getResponseHeader("X-HTTP-Session-Id"):null;X&&(r.Da=X,Xt(r.I,r.F,X))}}t.H=3,t.h&&t.h.Ba(),t.ca&&(t.S=Date.now()-n.G,t.l.info("Handshake RTT: "+t.S+"ms"));var c=n;if((r=t).wa=Jx(r,r.J?r.pa:null,r.Y),c.K){D0(r.i,c);var h=c,p=r.L;p&&h.setTimeout(p),h.B&&(kg(h),Jc(h)),r.g=c}else Wx(r);0<t.j.length&&nI(t)}else"stop"!=y[0]&&"close"!=y[0]||rl(t,7);else 3==t.H&&("stop"==y[0]||"close"==y[0]?"stop"==y[0]?rl(t,7):eI(t):"noop"!=y[0]&&t.h&&t.h.Aa(y),t.A=0)}xg()}catch{}}function w0(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(yg(n)||"string"==typeof n)Array.prototype.forEach.call(n,e,void 0);else for(var t=function Ox(n){if(n.ta&&"function"==typeof n.ta)return n.ta();if(!n.Z||"function"!=typeof n.Z){if(typeof Map<"u"&&n instanceof Map)return Array.from(n.keys());if(!(typeof Set<"u"&&n instanceof Set)){if(yg(n)||"string"==typeof n){var e=[];n=n.length;for(var t=0;t<n;t++)e.push(t);return e}e=[],t=0;for(const r in n)e[t++]=r;return e}}}(n),r=function I0(n){if(n.Z&&"function"==typeof n.Z)return n.Z();if(typeof Map<"u"&&n instanceof Map||typeof Set<"u"&&n instanceof Set)return Array.from(n.values());if("string"==typeof n)return n.split("");if(yg(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),i=r.length,a=0;a<i;a++)e.call(void 0,r[a],t&&t[a],n)}(Oe=fh.prototype).setTimeout=function(n){this.P=n},Oe.nb=function(n){n=n.target;const e=this.M;e&&3==eo(n)?e.l():this.Pa(n)},Oe.Pa=function(n){try{if(n==this.g)e:{const I=eo(this.g);var e=this.g.Ia();if(this.g.da(),!(3>I)&&(3!=I||vE||this.g&&(this.h.h||this.g.ja()||vh(this.g)))){this.J||4!=I||7==e||xg(),kg(this);var t=this.g.da();this.ca=t;t:if(_0(this)){var r=vh(this.g);n="";var i=r.length,a=4==eo(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){Xc(this),Fg(this);var c="";break t}this.h.i=new lt.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:a&&e==i-1});r.splice(0,i),this.h.g+=n,this.C=0,c=this.h.g}else c=this.g.ja();if(this.i=200==t,function l0(n,e,t,r,i,a,c){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+t+"\n"+a+" "+c})}(this.j,this.u,this.A,this.m,this.W,I,t),this.i){if(this.aa&&!this.K){t:{if(this.g){var h,p=this.g;if((h=p.g?p.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!ih(h)){var y=h;break t}}y=null}if(!(t=y)){this.i=!1,this.o=3,ei(12),Xc(this),Fg(this);break e}Yc(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,E0(this,t)}this.S?(y0(this,I,c),vE&&this.i&&3==I&&(Xr(this.U,this.V,"tick",this.mb),this.V.start())):(Yc(this.j,this.m,c,null),E0(this,c)),4==I&&Xc(this),this.i&&!this.J&&(4==I?Yx(this.l,this):(this.i=!1,Jc(this)))}else(function Gx(n){const e={};n=(n.g&&2<=eo(n)&&n.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<n.length;r++){if(ih(n[r]))continue;var t=Sx(n[r]);const i=t[0];if("string"!=typeof(t=t[1]))continue;t=t.trim();const a=e[i]||[];e[i]=a,a.push(t)}!function mk(n,e){for(const t in n)e.call(void 0,n[t],t,n)}(e,function(r){return r.join(", ")})})(this.g),400==t&&0<c.indexOf("Unknown SID")?(this.o=3,ei(12)):(this.o=0,ei(13)),Xc(this),Fg(this)}}}catch{}},Oe.mb=function(){if(this.g){var n=eo(this.g),e=this.g.ja();this.C<e.length&&(kg(this),y0(this,n,e),this.i&&4!=n&&Jc(this))}},Oe.cancel=function(){this.J=!0,Xc(this)},Oe.lb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function OE(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.L&&(xg(),ei(17)),Xc(this),this.o=2,Fg(this)):v0(this,this.Y-n)};var T0=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function el(n){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,n instanceof el){this.h=n.h,UE(this,n.j),this.s=n.s,this.g=n.g,BE(this,n.m),this.l=n.l;var e=n.i,t=new Cu;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),b0(this,t),this.o=n.o}else n&&(e=String(n).match(T0))?(this.h=!1,UE(this,e[1]||"",!0),this.s=ph(e[2]||""),this.g=ph(e[3]||"",!0),BE(this,e[4]),this.l=ph(e[5]||"",!0),b0(this,e[6]||"",!0),this.o=ph(e[7]||"")):(this.h=!1,this.i=new Cu(null,this.h))}function Aa(n){return new el(n)}function UE(n,e,t){n.j=t?ph(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function BE(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function b0(n,e,t){e instanceof Cu?(n.i=e,function Vx(n,e){e&&!n.j&&(Es(n),n.i=null,n.g.forEach(function(t,r){var i=r.toLowerCase();r!=i&&(kx(this,r),Lx(this,i,t))},n)),n.j=e}(n.i,n.h)):(t||(e=tl(e,Nx)),n.i=new Cu(e,n.h))}function Xt(n,e,t){n.i.set(e,t)}function Lg(n){return Xt(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function ph(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function tl(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,bu),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function bu(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}el.prototype.toString=function(){var n=[],e=this.j;e&&n.push(tl(e,jE,!0),":");var t=this.g;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(tl(e,jE,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&n.push("/"),n.push(tl(t,"/"==t.charAt(0)?HE:$E,!0))),(t=this.i.toString())&&n.push("?",t),(t=this.o)&&n.push("#",tl(t,GE)),n.join("")};var jE=/[#\/\?@]/g,$E=/[#\?:]/g,HE=/[#\?]/g,Nx=/[#\?@]/g,GE=/#/g;function Cu(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function Es(n){n.g||(n.g=new Map,n.h=0,n.i&&function vk(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),i=null;if(0<=r){var a=n[t].substring(0,r);i=n[t].substring(r+1)}else a=n[t];e(a,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function kx(n,e){Es(n),e=Du(n,e),n.g.has(e)&&(n.i=null,n.h-=n.g.get(e).length,n.g.delete(e))}function Fx(n,e){return Es(n),e=Du(n,e),n.g.has(e)}function Lx(n,e,t){kx(n,e),0<t.length&&(n.i=null,n.g.set(Du(n,e),rh(t)),n.h+=t.length)}function Du(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function C0(n){this.l=n||Bx,n=lt.PerformanceNavigationTiming?0<(n=lt.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(lt.g&&lt.g.Ka&&lt.g.Ka()&&lt.g.Ka().dc),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(Oe=Cu.prototype).add=function(n,e){Es(this),this.i=null,n=Du(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},Oe.forEach=function(n,e){Es(this),this.g.forEach(function(t,r){t.forEach(function(i){n.call(e,i,r,this)},this)},this)},Oe.ta=function(){Es(this);const n=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let r=0;r<e.length;r++){const i=n[r];for(let a=0;a<i.length;a++)t.push(e[r])}return t},Oe.Z=function(n){Es(this);let e=[];if("string"==typeof n)Fx(this,n)&&(e=e.concat(this.g.get(Du(this,n))));else{n=Array.from(this.g.values());for(let t=0;t<n.length;t++)e=e.concat(n[t])}return e},Oe.set=function(n,e){return Es(this),this.i=null,Fx(this,n=Du(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},Oe.get=function(n,e){return n&&0<(n=this.Z(n)).length?String(n[0]):e},Oe.toString=function(){if(this.i)return this.i;if(!this.g)return"";const n=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var r=e[t];const a=encodeURIComponent(String(r)),c=this.Z(r);for(r=0;r<c.length;r++){var i=a;""!==c[r]&&(i+="="+encodeURIComponent(String(c[r]))),n.push(i)}}return this.i=n.join("&")};var Bx=10;function zE(n){return!!n.h||!!n.g&&n.g.size>=n.j}function qE(n){return n.h?1:n.g?n.g.size:0}function Vg(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function WE(n,e){n.g?n.g.add(e):n.h=e}function D0(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function KE(n){if(null!=n.h)return n.i.concat(n.h.F);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.F);return e}return rh(n.i)}C0.prototype.cancel=function(){if(this.i=KE(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}};var YE=class{stringify(n){return lt.JSON.stringify(n,void 0)}parse(n){return lt.JSON.parse(n,void 0)}};function Ek(){this.g=new YE}function A0(n,e,t){const r=t||"";try{w0(n,function(i,a){let c=i;Eu(i)&&(c=SE(i)),e.push(r+a+"="+encodeURIComponent(c))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function Ug(n,e,t,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function gh(n){this.l=n.ec||null,this.j=n.ob||!1}function ZE(n,e){ur.call(this),this.F=n,this.u=e,this.m=void 0,this.readyState=S0,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Kn(gh,f0),gh.prototype.g=function(){return new ZE(this.l,this.j)},gh.prototype.i=function(n){return function(){return n}}({}),Kn(ZE,ur);var S0=0;function R0(n){n.j.read().then(n.Xa.bind(n)).catch(n.ka.bind(n))}function mh(n){n.readyState=4,n.l=null,n.j=null,n.A=null,_h(n)}function _h(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(Oe=ZE.prototype).open=function(n,e){if(this.readyState!=S0)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,_h(this)},Oe.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.F||lt).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))},Oe.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,mh(this)),this.readyState=S0},Oe.$a=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,_h(this)),this.g&&(this.readyState=3,_h(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof lt.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;R0(this)}else n.text().then(this.Za.bind(this),this.ka.bind(this))},Oe.Xa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?mh(this):_h(this),3==this.readyState&&R0(this)}},Oe.Za=function(n){this.g&&(this.response=this.responseText=n,mh(this))},Oe.Ya=function(n){this.g&&(this.response=n,mh(this))},Oe.ka=function(){this.g&&mh(this)},Oe.setRequestHeader=function(n,e){this.v.append(n,e)},Oe.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},Oe.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(ZE.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var jx=lt.JSON.parse;function bn(n){ur.call(this),this.headers=new Map,this.u=n||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=JE,this.L=this.M=!1}Kn(bn,ur);var JE="",$x=/^https?$/i,P0=["POST","PUT"];function Hx(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,M0(n),yh(n)}function M0(n){n.F||(n.F=!0,wr(n,"complete"),wr(n,"error"))}function Bg(n){if(n.h&&typeof pE<"u"&&(!n.C[1]||4!=eo(n)||2!=n.da()))if(n.v&&4==eo(n))xE(n.La,0,n);else if(wr(n,"readystatechange"),4==eo(n)){n.h=!1;try{const c=n.da();e:switch(c){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===c){var i=String(n.I).match(T0)[1]||null;!i&&lt.self&&lt.self.location&&(i=lt.self.location.protocol.slice(0,-1)),r=!$x.test(i?i.toLowerCase():"")}t=r}if(t)wr(n,"complete"),wr(n,"success");else{n.m=6;try{var a=2<eo(n)?n.g.statusText:""}catch{a=""}n.j=a+" ["+n.da()+"]",M0(n)}}finally{yh(n)}}}function yh(n,e){if(n.g){XE(n);const t=n.g,r=n.C[0]?()=>{}:null;n.g=null,n.C=null,e||wr(n,"ready");try{t.onreadystatechange=r}catch{}}}function XE(n){n.g&&n.L&&(n.g.ontimeout=null),n.A&&(lt.clearTimeout(n.A),n.A=null)}function eo(n){return n.g?n.g.readyState:0}function vh(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.K){case JE:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function O0(n){let e="";return n0(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}function jg(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=O0(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):Xt(n,e,t))}function nl(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function zx(n){this.Ga=0,this.j=[],this.l=new ch,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=nl("failFast",!1,n),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=nl("baseRetryDelayMs",5e3,n),this.hb=nl("retryDelaySeedMs",1e4,n),this.eb=nl("forwardChannelMaxRetries",2,n),this.xa=nl("forwardChannelRequestTimeoutMs",2e4,n),this.va=n&&n.xmlHttpFactory||void 0,this.Ha=n&&n.useFetchStreams||!1,this.L=void 0,this.J=n&&n.supportsCrossDomainXhr||!1,this.K="",this.i=new C0(n&&n.concurrentRequestLimit),this.Ja=new Ek,this.P=n&&n.fastHandshake||!1,this.O=n&&n.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=n&&n.bc||!1,n&&n.Ea&&this.l.Ea(),n&&n.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&n&&n.detectBufferingProxy||!1,this.qa=void 0,n&&n.longPollingTimeout&&0<n.longPollingTimeout&&(this.qa=n.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function eI(n){if(N0(n),3==n.H){var e=n.W++,t=Aa(n.I);if(Xt(t,"SID",n.K),Xt(t,"RID",e),Xt(t,"TYPE","terminate"),Eh(n,t),(e=new fh(n,n.l,e)).L=2,e.v=Lg(Aa(t)),t=!1,lt.navigator&&lt.navigator.sendBeacon)try{t=lt.navigator.sendBeacon(e.v.toString(),"")}catch{}!t&&lt.Image&&((new Image).src=e.v,t=!0),t||(e.g=V0(e.l,null),e.g.ha(e.v)),e.G=Date.now(),Jc(e)}Zx(n)}function tI(n){n.g&&(L0(n),n.g.cancel(),n.g=null)}function N0(n){tI(n),n.u&&(lt.clearTimeout(n.u),n.u=null),$g(n),n.i.cancel(),n.m&&("number"==typeof n.m&&lt.clearTimeout(n.m),n.m=null)}function nI(n){if(!zE(n.i)&&!n.m){n.m=!0;var e=n.Na;sh||a0(),oh||(sh(),oh=!0),PE.add(e,n),n.C=0}}function k0(n,e){var t;t=e?e.m:n.W++;const r=Aa(n.I);Xt(r,"SID",n.K),Xt(r,"RID",t),Xt(r,"AID",n.V),Eh(n,r),n.o&&n.s&&jg(r,n.o,n.s),t=new fh(n,n.l,t,n.C+1),null===n.o&&(t.I=n.s),e&&(n.j=e.F.concat(n.j)),e=qx(n,t,1e3),t.setTimeout(Math.round(.5*n.xa)+Math.round(.5*n.xa*Math.random())),WE(n.i,t),Ng(t,r,e)}function Eh(n,e){n.na&&n0(n.na,function(t,r){Xt(e,r,t)}),n.h&&w0({},function(t,r){Xt(e,r,t)})}function qx(n,e,t){t=Math.min(n.j.length,t);var r=n.h?Ir(n.h.Va,n.h,n):null;e:{var i=n.j;let a=-1;for(;;){const c=["count="+t];-1==a?0<t?(a=i[0].g,c.push("ofs="+a)):a=0:c.push("ofs="+a);let h=!0;for(let p=0;p<t;p++){let y=i[p].g;const I=i[p].map;if(y-=a,0>y)a=Math.max(0,i[p].g-100),h=!1;else try{A0(I,c,"req"+y+"_")}catch{r&&r(I)}}if(h){r=c.join("&");break e}}}return n=n.j.splice(0,t),e.F=n,r}function Wx(n){if(!n.g&&!n.u){n.ba=1;var e=n.Ma;sh||a0(),oh||(sh(),oh=!0),PE.add(e,n),n.A=0}}function F0(n){return!(n.g||n.u||3<=n.A||(n.ba++,n.u=lh(Ir(n.Ma,n),Qx(n,n.A)),n.A++,0))}function L0(n){null!=n.B&&(lt.clearTimeout(n.B),n.B=null)}function Kx(n){n.g=new fh(n,n.l,"rpc",n.ba),null===n.o&&(n.g.I=n.s),n.g.O=0;var e=Aa(n.wa);Xt(e,"RID","rpc"),Xt(e,"SID",n.K),Xt(e,"AID",n.V),Xt(e,"CI",n.G?"0":"1"),!n.G&&n.qa&&Xt(e,"TO",n.qa),Xt(e,"TYPE","xmlhttp"),Eh(n,e),n.o&&n.s&&jg(e,n.o,n.s),n.L&&n.g.setTimeout(n.L);var t=n.g;n=n.pa,t.L=1,t.v=Lg(Aa(e)),t.s=null,t.S=!0,VE(t,n)}function $g(n){null!=n.v&&(lt.clearTimeout(n.v),n.v=null)}function Yx(n,e){var t=null;if(n.g==e){$g(n),L0(n),n.g=null;var r=2}else{if(!Vg(n.i,e))return;t=e.F,D0(n.i,e),r=1}if(0!=n.H)if(e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.G;var i=n.C;wr(r=Qc(),new h0(r,t)),nI(n)}else Wx(n);else if(3==(i=e.o)||0==i&&0<e.ca||!(1==r&&function Ik(n,e){return!(qE(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.j=e.F.concat(n.j),0):1==n.H||2==n.H||n.C>=(n.cb?0:n.eb)||(n.m=lh(Ir(n.Na,n,e),Qx(n,n.C)),n.C++,0)))}(n,e)||2==r&&F0(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),i){case 1:rl(n,5);break;case 4:rl(n,10);break;case 3:rl(n,6);break;default:rl(n,2)}}function Qx(n,e){let t=n.ab+Math.floor(Math.random()*n.hb);return n.isActive()||(t*=2),t*e}function rl(n,e){if(n.l.info("Error code "+e),2==e){var t=null;n.h&&(t=null);var r=Ir(n.pb,n);t||(t=new el("//www.google.com/images/cleardot.gif"),lt.location&&"http"==lt.location.protocol||UE(t,"https"),Lg(t)),function QE(n,e){const t=new ch;if(lt.Image){const r=new Image;r.onload=Eg(Ug,t,r,"TestLoadImage: loaded",!0,e),r.onerror=Eg(Ug,t,r,"TestLoadImage: error",!1,e),r.onabort=Eg(Ug,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=Eg(Ug,t,r,"TestLoadImage: timeout",!1,e),lt.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else ei(2);n.H=0,n.h&&n.h.za(e),Zx(n),N0(n)}function Zx(n){if(n.H=0,n.ma=[],n.h){const e=KE(n.i);(0!=e.length||0!=n.j.length)&&(yx(n.ma,e),yx(n.ma,n.j),n.i.i.length=0,rh(n.j),n.j.length=0),n.h.ya()}}function Jx(n,e,t){var r=t instanceof el?Aa(t):new el(t);if(""!=r.g)e&&(r.g=e+"."+r.g),BE(r,r.m);else{var i=lt.location;r=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var a=new el(null);r&&UE(a,r),e&&(a.g=e),i&&BE(a,i),t&&(a.l=t),r=a}return e=n.Da,(t=n.F)&&e&&Xt(r,t,e),Xt(r,"VER",n.ra),Eh(n,r),r}function V0(n,e,t){if(e&&!n.J)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new bn(t&&n.Ha&&!n.va?new gh({ob:!0}):n.va)).Oa(n.J),e}function Xx(){}function s(){if(Iu&&!(10<=Number(hk)))throw Error("Environmental error: no available transport.")}function o(n,e){ur.call(this),this.g=new zx(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(n?n["X-WebChannel-Client-Profile"]=e.Ca:n={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=n,(n=e&&e.cc)&&!ih(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!ih(e)&&(this.g.F=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new d(this)}function u(n){g0.call(this),n.__headers__&&(this.headers=n.__headers__,this.statusCode=n.__status__,delete n.__headers__,delete n.__status__);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function l(){dh.call(this),this.status=1}function d(n){this.g=n}function m(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function _(n,e,t){t||(t=0);var r=Array(16);if("string"==typeof e)for(var i=0;16>i;++i)r[i]=e.charCodeAt(t++)|e.charCodeAt(t++)<<8|e.charCodeAt(t++)<<16|e.charCodeAt(t++)<<24;else for(i=0;16>i;++i)r[i]=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;var a=n.g[3],c=(e=n.g[0])+(a^(t=n.g[1])&((i=n.g[2])^a))+r[0]+3614090360&4294967295;c=(t=(i=(a=(e=(t=(i=(a=(e=(t=(i=(a=(e=(t=(i=(a=(e=(t=(i=(a=(e=(t=(i=(a=(e=(t=(i=(a=(e=(t=(i=(a=(e=(t=(i=(a=(e=(t=(i=(a=(e=(t=(i=(a=(e=(t=(i=(a=(e=(t=(i=(a=(e=(t=(i=(a=(e=(t=(i=(a=(e=t+(c<<7&4294967295|c>>>25))+((c=a+(i^e&(t^i))+r[1]+3905402710&4294967295)<<12&4294967295|c>>>20))+((c=i+(t^a&(e^t))+r[2]+606105819&4294967295)<<17&4294967295|c>>>15))+((c=t+(e^i&(a^e))+r[3]+3250441966&4294967295)<<22&4294967295|c>>>10))+((c=e+(a^t&(i^a))+r[4]+4118548399&4294967295)<<7&4294967295|c>>>25))+((c=a+(i^e&(t^i))+r[5]+1200080426&4294967295)<<12&4294967295|c>>>20))+((c=i+(t^a&(e^t))+r[6]+2821735955&4294967295)<<17&4294967295|c>>>15))+((c=t+(e^i&(a^e))+r[7]+4249261313&4294967295)<<22&4294967295|c>>>10))+((c=e+(a^t&(i^a))+r[8]+1770035416&4294967295)<<7&4294967295|c>>>25))+((c=a+(i^e&(t^i))+r[9]+2336552879&4294967295)<<12&4294967295|c>>>20))+((c=i+(t^a&(e^t))+r[10]+4294925233&4294967295)<<17&4294967295|c>>>15))+((c=t+(e^i&(a^e))+r[11]+2304563134&4294967295)<<22&4294967295|c>>>10))+((c=e+(a^t&(i^a))+r[12]+1804603682&4294967295)<<7&4294967295|c>>>25))+((c=a+(i^e&(t^i))+r[13]+4254626195&4294967295)<<12&4294967295|c>>>20))+((c=i+(t^a&(e^t))+r[14]+2792965006&4294967295)<<17&4294967295|c>>>15))+((c=t+(e^i&(a^e))+r[15]+1236535329&4294967295)<<22&4294967295|c>>>10))+((c=e+(i^a&(t^i))+r[1]+4129170786&4294967295)<<5&4294967295|c>>>27))+((c=a+(t^i&(e^t))+r[6]+3225465664&4294967295)<<9&4294967295|c>>>23))+((c=i+(e^t&(a^e))+r[11]+643717713&4294967295)<<14&4294967295|c>>>18))+((c=t+(a^e&(i^a))+r[0]+3921069994&4294967295)<<20&4294967295|c>>>12))+((c=e+(i^a&(t^i))+r[5]+3593408605&4294967295)<<5&4294967295|c>>>27))+((c=a+(t^i&(e^t))+r[10]+38016083&4294967295)<<9&4294967295|c>>>23))+((c=i+(e^t&(a^e))+r[15]+3634488961&4294967295)<<14&4294967295|c>>>18))+((c=t+(a^e&(i^a))+r[4]+3889429448&4294967295)<<20&4294967295|c>>>12))+((c=e+(i^a&(t^i))+r[9]+568446438&4294967295)<<5&4294967295|c>>>27))+((c=a+(t^i&(e^t))+r[14]+3275163606&4294967295)<<9&4294967295|c>>>23))+((c=i+(e^t&(a^e))+r[3]+4107603335&4294967295)<<14&4294967295|c>>>18))+((c=t+(a^e&(i^a))+r[8]+1163531501&4294967295)<<20&4294967295|c>>>12))+((c=e+(i^a&(t^i))+r[13]+2850285829&4294967295)<<5&4294967295|c>>>27))+((c=a+(t^i&(e^t))+r[2]+4243563512&4294967295)<<9&4294967295|c>>>23))+((c=i+(e^t&(a^e))+r[7]+1735328473&4294967295)<<14&4294967295|c>>>18))+((c=t+(a^e&(i^a))+r[12]+2368359562&4294967295)<<20&4294967295|c>>>12))+((c=e+(t^i^a)+r[5]+4294588738&4294967295)<<4&4294967295|c>>>28))+((c=a+(e^t^i)+r[8]+2272392833&4294967295)<<11&4294967295|c>>>21))+((c=i+(a^e^t)+r[11]+1839030562&4294967295)<<16&4294967295|c>>>16))+((c=t+(i^a^e)+r[14]+4259657740&4294967295)<<23&4294967295|c>>>9))+((c=e+(t^i^a)+r[1]+2763975236&4294967295)<<4&4294967295|c>>>28))+((c=a+(e^t^i)+r[4]+1272893353&4294967295)<<11&4294967295|c>>>21))+((c=i+(a^e^t)+r[7]+4139469664&4294967295)<<16&4294967295|c>>>16))+((c=t+(i^a^e)+r[10]+3200236656&4294967295)<<23&4294967295|c>>>9))+((c=e+(t^i^a)+r[13]+681279174&4294967295)<<4&4294967295|c>>>28))+((c=a+(e^t^i)+r[0]+3936430074&4294967295)<<11&4294967295|c>>>21))+((c=i+(a^e^t)+r[3]+3572445317&4294967295)<<16&4294967295|c>>>16))+((c=t+(i^a^e)+r[6]+76029189&4294967295)<<23&4294967295|c>>>9))+((c=e+(t^i^a)+r[9]+3654602809&4294967295)<<4&4294967295|c>>>28))+((c=a+(e^t^i)+r[12]+3873151461&4294967295)<<11&4294967295|c>>>21))+((c=i+(a^e^t)+r[15]+530742520&4294967295)<<16&4294967295|c>>>16))+((c=t+(i^a^e)+r[2]+3299628645&4294967295)<<23&4294967295|c>>>9))+((c=e+(i^(t|~a))+r[0]+4096336452&4294967295)<<6&4294967295|c>>>26))+((c=a+(t^(e|~i))+r[7]+1126891415&4294967295)<<10&4294967295|c>>>22))+((c=i+(e^(a|~t))+r[14]+2878612391&4294967295)<<15&4294967295|c>>>17))+((c=t+(a^(i|~e))+r[5]+4237533241&4294967295)<<21&4294967295|c>>>11))+((c=e+(i^(t|~a))+r[12]+1700485571&4294967295)<<6&4294967295|c>>>26))+((c=a+(t^(e|~i))+r[3]+2399980690&4294967295)<<10&4294967295|c>>>22))+((c=i+(e^(a|~t))+r[10]+4293915773&4294967295)<<15&4294967295|c>>>17))+((c=t+(a^(i|~e))+r[1]+2240044497&4294967295)<<21&4294967295|c>>>11))+((c=e+(i^(t|~a))+r[8]+1873313359&4294967295)<<6&4294967295|c>>>26))+((c=a+(t^(e|~i))+r[15]+4264355552&4294967295)<<10&4294967295|c>>>22))+((c=i+(e^(a|~t))+r[6]+2734768916&4294967295)<<15&4294967295|c>>>17))+((c=t+(a^(i|~e))+r[13]+1309151649&4294967295)<<21&4294967295|c>>>11))+((a=(e=t+((c=e+(i^(t|~a))+r[4]+4149444226&4294967295)<<6&4294967295|c>>>26))+((c=a+(t^(e|~i))+r[11]+3174756917&4294967295)<<10&4294967295|c>>>22))^((i=a+((c=i+(e^(a|~t))+r[2]+718787259&4294967295)<<15&4294967295|c>>>17))|~e))+r[9]+3951481745&4294967295,n.g[0]=n.g[0]+e&4294967295,n.g[1]=n.g[1]+(i+(c<<21&4294967295|c>>>11))&4294967295,n.g[2]=n.g[2]+i&4294967295,n.g[3]=n.g[3]+a&4294967295}function E(n,e){this.h=e;for(var t=[],r=!0,i=n.length-1;0<=i;i--){var a=0|n[i];r&&a==e||(t[i]=a,r=!1)}this.g=t}(Oe=bn.prototype).Oa=function(n){this.M=n},Oe.ha=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+n);e=e?e.toUpperCase():"GET",this.I=n,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():Og.g(),this.C=function FE(n){return n.h||(n.h=n.i())}(this.u?this.u:Og),this.g.onreadystatechange=Ir(this.La,this);try{this.G=!0,this.g.open(e,String(n),!0),this.G=!1}catch(a){return void Hx(this,a)}if(n=t||"",t=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)t.set(i,r[i]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const a of r.keys())t.set(a,r.get(a))}r=Array.from(t.keys()).find(a=>"content-type"==a.toLowerCase()),i=lt.FormData&&n instanceof lt.FormData,!(0<=_E(P0,e))||r||i||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[a,c]of t)this.g.setRequestHeader(a,c);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{XE(this),0<this.B&&((this.L=function x0(n){return Iu&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Ir(this.ua,this)):this.A=xE(this.ua,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(a){Hx(this,a)}},Oe.ua=function(){typeof pE<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,wr(this,"timeout"),this.abort(8))},Oe.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,wr(this,"complete"),wr(this,"abort"),yh(this))},Oe.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),yh(this,!0)),bn.$.N.call(this)},Oe.La=function(){this.s||(this.G||this.v||this.l?Bg(this):this.kb())},Oe.kb=function(){Bg(this)},Oe.isActive=function(){return!!this.g},Oe.da=function(){try{return 2<eo(this)?this.g.status:-1}catch{return-1}},Oe.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}},Oe.Wa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),jx(e)}},Oe.Ia=function(){return this.m},Oe.Sa=function(){return"string"==typeof this.j?this.j:String(this.j)},(Oe=zx.prototype).ra=8,Oe.H=1,Oe.Na=function(n){if(this.m)if(this.m=null,1==this.H){if(!n){this.W=Math.floor(1e5*Math.random()),n=this.W++;const i=new fh(this,this.l,n);let a=this.s;if(this.U&&(a?(a=Ex(a),wE(a,this.U)):a=this.U),null!==this.o||this.O||(i.I=a,a=null),this.P)e:{for(var e=0,t=0;t<this.j.length;t++){var r=this.j[t];if(void 0===(r="__data__"in r.map&&"string"==typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.j.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=qx(this,i,e),Xt(t=Aa(this.I),"RID",n),Xt(t,"CVER",22),this.F&&Xt(t,"X-HTTP-Session-Id",this.F),Eh(this,t),a&&(this.O?e="headers="+encodeURIComponent(String(O0(a)))+"&"+e:this.o&&jg(t,this.o,a)),WE(this.i,i),this.bb&&Xt(t,"TYPE","init"),this.P?(Xt(t,"$req",e),Xt(t,"SID","null"),i.aa=!0,Ng(i,t,null)):Ng(i,t,e),this.H=2}}else 3==this.H&&(n?k0(this,n):0==this.j.length||zE(this.i)||k0(this))},Oe.Ma=function(){if(this.u=null,Kx(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var n=2*this.S;this.l.info("BP detection timer enabled: "+n),this.B=lh(Ir(this.jb,this),n)}},Oe.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,ei(10),tI(this),Kx(this))},Oe.ib=function(){null!=this.v&&(this.v=null,tI(this),F0(this),ei(19))},Oe.pb=function(n){n?(this.l.info("Successfully pinged google.com"),ei(2)):(this.l.info("Failed to ping google.com"),ei(1))},Oe.isActive=function(){return!!this.h&&this.h.isActive(this)},(Oe=Xx.prototype).Ba=function(){},Oe.Aa=function(){},Oe.za=function(){},Oe.ya=function(){},Oe.isActive=function(){return!0},Oe.Va=function(){},s.prototype.g=function(n,e){return new o(n,e)},Kn(o,ur),o.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var n=this.g,e=this.l,t=this.h||void 0;ei(0),n.Y=e,n.na=t||{},n.G=n.aa,n.I=Jx(n,null,n.Y),nI(n)},o.prototype.close=function(){eI(this.g)},o.prototype.u=function(n){var e=this.g;if("string"==typeof n){var t={};t.__data__=n,n=t}else this.v&&((t={}).__data__=SE(n),n=t);e.j.push(new class{constructor(n,e){this.g=n,this.map=e}}(e.fb++,n)),3==e.H&&nI(e)},o.prototype.N=function(){this.g.h=null,delete this.j,eI(this.g),delete this.g,o.$.N.call(this)},Kn(u,g0),Kn(l,dh),Kn(d,Xx),d.prototype.Ba=function(){wr(this.g,"a")},d.prototype.Aa=function(n){wr(this.g,new u(n))},d.prototype.za=function(n){wr(this.g,new l)},d.prototype.ya=function(){wr(this.g,"b")},Kn(m,function f(){this.blockSize=-1}),m.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},m.prototype.j=function(n,e){void 0===e&&(e=n.length);for(var t=e-this.blockSize,r=this.m,i=this.h,a=0;a<e;){if(0==i)for(;a<=t;)_(this,n,a),a+=this.blockSize;if("string"==typeof n){for(;a<e;)if(r[i++]=n.charCodeAt(a++),i==this.blockSize){_(this,r),i=0;break}}else for(;a<e;)if(r[i++]=n[a++],i==this.blockSize){_(this,r),i=0;break}}this.h=i,this.i+=e},m.prototype.l=function(){var n=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);n[0]=128;for(var e=1;e<n.length-8;++e)n[e]=0;var t=8*this.i;for(e=n.length-8;e<n.length;++e)n[e]=255&t,t/=256;for(this.j(n),n=Array(16),e=t=0;4>e;++e)for(var r=0;32>r;r+=8)n[t++]=this.g[e]>>>r&255;return n};var C={};function x(n){return-128<=n&&128>n?function ZC(n,e){var t=C;return Object.prototype.hasOwnProperty.call(t,n)?t[n]:t[n]=e(n)}(n,function(e){return new E([0|e],0>e?-1:0)}):new E([0|n],0>n?-1:0)}function N(n){if(isNaN(n)||!isFinite(n))return Z;if(0>n)return He(N(-n));for(var e=[],t=1,r=0;n>=t;r++)e[r]=n/t|0,t*=j;return new E(e,0)}var j=4294967296,Z=x(0),ge=x(1),Pe=x(16777216);function Ue(n){if(0!=n.h)return!1;for(var e=0;e<n.g.length;e++)if(0!=n.g[e])return!1;return!0}function re(n){return-1==n.h}function He(n){for(var e=n.g.length,t=[],r=0;r<e;r++)t[r]=~n.g[r];return new E(t,~n.h).add(ge)}function gt(n,e){return n.add(He(e))}function Ft(n,e){for(;(65535&n[e])!=n[e];)n[e+1]+=n[e]>>>16,n[e]&=65535,e++}function cr(n,e){this.g=n,this.h=e}function Zi(n,e){if(Ue(e))throw Error("division by zero");if(Ue(n))return new cr(Z,Z);if(re(n))return e=Zi(He(n),e),new cr(He(e.g),He(e.h));if(re(e))return e=Zi(n,He(e)),new cr(He(e.g),e.h);if(30<n.g.length){if(re(n)||re(e))throw Error("slowDivide_ only works with positive integers.");for(var t=ge,r=e;0>=r.X(n);)t=Au(t),r=Au(r);var i=Sa(t,1),a=Sa(r,1);for(r=Sa(r,2),t=Sa(t,2);!Ue(r);){var c=a.add(r);0>=c.X(n)&&(i=i.add(t),a=c),r=Sa(r,1),t=Sa(t,1)}return e=gt(n,i.R(e)),new cr(i,e)}for(i=Z;0<=n.X(e);){for(t=Math.max(1,Math.floor(n.ea()/e.ea())),r=48>=(r=Math.ceil(Math.log(t)/Math.LN2))?1:Math.pow(2,r-48),c=(a=N(t)).R(e);re(c)||0<c.X(n);)c=(a=N(t-=r)).R(e);Ue(a)&&(a=ge),i=i.add(a),n=gt(n,c)}return new cr(i,n)}function Au(n){for(var e=n.g.length+1,t=[],r=0;r<e;r++)t[r]=n.D(r)<<1|n.D(r-1)>>>31;return new E(t,n.h)}function Sa(n,e){var t=e>>5;e%=32;for(var r=n.g.length-t,i=[],a=0;a<r;a++)i[a]=0<e?n.D(a+t)>>>e|n.D(a+t+1)<<32-e:n.D(a+t);return new E(i,n.h)}(Oe=E.prototype).ea=function(){if(re(this))return-He(this).ea();for(var n=0,e=1,t=0;t<this.g.length;t++){var r=this.D(t);n+=(0<=r?r:j+r)*e,e*=j}return n},Oe.toString=function(n){if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if(Ue(this))return"0";if(re(this))return"-"+He(this).toString(n);for(var e=N(Math.pow(n,6)),t=this,r="";;){var i=Zi(t,e).g,a=((0<(t=gt(t,i.R(e))).g.length?t.g[0]:t.h)>>>0).toString(n);if(Ue(t=i))return a+r;for(;6>a.length;)a="0"+a;r=a+r}},Oe.D=function(n){return 0>n?0:n<this.g.length?this.g[n]:this.h},Oe.X=function(n){return re(n=gt(this,n))?-1:Ue(n)?0:1},Oe.abs=function(){return re(this)?He(this):this},Oe.add=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0,i=0;i<=e;i++){var a=r+(65535&this.D(i))+(65535&n.D(i)),c=(a>>>16)+(this.D(i)>>>16)+(n.D(i)>>>16);r=c>>>16,t[i]=(c&=65535)<<16|(a&=65535)}return new E(t,-2147483648&t[t.length-1]?-1:0)},Oe.R=function(n){if(Ue(this)||Ue(n))return Z;if(re(this))return re(n)?He(this).R(He(n)):He(He(this).R(n));if(re(n))return He(this.R(He(n)));if(0>this.X(Pe)&&0>n.X(Pe))return N(this.ea()*n.ea());for(var e=this.g.length+n.g.length,t=[],r=0;r<2*e;r++)t[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<n.g.length;i++){var a=this.D(r)>>>16,c=65535&this.D(r),h=n.D(i)>>>16,p=65535&n.D(i);t[2*r+2*i]+=c*p,Ft(t,2*r+2*i),t[2*r+2*i+1]+=a*p,Ft(t,2*r+2*i+1),t[2*r+2*i+1]+=c*h,Ft(t,2*r+2*i+1),t[2*r+2*i+2]+=a*h,Ft(t,2*r+2*i+2)}for(r=0;r<e;r++)t[r]=t[2*r+1]<<16|t[2*r];for(r=e;r<2*e;r++)t[r]=0;return new E(t,0)},Oe.gb=function(n){return Zi(this,n).h},Oe.and=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)&n.D(r);return new E(t,this.h&n.h)},Oe.or=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)|n.D(r);return new E(t,this.h|n.h)},Oe.xor=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)^n.D(r);return new E(t,this.h^n.h)},s.prototype.createWebChannel=s.prototype.g,o.prototype.send=o.prototype.u,o.prototype.open=o.prototype.m,o.prototype.close=o.prototype.close,Mg.NO_ERROR=0,Mg.TIMEOUT=8,Mg.HTTP_ERROR=6,kE.COMPLETE="complete",p0.EventType=Zc,Zc.OPEN="a",Zc.CLOSE="b",Zc.ERROR="c",Zc.MESSAGE="d",ur.prototype.listen=ur.prototype.O,bn.prototype.listenOnce=bn.prototype.P,bn.prototype.getLastError=bn.prototype.Sa,bn.prototype.getLastErrorCode=bn.prototype.Ia,bn.prototype.getStatus=bn.prototype.da,bn.prototype.getResponseJson=bn.prototype.Wa,bn.prototype.getResponseText=bn.prototype.ja,bn.prototype.send=bn.prototype.ha,bn.prototype.setWithCredentials=bn.prototype.Oa,m.prototype.digest=m.prototype.l,m.prototype.reset=m.prototype.reset,m.prototype.update=m.prototype.j,E.prototype.add=E.prototype.add,E.prototype.multiply=E.prototype.R,E.prototype.modulo=E.prototype.gb,E.prototype.compare=E.prototype.X,E.prototype.toNumber=E.prototype.ea,E.prototype.toString=E.prototype.toString,E.prototype.getBits=E.prototype.D,E.fromNumber=N,E.fromString=function B(n,e){if(0==n.length)throw Error("number format error: empty string");if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if("-"==n.charAt(0))return He(B(n.substring(1),e));if(0<=n.indexOf("-"))throw Error('number format error: interior "-" character');for(var t=N(Math.pow(e,8)),r=Z,i=0;i<n.length;i+=8){var a=Math.min(8,n.length-i),c=parseInt(n.substring(i,i+a),e);8>a?(a=N(Math.pow(e,a)),r=r.R(a).add(N(c))):r=(r=r.R(t)).add(N(c))}return r};var eM=vs.createWebChannelTransport=function(){return new s},tM=vs.getStatEventTarget=function(){return Qc()},nM=vs.ErrorCode=Mg,UU=vs.EventType=kE,BU=vs.Event=Ca,wk=vs.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},U0=(vs.FetchXmlHttpFactory=gh,vs.WebChannel=p0),jU=vs.XhrIo=bn,$U=vs.Md5=m,Hg=vs.Integer=E;const Tk="@firebase/firestore";class Fr{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Fr.UNAUTHENTICATED=new Fr(null),Fr.GOOGLE_CREDENTIALS=new Fr("google-credentials-uid"),Fr.FIRST_PARTY=new Fr("first-party-uid"),Fr.MOCK_USER=new Fr("mock-user");let Gg="10.4.0";const il=new yr("@firebase/firestore");function zg(){return il.logLevel}function pe(n,...e){if(il.logLevel<=Pt.DEBUG){const t=e.map(rM);il.debug(`Firestore (${Gg}): ${n}`,...t)}}function Yn(n,...e){if(il.logLevel<=Pt.ERROR){const t=e.map(rM);il.error(`Firestore (${Gg}): ${n}`,...t)}}function Is(n,...e){if(il.logLevel<=Pt.WARN){const t=e.map(rM);il.warn(`Firestore (${Gg}): ${n}`,...t)}}function rM(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function Be(n="Unexpected state"){const e=`FIRESTORE (${Gg}) INTERNAL ASSERTION FAILED: `+n;throw Yn(e),new Error(e)}function Ke(n,e){n||Be()}function xe(n,e){return n}const q={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class fe extends gi{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Tr{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class bk{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class HU{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Fr.UNAUTHENTICATED))}shutdown(){}}class GU{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class zU{constructor(e){this.t=e,this.currentUser=Fr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let i=this.i;const a=y=>this.i!==i?(i=this.i,t(y)):Promise.resolve();let c=new Tr;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new Tr,e.enqueueRetryable(()=>a(this.currentUser))};const h=()=>{const y=c;e.enqueueRetryable(F(function*(){yield y.promise,yield a(r.currentUser)}))},p=y=>{pe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=y,this.auth.addAuthTokenListener(this.o),h()};this.t.onInit(y=>p(y)),setTimeout(()=>{if(!this.auth){const y=this.t.getImmediate({optional:!0});y?p(y):(pe("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new Tr)}},0),h()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(pe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ke("string"==typeof r.accessToken),new bk(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Ke(null===e||"string"==typeof e),new Fr(e)}}class qU{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=Fr.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class WU{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new qU(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(Fr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Ck{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class KU{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){const r=a=>{null!=a.error&&pe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const c=a.token!==this.R;return this.R=a.token,pe("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable(()=>r(a))};const i=a=>{pe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.appCheck.addTokenListener(this.o)};this.A.onInit(a=>i(a)),setTimeout(()=>{if(!this.appCheck){const a=this.A.getImmediate({optional:!0});a?i(a):pe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Ke("string"==typeof t.token),this.R=t.token,new Ck(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function YU(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class Dk{static V(){const t=62*Math.floor(256/62);let r="";for(;r.length<20;){const i=YU(40);for(let a=0;a<i.length;++a)r.length<20&&i[a]<t&&(r+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(i[a]%62))}return r}}function ht(n,e){return n<e?-1:n>e?1:0}function qg(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}class Nn{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new fe(q.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new fe(q.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new fe(q.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new fe(q.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Nn.fromMillis(Date.now())}static fromDate(e){return Nn.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new Nn(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?ht(this.nanoseconds,e.nanoseconds):ht(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Ye{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Ye(e)}static min(){return new Ye(new Nn(0,0))}static max(){return new Ye(new Nn(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class rI{constructor(e,t,r){void 0===t?t=0:t>e.length&&Be(),void 0===r?r=e.length-t:r>e.length-t&&Be(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===rI.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof rI?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const a=e.get(i),c=t.get(i);if(a<c)return-1;if(a>c)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Lt extends rI{construct(e,t,r){return new Lt(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new fe(q.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new Lt(t)}static emptyPath(){return new Lt([])}}const QU=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Bn extends rI{construct(e,t,r){return new Bn(e,t,r)}static isValidIdentifier(e){return QU.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Bn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Bn(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const a=()=>{if(0===r.length)throw new fe(q.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let c=!1;for(;i<e.length;){const h=e[i];if("\\"===h){if(i+1===e.length)throw new fe(q.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const p=e[i+1];if("\\"!==p&&"."!==p&&"`"!==p)throw new fe(q.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=p,i+=2}else"`"===h?(c=!c,i++):"."!==h||c?(r+=h,i++):(a(),i++)}if(a(),c)throw new fe(q.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Bn(t)}static emptyPath(){return new Bn([])}}class Ne{constructor(e){this.path=e}static fromPath(e){return new Ne(Lt.fromString(e))}static fromName(e){return new Ne(Lt.fromString(e).popFirst(5))}static empty(){return new Ne(Lt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Lt.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Lt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ne(new Lt(e.slice()))}}function Rk(n){return new ws(n.readTime,n.key,-1)}class ws{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new ws(Ye.min(),Ne.empty(),-1)}static max(){return new ws(Ye.max(),Ne.empty(),-1)}}function sM(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=Ne.comparator(n.documentKey,e.documentKey),0!==t?t:ht(n.largestBatchId,e.largestBatchId))}const Pk="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class XU{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function sl(n){return oM.apply(this,arguments)}function oM(){return oM=F(function*(n){if(n.code!==q.FAILED_PRECONDITION||n.message!==Pk)throw n;pe("LocalStore","Unexpectedly lost primary lease")}),oM.apply(this,arguments)}class ${constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Be(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new $((r,i)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(r,i)},this.catchCallback=a=>{this.wrapFailure(t,a).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof $?t:$.resolve(t)}catch(t){return $.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):$.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):$.reject(t)}static resolve(e){return new $((t,r)=>{t(e)})}static reject(e){return new $((t,r)=>{r(e)})}static waitFor(e){return new $((t,r)=>{let i=0,a=0,c=!1;e.forEach(h=>{++i,h.next(()=>{++a,c&&a===i&&t()},p=>r(p))}),c=!0,a===i&&t()})}static or(e){let t=$.resolve(!1);for(const r of e)t=t.next(i=>i?$.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,a)=>{r.push(t.call(this,i,a))}),this.waitFor(r)}static mapArray(e,t){return new $((r,i)=>{const a=e.length,c=new Array(a);let h=0;for(let p=0;p<a;p++){const y=p;t(e[y]).next(I=>{c[y]=I,++h,h===a&&r(c)},I=>i(I))}})}static doWhile(e,t){return new $((r,i)=>{const a=()=>{!0===e()?t().next(()=>{a()},i):r()};a()})}}function ol(n){return"IndexedDbTransactionError"===n.name}let Ts=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.oe(i),this._e=i=>r.writeSequenceNumber(i))}oe(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this._e&&this._e(t),t}}return n.ae=-1,n})();function sI(n){return null==n}function oI(n){return 0===n&&1/n==-1/0}function Uk(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function al(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function Bk(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class mn{constructor(e,t){this.comparator=e,this.root=t||ti.EMPTY}insert(e,t){return new mn(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,ti.BLACK,null,null))}remove(e){return new mn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ti.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new $0(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new $0(this.root,e,this.comparator,!1)}getReverseIterator(){return new $0(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new $0(this.root,e,this.comparator,!0)}}class $0{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=t?r(e.key,t):1,t&&i&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(0===a){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ti{constructor(e,t,r,i,a){this.key=e,this.value=t,this.color=r??ti.RED,this.left=i??ti.EMPTY,this.right=a??ti.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,a){return new ti(e??this.key,t??this.value,r??this.color,i??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const a=r(e,i.key);return i=a<0?i.copy(null,null,null,i.left.insert(e,t,r),null):0===a?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return ti.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return ti.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ti.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ti.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Be();const e=this.left.check();if(e!==this.right.check())throw Be();return e+(this.isRed()?0:1)}}ti.EMPTY=null,ti.RED=!0,ti.BLACK=!1,ti.EMPTY=new class{constructor(){this.size=0}get key(){throw Be()}get value(){throw Be()}get color(){throw Be()}get left(){throw Be()}get right(){throw Be()}copy(e,t,r,i,a){return this}insert(e,t,r){return new ti(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class _n{constructor(e){this.comparator=e,this.data=new mn(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new jk(this.data.getIterator())}getIteratorFrom(e){return new jk(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof _n)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=r.getNext().key;if(0!==this.comparator(i,a))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new _n(this.comparator);return t.data=e,t}}class jk{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class Ji{constructor(e){this.fields=e,e.sort(Bn.comparator)}static empty(){return new Ji([])}unionWith(e){let t=new _n(Bn.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Ji(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return qg(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class $k extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class br{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(i){try{return atob(i)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new $k("Invalid base64 string: "+a):a}}(e);return new br(t)}static fromUint8Array(e){const t=function(i){let a="";for(let c=0;c<i.length;++c)a+=String.fromCharCode(i[c]);return a}(e);return new br(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(t){const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ht(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}br.EMPTY_BYTE_STRING=new br("");const wB=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ul(n){if(Ke(!!n),"string"==typeof n){let e=0;const t=wB.exec(n);if(Ke(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:jn(n.seconds),nanos:jn(n.nanos)}}function jn(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function Su(n){return"string"==typeof n?br.fromBase64String(n):br.fromUint8Array(n)}function H0(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function G0(n){const e=n.mapValue.fields.__previous_value__;return H0(e)?G0(e):e}function aI(n){const e=ul(n.mapValue.fields.__local_write_time__.timestampValue);return new Nn(e.seconds,e.nanos)}class TB{constructor(e,t,r,i,a,c,h,p,y){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=c,this.autoDetectLongPolling=h,this.longPollingOptions=p,this.useFetchStreams=y}}class bh{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new bh("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof bh&&e.projectId===this.projectId&&e.database===this.database}}const cl={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function ll(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?H0(n)?4:qk(n)?9007199254740991:10:Be()}function Pa(n,e){if(n===e)return!0;const t=ll(n);if(t!==ll(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return aI(n).isEqual(aI(e));case 3:return function(i,a){if("string"==typeof i.timestampValue&&"string"==typeof a.timestampValue&&i.timestampValue.length===a.timestampValue.length)return i.timestampValue===a.timestampValue;const c=ul(i.timestampValue),h=ul(a.timestampValue);return c.seconds===h.seconds&&c.nanos===h.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return a=e,Su(n.bytesValue).isEqual(Su(a.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,a){return jn(i.geoPointValue.latitude)===jn(a.geoPointValue.latitude)&&jn(i.geoPointValue.longitude)===jn(a.geoPointValue.longitude)}(n,e);case 2:return function(i,a){if("integerValue"in i&&"integerValue"in a)return jn(i.integerValue)===jn(a.integerValue);if("doubleValue"in i&&"doubleValue"in a){const c=jn(i.doubleValue),h=jn(a.doubleValue);return c===h?oI(c)===oI(h):isNaN(c)&&isNaN(h)}return!1}(n,e);case 9:return qg(n.arrayValue.values||[],e.arrayValue.values||[],Pa);case 10:return function(i,a){const c=i.mapValue.fields||{},h=a.mapValue.fields||{};if(Uk(c)!==Uk(h))return!1;for(const p in c)if(c.hasOwnProperty(p)&&(void 0===h[p]||!Pa(c[p],h[p])))return!1;return!0}(n,e);default:return Be()}var a}function uI(n,e){return void 0!==(n.values||[]).find(t=>Pa(t,e))}function dl(n,e){if(n===e)return 0;const t=ll(n),r=ll(e);if(t!==r)return ht(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return ht(n.booleanValue,e.booleanValue);case 2:return function(a,c){const h=jn(a.integerValue||a.doubleValue),p=jn(c.integerValue||c.doubleValue);return h<p?-1:h>p?1:h===p?0:isNaN(h)?isNaN(p)?0:-1:1}(n,e);case 3:return Hk(n.timestampValue,e.timestampValue);case 4:return Hk(aI(n),aI(e));case 5:return ht(n.stringValue,e.stringValue);case 6:return function(a,c){const h=Su(a),p=Su(c);return h.compareTo(p)}(n.bytesValue,e.bytesValue);case 7:return function(a,c){const h=a.split("/"),p=c.split("/");for(let y=0;y<h.length&&y<p.length;y++){const I=ht(h[y],p[y]);if(0!==I)return I}return ht(h.length,p.length)}(n.referenceValue,e.referenceValue);case 8:return function(a,c){const h=ht(jn(a.latitude),jn(c.latitude));return 0!==h?h:ht(jn(a.longitude),jn(c.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(a,c){const h=a.values||[],p=c.values||[];for(let y=0;y<h.length&&y<p.length;++y){const I=dl(h[y],p[y]);if(I)return I}return ht(h.length,p.length)}(n.arrayValue,e.arrayValue);case 10:return function(a,c){if(a===cl.mapValue&&c===cl.mapValue)return 0;if(a===cl.mapValue)return 1;if(c===cl.mapValue)return-1;const h=a.fields||{},p=Object.keys(h),y=c.fields||{},I=Object.keys(y);p.sort(),I.sort();for(let D=0;D<p.length&&D<I.length;++D){const O=ht(p[D],I[D]);if(0!==O)return O;const L=dl(h[p[D]],y[I[D]]);if(0!==L)return L}return ht(p.length,I.length)}(n.mapValue,e.mapValue);default:throw Be()}}function Hk(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return ht(n,e);const t=ul(n),r=ul(e),i=ht(t.seconds,r.seconds);return 0!==i?i:ht(t.nanos,r.nanos)}function Qg(n){return cM(n)}function cM(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){const r=ul(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?Su(n.bytesValue).toBase64():"referenceValue"in n?Ne.fromName(n.referenceValue).toString():"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(const a of t.values||[])i?i=!1:r+=",",r+=cM(a);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){const r=Object.keys(t.fields||{}).sort();let i="{",a=!0;for(const c of r)a?a=!1:i+=",",i+=`${c}:${cM(t.fields[c])}`;return i+"}"}(n.mapValue):Be()}function lM(n){return!!n&&"integerValue"in n}function cI(n){return!!n&&"arrayValue"in n}function Gk(n){return!!n&&"nullValue"in n}function zk(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function W0(n){return!!n&&"mapValue"in n}function lI(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return al(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=lI(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=lI(n.arrayValue.values[t]);return e}return Object.assign({},n)}function qk(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}class ni{constructor(e){this.value=e}static empty(){return new ni({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!W0(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=lI(t)}setAll(e){let t=Bn.emptyPath(),r={},i=[];e.forEach((c,h)=>{if(!t.isImmediateParentOf(h)){const p=this.getFieldsMap(t);this.applyChanges(p,r,i),r={},i=[],t=h.popLast()}c?r[h.lastSegment()]=lI(c):i.push(h.lastSegment())});const a=this.getFieldsMap(t);this.applyChanges(a,r,i)}delete(e){const t=this.field(e.popLast());W0(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Pa(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];W0(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){al(t,(i,a)=>e[i]=a);for(const i of r)delete e[i]}clone(){return new ni(lI(this.value))}}function Yk(n){const e=[];return al(n.fields,(t,r)=>{const i=new Bn([t]);if(W0(r)){const a=Yk(r.mapValue).fields;if(0===a.length)e.push(i);else for(const c of a)e.push(i.child(c))}else e.push(i)}),new Ji(e)}class Cn{constructor(e,t,r,i,a,c,h){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=a,this.data=c,this.documentState=h}static newInvalidDocument(e){return new Cn(e,0,Ye.min(),Ye.min(),Ye.min(),ni.empty(),0)}static newFoundDocument(e,t,r,i){return new Cn(e,1,t,Ye.min(),r,i,0)}static newNoDocument(e,t){return new Cn(e,2,t,Ye.min(),Ye.min(),ni.empty(),0)}static newUnknownDocument(e,t){return new Cn(e,3,t,Ye.min(),Ye.min(),ni.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Ye.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ni.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ni.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ye.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Cn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Cn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class hl{constructor(e,t){this.position=e,this.inclusive=t}}function Qk(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const a=e[i],c=n.position[i];if(r=a.field.isKeyField()?Ne.comparator(Ne.fromName(c.referenceValue),t.key):dl(c,t.data.field(a.field)),"desc"===a.dir&&(r*=-1),0!==r)break}return r}function Zk(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Pa(n.position[t],e.position[t]))return!1;return!0}class Zg{constructor(e,t="asc"){this.field=e,this.dir=t}}function DB(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class Jk{}class Ot extends Jk{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,r):new AB(e,t,r):"array-contains"===t?new PB(e,r):"in"===t?new iF(e,r):"not-in"===t?new xB(e,r):"array-contains-any"===t?new MB(e,r):new Ot(e,t,r)}static createKeyFieldInFilter(e,t,r){return"in"===t?new SB(e,r):new RB(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(dl(t,this.value)):null!==t&&ll(this.value)===ll(t)&&this.matchesComparison(dl(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Be()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class tn extends Jk{constructor(e,t){super(),this.filters=e,this.op=t,this.ce=null}static create(e,t){return new tn(e,t)}matches(e){return Jg(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.ce||(this.ce=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ce}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.le(t=>t.isInequality());return null!==e?e.field:null}le(e){for(const t of this.getFlattenedFilters())if(e(t))return t;return null}}function Jg(n){return"and"===n.op}function hM(n){return function Xk(n){for(const e of n.filters)if(e instanceof tn)return!1;return!0}(n)&&Jg(n)}function fM(n){if(n instanceof Ot)return n.field.canonicalString()+n.op.toString()+Qg(n.value);if(hM(n))return n.filters.map(e=>fM(e)).join(",");{const e=n.filters.map(t=>fM(t)).join(",");return`${n.op}(${e})`}}function eF(n,e){return n instanceof Ot?(r=n,(i=e)instanceof Ot&&r.op===i.op&&r.field.isEqual(i.field)&&Pa(r.value,i.value)):n instanceof tn?function(r,i){return i instanceof tn&&r.op===i.op&&r.filters.length===i.filters.length&&r.filters.reduce((a,c,h)=>a&&eF(c,i.filters[h]),!0)}(n,e):void Be();var r,i}function nF(n){return n instanceof Ot?`${(t=n).field.canonicalString()} ${t.op} ${Qg(t.value)}`:n instanceof tn?function(t){return t.op.toString()+" {"+t.getFilters().map(nF).join(" ,")+"}"}(n):"Filter";var t}class AB extends Ot{constructor(e,t,r){super(e,t,r),this.key=Ne.fromName(r.referenceValue)}matches(e){const t=Ne.comparator(e.key,this.key);return this.matchesComparison(t)}}class SB extends Ot{constructor(e,t){super(e,"in",t),this.keys=rF(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class RB extends Ot{constructor(e,t){super(e,"not-in",t),this.keys=rF(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function rF(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>Ne.fromName(r.referenceValue))}class PB extends Ot{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return cI(t)&&uI(t.arrayValue,this.value)}}class iF extends Ot{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&uI(this.value.arrayValue,t)}}class xB extends Ot{constructor(e,t){super(e,"not-in",t)}matches(e){if(uI(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!uI(this.value.arrayValue,t)}}class MB extends Ot{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!cI(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>uI(this.value.arrayValue,r))}}class OB{constructor(e,t=null,r=[],i=[],a=null,c=null,h=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=c,this.endAt=h,this.he=null}}function pM(n,e=null,t=[],r=[],i=null,a=null,c=null){return new OB(n,e,t,r,i,a,c)}function Dh(n){const e=xe(n);if(null===e.he){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>fM(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(a=r).field.canonicalString()+a.dir;var a}).join(","),sI(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Qg(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Qg(r)).join(",")),e.he=t}return e.he}function dI(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!DB(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!eF(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!Zk(n.startAt,e.startAt)&&Zk(n.endAt,e.endAt)}function K0(n){return Ne.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}class Ru{constructor(e,t=null,r=[],i=[],a=null,c="F",h=null,p=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=c,this.startAt=h,this.endAt=p,this.Pe=null,this.Ie=null,this.de=null}}function Xg(n){return new Ru(n)}function uF(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function em(n){const e=xe(n);if(null===e.Pe){e.Pe=[];const t=function Q0(n){for(const e of n.filters){const t=e.getFirstInequalityField();if(null!==t)return t}return null}(e),r=function gM(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}(e);if(null!==t&&null===r)t.isKeyField()||e.Pe.push(new Zg(t)),e.Pe.push(new Zg(Bn.keyField(),"asc"));else{let i=!1;for(const a of e.explicitOrderBy)e.Pe.push(a),a.field.isKeyField()&&(i=!0);if(!i){const a=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.Pe.push(new Zg(Bn.keyField(),a))}}}return e.Pe}function Li(n){const e=xe(n);return e.Ie||(e.Ie=function cF(n,e){if("F"===n.limitType)return pM(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>new Zg(i.field,"desc"===i.dir?"asc":"desc"));const t=n.endAt?new hl(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new hl(n.startAt.position,n.startAt.inclusive):null;return pM(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}(e,em(n))),e.Ie}function Z0(n,e,t){return new Ru(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function hI(n,e){return dI(Li(n),Li(e))&&n.limitType===e.limitType}function lF(n){return`${Dh(Li(n))}|lt:${n.limitType}`}function tm(n){return`Query(target=${function(t){let r=t.path.canonicalString();return null!==t.collectionGroup&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>nF(i)).join(", ")}]`),sI(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>{return`${(c=i).field.canonicalString()} (${c.dir})`;var c}).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>Qg(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>Qg(i)).join(",")),`Target(${r})`}(Li(n))}; limitType=${n.limitType})`}function fI(n,e){return e.isFoundDocument()&&function(r,i){const a=i.key.path;return null!==r.collectionGroup?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(a):Ne.isDocumentKey(r.path)?r.path.isEqual(a):r.path.isImmediateParentOf(a)}(n,e)&&function(r,i){for(const a of em(r))if(!a.field.isKeyField()&&null===i.data.field(a.field))return!1;return!0}(n,e)&&function(r,i){for(const a of r.filters)if(!a.matches(i))return!1;return!0}(n,e)&&(i=e,!((r=n).startAt&&!function(c,h,p){const y=Qk(c,h,p);return c.inclusive?y<=0:y<0}(r.startAt,em(r),i)||r.endAt&&!function(c,h,p){const y=Qk(c,h,p);return c.inclusive?y>=0:y>0}(r.endAt,em(r),i)));var r,i}function hF(n){return(e,t)=>{let r=!1;for(const i of em(n)){const a=NB(i,e,t);if(0!==a)return a;r=r||i.field.isKeyField()}return 0}}function NB(n,e,t){const r=n.field.isKeyField()?Ne.comparator(e.key,t.key):function(a,c,h){const p=c.data.field(a),y=h.data.field(a);return null!==p&&null!==y?dl(p,y):Be()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return Be()}}class Pu{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[i,a]of r)if(this.equalsFn(i,e))return a}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,t]],void this.innerSize++;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return void(i[a]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){al(this.inner,(t,r)=>{for(const[i,a]of r)e(i,a)})}isEmpty(){return Bk(this.inner)}size(){return this.innerSize}}const kB=new mn(Ne.comparator);function Xi(){return kB}const fF=new mn(Ne.comparator);function pI(...n){let e=fF;for(const t of n)e=e.insert(t.key,t);return e}function pF(n){let e=fF;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function xa(){return gI()}function gF(){return gI()}function gI(){return new Pu(n=>n.toString(),(n,e)=>n.isEqual(e))}const FB=new mn(Ne.comparator),LB=new _n(Ne.comparator);function It(...n){let e=LB;for(const t of n)e=e.add(t);return e}const VB=new _n(ht);function mF(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:oI(e)?"-0":e}}function _F(n){return{integerValue:""+n}}function yF(n,e){return function Mk(n){return"number"==typeof n&&Number.isInteger(n)&&!oI(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}(e)?_F(e):mF(n,e)}class J0{constructor(){this._=void 0}}function UB(n,e,t){return n instanceof nm?function(i,a){const c={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return a&&H0(a)&&(a=G0(a)),a&&(c.fields.__previous_value__=a),{mapValue:c}}(t,e):n instanceof Ah?EF(n,e):n instanceof Sh?IF(n,e):function(i,a){const c=vF(i,a),h=wF(c)+wF(i.Te);return lM(c)&&lM(i.Te)?_F(h):mF(i.serializer,h)}(n,e)}function BB(n,e,t){return n instanceof Ah?EF(n,e):n instanceof Sh?IF(n,e):t}function vF(n,e){return n instanceof rm?lM(r=e)||(a=r)&&"doubleValue"in a?e:{integerValue:0}:null;var r,a}class nm extends J0{}class Ah extends J0{constructor(e){super(),this.elements=e}}function EF(n,e){const t=TF(e);for(const r of n.elements)t.some(i=>Pa(i,r))||t.push(r);return{arrayValue:{values:t}}}class Sh extends J0{constructor(e){super(),this.elements=e}}function IF(n,e){let t=TF(e);for(const r of n.elements)t=t.filter(i=>!Pa(i,r));return{arrayValue:{values:t}}}class rm extends J0{constructor(e,t){super(),this.serializer=e,this.Te=t}}function wF(n){return jn(n.integerValue||n.doubleValue)}function TF(n){return cI(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class $B{constructor(e,t){this.version=e,this.transformResults=t}}class Pn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Pn}static exists(e){return new Pn(void 0,e)}static updateTime(e){return new Pn(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function X0(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class eD{}function bF(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new sm(n.key,Pn.none()):new im(n.key,n.data,Pn.none());{const t=n.data,r=ni.empty();let i=new _n(Bn.comparator);for(let a of e.fields)if(!i.has(a)){let c=t.field(a);null===c&&a.length>1&&(a=a.popLast(),c=t.field(a)),null===c?r.delete(a):r.set(a,c),i=i.add(a)}return new xu(n.key,r,new Ji(i.toArray()),Pn.none())}}function HB(n,e,t){n instanceof im?function(i,a,c){const h=i.value.clone(),p=AF(i.fieldTransforms,a,c.transformResults);h.setAll(p),a.convertToFoundDocument(c.version,h).setHasCommittedMutations()}(n,e,t):n instanceof xu?function(i,a,c){if(!X0(i.precondition,a))return void a.convertToUnknownDocument(c.version);const h=AF(i.fieldTransforms,a,c.transformResults),p=a.data;p.setAll(DF(i)),p.setAll(h),a.convertToFoundDocument(c.version,p).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function _I(n,e,t,r){return n instanceof im?function(a,c,h,p){if(!X0(a.precondition,c))return h;const y=a.value.clone(),I=SF(a.fieldTransforms,p,c);return y.setAll(I),c.convertToFoundDocument(c.version,y).setHasLocalMutations(),null}(n,e,t,r):n instanceof xu?function(a,c,h,p){if(!X0(a.precondition,c))return h;const y=SF(a.fieldTransforms,p,c),I=c.data;return I.setAll(DF(a)),I.setAll(y),c.convertToFoundDocument(c.version,I).setHasLocalMutations(),null===h?null:h.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map(D=>D.field))}(n,e,t,r):(h=t,X0(n.precondition,c=e)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):h);var c,h}function GB(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),a=vF(r.transform,i||null);null!=a&&(null===t&&(t=ni.empty()),t.set(r.field,a))}return t||null}function CF(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(i=e.fieldTransforms,!!(void 0===(r=n.fieldTransforms)&&void 0===i||r&&i&&qg(r,i,(a,c)=>function jB(n,e){return n.field.isEqual(e.field)&&(i=e.transform,(r=n.transform)instanceof Ah&&i instanceof Ah||r instanceof Sh&&i instanceof Sh?qg(r.elements,i.elements,Pa):r instanceof rm&&i instanceof rm?Pa(r.Te,i.Te):r instanceof nm&&i instanceof nm);var r,i}(a,c))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var r,i}class im extends eD{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class xu extends eD{constructor(e,t,r,i,a=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function DF(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function AF(n,e,t){const r=new Map;Ke(n.length===t.length);for(let i=0;i<t.length;i++){const a=n[i],c=a.transform,h=e.data.field(a.field);r.set(a.field,BB(c,h,t[i]))}return r}function SF(n,e,t){const r=new Map;for(const i of n){const a=i.transform,c=t.data.field(i.field);r.set(i.field,UB(a,c,e))}return r}class sm extends eD{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class vM extends eD{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class EM{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const a=this.mutations[i];a.key.isEqual(e.key)&&HB(a,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=_I(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=_I(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=gF();return this.mutations.forEach(i=>{const a=e.get(i.key),c=a.overlayedDocument;let h=this.applyToLocalView(c,a.mutatedFields);h=t.has(i.key)?null:h;const p=bF(c,h);null!==p&&r.set(i.key,p),c.isValidDocument()||c.convertToNoDocument(Ye.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),It())}isEqual(e){return this.batchId===e.batchId&&qg(this.mutations,e.mutations,(t,r)=>CF(t,r))&&qg(this.baseMutations,e.baseMutations,(t,r)=>CF(t,r))}}class IM{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){Ke(e.mutations.length===r.length);let i=FB;const a=e.mutations;for(let c=0;c<a.length;c++)i=i.insert(a[c].key,r[c].version);return new IM(e,t,r,i)}}class wM{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class qB{constructor(e,t){this.count=e,this.unchangedNames=t}}var lr,Vt;function RF(n){switch(n){default:return Be();case q.CANCELLED:case q.UNKNOWN:case q.DEADLINE_EXCEEDED:case q.RESOURCE_EXHAUSTED:case q.INTERNAL:case q.UNAVAILABLE:case q.UNAUTHENTICATED:return!1;case q.INVALID_ARGUMENT:case q.NOT_FOUND:case q.ALREADY_EXISTS:case q.PERMISSION_DENIED:case q.FAILED_PRECONDITION:case q.ABORTED:case q.OUT_OF_RANGE:case q.UNIMPLEMENTED:case q.DATA_LOSS:return!0}}function PF(n){if(void 0===n)return Yn("GRPC error has no .code"),q.UNKNOWN;switch(n){case lr.OK:return q.OK;case lr.CANCELLED:return q.CANCELLED;case lr.UNKNOWN:return q.UNKNOWN;case lr.DEADLINE_EXCEEDED:return q.DEADLINE_EXCEEDED;case lr.RESOURCE_EXHAUSTED:return q.RESOURCE_EXHAUSTED;case lr.INTERNAL:return q.INTERNAL;case lr.UNAVAILABLE:return q.UNAVAILABLE;case lr.UNAUTHENTICATED:return q.UNAUTHENTICATED;case lr.INVALID_ARGUMENT:return q.INVALID_ARGUMENT;case lr.NOT_FOUND:return q.NOT_FOUND;case lr.ALREADY_EXISTS:return q.ALREADY_EXISTS;case lr.PERMISSION_DENIED:return q.PERMISSION_DENIED;case lr.FAILED_PRECONDITION:return q.FAILED_PRECONDITION;case lr.ABORTED:return q.ABORTED;case lr.OUT_OF_RANGE:return q.OUT_OF_RANGE;case lr.UNIMPLEMENTED:return q.UNIMPLEMENTED;case lr.DATA_LOSS:return q.DATA_LOSS;default:return Be()}}(Vt=lr||(lr={}))[Vt.OK=0]="OK",Vt[Vt.CANCELLED=1]="CANCELLED",Vt[Vt.UNKNOWN=2]="UNKNOWN",Vt[Vt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Vt[Vt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Vt[Vt.NOT_FOUND=5]="NOT_FOUND",Vt[Vt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Vt[Vt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Vt[Vt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Vt[Vt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Vt[Vt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Vt[Vt.ABORTED=10]="ABORTED",Vt[Vt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Vt[Vt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Vt[Vt.INTERNAL=13]="INTERNAL",Vt[Vt.UNAVAILABLE=14]="UNAVAILABLE",Vt[Vt.DATA_LOSS=15]="DATA_LOSS";const WB=new Hg([4294967295,4294967295],0);function MF(n){const e=function xF(){return new TextEncoder}().encode(n),t=new $U;return t.update(e),new Uint8Array(t.digest())}function OF(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new Hg([t,r],0),new Hg([i,a],0)]}class TM{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new yI(`Invalid padding: ${t}`);if(r<0)throw new yI(`Invalid hash count: ${r}`);if(e.length>0&&0===this.hashCount)throw new yI(`Invalid hash count: ${r}`);if(0===e.length&&0!==t)throw new yI(`Invalid padding when bitmap length is 0: ${t}`);this.Ae=8*e.length-t,this.Re=Hg.fromNumber(this.Ae)}Ve(e,t,r){let i=e.add(t.multiply(Hg.fromNumber(r)));return 1===i.compare(WB)&&(i=new Hg([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Re).toNumber()}me(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.Ae)return!1;const t=MF(e),[r,i]=OF(t);for(let a=0;a<this.hashCount;a++){const c=this.Ve(r,i,a);if(!this.me(c))return!1}return!0}static create(e,t,r){const i=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),c=new TM(a,i,t);return r.forEach(h=>c.insert(h)),c}insert(e){if(0===this.Ae)return;const t=MF(e),[r,i]=OF(t);for(let a=0;a<this.hashCount;a++){const c=this.Ve(r,i,a);this.fe(c)}}fe(e){const t=Math.floor(e/8);this.bitmap[t]|=1<<e%8}}class yI extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class vI{constructor(e,t,r,i,a){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,EI.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new vI(Ye.min(),i,new mn(ht),Xi(),It())}}class EI{constructor(e,t,r,i,a){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new EI(r,t,It(),It(),It())}}class nD{constructor(e,t,r,i){this.ge=e,this.removedTargetIds=t,this.key=r,this.pe=i}}class NF{constructor(e,t){this.targetId=e,this.ye=t}}class kF{constructor(e,t,r=br.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class FF{constructor(){this.we=0,this.Se=VF(),this.be=br.EMPTY_BYTE_STRING,this.De=!1,this.Ce=!0}get current(){return this.De}get resumeToken(){return this.be}get ve(){return 0!==this.we}get Fe(){return this.Ce}Me(e){e.approximateByteSize()>0&&(this.Ce=!0,this.be=e)}xe(){let e=It(),t=It(),r=It();return this.Se.forEach((i,a)=>{switch(a){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:Be()}}),new EI(this.be,this.De,e,t,r)}Oe(){this.Ce=!1,this.Se=VF()}Ne(e,t){this.Ce=!0,this.Se=this.Se.insert(e,t)}Be(e){this.Ce=!0,this.Se=this.Se.remove(e)}Le(){this.we+=1}ke(){this.we-=1}qe(){this.Ce=!0,this.De=!0}}class KB{constructor(e){this.Qe=e,this.Ke=new Map,this.$e=Xi(),this.Ue=LF(),this.We=new mn(ht)}Ge(e){for(const t of e.ge)e.pe&&e.pe.isFoundDocument()?this.ze(t,e.pe):this.je(t,e.key,e.pe);for(const t of e.removedTargetIds)this.je(t,e.key,e.pe)}He(e){this.forEachTarget(e,t=>{const r=this.Je(t);switch(e.state){case 0:this.Ye(t)&&r.Me(e.resumeToken);break;case 1:r.ke(),r.ve||r.Oe(),r.Me(e.resumeToken);break;case 2:r.ke(),r.ve||this.removeTarget(t);break;case 3:this.Ye(t)&&(r.qe(),r.Me(e.resumeToken));break;case 4:this.Ye(t)&&(this.Ze(t),r.Me(e.resumeToken));break;default:Be()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Ke.forEach((r,i)=>{this.Ye(i)&&t(i)})}Xe(e){const t=e.targetId,r=e.ye.count,i=this.et(t);if(i){const a=i.target;if(K0(a))if(0===r){const c=new Ne(a.path);this.je(t,c,Cn.newNoDocument(c,Ye.min()))}else Ke(1===r);else{const c=this.tt(t);if(c!==r){const h=this.nt(e),p=h?this.rt(h,e,c):1;0!==p&&(this.Ze(t),this.We=this.We.insert(t,2===p?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch"))}}}}nt(e){const t=e.ye.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:a=0}=t;let c,h;try{c=Su(r).toUint8Array()}catch(p){if(p instanceof $k)return Is("Decoding the base64 bloom filter in existence filter failed ("+p.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw p}try{h=new TM(c,i,a)}catch(p){return Is(p instanceof yI?"BloomFilter error: ":"Applying bloom filter failed: ",p),null}return 0===h.Ae?null:h}rt(e,t,r){return t.ye.count===r-this.ot(e,t.targetId)?0:2}ot(e,t){const r=this.Qe.getRemoteKeysForTarget(t);let i=0;return r.forEach(a=>{const c=this.Qe.st(),h=`projects/${c.projectId}/databases/${c.database}/documents/${a.path.canonicalString()}`;e.mightContain(h)||(this.je(t,a,null),i++)}),i}_t(e){const t=new Map;this.Ke.forEach((a,c)=>{const h=this.et(c);if(h){if(a.current&&K0(h.target)){const p=new Ne(h.target.path);null!==this.$e.get(p)||this.ut(c,p)||this.je(c,p,Cn.newNoDocument(p,e))}a.Fe&&(t.set(c,a.xe()),a.Oe())}});let r=It();this.Ue.forEach((a,c)=>{let h=!0;c.forEachWhile(p=>{const y=this.et(p);return!y||"TargetPurposeLimboResolution"===y.purpose||(h=!1,!1)}),h&&(r=r.add(a))}),this.$e.forEach((a,c)=>c.setReadTime(e));const i=new vI(e,t,this.We,this.$e,r);return this.$e=Xi(),this.Ue=LF(),this.We=new mn(ht),i}ze(e,t){if(!this.Ye(e))return;const r=this.ut(e,t.key)?2:0;this.Je(e).Ne(t.key,r),this.$e=this.$e.insert(t.key,t),this.Ue=this.Ue.insert(t.key,this.ct(t.key).add(e))}je(e,t,r){if(!this.Ye(e))return;const i=this.Je(e);this.ut(e,t)?i.Ne(t,1):i.Be(t),this.Ue=this.Ue.insert(t,this.ct(t).delete(e)),r&&(this.$e=this.$e.insert(t,r))}removeTarget(e){this.Ke.delete(e)}tt(e){const t=this.Je(e).xe();return this.Qe.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Le(e){this.Je(e).Le()}Je(e){let t=this.Ke.get(e);return t||(t=new FF,this.Ke.set(e,t)),t}ct(e){let t=this.Ue.get(e);return t||(t=new _n(ht),this.Ue=this.Ue.insert(e,t)),t}Ye(e){const t=null!==this.et(e);return t||pe("WatchChangeAggregator","Detected inactive target",e),t}et(e){const t=this.Ke.get(e);return t&&t.ve?null:this.Qe.lt(e)}Ze(e){this.Ke.set(e,new FF),this.Qe.getRemoteKeysForTarget(e).forEach(t=>{this.je(e,t,null)})}ut(e,t){return this.Qe.getRemoteKeysForTarget(e).has(t)}}function LF(){return new mn(Ne.comparator)}function VF(){return new mn(Ne.comparator)}const YB={asc:"ASCENDING",desc:"DESCENDING"},QB={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},ZB={and:"AND",or:"OR"};class JB{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function bM(n,e){return n.useProto3Json||sI(e)?e:{value:e}}function om(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function UF(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function XB(n,e){return om(n,e.toTimestamp())}function Qn(n){return Ke(!!n),Ye.fromTimestamp(function(t){const r=ul(t);return new Nn(r.seconds,r.nanos)}(n))}function CM(n,e){return(r=n,new Lt(["projects",r.projectId,"databases",r.database])).child("documents").child(e).canonicalString();var r}function BF(n){const e=Lt.fromString(n);return Ke(YF(e)),e}function II(n,e){return CM(n.databaseId,e.path)}function Ma(n,e){const t=BF(e);if(t.get(1)!==n.databaseId.projectId)throw new fe(q.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new fe(q.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Ne($F(t))}function DM(n,e){return CM(n.databaseId,e)}function wI(n){return new Lt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function $F(n){return Ke(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function HF(n,e,t){return{name:II(n,e),fields:t.value.mapValue.fields}}function TI(n,e){let t;if(e instanceof im)t={update:HF(n,e.key,e.value)};else if(e instanceof sm)t={delete:II(n,e.key)};else if(e instanceof xu)t={update:HF(n,e.key,e.data),updateMask:aj(e.fieldMask)};else{if(!(e instanceof vM))return Be();t={verify:II(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(a,c){const h=c.transform;if(h instanceof nm)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(h instanceof Ah)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:h.elements}};if(h instanceof Sh)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:h.elements}};if(h instanceof rm)return{fieldPath:c.field.canonicalString(),increment:h.Te};throw Be()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(a=e.precondition).updateTime?{updateTime:XB(n,a.updateTime)}:void 0!==a.exists?{exists:a.exists}:Be()),t;var a}function zF(n,e){return{documents:[DM(n,e.path)]}}function SM(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=DM(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=DM(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(p){if(0!==p.length)return KF(tn.create(p,"and"))}(e.filters);i&&(t.structuredQuery.where=i);const a=function(p){if(0!==p.length)return p.map(y=>{return{field:fl((D=y).field),direction:ij(D.dir)};var D})}(e.orderBy);a&&(t.structuredQuery.orderBy=a);const c=bM(n,e.limit);return null!==c&&(t.structuredQuery.limit=c),e.startAt&&(t.structuredQuery.startAt={before:(p=e.startAt).inclusive,values:p.position}),e.endAt&&(t.structuredQuery.endAt=function(p){return{before:!p.inclusive,values:p.position}}(e.endAt)),t;var p}function qF(n){let e=function jF(n){const e=BF(n);return 4===e.length?Lt.emptyPath():$F(e)}(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){Ke(1===r);const I=t.from[0];I.allDescendants?i=I.collectionId:e=e.child(I.collectionId)}let a=[];t.where&&(a=function(D){const O=WF(D);return O instanceof tn&&hM(O)?O.getFilters():[O]}(t.where));let c=[];t.orderBy&&(c=t.orderBy.map(O=>{return new Zg(am((J=O).field),function(ie){switch(ie){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(J.direction));var J}));let h=null;t.limit&&(h=function(D){let O;return O="object"==typeof D?D.value:D,sI(O)?null:O}(t.limit));let p=null;var D;t.startAt&&(p=new hl((D=t.startAt).values||[],!!D.before));let y=null;return t.endAt&&(y=function(D){return new hl(D.values||[],!D.before)}(t.endAt)),function aF(n,e,t,r,i,a,c,h){return new Ru(n,e,t,r,i,a,c,h)}(e,i,c,a,h,"F",p,y)}function WF(n){return void 0!==n.unaryFilter?function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=am(t.unaryFilter.field);return Ot.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=am(t.unaryFilter.field);return Ot.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=am(t.unaryFilter.field);return Ot.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=am(t.unaryFilter.field);return Ot.create(c,"!=",{nullValue:"NULL_VALUE"});default:return Be()}}(n):void 0!==n.fieldFilter?Ot.create(am((t=n).fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Be()}}(t.fieldFilter.op),t.fieldFilter.value):void 0!==n.compositeFilter?function(t){return tn.create(t.compositeFilter.filters.map(r=>WF(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Be()}}(t.compositeFilter.op))}(n):Be();var t}function ij(n){return YB[n]}function sj(n){return QB[n]}function oj(n){return ZB[n]}function fl(n){return{fieldPath:n.canonicalString()}}function am(n){return Bn.fromServerFormat(n.fieldPath)}function KF(n){return n instanceof Ot?function(t){if("=="===t.op){if(zk(t.value))return{unaryFilter:{field:fl(t.field),op:"IS_NAN"}};if(Gk(t.value))return{unaryFilter:{field:fl(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(zk(t.value))return{unaryFilter:{field:fl(t.field),op:"IS_NOT_NAN"}};if(Gk(t.value))return{unaryFilter:{field:fl(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:fl(t.field),op:sj(t.op),value:t.value}}}(n):n instanceof tn?function(t){const r=t.getFilters().map(i=>KF(i));return 1===r.length?r[0]:{compositeFilter:{op:oj(t.op),filters:r}}}(n):Be()}function aj(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function YF(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}class Mu{constructor(e,t,r,i,a=Ye.min(),c=Ye.min(),h=br.EMPTY_BYTE_STRING,p=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=h,this.expectedCount=p}withSequenceNumber(e){return new Mu(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Mu(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Mu(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Mu(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class QF{constructor(e){this.ht=e}}function RM(n){const e=qF({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?Z0(e,e.limit,"L"):e}class Mh{constructor(){}dt(e,t){this.Tt(e,t),t.Et()}Tt(e,t){if("nullValue"in e)this.At(t,5);else if("booleanValue"in e)this.At(t,10),t.Rt(e.booleanValue?1:0);else if("integerValue"in e)this.At(t,15),t.Rt(jn(e.integerValue));else if("doubleValue"in e){const r=jn(e.doubleValue);isNaN(r)?this.At(t,13):(this.At(t,15),oI(r)?t.Rt(0):t.Rt(r))}else if("timestampValue"in e){const r=e.timestampValue;this.At(t,20),"string"==typeof r?t.Vt(r):(t.Vt(`${r.seconds||""}`),t.Rt(r.nanos||0))}else if("stringValue"in e)this.ft(e.stringValue,t),this.gt(t);else if("bytesValue"in e)this.At(t,30),t.yt(Su(e.bytesValue)),this.gt(t);else if("referenceValue"in e)this.wt(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.At(t,45),t.Rt(r.latitude||0),t.Rt(r.longitude||0)}else"mapValue"in e?qk(e)?this.At(t,Number.MAX_SAFE_INTEGER):(this.St(e.mapValue,t),this.gt(t)):"arrayValue"in e?(this.bt(e.arrayValue,t),this.gt(t)):Be()}ft(e,t){this.At(t,25),this.Dt(e,t)}Dt(e,t){t.Vt(e)}St(e,t){const r=e.fields||{};this.At(t,55);for(const i of Object.keys(r))this.ft(i,t),this.Tt(r[i],t)}bt(e,t){const r=e.values||[];this.At(t,50);for(const i of r)this.Tt(i,t)}wt(e,t){this.At(t,37),Ne.fromName(e).path.forEach(r=>{this.At(t,60),this.Dt(r,t)})}At(e,t){e.Rt(t)}gt(e){e.Rt(2)}}Mh.Ct=new Mh;class gj{constructor(){this.an=new kM}addToCollectionParentIndex(e,t){return this.an.add(t),$.resolve()}getCollectionParents(e,t){return $.resolve(this.an.getEntries(t))}addFieldIndex(e,t){return $.resolve()}deleteFieldIndex(e,t){return $.resolve()}deleteAllFieldIndexes(e){return $.resolve()}createTargetIndexes(e,t){return $.resolve()}getDocumentsMatchingTarget(e,t){return $.resolve(null)}getIndexType(e,t){return $.resolve(0)}getFieldIndexes(e,t){return $.resolve([])}getNextCollectionGroupToUpdate(e){return $.resolve(null)}getMinOffset(e,t){return $.resolve(ws.min())}getMinOffsetFromCollectionGroup(e,t){return $.resolve(ws.min())}updateCollectionGroup(e,t,r){return $.resolve()}updateIndexEntries(e,t){return $.resolve()}}class kM{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new _n(Lt.comparator),a=!i.has(r);return this.index[t]=i.add(r),a}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new _n(Lt.comparator)).toArray()}}new Uint8Array(0);class Ei{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new Ei(e,Ei.DEFAULT_COLLECTION_PERCENTILE,Ei.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}Ei.DEFAULT_COLLECTION_PERCENTILE=10,Ei.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ei.DEFAULT=new Ei(41943040,Ei.DEFAULT_COLLECTION_PERCENTILE,Ei.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ei.DISABLED=new Ei(-1,0,0);class Nh{constructor(e){this.Nn=e}next(){return this.Nn+=2,this.Nn}static Bn(){return new Nh(0)}static Ln(){return new Nh(-1)}}class Ij{constructor(){this.changes=new Pu(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Cn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?$.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class bj{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class TL{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(null!==r&&_I(r.mutation,i,Ji.empty(),Nn.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,It()).next(()=>r))}getLocalViewOfDocuments(e,t,r=It()){const i=xa();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(a=>{let c=pI();return a.forEach((h,p)=>{c=c.insert(h,p.overlayedDocument)}),c}))}getOverlayedDocuments(e,t){const r=xa();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,It()))}populateOverlays(e,t,r){const i=[];return r.forEach(a=>{t.has(a)||i.push(a)}),this.documentOverlayCache.getOverlays(e,i).next(a=>{a.forEach((c,h)=>{t.set(c,h)})})}computeViews(e,t,r,i){let a=Xi();const c=gI(),h=gI();return t.forEach((p,y)=>{const I=r.get(y.key);i.has(y.key)&&(void 0===I||I.mutation instanceof xu)?a=a.insert(y.key,y):void 0!==I?(c.set(y.key,I.mutation.getFieldMask()),_I(I.mutation,y,I.mutation.getFieldMask(),Nn.now())):c.set(y.key,Ji.empty())}),this.recalculateAndSaveOverlays(e,a).next(p=>(p.forEach((y,I)=>c.set(y,I)),t.forEach((y,I)=>{var D;return h.set(y,new bj(I,null!==(D=c.get(y))&&void 0!==D?D:null))}),h))}recalculateAndSaveOverlays(e,t){const r=gI();let i=new mn((c,h)=>c-h),a=It();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(c=>{for(const h of c)h.keys().forEach(p=>{const y=t.get(p);if(null===y)return;let I=r.get(p)||Ji.empty();I=h.applyToLocalView(y,I),r.set(p,I);const D=(i.get(h.batchId)||It()).add(p);i=i.insert(h.batchId,D)})}).next(()=>{const c=[],h=i.getReverseIterator();for(;h.hasNext();){const p=h.getNext(),y=p.key,I=p.value,D=gF();I.forEach(O=>{if(!a.has(O)){const L=bF(t.get(O),r.get(O));null!==L&&D.set(O,L),a=a.add(O)}}),c.push(this.documentOverlayCache.saveOverlays(e,y,D))}return $.waitFor(c)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return Ne.isDocumentKey((c=t).path)&&null===c.collectionGroup&&0===c.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):function mM(n){return null!==n.collectionGroup}(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i);var c}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(a=>{const c=i-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-a.size):$.resolve(xa());let h=-1,p=a;return c.next(y=>$.forEach(y,(I,D)=>(h<D.largestBatchId&&(h=D.largestBatchId),a.get(I)?$.resolve():this.remoteDocumentCache.getEntry(e,I).next(O=>{p=p.insert(I,O)}))).next(()=>this.populateOverlays(e,y,a)).next(()=>this.computeViews(e,p,y,It())).next(I=>({batchId:h,changes:pF(I)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Ne(t)).next(r=>{let i=pI();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){const a=t.collectionGroup;let c=pI();return this.indexManager.getCollectionParents(e,a).next(h=>$.forEach(h,p=>{const y=(D=t,O=p.child(a),new Ru(O,null,D.explicitOrderBy.slice(),D.filters.slice(),D.limit,D.limitType,D.startAt,D.endAt));var D,O;return this.getDocumentsMatchingCollectionQuery(e,y,r,i).next(I=>{I.forEach((D,O)=>{c=c.insert(D,O)})})}).next(()=>c))}getDocumentsMatchingCollectionQuery(e,t,r,i){let a;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(c=>(a=c,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,a,i))).next(c=>{a.forEach((p,y)=>{const I=y.getKey();null===c.get(I)&&(c=c.insert(I,Cn.newInvalidDocument(I)))});let h=pI();return c.forEach((p,y)=>{const I=a.get(p);void 0!==I&&_I(I.mutation,y,Ji.empty(),Nn.now()),fI(t,y)&&(h=h.insert(p,y))}),h})}}class Cj{constructor(e){this.serializer=e,this.lr=new Map,this.hr=new Map}getBundleMetadata(e,t){return $.resolve(this.lr.get(t))}saveBundleMetadata(e,t){return this.lr.set(t.id,{id:(i=t).id,version:i.version,createTime:Qn(i.createTime)}),$.resolve();var i}getNamedQuery(e,t){return $.resolve(this.hr.get(t))}saveNamedQuery(e,t){return this.hr.set(t.name,{name:(i=t).name,query:RM(i.bundledQuery),readTime:Qn(i.readTime)}),$.resolve();var i}}class Dj{constructor(){this.overlays=new mn(Ne.comparator),this.Pr=new Map}getOverlay(e,t){return $.resolve(this.overlays.get(t))}getOverlays(e,t){const r=xa();return $.forEach(t,i=>this.getOverlay(e,i).next(a=>{null!==a&&r.set(i,a)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,a)=>{this.It(e,t,a)}),$.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.Pr.get(r);return void 0!==i&&(i.forEach(a=>this.overlays=this.overlays.remove(a)),this.Pr.delete(r)),$.resolve()}getOverlaysForCollection(e,t,r){const i=xa(),a=t.length+1,c=new Ne(t.child("")),h=this.overlays.getIteratorFrom(c);for(;h.hasNext();){const p=h.getNext().value,y=p.getKey();if(!t.isPrefixOf(y.path))break;y.path.length===a&&p.largestBatchId>r&&i.set(p.getKey(),p)}return $.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let a=new mn((y,I)=>y-I);const c=this.overlays.getIterator();for(;c.hasNext();){const y=c.getNext().value;if(y.getKey().getCollectionGroup()===t&&y.largestBatchId>r){let I=a.get(y.largestBatchId);null===I&&(I=xa(),a=a.insert(y.largestBatchId,I)),I.set(y.getKey(),y)}}const h=xa(),p=a.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach((y,I)=>h.set(y,I)),!(h.size()>=i)););return $.resolve(h)}It(e,t,r){const i=this.overlays.get(r.key);if(null!==i){const c=this.Pr.get(i.largestBatchId).delete(r.key);this.Pr.set(i.largestBatchId,c)}this.overlays=this.overlays.insert(r.key,new wM(t,r));let a=this.Pr.get(t);void 0===a&&(a=It(),this.Pr.set(t,a)),this.Pr.set(t,a.add(r.key))}}class FM{constructor(){this.Ir=new _n(Vr.dr),this.Tr=new _n(Vr.Er)}isEmpty(){return this.Ir.isEmpty()}addReference(e,t){const r=new Vr(e,t);this.Ir=this.Ir.add(r),this.Tr=this.Tr.add(r)}Ar(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Rr(new Vr(e,t))}Vr(e,t){e.forEach(r=>this.removeReference(r,t))}mr(e){const t=new Ne(new Lt([])),r=new Vr(t,e),i=new Vr(t,e+1),a=[];return this.Tr.forEachInRange([r,i],c=>{this.Rr(c),a.push(c.key)}),a}gr(){this.Ir.forEach(e=>this.Rr(e))}Rr(e){this.Ir=this.Ir.delete(e),this.Tr=this.Tr.delete(e)}pr(e){const t=new Ne(new Lt([])),r=new Vr(t,e),i=new Vr(t,e+1);let a=It();return this.Tr.forEachInRange([r,i],c=>{a=a.add(c.key)}),a}containsKey(e){const t=new Vr(e,0),r=this.Ir.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class Vr{constructor(e,t){this.key=e,this.yr=t}static dr(e,t){return Ne.comparator(e.key,t.key)||ht(e.yr,t.yr)}static Er(e,t){return ht(e.yr,t.yr)||Ne.comparator(e.key,t.key)}}class Aj{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.wr=1,this.Sr=new _n(Vr.dr)}checkEmpty(e){return $.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,i){const a=this.wr;this.wr++;const c=new EM(a,t,r,i);this.mutationQueue.push(c);for(const h of i)this.Sr=this.Sr.add(new Vr(h.key,a)),this.indexManager.addToCollectionParentIndex(e,h.key.path.popLast());return $.resolve(c)}lookupMutationBatch(e,t){return $.resolve(this.br(t))}getNextMutationBatchAfterBatchId(e,t){const i=this.Dr(t+1),a=i<0?0:i;return $.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return $.resolve(0===this.mutationQueue.length?-1:this.wr-1)}getAllMutationBatches(e){return $.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Vr(t,0),i=new Vr(t,Number.POSITIVE_INFINITY),a=[];return this.Sr.forEachInRange([r,i],c=>{const h=this.br(c.yr);a.push(h)}),$.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new _n(ht);return t.forEach(i=>{const a=new Vr(i,0),c=new Vr(i,Number.POSITIVE_INFINITY);this.Sr.forEachInRange([a,c],h=>{r=r.add(h.yr)})}),$.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let a=r;Ne.isDocumentKey(a)||(a=a.child(""));const c=new Vr(new Ne(a),0);let h=new _n(ht);return this.Sr.forEachWhile(p=>{const y=p.key.path;return!!r.isPrefixOf(y)&&(y.length===i&&(h=h.add(p.yr)),!0)},c),$.resolve(this.Cr(h))}Cr(e){const t=[];return e.forEach(r=>{const i=this.br(r);null!==i&&t.push(i)}),t}removeMutationBatch(e,t){Ke(0===this.vr(t.batchId,"removed")),this.mutationQueue.shift();let r=this.Sr;return $.forEach(t.mutations,i=>{const a=new Vr(i.key,t.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Sr=r})}xn(e){}containsKey(e,t){const r=new Vr(t,0),i=this.Sr.firstAfterOrEqual(r);return $.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return $.resolve()}vr(e,t){return this.Dr(e)}Dr(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}br(e){const t=this.Dr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class Sj{constructor(e){this.Fr=e,this.docs=new mn(Ne.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),a=i?i.size:0,c=this.Fr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:c}),this.size+=c-a,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return $.resolve(r?r.document.mutableCopy():Cn.newInvalidDocument(t))}getEntries(e,t){let r=Xi();return t.forEach(i=>{const a=this.docs.get(i);r=r.insert(i,a?a.document.mutableCopy():Cn.newInvalidDocument(i))}),$.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let a=Xi();const c=t.path,h=new Ne(c.child("")),p=this.docs.getIteratorFrom(h);for(;p.hasNext();){const{key:y,value:{document:I}}=p.getNext();if(!c.isPrefixOf(y.path))break;y.path.length>c.length+1||sM(Rk(I),r)<=0||(i.has(I.key)||fI(t,I))&&(a=a.insert(I.key,I.mutableCopy()))}return $.resolve(a)}getAllFromCollectionGroup(e,t,r,i){Be()}Mr(e,t){return $.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new Rj(this)}getSize(e){return $.resolve(this.size)}}class Rj extends Ij{constructor(e){super(),this.ur=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.ur.addEntry(e,i)):this.ur.removeEntry(r)}),$.waitFor(t)}getFromCache(e,t){return this.ur.getEntry(e,t)}getAllFromCache(e,t){return this.ur.getEntries(e,t)}}class Pj{constructor(e){this.persistence=e,this.Or=new Pu(t=>Dh(t),dI),this.lastRemoteSnapshotVersion=Ye.min(),this.highestTargetId=0,this.Nr=0,this.Br=new FM,this.targetCount=0,this.Lr=Nh.Bn()}forEachTarget(e,t){return this.Or.forEach((r,i)=>t(i)),$.resolve()}getLastRemoteSnapshotVersion(e){return $.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return $.resolve(this.Nr)}allocateTargetId(e){return this.highestTargetId=this.Lr.next(),$.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Nr&&(this.Nr=t),$.resolve()}Qn(e){this.Or.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Lr=new Nh(t),this.highestTargetId=t),e.sequenceNumber>this.Nr&&(this.Nr=e.sequenceNumber)}addTargetData(e,t){return this.Qn(t),this.targetCount+=1,$.resolve()}updateTargetData(e,t){return this.Qn(t),$.resolve()}removeTargetData(e,t){return this.Or.delete(t.target),this.Br.mr(t.targetId),this.targetCount-=1,$.resolve()}removeTargets(e,t,r){let i=0;const a=[];return this.Or.forEach((c,h)=>{h.sequenceNumber<=t&&null===r.get(h.targetId)&&(this.Or.delete(c),a.push(this.removeMatchingKeysForTargetId(e,h.targetId)),i++)}),$.waitFor(a).next(()=>i)}getTargetCount(e){return $.resolve(this.targetCount)}getTargetData(e,t){const r=this.Or.get(t)||null;return $.resolve(r)}addMatchingKeys(e,t,r){return this.Br.Ar(t,r),$.resolve()}removeMatchingKeys(e,t,r){this.Br.Vr(t,r);const i=this.persistence.referenceDelegate,a=[];return i&&t.forEach(c=>{a.push(i.markPotentiallyOrphaned(e,c))}),$.waitFor(a)}removeMatchingKeysForTargetId(e,t){return this.Br.mr(t),$.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Br.pr(t);return $.resolve(r)}containsKey(e,t){return $.resolve(this.Br.containsKey(t))}}class LM{constructor(e,t){this.kr={},this.overlays={},this.qr=new Ts(0),this.Qr=!1,this.Qr=!0,this.referenceDelegate=e(this),this.Kr=new Pj(this),this.indexManager=new gj,this.remoteDocumentCache=new Sj(r=>this.referenceDelegate.$r(r)),this.serializer=new QF(t),this.Ur=new Cj(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Qr=!1,Promise.resolve()}get started(){return this.Qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Dj,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.kr[e.toKey()];return r||(r=new Aj(t,this.referenceDelegate),this.kr[e.toKey()]=r),r}getTargetCache(){return this.Kr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ur}runTransaction(e,t,r){pe("MemoryPersistence","Starting transaction:",e);const i=new xj(this.qr.next());return this.referenceDelegate.Wr(),r(i).next(a=>this.referenceDelegate.Gr(i).next(()=>a)).toPromise().then(a=>(i.raiseOnCommittedEvent(),a))}zr(e,t){return $.or(Object.values(this.kr).map(r=>()=>r.containsKey(e,t)))}}class xj extends XU{constructor(e){super(),this.currentSequenceNumber=e}}class lD{constructor(e){this.persistence=e,this.jr=new FM,this.Hr=null}static Jr(e){return new lD(e)}get Yr(){if(this.Hr)return this.Hr;throw Be()}addReference(e,t,r){return this.jr.addReference(r,t),this.Yr.delete(r.toString()),$.resolve()}removeReference(e,t,r){return this.jr.removeReference(r,t),this.Yr.add(r.toString()),$.resolve()}markPotentiallyOrphaned(e,t){return this.Yr.add(t.toString()),$.resolve()}removeTarget(e,t){this.jr.mr(t.targetId).forEach(i=>this.Yr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(a=>this.Yr.add(a.toString()))}).next(()=>r.removeTargetData(e,t))}Wr(){this.Hr=new Set}Gr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return $.forEach(this.Yr,r=>{const i=Ne.fromPath(r);return this.Zr(e,i).next(a=>{a||t.removeEntry(i,Ye.min())})}).next(()=>(this.Hr=null,t.apply(e)))}updateLimboDocument(e,t){return this.Zr(e,t).next(r=>{r?this.Yr.delete(t.toString()):this.Yr.add(t.toString())})}$r(e){return 0}Zr(e,t){return $.or([()=>$.resolve(this.jr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.zr(e,t)])}}class jM{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Qi=r,this.Ki=i}static $i(e,t){let r=It(),i=It();for(const a of t.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}return new jM(e,t.fromCache,r,i)}}class Oj{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class CL{constructor(){this.Ui=!1,this.Wi=!1,this.Gi=100,this.zi=8}initialize(e,t){this.ji=e,this.indexManager=t,this.Ui=!0}getDocumentsMatchingQuery(e,t,r,i){const a={result:null};return this.Hi(e,t).next(c=>{a.result=c}).next(()=>{if(!a.result)return this.Ji(e,t,i,r).next(c=>{a.result=c})}).next(()=>{if(a.result)return;const c=new Oj;return this.Yi(e,t,c).next(h=>{if(a.result=h,this.Wi)return this.Zi(e,t,c,h.size)})}).next(()=>a.result)}Zi(e,t,r,i){return r.documentReadCount<this.Gi?(zg()<=Pt.DEBUG&&pe("QueryEngine","SDK will not create cache indexes for query:",tm(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Gi,"documents"),$.resolve()):(zg()<=Pt.DEBUG&&pe("QueryEngine","Query:",tm(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.zi*i?(zg()<=Pt.DEBUG&&pe("QueryEngine","The SDK decides to create cache indexes for query:",tm(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Li(t))):$.resolve())}Hi(e,t){if(uF(t))return $.resolve(null);let r=Li(t);return this.indexManager.getIndexType(e,r).next(i=>0===i?null:(null!==t.limit&&1===i&&(t=Z0(t,null,"F"),r=Li(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(a=>{const c=It(...a);return this.ji.getDocuments(e,c).next(h=>this.indexManager.getMinOffset(e,r).next(p=>{const y=this.Xi(t,h);return this.es(t,y,c,p.readTime)?this.Hi(e,Z0(t,null,"F")):this.ts(e,y,t,p)}))})))}Ji(e,t,r,i){return uF(t)||i.isEqual(Ye.min())?$.resolve(null):this.ji.getDocuments(e,r).next(a=>{const c=this.Xi(t,a);return this.es(t,c,r,i)?$.resolve(null):(zg()<=Pt.DEBUG&&pe("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),tm(t)),this.ts(e,c,t,function Sk(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=Ye.fromTimestamp(1e9===r?new Nn(t+1,0):new Nn(t,r));return new ws(i,Ne.empty(),e)}(i,-1)).next(h=>h))})}Xi(e,t){let r=new _n(hF(e));return t.forEach((i,a)=>{fI(e,a)&&(r=r.add(a))}),r}es(e,t,r,i){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const a="F"===e.limitType?t.last():t.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(i)>0)}Yi(e,t,r){return zg()<=Pt.DEBUG&&pe("QueryEngine","Using full collection scan to execute query:",tm(t)),this.ji.getDocumentsMatchingQuery(e,t,ws.min(),r)}ts(e,t,r,i){return this.ji.getDocumentsMatchingQuery(e,r,i).next(a=>(t.forEach(c=>{a=a.insert(c.key,c)}),a))}}class Nj{constructor(e,t,r,i){this.persistence=e,this.ns=t,this.serializer=i,this.rs=new mn(ht),this.ss=new Pu(a=>Dh(a),dI),this.os=new Map,this._s=e.getRemoteDocumentCache(),this.Kr=e.getTargetCache(),this.Ur=e.getBundleCache(),this.us(r)}us(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new TL(this._s,this.mutationQueue,this.documentOverlayCache,this.indexManager),this._s.setIndexManager(this.indexManager),this.ns.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.rs))}}function AL(n,e){return $M.apply(this,arguments)}function $M(){return $M=F(function*(n,e){const t=xe(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(a=>(i=a,t.us(e),t.mutationQueue.getAllMutationBatches(r))).next(a=>{const c=[],h=[];let p=It();for(const y of i){c.push(y.batchId);for(const I of y.mutations)p=p.add(I.key)}for(const y of a){h.push(y.batchId);for(const I of y.mutations)p=p.add(I.key)}return t.localDocuments.getDocuments(r,p).next(y=>({cs:y,removedBatchIds:c,addedBatchIds:h}))})})}),$M.apply(this,arguments)}function SL(n){const e=xe(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Kr.getLastRemoteSnapshotVersion(t))}function Lj(n,e){const t=xe(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function fm(n,e,t){return HM.apply(this,arguments)}function HM(){return HM=F(function*(n,e,t){const r=xe(n),i=r.rs.get(e),a=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",a,c=>r.persistence.referenceDelegate.removeTarget(c,i)))}catch(c){if(!ol(c))throw c;pe("LocalStore",`Failed to update sequence numbers for target ${e}: ${c}`)}r.rs=r.rs.remove(e),r.ss.delete(i.target)}),HM.apply(this,arguments)}function fD(n,e,t){const r=xe(n);let i=Ye.min(),a=It();return r.persistence.runTransaction("Execute query","readwrite",c=>function(p,y,I){const D=xe(p),O=D.ss.get(I);return void 0!==O?$.resolve(D.rs.get(O)):D.Kr.getTargetData(y,I)}(r,c,Li(e)).next(h=>{if(h)return i=h.lastLimboFreeSnapshotVersion,r.Kr.getMatchingKeysForTargetId(c,h.targetId).next(p=>{a=p})}).next(()=>r.ns.getDocumentsMatchingQuery(c,e,t?i:Ye.min(),t?a:It())).next(h=>(function ML(n,e,t){let r=n.os.get(e)||Ye.min();t.forEach((i,a)=>{a.readTime.compareTo(r)>0&&(r=a.readTime)}),n.os.set(e,r)}(r,function dF(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}(e),h),{documents:h,Ps:a})))}class KM{constructor(){this.activeTargetIds=function yM(){return VB}()}Rs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Vs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}As(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class kL{constructor(){this.ro=new KM,this.io={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.ro.Rs(e),this.io[e]||"not-current"}updateQueryState(e,t,r){this.io[e]=t}removeLocalQueryTarget(e){this.ro.Vs(e)}isLocalQueryTarget(e){return this.ro.activeTargetIds.has(e)}clearQueryState(e){delete this.io[e]}getAllActiveQueryTargets(){return this.ro.activeTargetIds}isActiveQueryTarget(e){return this.ro.activeTargetIds.has(e)}start(){return this.ro=new KM,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Bj{so(e){}shutdown(){}}class FL{constructor(){this.oo=()=>this._o(),this.ao=()=>this.uo(),this.co=[],this.lo()}so(e){this.co.push(e)}shutdown(){window.removeEventListener("online",this.oo),window.removeEventListener("offline",this.ao)}lo(){window.addEventListener("online",this.oo),window.addEventListener("offline",this.ao)}_o(){pe("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.co)e(0)}uo(){pe("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.co)e(1)}static C(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let mD=null;function QM(){return null===mD?mD=268435456+Math.round(2147483648*Math.random()):mD++,"0x"+mD.toString(16)}const jj={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class $j{constructor(e){this.ho=e.ho,this.Po=e.Po}Io(e){this.To=e}Eo(e){this.Ao=e}onMessage(e){this.Ro=e}close(){this.Po()}send(e){this.ho(e)}Vo(){this.To()}mo(e){this.Ao(e)}fo(e){this.Ro(e)}}const Ii="WebChannelConnection";class Hj extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const r=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.po=r+"://"+t.host,this.yo=`projects/${i}/databases/${a}`,this.wo="(default)"===this.databaseId.database?`project_id=${i}`:`project_id=${i}&database_id=${a}`}get So(){return!1}bo(t,r,i,a,c){const h=QM(),p=this.Do(t,r);pe("RestConnection",`Sending RPC '${t}' ${h}:`,p,i);const y={"google-cloud-resource-prefix":this.yo,"x-goog-request-params":this.wo};return this.Co(y,a,c),this.vo(t,p,y,i).then(I=>(pe("RestConnection",`Received RPC '${t}' ${h}: `,I),I),I=>{throw Is("RestConnection",`RPC '${t}' ${h} failed with error: `,I,"url: ",p,"request:",i),I})}Fo(t,r,i,a,c,h){return this.bo(t,r,i,a,c)}Co(t,r,i){t["X-Goog-Api-Client"]="gl-js/ fire/"+Gg,t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((a,c)=>t[c]=a),i&&i.headers.forEach((a,c)=>t[c]=a)}Do(t,r){return`${this.po}/v1/${r}:${jj[t]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}vo(e,t,r,i){const a=QM();return new Promise((c,h)=>{const p=new jU;p.setWithCredentials(!0),p.listenOnce(UU.COMPLETE,()=>{try{switch(p.getLastErrorCode()){case nM.NO_ERROR:const I=p.getResponseJson();pe(Ii,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(I)),c(I);break;case nM.TIMEOUT:pe(Ii,`RPC '${e}' ${a} timed out`),h(new fe(q.DEADLINE_EXCEEDED,"Request time out"));break;case nM.HTTP_ERROR:const D=p.getStatus();if(pe(Ii,`RPC '${e}' ${a} failed with status:`,D,"response text:",p.getResponseText()),D>0){let O=p.getResponseJson();Array.isArray(O)&&(O=O[0]);const L=O?.error;if(L&&L.status&&L.message){const J=function(ie){const _e=ie.toLowerCase().replace(/_/g,"-");return Object.values(q).indexOf(_e)>=0?_e:q.UNKNOWN}(L.status);h(new fe(J,L.message))}else h(new fe(q.UNKNOWN,"Server responded with status "+p.getStatus()))}else h(new fe(q.UNAVAILABLE,"Connection failed."));break;default:Be()}}finally{pe(Ii,`RPC '${e}' ${a} completed.`)}});const y=JSON.stringify(i);pe(Ii,`RPC '${e}' ${a} sending request:`,i),p.send(t,"POST",y,r,15)})}Mo(e,t,r){const i=QM(),a=[this.po,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=eM(),h=tM(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},y=this.longPollingOptions.timeoutSeconds;void 0!==y&&(p.longPollingTimeout=Math.round(1e3*y)),this.useFetchStreams&&(p.useFetchStreams=!0),this.Co(p.initMessageHeaders,t,r),p.encodeInitMessageHeaders=!0;const I=a.join("");pe(Ii,`Creating RPC '${e}' stream ${i}: ${I}`,p);const D=c.createWebChannel(I,p);let O=!1,L=!1;const J=new $j({ho:ie=>{L?pe(Ii,`Not sending because RPC '${e}' stream ${i} is closed:`,ie):(O||(pe(Ii,`Opening RPC '${e}' stream ${i} transport.`),D.open(),O=!0),pe(Ii,`RPC '${e}' stream ${i} sending:`,ie),D.send(ie))},Po:()=>D.close()}),X=(ie,_e,Fe)=>{ie.listen(_e,ke=>{try{Fe(ke)}catch(tt){setTimeout(()=>{throw tt},0)}})};return X(D,U0.EventType.OPEN,()=>{L||pe(Ii,`RPC '${e}' stream ${i} transport opened.`)}),X(D,U0.EventType.CLOSE,()=>{L||(L=!0,pe(Ii,`RPC '${e}' stream ${i} transport closed`),J.mo())}),X(D,U0.EventType.ERROR,ie=>{L||(L=!0,Is(Ii,`RPC '${e}' stream ${i} transport errored:`,ie),J.mo(new fe(q.UNAVAILABLE,"The operation could not be completed")))}),X(D,U0.EventType.MESSAGE,ie=>{var _e;if(!L){const Fe=ie.data[0];Ke(!!Fe);const tt=Fe.error||(null===(_e=Fe[0])||void 0===_e?void 0:_e.error);if(tt){pe(Ii,`RPC '${e}' stream ${i} received error:`,tt);const vt=tt.status;let ut=function(YI){const iA=lr[YI];if(void 0!==iA)return PF(iA)}(vt),sn=tt.message;void 0===ut&&(ut=q.INTERNAL,sn="Unknown error status: "+vt+" with message "+tt.message),L=!0,J.mo(new fe(ut,sn)),D.close()}else pe(Ii,`RPC '${e}' stream ${i} received:`,Fe),J.fo(Fe)}}),X(h,BU.STAT_EVENT,ie=>{ie.stat===wk.PROXY?pe(Ii,`RPC '${e}' stream ${i} detected buffering proxy`):ie.stat===wk.NOPROXY&&pe(Ii,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{J.Vo()},0),J}}function _D(){return typeof document<"u"?document:null}function xI(n){return new JB(n,!0)}class ZM{constructor(e,t,r=1e3,i=1.5,a=6e4){this._i=e,this.timerId=t,this.xo=r,this.Oo=i,this.No=a,this.Bo=0,this.Lo=null,this.ko=Date.now(),this.reset()}reset(){this.Bo=0}qo(){this.Bo=this.No}Qo(e){this.cancel();const t=Math.floor(this.Bo+this.Ko()),r=Math.max(0,Date.now()-this.ko),i=Math.max(0,t-r);i>0&&pe("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Bo} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.Lo=this._i.enqueueAfterDelay(this.timerId,i,()=>(this.ko=Date.now(),e())),this.Bo*=this.Oo,this.Bo<this.xo&&(this.Bo=this.xo),this.Bo>this.No&&(this.Bo=this.No)}$o(){null!==this.Lo&&(this.Lo.skipDelay(),this.Lo=null)}cancel(){null!==this.Lo&&(this.Lo.cancel(),this.Lo=null)}Ko(){return(Math.random()-.5)*this.Bo}}class VL{constructor(e,t,r,i,a,c,h,p){this._i=e,this.Uo=r,this.Wo=i,this.connection=a,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=h,this.listener=p,this.state=0,this.Go=0,this.zo=null,this.jo=null,this.stream=null,this.Ho=new ZM(e,t)}Jo(){return 1===this.state||5===this.state||this.Yo()}Yo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Zo()}stop(){var e=this;return F(function*(){e.Jo()&&(yield e.close(0))})()}Xo(){this.state=0,this.Ho.reset()}e_(){this.Yo()&&null===this.zo&&(this.zo=this._i.enqueueAfterDelay(this.Uo,6e4,()=>this.t_()))}n_(e){this.r_(),this.stream.send(e)}t_(){var e=this;return F(function*(){if(e.Yo())return e.close(0)})()}r_(){this.zo&&(this.zo.cancel(),this.zo=null)}i_(){this.jo&&(this.jo.cancel(),this.jo=null)}close(e,t){var r=this;return F(function*(){r.r_(),r.i_(),r.Ho.cancel(),r.Go++,4!==e?r.Ho.reset():t&&t.code===q.RESOURCE_EXHAUSTED?(Yn(t.toString()),Yn("Using maximum backoff delay to prevent overloading the backend."),r.Ho.qo()):t&&t.code===q.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.s_(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.Eo(t)})()}s_(){}auth(){this.state=1;const e=this.o_(this.Go),t=this.Go;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Go===t&&this.__(r,i)},r=>{e(()=>{const i=new fe(q.UNKNOWN,"Fetching auth token failed: "+r.message);return this.a_(i)})})}__(e,t){const r=this.o_(this.Go);this.stream=this.u_(e,t),this.stream.Io(()=>{r(()=>(this.state=2,this.jo=this._i.enqueueAfterDelay(this.Wo,1e4,()=>(this.Yo()&&(this.state=3),Promise.resolve())),this.listener.Io()))}),this.stream.Eo(i=>{r(()=>this.a_(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Zo(){var e=this;this.state=5,this.Ho.Qo(F(function*(){e.state=0,e.start()}))}a_(e){return pe("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}o_(e){return t=>{this._i.enqueueAndForget(()=>this.Go===e?t():(pe("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Gj extends VL{constructor(e,t,r,i,a,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,c),this.serializer=a}u_(e,t){return this.connection.Mo("Listen",e,t)}onMessage(e){this.Ho.reset();const t=function tj(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(y=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===y?1:"REMOVE"===y?2:"CURRENT"===y?3:"RESET"===y?4:Be(),i=e.targetChange.targetIds||[],a=function(y,I){return y.useProto3Json?(Ke(void 0===I||"string"==typeof I),br.fromBase64String(I||"")):(Ke(void 0===I||I instanceof Uint8Array),br.fromUint8Array(I||new Uint8Array))}(n,e.targetChange.resumeToken),c=e.targetChange.cause,h=c&&function(y){const I=void 0===y.code?q.UNKNOWN:PF(y.code);return new fe(I,y.message||"")}(c);t=new kF(r,i,a,h||null)}else if("documentChange"in e){const r=e.documentChange,i=Ma(n,r.document.name),a=Qn(r.document.updateTime),c=r.document.createTime?Qn(r.document.createTime):Ye.min(),h=new ni({mapValue:{fields:r.document.fields}}),p=Cn.newFoundDocument(i,a,c,h);t=new nD(r.targetIds||[],r.removedTargetIds||[],p.key,p)}else if("documentDelete"in e){const r=e.documentDelete,i=Ma(n,r.document),a=r.readTime?Qn(r.readTime):Ye.min(),c=Cn.newNoDocument(i,a);t=new nD([],r.removedTargetIds||[],c.key,c)}else if("documentRemove"in e){const r=e.documentRemove,i=Ma(n,r.document);t=new nD([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return Be();{const r=e.filter,{count:i=0,unchangedNames:a}=r,c=new qB(i,a);t=new NF(r.targetId,c)}}var y;return t}(this.serializer,e),r=function(a){if(!("targetChange"in a))return Ye.min();const c=a.targetChange;return c.targetIds&&c.targetIds.length?Ye.min():c.readTime?Qn(c.readTime):Ye.min()}(e);return this.listener.c_(t,r)}l_(e){const t={};t.database=wI(this.serializer),t.addTarget=function(a,c){let h;const p=c.target;if(h=K0(p)?{documents:zF(a,p)}:{query:SM(a,p)},h.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){h.resumeToken=UF(a,c.resumeToken);const y=bM(a,c.expectedCount);null!==y&&(h.expectedCount=y)}else if(c.snapshotVersion.compareTo(Ye.min())>0){h.readTime=om(a,c.snapshotVersion.toTimestamp());const y=bM(a,c.expectedCount);null!==y&&(h.expectedCount=y)}return h}(this.serializer,e);const r=function rj(n,e){const t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Be()}}(e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.n_(t)}h_(e){const t={};t.database=wI(this.serializer),t.removeTarget=e,this.n_(t)}}class zj extends VL{constructor(e,t,r,i,a,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,c),this.serializer=a,this.P_=!1}get I_(){return this.P_}start(){this.P_=!1,this.lastStreamToken=void 0,super.start()}s_(){this.P_&&this.d_([])}u_(e,t){return this.connection.Mo("Write",e,t)}onMessage(e){if(Ke(!!e.streamToken),this.lastStreamToken=e.streamToken,this.P_){this.Ho.reset();const t=function nj(n,e){return n&&n.length>0?(Ke(void 0!==e),n.map(t=>function(i,a){let c=Qn(i.updateTime?i.updateTime:a);return c.isEqual(Ye.min())&&(c=Qn(a)),new $B(c,i.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=Qn(e.commitTime);return this.listener.T_(r,t)}return Ke(!e.writeResults||0===e.writeResults.length),this.P_=!0,this.listener.E_()}A_(){const e={};e.database=wI(this.serializer),this.n_(e)}d_(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>TI(this.serializer,r))};this.n_(t)}}class qj extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.R_=!1}V_(){if(this.R_)throw new fe(q.FAILED_PRECONDITION,"The client has already been terminated.")}bo(e,t,r){return this.V_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,a])=>this.connection.bo(e,t,r,i,a)).catch(i=>{throw"FirebaseError"===i.name?(i.code===q.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new fe(q.UNKNOWN,i.toString())})}Fo(e,t,r,i){return this.V_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,c])=>this.connection.Fo(e,t,r,a,c,i)).catch(a=>{throw"FirebaseError"===a.name?(a.code===q.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new fe(q.UNKNOWN,a.toString())})}terminate(){this.R_=!0}}class Kj{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.f_=0,this.g_=null,this.p_=!0}y_(){0===this.f_&&(this.w_("Unknown"),this.g_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.g_=null,this.S_("Backend didn't respond within 10 seconds."),this.w_("Offline"),Promise.resolve())))}b_(e){"Online"===this.state?this.w_("Unknown"):(this.f_++,this.f_>=1&&(this.D_(),this.S_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.w_("Offline")))}set(e){this.D_(),this.f_=0,"Online"===e&&(this.p_=!1),this.w_(e)}w_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}S_(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.p_?(Yn(t),this.p_=!1):pe("OnlineStateTracker",t)}D_(){null!==this.g_&&(this.g_.cancel(),this.g_=null)}}class Yj{constructor(e,t,r,i,a){var c=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.C_=[],this.v_=new Map,this.F_=new Set,this.M_=[],this.x_=a,this.x_.so(h=>{r.enqueueAndForget(F(function*(){var p;_l(c)&&(pe("RemoteStore","Restarting streams for network reachability change."),yield(p=F(function*(I){const D=xe(I);D.F_.add(4),yield pm(D),D.O_.set("Unknown"),D.F_.delete(4),yield MI(D)}),function y(I){return p.apply(this,arguments)})(c))}))}),this.O_=new Kj(r,i)}}function MI(n){return XM.apply(this,arguments)}function XM(){return XM=F(function*(n){if(_l(n))for(const e of n.M_)yield e(!0)}),XM.apply(this,arguments)}function pm(n){return eO.apply(this,arguments)}function eO(){return eO=F(function*(n){for(const e of n.M_)yield e(!1)}),eO.apply(this,arguments)}function yD(n,e){const t=xe(n);t.v_.has(e.targetId)||(t.v_.set(e.targetId,e),rO(t)?nO(t):mm(t).Yo()&&tO(t,e))}function OI(n,e){const t=xe(n),r=mm(t);t.v_.delete(e),r.Yo()&&UL(t,e),0===t.v_.size&&(r.Yo()?r.e_():_l(t)&&t.O_.set("Unknown"))}function tO(n,e){if(n.N_.Le(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ye.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}mm(n).l_(e)}function UL(n,e){n.N_.Le(e),mm(n).h_(e)}function nO(n){n.N_=new KB({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),lt:e=>n.v_.get(e)||null,st:()=>n.datastore.serializer.databaseId}),mm(n).start(),n.O_.y_()}function rO(n){return _l(n)&&!mm(n).Jo()&&n.v_.size>0}function _l(n){return 0===xe(n).F_.size}function BL(n){n.N_=void 0}function Qj(n){return iO.apply(this,arguments)}function iO(){return iO=F(function*(n){n.v_.forEach((e,t)=>{tO(n,e)})}),iO.apply(this,arguments)}function Zj(n,e){return sO.apply(this,arguments)}function sO(){return sO=F(function*(n,e){BL(n),rO(n)?(n.O_.b_(e),nO(n)):n.O_.set("Unknown")}),sO.apply(this,arguments)}function Jj(n,e,t){return oO.apply(this,arguments)}function oO(){return oO=F(function*(n,e,t){if(n.O_.set("Online"),e instanceof kF&&2===e.state&&e.cause)try{yield(r=F(function*(a,c){const h=c.cause;for(const p of c.targetIds)a.v_.has(p)&&(yield a.remoteSyncer.rejectListen(p,h),a.v_.delete(p),a.N_.removeTarget(p))}),function i(a,c){return r.apply(this,arguments)})(n,e)}catch(r){pe("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield vD(n,r)}else if(e instanceof nD?n.N_.Ge(e):e instanceof NF?n.N_.Xe(e):n.N_.He(e),!t.isEqual(Ye.min()))try{const r=yield SL(n.localStore);t.compareTo(r)>=0&&(yield function(a,c){const h=a.N_._t(c);return h.targetChanges.forEach((p,y)=>{if(p.resumeToken.approximateByteSize()>0){const I=a.v_.get(y);I&&a.v_.set(y,I.withResumeToken(p.resumeToken,c))}}),h.targetMismatches.forEach((p,y)=>{const I=a.v_.get(p);if(!I)return;a.v_.set(p,I.withResumeToken(br.EMPTY_BYTE_STRING,I.snapshotVersion)),UL(a,p);const D=new Mu(I.target,p,y,I.sequenceNumber);tO(a,D)}),a.remoteSyncer.applyRemoteEvent(h)}(n,t))}catch(r){pe("RemoteStore","Failed to raise snapshot:",r),yield vD(n,r)}var r}),oO.apply(this,arguments)}function vD(n,e,t){return aO.apply(this,arguments)}function aO(){return aO=F(function*(n,e,t){if(!ol(e))throw e;n.F_.add(1),yield pm(n),n.O_.set("Offline"),t||(t=()=>SL(n.localStore)),n.asyncQueue.enqueueRetryable(F(function*(){pe("RemoteStore","Retrying IndexedDB access"),yield t(),n.F_.delete(1),yield MI(n)}))}),aO.apply(this,arguments)}function jL(n,e){return e().catch(t=>vD(n,t,e))}function gm(n){return uO.apply(this,arguments)}function uO(){return uO=F(function*(n){const e=xe(n),t=yl(e);let r=e.C_.length>0?e.C_[e.C_.length-1].batchId:-1;for(;Xj(e);)try{const i=yield Lj(e.localStore,r);if(null===i){0===e.C_.length&&t.e_();break}r=i.batchId,e$(e,i)}catch(i){yield vD(e,i)}$L(e)&&HL(e)}),uO.apply(this,arguments)}function Xj(n){return _l(n)&&n.C_.length<10}function e$(n,e){n.C_.push(e);const t=yl(n);t.Yo()&&t.I_&&t.d_(e.mutations)}function $L(n){return _l(n)&&!yl(n).Jo()&&n.C_.length>0}function HL(n){yl(n).start()}function t$(n){return cO.apply(this,arguments)}function cO(){return cO=F(function*(n){yl(n).A_()}),cO.apply(this,arguments)}function n$(n){return lO.apply(this,arguments)}function lO(){return lO=F(function*(n){const e=yl(n);for(const t of n.C_)e.d_(t.mutations)}),lO.apply(this,arguments)}function r$(n,e,t){return dO.apply(this,arguments)}function dO(){return dO=F(function*(n,e,t){const r=n.C_.shift(),i=IM.from(r,e,t);yield jL(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield gm(n)}),dO.apply(this,arguments)}function i$(n,e){return hO.apply(this,arguments)}function hO(){return hO=F(function*(n,e){var t;e&&yl(n).I_&&(yield(t=F(function*(i,a){if(RF(h=a.code)&&h!==q.ABORTED){const c=i.C_.shift();yl(i).Xo(),yield jL(i,()=>i.remoteSyncer.rejectFailedWrite(c.batchId,a)),yield gm(i)}var h}),function r(i,a){return t.apply(this,arguments)})(n,e)),$L(n)&&HL(n)}),hO.apply(this,arguments)}function GL(n,e){return fO.apply(this,arguments)}function fO(){return fO=F(function*(n,e){const t=xe(n);t.asyncQueue.verifyOperationInProgress(),pe("RemoteStore","RemoteStore received new credentials");const r=_l(t);t.F_.add(3),yield pm(t),r&&t.O_.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.F_.delete(3),yield MI(t)}),fO.apply(this,arguments)}function gO(){return gO=F(function*(n,e){const t=xe(n);e?(t.F_.delete(2),yield MI(t)):e||(t.F_.add(2),yield pm(t),t.O_.set("Unknown"))}),gO.apply(this,arguments)}function mm(n){return n.B_||(n.B_=function(t,r,i){const a=xe(t);return a.V_(),new Gj(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,i)}(n.datastore,n.asyncQueue,{Io:Qj.bind(null,n),Eo:Zj.bind(null,n),c_:Jj.bind(null,n)}),n.M_.push(function(){var e=F(function*(t){t?(n.B_.Xo(),rO(n)?nO(n):n.O_.set("Unknown")):(yield n.B_.stop(),BL(n))});return function(t){return e.apply(this,arguments)}}())),n.B_}function yl(n){return n.L_||(n.L_=function(t,r,i){const a=xe(t);return a.V_(),new zj(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,i)}(n.datastore,n.asyncQueue,{Io:t$.bind(null,n),Eo:i$.bind(null,n),E_:n$.bind(null,n),T_:r$.bind(null,n)}),n.M_.push(function(){var e=F(function*(t){t?(n.L_.Xo(),yield gm(n)):(yield n.L_.stop(),n.C_.length>0&&(pe("RemoteStore",`Stopping write stream with ${n.C_.length} pending writes`),n.C_=[]))});return function(t){return e.apply(this,arguments)}}())),n.L_}class mO{constructor(e,t,r,i,a){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new Tr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(c=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,a){const c=Date.now()+r,h=new mO(e,t,c,i,a);return h.start(r),h}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new fe(q.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function _m(n,e){if(Yn("AsyncQueue",`${e}: ${n}`),ol(n))return new fe(q.UNAVAILABLE,`${e}: ${n}`);throw n}class ym{constructor(e){this.comparator=e?(t,r)=>e(t,r)||Ne.comparator(t.key,r.key):(t,r)=>Ne.comparator(t.key,r.key),this.keyedMap=pI(),this.sortedSet=new mn(this.comparator)}static emptySet(e){return new ym(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof ym)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new ym;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class zL{constructor(){this.k_=new mn(Ne.comparator)}track(e){const t=e.doc.key,r=this.k_.get(t);r?0!==e.type&&3===r.type?this.k_=this.k_.insert(t,e):3===e.type&&1!==r.type?this.k_=this.k_.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.k_=this.k_.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.k_=this.k_.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.k_=this.k_.remove(t):1===e.type&&2===r.type?this.k_=this.k_.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.k_=this.k_.insert(t,{type:2,doc:e.doc}):Be():this.k_=this.k_.insert(t,e)}q_(){const e=[];return this.k_.inorderTraversal((t,r)=>{e.push(r)}),e}}class vm{constructor(e,t,r,i,a,c,h,p,y){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=c,this.syncStateChanged=h,this.excludesMetadataChanges=p,this.hasCachedResults=y}static fromInitialDocuments(e,t,r,i,a){const c=[];return t.forEach(h=>{c.push({type:0,doc:h})}),new vm(e,t,ym.emptySet(t),c,r,i,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&hI(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class s${constructor(){this.Q_=void 0,this.listeners=[]}}class o${constructor(){this.queries=new Pu(e=>lF(e),hI),this.onlineState="Unknown",this.K_=new Set}}function yO(){return yO=F(function*(n,e){const t=xe(n),r=e.query;let i=!1,a=t.queries.get(r);if(a||(i=!0,a=new s$),i)try{a.Q_=yield t.onListen(r)}catch(c){const h=_m(c,`Initialization of query '${tm(e.query)}' failed`);return void e.onError(h)}t.queries.set(r,a),a.listeners.push(e),e.U_(t.onlineState),a.Q_&&e.W_(a.Q_)&&IO(t)}),yO.apply(this,arguments)}function EO(){return EO=F(function*(n,e){const t=xe(n),r=e.query;let i=!1;const a=t.queries.get(r);if(a){const c=a.listeners.indexOf(e);c>=0&&(a.listeners.splice(c,1),i=0===a.listeners.length)}if(i)return t.queries.delete(r),t.onUnlisten(r)}),EO.apply(this,arguments)}function a$(n,e){const t=xe(n);let r=!1;for(const i of e){const c=t.queries.get(i.query);if(c){for(const h of c.listeners)h.W_(i)&&(r=!0);c.Q_=i}}r&&IO(t)}function u$(n,e,t){const r=xe(n),i=r.queries.get(e);if(i)for(const a of i.listeners)a.onError(t);r.queries.delete(e)}function IO(n){n.K_.forEach(e=>{e.next()})}class wO{constructor(e,t,r){this.query=e,this.G_=t,this.z_=!1,this.j_=null,this.onlineState="Unknown",this.options=r||{}}W_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new vm(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.z_?this.H_(e)&&(this.G_.next(e),t=!0):this.J_(e,this.onlineState)&&(this.Y_(e),t=!0),this.j_=e,t}onError(e){this.G_.error(e)}U_(e){this.onlineState=e;let t=!1;return this.j_&&!this.z_&&this.J_(this.j_,e)&&(this.Y_(this.j_),t=!0),t}J_(e,t){return!e.fromCache||(!this.options.Z_||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}H_(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.j_&&this.j_.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Y_(e){e=vm.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.z_=!0,this.G_.next(e)}}class KL{constructor(e){this.key=e}}class YL{constructor(e){this.key=e}}class QL{constructor(e,t){this.query=e,this.oa=t,this._a=null,this.hasCachedResults=!1,this.current=!1,this.aa=It(),this.mutatedKeys=It(),this.ua=hF(e),this.ca=new ym(this.ua)}get la(){return this.oa}ha(e,t){const r=t?t.Pa:new zL,i=t?t.ca:this.ca;let a=t?t.mutatedKeys:this.mutatedKeys,c=i,h=!1;const p="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,y="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((I,D)=>{const O=i.get(I),L=fI(this.query,D)?D:null,J=!!O&&this.mutatedKeys.has(O.key),X=!!L&&(L.hasLocalMutations||this.mutatedKeys.has(L.key)&&L.hasCommittedMutations);let ie=!1;O&&L?O.data.isEqual(L.data)?J!==X&&(r.track({type:3,doc:L}),ie=!0):this.Ia(O,L)||(r.track({type:2,doc:L}),ie=!0,(p&&this.ua(L,p)>0||y&&this.ua(L,y)<0)&&(h=!0)):!O&&L?(r.track({type:0,doc:L}),ie=!0):O&&!L&&(r.track({type:1,doc:O}),ie=!0,(p||y)&&(h=!0)),ie&&(L?(c=c.add(L),a=X?a.add(I):a.delete(I)):(c=c.delete(I),a=a.delete(I)))}),null!==this.query.limit)for(;c.size>this.query.limit;){const I="F"===this.query.limitType?c.last():c.first();c=c.delete(I.key),a=a.delete(I.key),r.track({type:1,doc:I})}return{ca:c,Pa:r,es:h,mutatedKeys:a}}Ia(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const i=this.ca;this.ca=e.ca,this.mutatedKeys=e.mutatedKeys;const a=e.Pa.q_();a.sort((y,I)=>function(O,L){const J=X=>{switch(X){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Be()}};return J(O)-J(L)}(y.type,I.type)||this.ua(y.doc,I.doc)),this.da(r);const c=t?this.Ta():[],h=0===this.aa.size&&this.current?1:0,p=h!==this._a;return this._a=h,0!==a.length||p?{snapshot:new vm(this.query,e.ca,i,a,e.mutatedKeys,0===h,p,!1,!!r&&r.resumeToken.approximateByteSize()>0),Ea:c}:{Ea:c}}U_(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({ca:this.ca,Pa:new zL,mutatedKeys:this.mutatedKeys,es:!1},!1)):{Ea:[]}}Aa(e){return!this.oa.has(e)&&!!this.ca.has(e)&&!this.ca.get(e).hasLocalMutations}da(e){e&&(e.addedDocuments.forEach(t=>this.oa=this.oa.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.oa=this.oa.delete(t)),this.current=e.current)}Ta(){if(!this.current)return[];const e=this.aa;this.aa=It(),this.ca.forEach(r=>{this.Aa(r.key)&&(this.aa=this.aa.add(r.key))});const t=[];return e.forEach(r=>{this.aa.has(r)||t.push(new YL(r))}),this.aa.forEach(r=>{e.has(r)||t.push(new KL(r))}),t}Ra(e){this.oa=e.Ps,this.aa=It();const t=this.ha(e.documents);return this.applyChanges(t,!0)}Va(){return vm.fromInitialDocuments(this.query,this.ca,this.mutatedKeys,0===this._a,this.hasCachedResults)}}class d${constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class h${constructor(e){this.key=e,this.ma=!1}}class f${constructor(e,t,r,i,a,c){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=c,this.fa={},this.ga=new Pu(h=>lF(h),hI),this.pa=new Map,this.ya=new Set,this.wa=new mn(Ne.comparator),this.Sa=new Map,this.ba=new FM,this.Da={},this.Ca=new Map,this.va=Nh.Ln(),this.onlineState="Unknown",this.Fa=void 0}get isPrimaryClient(){return!0===this.Fa}}function p$(n,e){return TO.apply(this,arguments)}function TO(){return TO=F(function*(n,e){const t=function qO(n){const e=xe(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=ZL.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=T$.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=_$.bind(null,e),e.fa.c_=a$.bind(null,e.eventManager),e.fa.xa=u$.bind(null,e.eventManager),e}(n);let r,i;const a=t.ga.get(e);if(a)r=a.targetId,t.sharedClientState.addLocalQueryTarget(r),i=a.view.Va();else{const c=yield function hm(n,e){const t=xe(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Kr.getTargetData(r,e).next(a=>a?(i=a,$.resolve(i)):t.Kr.allocateTargetId(r).next(c=>(i=new Mu(e,c,"TargetPurposeListen",r.currentSequenceNumber),t.Kr.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.rs.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.rs=t.rs.insert(r.targetId,r),t.ss.set(e,r.targetId)),r})}(t.localStore,Li(e)),h=t.sharedClientState.addLocalQueryTarget(c.targetId);r=c.targetId,i=yield function bO(n,e,t,r,i){return CO.apply(this,arguments)}(t,e,r,"current"===h,c.resumeToken),t.isPrimaryClient&&yD(t.remoteStore,c)}return i}),TO.apply(this,arguments)}function CO(){return CO=F(function*(n,e,t,r,i){n.Ma=(D,O,L)=>{return(J=F(function*(ie,_e,Fe,ke){let tt=_e.view.ha(Fe);tt.es&&(tt=yield fD(ie.localStore,_e.query,!1).then(({documents:sn})=>_e.view.ha(sn,tt)));const vt=ke&&ke.targetChanges.get(_e.targetId),ut=_e.view.applyChanges(tt,ie.isPrimaryClient,vt);return kO(ie,_e.targetId,ut.Ea),ut.snapshot}),function X(ie,_e,Fe,ke){return J.apply(this,arguments)})(n,D,O,L);var J};const a=yield fD(n.localStore,e,!0),c=new QL(e,a.Ps),h=c.ha(a.documents),p=EI.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState,i),y=c.applyChanges(h,n.isPrimaryClient,p);kO(n,t,y.Ea);const I=new d$(e,t,c);return n.ga.set(e,I),n.pa.has(t)?n.pa.get(t).push(e):n.pa.set(t,[e]),y.snapshot}),CO.apply(this,arguments)}function g$(n,e){return DO.apply(this,arguments)}function DO(){return DO=F(function*(n,e){const t=xe(n),r=t.ga.get(e),i=t.pa.get(r.targetId);if(i.length>1)return t.pa.set(r.targetId,i.filter(a=>!hI(a,e))),void t.ga.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield fm(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),OI(t.remoteStore,r.targetId),Em(t,r.targetId)}).catch(sl))):(Em(t,r.targetId),yield fm(t.localStore,r.targetId,!0))}),DO.apply(this,arguments)}function AO(){return AO=F(function*(n,e,t){const r=function WO(n){const e=xe(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=y$.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=v$.bind(null,e),e}(n);try{const i=yield function(c,h){const p=xe(c),y=Nn.now(),I=h.reduce((L,J)=>L.add(J.key),It());let D,O;return p.persistence.runTransaction("Locally write mutations","readwrite",L=>{let J=Xi(),X=It();return p._s.getEntries(L,I).next(ie=>{J=ie,J.forEach((_e,Fe)=>{Fe.isValidDocument()||(X=X.add(_e))})}).next(()=>p.localDocuments.getOverlayedDocuments(L,J)).next(ie=>{D=ie;const _e=[];for(const Fe of h){const ke=GB(Fe,D.get(Fe.key).overlayedDocument);null!=ke&&_e.push(new xu(Fe.key,ke,Yk(ke.value.mapValue),Pn.exists(!0)))}return p.mutationQueue.addMutationBatch(L,y,_e,h)}).next(ie=>{O=ie;const _e=ie.applyToLocalDocumentSet(D,X);return p.documentOverlayCache.saveOverlays(L,ie.batchId,_e)})}).then(()=>({batchId:O.batchId,changes:pF(D)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(c,h,p){let y=c.Da[c.currentUser.toKey()];y||(y=new mn(ht)),y=y.insert(h,p),c.Da[c.currentUser.toKey()]=y}(r,i.batchId,t),yield Ou(r,i.changes),yield gm(r.remoteStore)}catch(i){const a=_m(i,"Failed to persist write");t.reject(a)}}),AO.apply(this,arguments)}function ZL(n,e){return SO.apply(this,arguments)}function SO(){return SO=F(function*(n,e){const t=xe(n);try{const r=yield function Fj(n,e){const t=xe(n),r=e.snapshotVersion;let i=t.rs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",a=>{const c=t._s.newChangeBuffer({trackRemovals:!0});i=t.rs;const h=[];e.targetChanges.forEach((I,D)=>{const O=i.get(D);if(!O)return;h.push(t.Kr.removeMatchingKeys(a,I.removedDocuments,D).next(()=>t.Kr.addMatchingKeys(a,I.addedDocuments,D)));let L=O.withSequenceNumber(a.currentSequenceNumber);var X,ie,_e;null!==e.targetMismatches.get(D)?L=L.withResumeToken(br.EMPTY_BYTE_STRING,Ye.min()).withLastLimboFreeSnapshotVersion(Ye.min()):I.resumeToken.approximateByteSize()>0&&(L=L.withResumeToken(I.resumeToken,r)),i=i.insert(D,L),ie=L,_e=I,(0===(X=O).resumeToken.approximateByteSize()||ie.snapshotVersion.toMicroseconds()-X.snapshotVersion.toMicroseconds()>=3e8||_e.addedDocuments.size+_e.modifiedDocuments.size+_e.removedDocuments.size>0)&&h.push(t.Kr.updateTargetData(a,L))});let p=Xi(),y=It();if(e.documentUpdates.forEach(I=>{e.resolvedLimboDocuments.has(I)&&h.push(t.persistence.referenceDelegate.updateLimboDocument(a,I))}),h.push(function RL(n,e,t){let r=It(),i=It();return t.forEach(a=>r=r.add(a)),e.getEntries(n,r).next(a=>{let c=Xi();return t.forEach((h,p)=>{const y=a.get(h);p.isFoundDocument()!==y.isFoundDocument()&&(i=i.add(h)),p.isNoDocument()&&p.version.isEqual(Ye.min())?(e.removeEntry(h,p.readTime),c=c.insert(h,p)):!y.isValidDocument()||p.version.compareTo(y.version)>0||0===p.version.compareTo(y.version)&&y.hasPendingWrites?(e.addEntry(p),c=c.insert(h,p)):pe("LocalStore","Ignoring outdated watch update for ",h,". Current version:",y.version," Watch version:",p.version)}),{ls:c,hs:i}})}(a,c,e.documentUpdates).next(I=>{p=I.ls,y=I.hs})),!r.isEqual(Ye.min())){const I=t.Kr.getLastRemoteSnapshotVersion(a).next(D=>t.Kr.setTargetsMetadata(a,a.currentSequenceNumber,r));h.push(I)}return $.waitFor(h).next(()=>c.apply(a)).next(()=>t.localDocuments.getLocalViewOfDocuments(a,p,y)).next(()=>p)}).then(a=>(t.rs=i,a))}(t.localStore,e);e.targetChanges.forEach((i,a)=>{const c=t.Sa.get(a);c&&(Ke(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?c.ma=!0:i.modifiedDocuments.size>0?Ke(c.ma):i.removedDocuments.size>0&&(Ke(c.ma),c.ma=!1))}),yield Ou(t,r,e)}catch(r){yield sl(r)}}),SO.apply(this,arguments)}function JL(n,e,t){const r=xe(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const i=[];r.ga.forEach((a,c)=>{const h=c.view.U_(e);h.snapshot&&i.push(h.snapshot)}),function(c,h){const p=xe(c);p.onlineState=h;let y=!1;p.queries.forEach((I,D)=>{for(const O of D.listeners)O.U_(h)&&(y=!0)}),y&&IO(p)}(r.eventManager,e),i.length&&r.fa.c_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function _$(n,e,t){return RO.apply(this,arguments)}function RO(){return RO=F(function*(n,e,t){const r=xe(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.Sa.get(e),a=i&&i.key;if(a){let c=new mn(Ne.comparator);c=c.insert(a,Cn.newNoDocument(a,Ye.min()));const h=It().add(a),p=new vI(Ye.min(),new Map,new mn(ht),c,h);yield ZL(r,p),r.wa=r.wa.remove(a),r.Sa.delete(e),FO(r)}else yield fm(r.localStore,e,!1).then(()=>Em(r,e,t)).catch(sl)}),RO.apply(this,arguments)}function y$(n,e){return PO.apply(this,arguments)}function PO(){return PO=F(function*(n,e){const t=xe(n),r=e.batch.batchId;try{const i=yield function kj(n,e){const t=xe(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),a=t._s.newChangeBuffer({trackRemovals:!0});return function(h,p,y,I){const D=y.batch,O=D.keys();let L=$.resolve();return O.forEach(J=>{L=L.next(()=>I.getEntry(p,J)).next(X=>{const ie=y.docVersions.get(J);Ke(null!==ie),X.version.compareTo(ie)<0&&(D.applyToRemoteDocument(X,y),X.isValidDocument()&&(X.setReadTime(y.commitVersion),I.addEntry(X)))})}),L.next(()=>h.mutationQueue.removeMutationBatch(p,D))}(t,r,e,a).next(()=>a.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(h){let p=It();for(let y=0;y<h.mutationResults.length;++y)h.mutationResults[y].transformResults.length>0&&(p=p.add(h.batch.mutations[y].key));return p}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}(t.localStore,e);NO(t,r,null),OO(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Ou(t,i)}catch(i){yield sl(i)}}),PO.apply(this,arguments)}function v$(n,e,t){return xO.apply(this,arguments)}function xO(){return xO=F(function*(n,e,t){const r=xe(n);try{const i=yield function(c,h){const p=xe(c);return p.persistence.runTransaction("Reject batch","readwrite-primary",y=>{let I;return p.mutationQueue.lookupMutationBatch(y,h).next(D=>(Ke(null!==D),I=D.keys(),p.mutationQueue.removeMutationBatch(y,D))).next(()=>p.mutationQueue.performConsistencyCheck(y)).next(()=>p.documentOverlayCache.removeOverlaysForBatchId(y,I,h)).next(()=>p.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(y,I)).next(()=>p.localDocuments.getDocuments(y,I))})}(r.localStore,e);NO(r,e,t),OO(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Ou(r,i)}catch(i){yield sl(i)}}),xO.apply(this,arguments)}function OO(n,e){(n.Ca.get(e)||[]).forEach(t=>{t.resolve()}),n.Ca.delete(e)}function NO(n,e,t){const r=xe(n);let i=r.Da[r.currentUser.toKey()];if(i){const a=i.get(e);a&&(t?a.reject(t):a.resolve(),i=i.remove(e)),r.Da[r.currentUser.toKey()]=i}}function Em(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.pa.get(e))n.ga.delete(r),t&&n.fa.xa(r,t);n.pa.delete(e),n.isPrimaryClient&&n.ba.mr(e).forEach(r=>{n.ba.containsKey(r)||XL(n,r)})}function XL(n,e){n.ya.delete(e.path.canonicalString());const t=n.wa.get(e);null!==t&&(OI(n.remoteStore,t),n.wa=n.wa.remove(e),n.Sa.delete(t),FO(n))}function kO(n,e,t){for(const r of t)r instanceof KL?(n.ba.addReference(r.key,e),I$(n,r)):r instanceof YL?(pe("SyncEngine","Document no longer in limbo: "+r.key),n.ba.removeReference(r.key,e),n.ba.containsKey(r.key)||XL(n,r.key)):Be()}function I$(n,e){const t=e.key,r=t.path.canonicalString();n.wa.get(t)||n.ya.has(r)||(pe("SyncEngine","New document in limbo: "+t),n.ya.add(r),FO(n))}function FO(n){for(;n.ya.size>0&&n.wa.size<n.maxConcurrentLimboResolutions;){const e=n.ya.values().next().value;n.ya.delete(e);const t=new Ne(Lt.fromString(e)),r=n.va.next();n.Sa.set(r,new h$(t)),n.wa=n.wa.insert(t,r),yD(n.remoteStore,new Mu(Li(Xg(t.path)),r,"TargetPurposeLimboResolution",Ts.ae))}}function Ou(n,e,t){return LO.apply(this,arguments)}function LO(){return LO=F(function*(n,e,t){const r=xe(n),i=[],a=[],c=[];var h;r.ga.isEmpty()||(r.ga.forEach((h,p)=>{c.push(r.Ma(p,e,t).then(y=>{if((y||t)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(p.targetId,y?.fromCache?"not-current":"current"),y){i.push(y);const I=jM.$i(p.targetId,y);a.push(I)}}))}),yield Promise.all(c),r.fa.c_(i),yield(h=F(function*(y,I){const D=xe(y);try{yield D.persistence.runTransaction("notifyLocalViewChanges","readwrite",O=>$.forEach(I,L=>$.forEach(L.Qi,J=>D.persistence.referenceDelegate.addReference(O,L.targetId,J)).next(()=>$.forEach(L.Ki,J=>D.persistence.referenceDelegate.removeReference(O,L.targetId,J)))))}catch(O){if(!ol(O))throw O;pe("LocalStore","Failed to update sequence numbers: "+O)}for(const O of I){const L=O.targetId;if(!O.fromCache){const J=D.rs.get(L),ie=J.withLastLimboFreeSnapshotVersion(J.snapshotVersion);D.rs=D.rs.insert(L,ie)}}}),function p(y,I){return h.apply(this,arguments)})(r.localStore,a))}),LO.apply(this,arguments)}function w$(n,e){return VO.apply(this,arguments)}function VO(){return VO=F(function*(n,e){const t=xe(n);if(!t.currentUser.isEqual(e)){pe("SyncEngine","User change. New user:",e.toKey());const r=yield AL(t.localStore,e);t.currentUser=e,(a=t).Ca.forEach(h=>{h.forEach(p=>{p.reject(new fe(q.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),a.Ca.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Ou(t,r.cs)}var a}),VO.apply(this,arguments)}function T$(n,e){const t=xe(n),r=t.Sa.get(e);if(r&&r.ma)return It().add(r.key);{let i=It();const a=t.pa.get(e);if(!a)return i;for(const c of a){const h=t.ga.get(c);i=i.unionWith(h.view.la)}return i}}class ED{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return F(function*(){t.serializer=xI(e.databaseInfo.databaseId),t.sharedClientState=t.createSharedClientState(e),t.persistence=t.createPersistence(e),yield t.persistence.start(),t.localStore=t.createLocalStore(e),t.gcScheduler=t.createGarbageCollectionScheduler(e,t.localStore),t.indexBackfillerScheduler=t.createIndexBackfillerScheduler(e,t.localStore)})()}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return function DL(n,e,t,r){return new Nj(n,e,t,r)}(this.persistence,new CL,e.initialUser,this.serializer)}createPersistence(e){return new LM(lD.Jr,this.serializer)}createSharedClientState(e){return new kL}terminate(){var e=this;return F(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class Im{initialize(e,t){var r=this;return F(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>JL(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=w$.bind(null,r.syncEngine),yield function pO(n,e){return gO.apply(this,arguments)}(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new o$}createDatastore(e){const t=xI(e.databaseInfo.databaseId),r=new Hj(e.databaseInfo);return new qj(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return r=this.localStore,i=this.datastore,a=e.asyncQueue,c=t=>JL(this.syncEngine,t,0),h=FL.C()?new FL:new Bj,new Yj(r,i,a,c,h);var r,i,a,c,h}createSyncEngine(e,t){return function(i,a,c,h,p,y,I){const D=new f$(i,a,c,h,p,y);return I&&(D.Fa=!0),D}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=F(function*(r){const i=xe(r);pe("RemoteStore","RemoteStore shutting down."),i.F_.add(5),yield pm(i),i.x_.shutdown(),i.O_.set("Unknown")}),function t(r){return e.apply(this,arguments)})(this.remoteStore);var e}}class ID{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ba(this.observer.next,e)}error(e){this.observer.error?this.Ba(this.observer.error,e):Yn("Uncaught Error in snapshot listener:",e.toString())}La(){this.muted=!0}Ba(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class N${constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return F(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new fe(q.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(i=F(function*(c,h){const p=xe(c),y=wI(p.serializer)+"/documents",I={documents:h.map(J=>II(p.serializer,J))},D=yield p.Fo("BatchGetDocuments",y,I,h.length),O=new Map;D.forEach(J=>{const X=function ej(n,e){return"found"in e?function(r,i){Ke(!!i.found);const a=Ma(r,i.found.name),c=Qn(i.found.updateTime),h=i.found.createTime?Qn(i.found.createTime):Ye.min(),p=new ni({mapValue:{fields:i.found.fields}});return Cn.newFoundDocument(a,c,h,p)}(n,e):"missing"in e?function(r,i){Ke(!!i.missing),Ke(!!i.readTime);const a=Ma(r,i.missing),c=Qn(i.readTime);return Cn.newNoDocument(a,c)}(n,e):Be()}(p.serializer,J);O.set(X.key.toString(),X)});const L=[];return h.forEach(J=>{const X=O.get(J.toString());Ke(!!X),L.push(X)}),L}),function a(c,h){return i.apply(this,arguments)})(t.datastore,e);var i;return r.forEach(i=>t.recordVersion(i)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new sm(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return F(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,i)=>{const a=Ne.fromPath(i);e.mutations.push(new vM(a,e.precondition(a)))}),yield(r=F(function*(a,c){const h=xe(a),p=wI(h.serializer)+"/documents",y={writes:c.map(I=>TI(h.serializer,I))};yield h.bo("Commit",p,y)}),function i(a,c){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Be();t=Ye.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new fe(q.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Ye.min())?Pn.exists(!1):Pn.updateTime(t):Pn.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Ye.min()))throw new fe(q.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Pn.updateTime(t)}return Pn.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class k${constructor(e,t,r,i,a){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=a,this.za=r.maxAttempts,this.Ho=new ZM(this.asyncQueue,"transaction_retry")}run(){this.za-=1,this.ja()}ja(){var e=this;this.Ho.Qo(F(function*(){const t=new N$(e.datastore),r=e.Ha(t);r&&r.then(i=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(i)}).catch(a=>{e.Ja(a)}))}).catch(i=>{e.Ja(i)})}))}Ha(e){try{const t=this.updateFunction(e);return!sI(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Ja(e){this.za>0&&this.Ya(e)?(this.za-=1,this.asyncQueue.enqueueAndForget(()=>(this.ja(),Promise.resolve()))):this.deferred.reject(e)}Ya(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!RF(t)}return!1}}class F${constructor(e,t,r,i){var a=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=Fr.UNAUTHENTICATED,this.clientId=Dk.V(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var c=F(function*(h){pe("FirestoreClient","Received user=",h.uid),yield a.authCredentialListener(h),a.user=h});return function(h){return c.apply(this,arguments)}}()),this.appCheckCredentials.start(r,c=>(pe("FirestoreClient","Received new app check token=",c),this.appCheckCredentialListener(c,this.user)))}getConfiguration(){var e=this;return F(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new fe(q.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Tr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(F(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const i=_m(r,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}function wD(n,e){return KO.apply(this,arguments)}function KO(){return KO=F(function*(n,e){n.asyncQueue.verifyOperationInProgress(),pe("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var i=F(function*(a){r.isEqual(a)||(yield AL(e.localStore,a),r=a)});return function(a){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}),KO.apply(this,arguments)}function YO(n,e){return QO.apply(this,arguments)}function QO(){return QO=F(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield function ZO(n){return JO.apply(this,arguments)}(n);pe("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(i=>GL(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,a)=>GL(e.remoteStore,a)),n._onlineComponents=e}),QO.apply(this,arguments)}function JO(){return JO=F(function*(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){pe("FirestoreClient","Using user provided OfflineComponentProvider");try{yield wD(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function sV(n){return"FirebaseError"===n.name?n.code===q.FAILED_PRECONDITION||n.code===q.UNIMPLEMENTED:!(typeof DOMException<"u"&&n instanceof DOMException)||22===n.code||20===n.code||11===n.code}(t))throw t;Is("Error using user provided cache. Falling back to memory cache: "+t),yield wD(n,new ED)}}else pe("FirestoreClient","Using default OfflineComponentProvider"),yield wD(n,new ED);return n._offlineComponents}),JO.apply(this,arguments)}function TD(n){return XO.apply(this,arguments)}function XO(){return XO=F(function*(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(pe("FirestoreClient","Using user provided OnlineComponentProvider"),yield YO(n,n._uninitializedComponentsProvider._online)):(pe("FirestoreClient","Using default OnlineComponentProvider"),yield YO(n,new Im))),n._onlineComponents}),XO.apply(this,arguments)}function tN(){return tN=F(function*(n){const e=yield TD(n),t=e.eventManager;return t.onListen=p$.bind(null,e.syncEngine),t.onUnlisten=g$.bind(null,e.syncEngine),t}),tN.apply(this,arguments)}function cV(n,e,t={}){const r=new Tr;return n.asyncQueue.enqueueAndForget(F(function*(){return function(a,c,h,p,y){const I=new ID({next:O=>{c.enqueueAndForget(()=>function vO(n,e){return EO.apply(this,arguments)}(a,D));const L=O.docs.has(h);!L&&O.fromCache?y.reject(new fe(q.UNAVAILABLE,"Failed to get document because the client is offline.")):L&&O.fromCache&&p&&"server"===p.source?y.reject(new fe(q.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):y.resolve(O)},error:O=>y.reject(O)}),D=new wO(Xg(h.path),I,{includeMetadataChanges:!0,Z_:!0});return function _O(n,e){return yO.apply(this,arguments)}(a,D)}(yield function Tm(n){return tN.apply(this,arguments)}(n),n.asyncQueue,e,t,r)})),r.promise}function dV(n){const e={};return void 0!==n.timeoutSeconds&&(e.timeoutSeconds=n.timeoutSeconds),e}const hV=new Map;function fV(n){if(!Ne.isDocumentKey(n))throw new fe(q.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function bD(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(r=n).constructor?r.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var r;return"function"==typeof n?"a function":Be()}function Nt(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new fe(q.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=bD(n);throw new fe(q.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}class mV{constructor(e){var t,r;if(void 0===e.host){if(void 0!==e.ssl)throw new fe(q.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new fe(q.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}(function W$(n,e,t,r){if(!0===e&&!0===r)throw new fe(q.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)})("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==e.experimentalAutoDetectLongPolling&&!e.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=dV(null!==(r=e.experimentalLongPollingOptions)&&void 0!==r?r:{}),function(a){if(void 0!==a.timeoutSeconds){if(isNaN(a.timeoutSeconds))throw new fe(q.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (must not be NaN)`);if(a.timeoutSeconds<5)throw new fe(q.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (minimum allowed value is 5)`);if(a.timeoutSeconds>30)throw new fe(q.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===e.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class NI{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new mV({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new fe(q.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new fe(q.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new mV(e),void 0!==e.credentials&&(this._authCredentials=function(r){if(!r)return new HU;switch(r.type){case"firstParty":return new WU(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new fe(q.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const r=hV.get(t);r&&(pe("ComponentProvider","Removing Datastore"),hV.delete(t),r.terminate())}(this),Promise.resolve()}}class ri{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new ri(this.firestore,e,this._query)}}class Zn{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Oa(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Zn(this.firestore,e,this._key)}}class Oa extends ri{constructor(e,t,r){super(e,t,Xg(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Zn(this.firestore,null,new Ne(e))}withConverter(e){return new Oa(this.firestore,e,this._path)}}function Ur(n,e,...t){if(n=nn(n),1===arguments.length&&(e=Dk.V()),function nN(n,e,t){if(!t)throw new fe(q.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}("doc","path",e),n instanceof NI){const r=Lt.fromString(e,...t);return fV(r),new Zn(n,null,new Ne(r))}{if(!(n instanceof Zn||n instanceof Oa))throw new fe(q.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Lt.fromString(e,...t));return fV(r),new Zn(n.firestore,n instanceof Oa?n.converter:null,new Ne(r))}}class Y${constructor(){this.Za=Promise.resolve(),this.Xa=[],this.eu=!1,this.tu=[],this.nu=null,this.ru=!1,this.iu=!1,this.su=[],this.Ho=new ZM(this,"async_queue_retry"),this.ou=()=>{const t=_D();t&&pe("AsyncQueue","Visibility state changed to "+t.visibilityState),this.Ho.$o()};const e=_D();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.ou)}get isShuttingDown(){return this.eu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this._u(),this.au(e)}enterRestrictedMode(e){if(!this.eu){this.eu=!0,this.iu=e||!1;const t=_D();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.ou)}}enqueue(e){if(this._u(),this.eu)return new Promise(()=>{});const t=new Tr;return this.au(()=>this.eu&&this.iu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xa.push(e),this.uu()))}uu(){var e=this;return F(function*(){if(0!==e.Xa.length){try{yield e.Xa[0](),e.Xa.shift(),e.Ho.reset()}catch(t){if(!ol(t))throw t;pe("AsyncQueue","Operation failed with retryable error: "+t)}e.Xa.length>0&&e.Ho.Qo(()=>e.uu())}})()}au(e){const t=this.Za.then(()=>(this.ru=!0,e().catch(r=>{throw this.nu=r,this.ru=!1,Yn("INTERNAL UNHANDLED ERROR: ",function(c){let h=c.message||"";return c.stack&&(h=c.stack.includes(c.message)?c.stack:c.message+"\n"+c.stack),h}(r)),r}).then(r=>(this.ru=!1,r))));return this.Za=t,t}enqueueAfterDelay(e,t,r){this._u(),this.su.indexOf(e)>-1&&(t=0);const i=mO.createAndSchedule(this,e,t,r,a=>this.cu(a));return this.tu.push(i),i}_u(){this.nu&&Be()}verifyOperationInProgress(){}lu(){var e=this;return F(function*(){let t;do{t=e.Za,yield t}while(t!==e.Za)})()}hu(e){for(const t of this.tu)if(t.timerId===e)return!0;return!1}Pu(e){return this.lu().then(()=>{this.tu.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.tu)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.lu()})}Iu(e){this.su.push(e)}cu(e){const t=this.tu.indexOf(e);this.tu.splice(t,1)}}class yn extends NI{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new Y$,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||yV(this),this._firestoreClient.terminate()}}function Jn(n){return n._firestoreClient||yV(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function yV(n){var e,t,r;const i=n._freezeSettings(),a=(p=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new TB(n._databaseId,p,n._persistenceKey,(I=i).host,I.ssl,I.experimentalForceLongPolling,I.experimentalAutoDetectLongPolling,dV(I.experimentalLongPollingOptions),I.useFetchStreams));var p,I;n._firestoreClient=new F$(n._authCredentials,n._appCheckCredentials,n._queue,a),null!==(t=i.localCache)&&void 0!==t&&t._offlineComponentProvider&&null!==(r=i.localCache)&&void 0!==r&&r._onlineComponentProvider&&(n._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}class Fh{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Fh(br.fromBase64String(e))}catch(t){throw new fe(q.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Fh(br.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Lh{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new fe(q.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Bn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class iN{constructor(e){this._methodName=e}}class sN{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new fe(q.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new fe(q.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ht(this._lat,e._lat)||ht(this._long,e._long)}}const X$=/^__.*__$/;class e3{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new xu(e,this.data,this.fieldMask,t,this.fieldTransforms):new im(e,this.data,t,this.fieldTransforms)}}class IV{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new xu(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function wV(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Be()}}class CD{constructor(e,t,r,i,a,c){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,void 0===a&&this.du(),this.fieldTransforms=a||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Tu(){return this.settings.Tu}Eu(e){return new CD(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Au(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.Eu({path:r,Ru:!1});return i.Vu(e),i}mu(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.Eu({path:r,Ru:!1});return i.du(),i}fu(e){return this.Eu({path:void 0,Ru:!0})}gu(e){return SD(e,this.settings.methodName,this.settings.pu||!1,this.path,this.settings.yu)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}du(){if(this.path)for(let e=0;e<this.path.length;e++)this.Vu(this.path.get(e))}Vu(e){if(0===e.length)throw this.gu("Document fields must not be empty");if(wV(this.Tu)&&X$.test(e))throw this.gu('Document fields cannot begin and end with "__"')}}class t3{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||xI(e)}wu(e,t,r,i=!1){return new CD({Tu:e,methodName:t,yu:r,path:Bn.emptyPath(),Ru:!1,pu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Vh(n){const e=n._freezeSettings(),t=xI(n._databaseId);return new t3(n._databaseId,!!e.ignoreUndefinedProperties,t)}function DD(n,e,t,r,i,a={}){const c=n.wu(a.merge||a.mergeFields?2:0,e,t,i);cN("Data must be an object, but it was:",c,r);const h=CV(r,c);let p,y;if(a.merge)p=new Ji(c.fieldMask),y=c.fieldTransforms;else if(a.mergeFields){const I=[];for(const D of a.mergeFields){const O=LI(e,D,t);if(!c.contains(O))throw new fe(q.INVALID_ARGUMENT,`Field '${O}' is specified in your field mask but missing from your input data.`);AV(I,O)||I.push(O)}p=new Ji(I),y=c.fieldTransforms.filter(D=>p.covers(D.field))}else p=null,y=c.fieldTransforms;return new e3(new ni(h),p,y)}class FI extends iN{_toFieldTransform(e){if(2!==e.Tu)throw e.gu(1===e.Tu?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof FI}}function aN(n,e,t,r){const i=n.wu(1,e,t);cN("Data must be an object, but it was:",i,r);const a=[],c=ni.empty();al(r,(p,y)=>{const I=AD(e,p,t);y=nn(y);const D=i.mu(I);if(y instanceof FI)a.push(I);else{const O=Uh(y,D);null!=O&&(a.push(I),c.set(I,O))}});const h=new Ji(a);return new IV(c,h,i.fieldTransforms)}function uN(n,e,t,r,i,a){const c=n.wu(1,e,t),h=[LI(e,r,t)],p=[i];if(a.length%2!=0)throw new fe(q.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let O=0;O<a.length;O+=2)h.push(LI(e,a[O])),p.push(a[O+1]);const y=[],I=ni.empty();for(let O=h.length-1;O>=0;--O)if(!AV(y,h[O])){const L=h[O];let J=p[O];J=nn(J);const X=c.mu(L);if(J instanceof FI)y.push(L);else{const ie=Uh(J,X);null!=ie&&(y.push(L),I.set(L,ie))}}const D=new Ji(y);return new IV(I,D,c.fieldTransforms)}function Uh(n,e){if(DV(n=nn(n)))return cN("Unsupported field value:",e,n),CV(n,e);if(n instanceof iN)return function(r,i){if(!wV(i.Tu))throw i.gu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.gu(`${r._methodName}() is not currently supported inside arrays`);const a=r._toFieldTransform(i);a&&i.fieldTransforms.push(a)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.Ru&&4!==e.Tu)throw e.gu("Nested arrays are not supported");return function(r,i){const a=[];let c=0;for(const h of r){let p=Uh(h,i.fu(c));null==p&&(p={nullValue:"NULL_VALUE"}),a.push(p),c++}return{arrayValue:{values:a}}}(n,e)}return function(r,i){if(null===(r=nn(r)))return{nullValue:"NULL_VALUE"};if("number"==typeof r)return yF(i.serializer,r);if("boolean"==typeof r)return{booleanValue:r};if("string"==typeof r)return{stringValue:r};if(r instanceof Date){const a=Nn.fromDate(r);return{timestampValue:om(i.serializer,a)}}if(r instanceof Nn){const a=new Nn(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:om(i.serializer,a)}}if(r instanceof sN)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Fh)return{bytesValue:UF(i.serializer,r._byteString)};if(r instanceof Zn){const a=i.databaseId,c=r.firestore._databaseId;if(!c.isEqual(a))throw i.gu(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:CM(r.firestore._databaseId||i.databaseId,r._key.path)}}throw i.gu(`Unsupported field value: ${bD(r)}`)}(n,e)}function CV(n,e){const t={};return Bk(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):al(n,(r,i)=>{const a=Uh(i,e.Au(r));null!=a&&(t[r]=a)}),{mapValue:{fields:t}}}function DV(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof Nn||n instanceof sN||n instanceof Fh||n instanceof Zn||n instanceof iN)}function cN(n,e,t){if(!DV(t)||"object"!=typeof(i=t)||null===i||Object.getPrototypeOf(i)!==Object.prototype&&null!==Object.getPrototypeOf(i)){const r=bD(t);throw e.gu("an object"===r?n+" a custom object":n+" "+r)}var i}function LI(n,e,t){if((e=nn(e))instanceof Lh)return e._internalPath;if("string"==typeof e)return AD(n,e);throw SD("Field path arguments must be of type string or ",n,!1,void 0,t)}const s3=new RegExp("[~\\*/\\[\\]]");function AD(n,e,t){if(e.search(s3)>=0)throw SD(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Lh(...e.split("."))._internalPath}catch{throw SD(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function SD(n,e,t,r,i){const a=r&&!r.isEmpty(),c=void 0!==i;let h=`Function ${e}() called with invalid data`;t&&(h+=" (via `toFirestore()`)"),h+=". ";let p="";return(a||c)&&(p+=" (found",a&&(p+=` in field ${r}`),c&&(p+=` in document ${i}`),p+=")"),new fe(q.INVALID_ARGUMENT,h+n+p)}function AV(n,e){return n.some(t=>t.isEqual(e))}class VI{constructor(e,t,r,i,a){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new Zn(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new o3(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(RD("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class o3 extends VI{data(){return super.data()}}function RD(n,e){return"string"==typeof e?AD(n,e):e instanceof Lh?e._internalPath:e._delegate._internalPath}class kV{convertValue(e,t="none"){switch(ll(e)){case 0:return null;case 1:return e.booleanValue;case 2:return jn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Su(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw Be()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return al(e,(i,a)=>{r[i]=this.convertValue(a,t)}),r}convertGeoPoint(e){return new sN(jn(e.latitude),jn(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=G0(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(aI(e));default:return null}}convertTimestamp(e){const t=ul(e);return new Nn(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=Lt.fromString(e);Ke(YF(r));const i=new bh(r.get(1),r.get(3)),a=new Ne(r.popFirst(5));return i.isEqual(t)||Yn(`Document ${a} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),a}}function OD(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class u3 extends kV{constructor(e){super(),this.firestore=e}convertBytes(e){return new Fh(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Zn(this.firestore,null,t)}}class Bh{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Cm extends VI{constructor(e,t,r,i,a,c){super(e,t,r,i,c),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new ND(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(RD("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class ND extends Cm{data(e={}){return super.data(e)}}function es(n){n=Nt(n,Zn);const e=Nt(n.firestore,yn);return cV(Jn(e),n._key).then(t=>function hN(n,e,t){const r=t.docs.get(e._key),i=new vl(n);return new Cm(n,i,e._key,r,new Bh(t.hasPendingWrites,t.fromCache),e.converter)}(e,n,t))}class vl extends kV{constructor(e){super(),this.firestore=e}convertBytes(e){return new Fh(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Zn(this.firestore,null,t)}}function dN(n,e,t){n=Nt(n,Zn);const r=Nt(n.firestore,yn),i=OD(n.converter,e,t);return BI(r,[DD(Vh(r),"setDoc",n._key,i,null!==n.converter,t).toMutation(n._key,Pn.none())])}function FV(n){return BI(Nt(n.firestore,yn),[new sm(n._key,Pn.none())])}function BI(n,e){return function(r,i){const a=new Tr;return r.asyncQueue.enqueueAndForget(F(function*(){return function m$(n,e,t){return AO.apply(this,arguments)}(yield function eN(n){return TD(n).then(e=>e.syncEngine)}(r),i,a)})),a.promise}(Jn(n),e)}const E3={maxAttempts:5};function El(n,e){if((n=nn(n)).firestore!==e)throw new fe(q.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class w3 extends class{constructor(t,r){this._firestore=t,this._transaction=r,this._dataReader=Vh(t)}get(t){const r=El(t,this._firestore),i=new u3(this._firestore);return this._transaction.lookup([r._key]).then(a=>{if(!a||1!==a.length)return Be();const c=a[0];if(c.isFoundDocument())return new VI(this._firestore,i,c.key,c,r.converter);if(c.isNoDocument())return new VI(this._firestore,i,r._key,null,r.converter);throw Be()})}set(t,r,i){const a=El(t,this._firestore),c=OD(a.converter,r,i),h=DD(this._dataReader,"Transaction.set",a._key,c,null!==a.converter,i);return this._transaction.set(a._key,h),this}update(t,r,i,...a){const c=El(t,this._firestore);let h;return h="string"==typeof(r=nn(r))||r instanceof Lh?uN(this._dataReader,"Transaction.update",c._key,r,i,a):aN(this._dataReader,"Transaction.update",c._key,r),this._transaction.update(c._key,h),this}delete(t){const r=El(t,this._firestore);return this._transaction.delete(r._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=El(e,this._firestore),r=new vl(this._firestore);return super.get(e).then(i=>new Cm(this._firestore,r,t._key,i._document,new Bh(!1,!1),t.converter))}}!function(e,t=!0){Gg=nu,Pr(new Rr("firestore",(r,{instanceIdentifier:i,options:a})=>{const c=r.getProvider("app").getImmediate(),h=new yn(new zU(r.getProvider("auth-internal")),new KU(r.getProvider("app-check-internal")),function(y,I){if(!Object.prototype.hasOwnProperty.apply(y.options,["projectId"]))throw new fe(q.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new bh(y.options.projectId,I)}(c,i),c);return a=Object.assign({useFetchStreams:t},a),h._setSettings(a),h},"PUBLIC").setMultipleInstances(!0)),ki(Tk,"4.2.0",e),ki(Tk,"4.2.0","esm2017")}();const BV=Jl({apiKey:"AIzaSyADljtJJVmWrxoQru7Z0K31BBcoAhC_t2M",authDomain:"hacked23-24.firebaseapp.com",projectId:"hacked23-24",storageBucket:"hacked23-24.appspot.com",messagingSenderId:"762917826898",appId:"1:762917826898:web:2e61a3302af9834f530a8b",measurementId:"G-BCYK66FZ62"}),jV=(function JT(n=dc()){const e=Eo(n=nn(n),cd);e.isInitialized()?e.getImmediate():function XT(n,e={}){const t=Eo(n,cd);if(t.isInitialized()){const i=t.getImmediate();if(ac(e,t.getOptions()))return i;throw xr.create("already-initialized")}t.initialize({options:e})}(n)}(BV),new zy),rn=function Nv(n=dc()){const e=Eo(n,"auth");if(e.isInitialized())return e.getImmediate();const t=function DR(n,e){const t=Eo(n,"auth");if(t.isInitialized()){const i=t.getImmediate();if(ac(t.getOptions(),e??{}))return i;Mr(i,"already-initialized")}return t.initialize({options:e})}(n,{popupRedirectResolver:jP,persistence:[aP,$b,Hb]}),r=Qa("authTokenSyncURL");if(r){const a=Ov(r);(function Qs(n,e,t){nn(n).beforeAuthStateChanged(e,t)})(t,a,()=>a(t.currentUser)),function av(n,e,t,r){nn(n).onIdTokenChanged(e,t,r)}(t,c=>a(c))}const i=UA("auth");return i&&function Uy(n,e,t){const r=Un(n);De(r._canInitEmulator,r,"emulator-config-failed"),De(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!!t?.disableWarnings,a=bb(e),{host:c,port:h}=function Ys(n){const e=bb(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const a=i[1];return{host:a,port:Ac(r.substr(a.length+1))}}{const[a,c]=r.split(":");return{host:a,port:Ac(c)}}}(e);r.config.emulator={url:`${a}//${c}${null===h?"":`:${h}`}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:c,port:h,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||function Or(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",n):n())}()}(t,`http://${i}`),t}(),$V=function uk(n=dc()){return function gx(){return KC.apply(this,arguments)}().then(e=>{if(!e)throw Er.create("unsupported-browser")},e=>{throw Er.create("indexed-db-unsupported")}),Eo(nn(n),"messaging").getImmediate()}(BV),Br=function Z$(n,e){const r="string"==typeof n?n:e||"(default)",i=Eo("object"==typeof n?n:dc(),"firestore").getImmediate({identifier:r});if(!i._initialized){const a=(n=>{const e=UA("firestore");if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return"["===e[0]?[e.substring(1,t-1),r]:[e.substring(0,t),r]})();a&&function K$(n,e,t,r={}){var i;const a=(n=Nt(n,NI))._getSettings(),c=`${e}:${t}`;if("firestore.googleapis.com"!==a.host&&a.host!==c&&Is("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},a),{host:c,ssl:!1})),r.mockUserToken){let h,p;if("string"==typeof r.mockUserToken)h=r.mockUserToken,p=Fr.MOCK_USER;else{h=function Sw(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const r=e||"demo-project",i=n.iat||0,a=n.sub||n.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}}},n);return[Jo(JSON.stringify({alg:"none",type:"JWT"})),Jo(JSON.stringify(c)),""].join(".")}(r.mockUserToken,null===(i=n._app)||void 0===i?void 0:i.options.projectId);const y=r.mockUserToken.sub||r.mockUserToken.user_id;if(!y)throw new fe(q.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new Fr(y)}n._authCredentials=new GU(new bk(h,p))}}(i,...a)}return i}();function HV(n){return new Promise(e=>setTimeout(e,n))}function C3(){return pN.apply(this,arguments)}function pN(){return pN=F(function*(){try{const e=(yield lC(rn,jV)).user;console.log("Logged in user:",e);const t=Ur(Br,"users",e.uid);yield HV(2500),!0!==(yield es(t)).get("registrationCompleted")&&(yield FV(t),yield function ys(n){return Fp.apply(this,arguments)}(e))}catch(n){console.error("Error logging in:",n)}}),pN.apply(this,arguments)}function gN(){return gN=F(function*(){try{const e=(yield lC(rn,jV)).user;console.log("Logged in user:",e);const t=Ur(Br,"users",e.uid);if(yield HV(2500),!0!==(yield es(t)).get("registrationCompleted")){const i=Ur(Br,"metadata","student_count");yield function T3(n,e,t){n=Nt(n,yn);const r=Object.assign(Object.assign({},E3),t);return function(a){if(a.maxAttempts<1)throw new fe(q.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(a,c,h){const p=new Tr;return a.asyncQueue.enqueueAndForget(F(function*(){const y=yield function uV(n){return TD(n).then(e=>e.datastore)}(a);new k$(a.asyncQueue,y,h,c,p).run()})),p.promise}(Jn(n),i=>e(new w3(n,i)),r)}(Br,function(){var a=F(function*(c){const h=yield c.get(i);if(!h.exists())throw"Document does not exist!";const p=h.data().count+1;c.update(i,{count:p})});return function(c){return a.apply(this,arguments)}}())}}catch(n){console.error("Error logging in:",n)}}),gN.apply(this,arguments)}function GV(){return mN.apply(this,arguments)}function mN(){return mN=F(function*(){try{yield function _s(n){return nn(n).signOut()}(rn)}catch(n){console.error("Error logging out:",n)}}),mN.apply(this,arguments)}function _N(){return _N=F(function*(){try{"granted"===(yield Notification.requestPermission())&&function ck(n,e){return YC.apply(this,arguments)}($V,{vapidKey:"BKOIvinydaKL00iJbhKrJNOQVuqq6lYM5jC8-1oyiI4OVLdBsB7X82XG_dSkvZmDD0tp-k2owyuE4_TUjaRmKo8"}).then(function(){var e=F(function*(t){if(t){console.log("User token:",t);const r=rn.currentUser;if(r){const i=Ur(Br,"users",r.uid);yield dN(i,{notificationToken:t},{merge:!0})}else console.warn("Utente non autenticato. Non \xe8 possibile salvare il token.")}else console.error("No registration token available. Request permission to generate one.")});return function(t){return e.apply(this,arguments)}}()).catch(e=>{console.error("An error occurred while retrieving token. ",e)})}catch(n){console.error("Errore durante la richiesta del permesso:",n)}}),_N.apply(this,arguments)}function zV(){return yN.apply(this,arguments)}function yN(){return yN=F(function*(){try{const n=rn.currentUser;n?yield(yield fetch("https://us-central1-hacked23-24.cloudfunctions.net/sendNotification",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({uid:n.uid})})).json():console.warn("Utente non autenticato.")}catch(n){console.error("Errore durante l'invio della notifica:",n)}}),yN.apply(this,arguments)}function S3(){return vN.apply(this,arguments)}function vN(){return vN=F(function*(){try{const n=rn.currentUser,e=3e3;n?yield(yield fetch("https://us-central1-hacked23-24.cloudfunctions.net/sendNotificationDelayed",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({uid:n.uid,delay:e})})).json():console.warn("Utente non autenticato.")}catch(n){console.error("Errore durante l'invio della notifica:",n)}}),vN.apply(this,arguments)}!function mx(n,e){(function hE(n,e){if(!navigator)throw Er.create("only-available-in-window");n.onMessageHandler=e})(n=nn(n),e)}($V,n=>{n.notification?"granted"===Notification.permission?new Notification(n.notification.title||"Titolo predefinito",{body:n.notification.body||"Corpo predefinito"}):console.warn("Permesso per le notifiche non concesso."):console.warn("Notifica senza contenuto.")});const R3="https://random-user-by-api-ninjas.p.rapidapi.com/v1/randomuser",P3={method:"GET",headers:{"X-RapidAPI-Key":"34f54b7ca9mshae462c74aeccbc2p12b2d4jsncf73428f9321","X-RapidAPI-Host":"random-user-by-api-ninjas.p.rapidapi.com"}};function qV(){return IN.apply(this,arguments)}function IN(){return(IN=F(function*(){const t=(yield(yield fetch(R3,P3)).json()).username;return console.log(t),t})).apply(this,arguments)}let Nu=(()=>{class n{constructor(){this.userSubject=new At.X(null),this.user$=this.userSubject.asObservable(),function YR(n,e,t,r){nn(n).onAuthStateChanged(e,t,r)}(rn,t=>{console.log("User: ",t),this.userSubject.next(t||null)})}isLoggedIn(){return!!this.userSubject.value}getUserUid(){return this.userSubject.value?.uid||""}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var dr=k(95);const WV=function(){return["/user"]};function x3(n,e){1&n&&(g.TgZ(0,"a",8),g._uU(1,"Profile"),g.qZA()),2&n&&g.Q6J("routerLink",g.DdM(1,WV))}const M3=function(){return["/auth"]};function O3(n,e){1&n&&(g.TgZ(0,"a",14)(1,"strong"),g._uU(2,"Login"),g.qZA()()),2&n&&g.Q6J("routerLink",g.DdM(1,M3))}function N3(n,e){1&n&&(g.TgZ(0,"a",14)(1,"strong"),g._uU(2,"Dashboard"),g.qZA()()),2&n&&g.Q6J("routerLink",g.DdM(1,WV))}const k3=function(){return["/trophies"]},F3=function(){return["/exercises"]};let Am=(()=>{class n{constructor(t){this.authService=t,this.isMenuActive=!1}toggleMenu(){this.isMenuActive=!this.isMenuActive}static#e=this.\u0275fac=function(r){return new(r||n)(g.Y36(Nu))};static#t=this.\u0275cmp=g.Xpm({type:n,selectors:[["app-navbar"]],decls:22,vars:11,consts:[["role","navigation","aria-label","main navigation",1,"navbar"],[1,"container"],[1,"navbar-brand"],["href","/",1,"navbar-item"],["id","test","role","button","aria-label","menu","aria-expanded","false",1,"navbar-burger",3,"click"],["aria-hidden","true"],["id","navbarBasicExample",1,"navbar-menu"],[1,"navbar-start"],[1,"navbar-item",3,"routerLink"],["class","navbar-item",3,"routerLink",4,"ngIf"],[1,"navbar-end"],[1,"navbar-item"],[1,"buttons"],["class","button is-primary",3,"routerLink",4,"ngIf"],[1,"button","is-primary",3,"routerLink"]],template:function(r,i){1&r&&(g.TgZ(0,"nav",0)(1,"div",1)(2,"div",2)(3,"a",3)(4,"strong"),g._uU(5,"HackEd"),g.qZA()(),g.TgZ(6,"a",4),g.NdJ("click",function(){return i.toggleMenu()}),g._UZ(7,"span",5)(8,"span",5)(9,"span",5),g.qZA()(),g.TgZ(10,"div",6)(11,"div",7)(12,"a",8),g._uU(13,"Trophies"),g.qZA(),g.YNc(14,x3,2,2,"a",9),g.TgZ(15,"a",8),g._uU(16,"Exercises"),g.qZA()(),g.TgZ(17,"div",10)(18,"div",11)(19,"div",12),g.YNc(20,O3,3,2,"a",13),g.YNc(21,N3,3,2,"a",13),g.qZA()()()()()()),2&r&&(g.xp6(6),g.ekj("is-active",i.isMenuActive),g.xp6(4),g.ekj("is-active",i.isMenuActive),g.xp6(2),g.Q6J("routerLink",g.DdM(9,k3)),g.xp6(2),g.Q6J("ngIf",!i.authService.isLoggedIn()),g.xp6(1),g.Q6J("routerLink",g.DdM(10,F3)),g.xp6(5),g.Q6J("ngIf",!i.authService.isLoggedIn()),g.xp6(1),g.Q6J("ngIf",i.authService.isLoggedIn()))},dependencies:[H.O5,tc]})}return n})();function L3(n,e){if(1&n&&(g.TgZ(0,"option",16),g._uU(1),g.qZA()),2&n){const t=e.$implicit;g.Q6J("value",t),g.xp6(1),g.Oqu(t)}}function V3(n,e){if(1&n&&(g.TgZ(0,"p",19),g._uU(1,"Your username: "),g.TgZ(2,"strong"),g._uU(3),g.qZA()()),2&n){const t=g.oxw(3);g.xp6(3),g.Oqu(t.username)}}function U3(n,e){if(1&n&&(g.TgZ(0,"p"),g._uU(1,"Your clan: "),g.TgZ(2,"strong"),g._uU(3),g.qZA()()),2&n){const t=g.oxw(3);g.xp6(3),g.Oqu(t.selectedClan)}}function B3(n,e){if(1&n){const t=g.EpF();g.TgZ(0,"div")(1,"h2",5),g._uU(2,"Your Random Username"),g.qZA(),g.TgZ(3,"button",17),g.NdJ("click",function(){g.CHM(t);const i=g.oxw(2);return g.KtG(i.generateRandomUsername())}),g._uU(4,"Generate Random Username"),g.qZA(),g.YNc(5,V3,4,1,"p",18),g.YNc(6,U3,4,1,"p",12),g.qZA()}if(2&n){const t=g.oxw(2);g.xp6(5),g.Q6J("ngIf",t.username),g.xp6(1),g.Q6J("ngIf",t.username)}}function j3(n,e){if(1&n){const t=g.EpF();g.TgZ(0,"div",20)(1,"h2",5),g._uU(2,"Ready to Join HackEd?"),g.qZA(),g.TgZ(3,"button",21),g.NdJ("click",function(){g.CHM(t);const i=g.oxw(2);return g.KtG(i.registerProcedure())}),g._uU(4,"Register with Google"),g.qZA()()}if(2&n){const t=g.oxw(2);g.xp6(3),g.Q6J("disabled",!t.username)}}function $3(n,e){if(1&n){const t=g.EpF();g.TgZ(0,"div",1)(1,"h1",2),g._uU(2,"Welcome to HackEd"),g.qZA(),g.TgZ(3,"div",3)(4,"div",4)(5,"h2",5),g._uU(6,"Register"),g.qZA(),g.TgZ(7,"div",6)(8,"label",7),g._uU(9,"Choose Your Clan"),g.qZA(),g.TgZ(10,"div",8)(11,"div",9)(12,"select",10),g.NdJ("ngModelChange",function(i){g.CHM(t);const a=g.oxw();return g.KtG(a.selectedClan=i)})("change",function(){g.CHM(t);const i=g.oxw();return g.KtG(i.onClanSelected())}),g.YNc(13,L3,2,2,"option",11),g.qZA()()()(),g.YNc(14,B3,7,2,"div",12),g.YNc(15,j3,5,1,"div",13),g.qZA(),g.TgZ(16,"div",14)(17,"h2",5),g._uU(18,"Coming Back?"),g.qZA(),g.TgZ(19,"button",15),g.NdJ("click",function(){g.CHM(t);const i=g.oxw();return g.KtG(i.loginWithGoogleDev())}),g._uU(20,"Login"),g.qZA()()()()}if(2&n){const t=g.oxw();g.xp6(12),g.Q6J("ngModel",t.selectedClan),g.xp6(1),g.Q6J("ngForOf",t.clans),g.xp6(1),g.Q6J("ngIf",t.selectedClan),g.xp6(1),g.Q6J("ngIf",t.selectedClan)}}let H3=(()=>{class n{constructor(t,r){this.authService=t,this.router=r,this.getRandomUsername=qV,this.loginWithGoogleDev=C3,this.isLogged=!1,this.username="",this.clans=["Binary Battlers","Crypto Crusaders","Network Nomads","System Sentinels"],this.selectedClan="",this.clanSelected=!1}ngOnInit(){this.authService.user$.subscribe(t=>{t?(this.isLogged=!0,this.router.navigate(["/user"])):this.isLogged=!1})}onClanSelected(){this.selectedClan&&(this.clanSelected=!0)}generateRandomUsername(){var t=this;return F(function*(){t.username=yield qV(),console.log(t.username)})()}registerProcedure(){var t=this;return F(function*(){yield function D3(){return gN.apply(this,arguments)}();const r=t.username;if(r&&rn.currentUser){const a=rn.currentUser.email,c=Ur(Br,"users",rn.currentUser.uid);yield dN(c,{email:a,username:r,registrationCompleted:!0,level:1,exercises_solved:0,clan:t.selectedClan,exp:0,solved_exercises:[],percentage:0},{merge:!0}),yield es(c)}})()}static#e=this.\u0275fac=function(r){return new(r||n)(g.Y36(Nu),g.Y36(Qr))};static#t=this.\u0275cmp=g.Xpm({type:n,selectors:[["app-auth"]],decls:2,vars:1,consts:[["class","auth-container",4,"ngIf"],[1,"auth-container"],[1,"title","has-text-centered"],[1,"columns","is-centered","is-8"],[1,"column","has-border-right","pl-10","has-text-centered"],[1,"subtitle"],[1,"field"],[1,"label"],[1,"control"],[1,"select"],[3,"ngModel","ngModelChange","change"],[3,"value",4,"ngFor","ngForOf"],[4,"ngIf"],["class","mt-4",4,"ngIf"],[1,"column","pl-5","has-text-centered"],[1,"button","is-info",3,"click"],[3,"value"],[1,"button","is-primary",3,"click"],["class","mt-3",4,"ngIf"],[1,"mt-3"],[1,"mt-4"],[1,"button","is-success",3,"disabled","click"]],template:function(r,i){1&r&&(g._UZ(0,"app-navbar"),g.YNc(1,$3,21,4,"div",0)),2&r&&(g.xp6(1),g.Q6J("ngIf",!i.isLogged))},dependencies:[H.sg,H.O5,dr.YN,dr.Kr,dr.EJ,dr.JJ,dr.On,Am],styles:[".has-border-right[_ngcontent-%COMP%]{border-right:1px solid #d5d5d5;padding-right:1.5rem;margin-right:1.5rem}"]})}return n})(),G3=(()=>{class n{constructor(t){this.auth=t}static#e=this.\u0275fac=function(r){return new(r||n)(g.Y36(Nu))};static#t=this.\u0275cmp=g.Xpm({type:n,selectors:[["app-home-content"]],decls:54,vars:0,consts:[[1,"hero","is-medium","is-primary"],[1,"hero-body"],[1,"container"],[1,"title"],[1,"subtitle"],[1,"section"],[1,"my-5"],[1,"columns"],[1,"column"],[1,"title","is-4"],[1,"container","has-text-centered"],["href","/auth",1,"button","is-medium","is-primary"],[1,"footer"],[1,"content","has-text-centered"]],template:function(r,i){1&r&&(g._UZ(0,"app-navbar"),g.TgZ(1,"body")(2,"section",0)(3,"div",1)(4,"div",2)(5,"h1",3),g._uU(6,"Welcome to HackEd!"),g.qZA(),g.TgZ(7,"h2",4),g._uU(8,"Your portal to learn and improve in cybersecurity."),g.qZA()()()(),g.TgZ(9,"section",5)(10,"div",2)(11,"h2",3),g._uU(12,"Challenges and Clans"),g.qZA(),g.TgZ(13,"p",6),g._uU(14," Take on practical cybersecurity challenges and join one of the 4 competing clans. Collaborate, compete, and reach the top! "),g.qZA(),g.TgZ(15,"div",7)(16,"div",8)(17,"h3",9),g._uU(18,"Binary Battlers"),g.qZA(),g.TgZ(19,"p"),g._uU(20," Heroes of the digital world, they translate reality into zeros and ones, protecting every bit and byte in the vast digital universe. "),g.qZA()(),g.TgZ(21,"div",8)(22,"h3",9),g._uU(23,"Crypto Crusaders"),g.qZA(),g.TgZ(24,"p"),g._uU(25," Guardians of the Cyberspace secrets, they hold ancient keys, deciphering riddles and keeping information safe. "),g.qZA()(),g.TgZ(26,"div",8)(27,"h3",9),g._uU(28,"Network Nomads"),g.qZA(),g.TgZ(29,"p"),g._uU(30," Internet explorers, they travel through the vast network, ensuring every packet reaches its destination. "),g.qZA()(),g.TgZ(31,"div",8)(32,"h3",9),g._uU(33,"System Sentinels"),g.qZA(),g.TgZ(34,"p"),g._uU(35," Protectors of operating systems, they watch over every process, guarding the digital essence from threats and intruders. "),g.qZA()()()()(),g.TgZ(36,"section",5)(37,"div",2)(38,"h2",3),g._uU(39,"Certificates and Trophies"),g.qZA(),g.TgZ(40,"p"),g._uU(41," Earn certificates for every completed challenge and proudly display your conquered trophies. Learn, compete, and become a master of cybersecurity. "),g.qZA()()(),g.TgZ(42,"section",5)(43,"div",10)(44,"h2",3),g._uU(45,"Ready to join?"),g.qZA(),g.TgZ(46,"p",6),g._uU(47," Sign up now and start your journey in cybersecurity. "),g.qZA(),g.TgZ(48,"a",11),g._uU(49,"Register"),g.qZA()()(),g.TgZ(50,"footer",12)(51,"div",13)(52,"p"),g._uU(53," \xa9 2023 HackEd. All rights reserved. "),g.qZA()()()())},dependencies:[Am]})}return n})();var z3=k(305);class FD{}class LD{}class Na{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?"string"==typeof e?this.lazyInit=()=>{this.headers=new Map,e.split("\n").forEach(t=>{const r=t.indexOf(":");if(r>0){const i=t.slice(0,r),a=i.toLowerCase(),c=t.slice(r+1).trim();this.maybeSetNormalizedName(i,a),this.headers.has(a)?this.headers.get(a).push(c):this.headers.set(a,[c])}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((t,r)=>{this.setHeaderEntries(r,t)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([t,r])=>{this.setHeaderEntries(t,r)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof Na?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){const t=new Na;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof Na?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){const t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if("string"==typeof r&&(r=[r]),0===r.length)return;this.maybeSetNormalizedName(e.name,t);const i=("a"===e.op?this.headers.get(t):void 0)||[];i.push(...r),this.headers.set(t,i);break;case"d":const a=e.value;if(a){let c=this.headers.get(t);if(!c)return;c=c.filter(h=>-1===a.indexOf(h)),0===c.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,c)}else this.headers.delete(t),this.normalizedNames.delete(t)}}setHeaderEntries(e,t){const r=(Array.isArray(t)?t:[t]).map(a=>a.toString()),i=e.toLowerCase();this.headers.set(i,r),this.maybeSetNormalizedName(e,i)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}}class W3{encodeKey(e){return KV(e)}encodeValue(e){return KV(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const Y3=/%(\d[a-f0-9])/gi,Q3={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function KV(n){return encodeURIComponent(n).replace(Y3,(e,t)=>Q3[t]??e)}function VD(n){return`${n}`}class Il{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new W3,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function K3(n,e){const t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(i=>{const a=i.indexOf("="),[c,h]=-1==a?[e.decodeKey(i),""]:[e.decodeKey(i.slice(0,a)),e.decodeValue(i.slice(a+1))],p=t.get(c)||[];p.push(h),t.set(c,p)}),t}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{const r=e.fromObject[t],i=Array.isArray(r)?r.map(VD):[VD(r)];this.map.set(t,i)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){const t=[];return Object.keys(e).forEach(r=>{const i=e[r];Array.isArray(i)?i.forEach(a=>{t.push({param:r,value:a,op:"a"})}):t.push({param:r,value:i,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const t=this.encoder.encodeKey(e);return this.map.get(e).map(r=>t+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const t=new Il({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const t=("a"===e.op?this.map.get(e.param):void 0)||[];t.push(VD(e.value)),this.map.set(e.param,t);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let r=this.map.get(e.param)||[];const i=r.indexOf(VD(e.value));-1!==i&&r.splice(i,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class Z3{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}}function YV(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function QV(n){return typeof Blob<"u"&&n instanceof Blob}function ZV(n){return typeof FormData<"u"&&n instanceof FormData}class jI{constructor(e,t,r,i){let a;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function J3(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||i?(this.body=void 0!==r?r:null,a=i):a=r,a&&(this.reportProgress=!!a.reportProgress,this.withCredentials=!!a.withCredentials,a.responseType&&(this.responseType=a.responseType),a.headers&&(this.headers=a.headers),a.context&&(this.context=a.context),a.params&&(this.params=a.params)),this.headers||(this.headers=new Na),this.context||(this.context=new Z3),this.params){const c=this.params.toString();if(0===c.length)this.urlWithParams=t;else{const h=t.indexOf("?");this.urlWithParams=t+(-1===h?"?":h<t.length-1?"&":"")+c}}else this.params=new Il,this.urlWithParams=t}serializeBody(){return null===this.body?null:YV(this.body)||QV(this.body)||ZV(this.body)||function X3(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof Il?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||ZV(this.body)?null:QV(this.body)?this.body.type||null:YV(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Il?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){const t=e.method||this.method,r=e.url||this.url,i=e.responseType||this.responseType,a=void 0!==e.body?e.body:this.body,c=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,h=void 0!==e.reportProgress?e.reportProgress:this.reportProgress;let p=e.headers||this.headers,y=e.params||this.params;const I=e.context??this.context;return void 0!==e.setHeaders&&(p=Object.keys(e.setHeaders).reduce((D,O)=>D.set(O,e.setHeaders[O]),p)),e.setParams&&(y=Object.keys(e.setParams).reduce((D,O)=>D.set(O,e.setParams[O]),y)),new jI(t,r,a,{params:y,headers:p,context:I,reportProgress:h,responseType:i,withCredentials:c})}}var Sm=function(n){return n[n.Sent=0]="Sent",n[n.UploadProgress=1]="UploadProgress",n[n.ResponseHeader=2]="ResponseHeader",n[n.DownloadProgress=3]="DownloadProgress",n[n.Response=4]="Response",n[n.User=5]="User",n}(Sm||{});class wN{constructor(e,t=200,r="OK"){this.headers=e.headers||new Na,this.status=void 0!==e.status?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}class TN extends wN{constructor(e={}){super(e),this.type=Sm.ResponseHeader}clone(e={}){return new TN({headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class Rm extends wN{constructor(e={}){super(e),this.type=Sm.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new Rm({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class JV extends wN{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${e.url||"(unknown url)"}`:`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}}function bN(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials}}let $I=(()=>{class n{constructor(t){this.handler=t}request(t,r,i={}){let a;if(t instanceof jI)a=t;else{let p,y;p=i.headers instanceof Na?i.headers:new Na(i.headers),i.params&&(y=i.params instanceof Il?i.params:new Il({fromObject:i.params})),a=new jI(t,r,void 0!==i.body?i.body:null,{headers:p,context:i.context,params:y,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials})}const c=(0,We.of)(a).pipe(As(p=>this.handler.handle(p)));if(t instanceof jI||"events"===i.observe)return c;const h=c.pipe(Gn(p=>p instanceof Rm));switch(i.observe||"body"){case"body":switch(a.responseType){case"arraybuffer":return h.pipe((0,ct.U)(p=>{if(null!==p.body&&!(p.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return p.body}));case"blob":return h.pipe((0,ct.U)(p=>{if(null!==p.body&&!(p.body instanceof Blob))throw new Error("Response is not a Blob.");return p.body}));case"text":return h.pipe((0,ct.U)(p=>{if(null!==p.body&&"string"!=typeof p.body)throw new Error("Response is not a string.");return p.body}));default:return h.pipe((0,ct.U)(p=>p.body))}case"response":return h;default:throw new Error(`Unreachable: unhandled observe type ${i.observe}}`)}}delete(t,r={}){return this.request("DELETE",t,r)}get(t,r={}){return this.request("GET",t,r)}head(t,r={}){return this.request("HEAD",t,r)}jsonp(t,r){return this.request("JSONP",t,{params:(new Il).append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,r={}){return this.request("OPTIONS",t,r)}patch(t,r,i={}){return this.request("PATCH",t,bN(i,r))}post(t,r,i={}){return this.request("POST",t,bN(i,r))}put(t,r,i={}){return this.request("PUT",t,bN(i,r))}static#e=this.\u0275fac=function(r){return new(r||n)(g.LFG(FD))};static#t=this.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac})}return n})();function t2(n,e){return e(n)}function tH(n,e){return(t,r)=>e.intercept(t,{handle:i=>n(i,r)})}const rH=new g.OlP(""),HI=new g.OlP(""),n2=new g.OlP("");function iH(){let n=null;return(e,t)=>{null===n&&(n=((0,g.f3M)(rH,{optional:!0})??[]).reduceRight(tH,t2));const r=(0,g.f3M)(g.HDt),i=r.add();return n(e,t).pipe(jo(()=>r.remove(i)))}}let r2=(()=>{class n extends FD{constructor(t,r){super(),this.backend=t,this.injector=r,this.chain=null,this.pendingTasks=(0,g.f3M)(g.HDt)}handle(t){if(null===this.chain){const i=Array.from(new Set([...this.injector.get(HI),...this.injector.get(n2,[])]));this.chain=i.reduceRight((a,c)=>function nH(n,e,t){return(r,i)=>t.runInContext(()=>e(r,a=>n(a,i)))}(a,c,this.injector),t2)}const r=this.pendingTasks.add();return this.chain(t,i=>this.backend.handle(i)).pipe(jo(()=>this.pendingTasks.remove(r)))}static#e=this.\u0275fac=function(r){return new(r||n)(g.LFG(LD),g.LFG(g.lqb))};static#t=this.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac})}return n})();const uH=/^\)\]\}',?\n/;let s2=(()=>{class n{constructor(t){this.xhrFactory=t}handle(t){if("JSONP"===t.method)throw new g.vHH(-2800,!1);const r=this.xhrFactory;return(r.\u0275loadImpl?(0,qt.D)(r.\u0275loadImpl()):(0,We.of)(null)).pipe((0,Mn.w)(()=>new er.y(a=>{const c=r.build();if(c.open(t.method,t.urlWithParams),t.withCredentials&&(c.withCredentials=!0),t.headers.forEach((X,ie)=>c.setRequestHeader(X,ie.join(","))),t.headers.has("Accept")||c.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){const X=t.detectContentTypeHeader();null!==X&&c.setRequestHeader("Content-Type",X)}if(t.responseType){const X=t.responseType.toLowerCase();c.responseType="json"!==X?X:"text"}const h=t.serializeBody();let p=null;const y=()=>{if(null!==p)return p;const X=c.statusText||"OK",ie=new Na(c.getAllResponseHeaders()),_e=function cH(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}(c)||t.url;return p=new TN({headers:ie,status:c.status,statusText:X,url:_e}),p},I=()=>{let{headers:X,status:ie,statusText:_e,url:Fe}=y(),ke=null;204!==ie&&(ke=typeof c.response>"u"?c.responseText:c.response),0===ie&&(ie=ke?200:0);let tt=ie>=200&&ie<300;if("json"===t.responseType&&"string"==typeof ke){const vt=ke;ke=ke.replace(uH,"");try{ke=""!==ke?JSON.parse(ke):null}catch(ut){ke=vt,tt&&(tt=!1,ke={error:ut,text:ke})}}tt?(a.next(new Rm({body:ke,headers:X,status:ie,statusText:_e,url:Fe||void 0})),a.complete()):a.error(new JV({error:ke,headers:X,status:ie,statusText:_e,url:Fe||void 0}))},D=X=>{const{url:ie}=y(),_e=new JV({error:X,status:c.status||0,statusText:c.statusText||"Unknown Error",url:ie||void 0});a.error(_e)};let O=!1;const L=X=>{O||(a.next(y()),O=!0);let ie={type:Sm.DownloadProgress,loaded:X.loaded};X.lengthComputable&&(ie.total=X.total),"text"===t.responseType&&c.responseText&&(ie.partialText=c.responseText),a.next(ie)},J=X=>{let ie={type:Sm.UploadProgress,loaded:X.loaded};X.lengthComputable&&(ie.total=X.total),a.next(ie)};return c.addEventListener("load",I),c.addEventListener("error",D),c.addEventListener("timeout",D),c.addEventListener("abort",D),t.reportProgress&&(c.addEventListener("progress",L),null!==h&&c.upload&&c.upload.addEventListener("progress",J)),c.send(h),a.next({type:Sm.Sent}),()=>{c.removeEventListener("error",D),c.removeEventListener("abort",D),c.removeEventListener("load",I),c.removeEventListener("timeout",D),t.reportProgress&&(c.removeEventListener("progress",L),null!==h&&c.upload&&c.upload.removeEventListener("progress",J)),c.readyState!==c.DONE&&c.abort()}})))}static#e=this.\u0275fac=function(r){return new(r||n)(g.LFG(H.JF))};static#t=this.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac})}return n})();const CN=new g.OlP("XSRF_ENABLED"),o2=new g.OlP("XSRF_COOKIE_NAME",{providedIn:"root",factory:()=>"XSRF-TOKEN"}),a2=new g.OlP("XSRF_HEADER_NAME",{providedIn:"root",factory:()=>"X-XSRF-TOKEN"});class u2{}let hH=(()=>{class n{constructor(t,r,i){this.doc=t,this.platform=r,this.cookieName=i,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=(0,H.Mx)(t,this.cookieName),this.lastCookieString=t),this.lastToken}static#e=this.\u0275fac=function(r){return new(r||n)(g.LFG(H.K0),g.LFG(g.Lbi),g.LFG(o2))};static#t=this.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac})}return n})();function fH(n,e){const t=n.url.toLowerCase();if(!(0,g.f3M)(CN)||"GET"===n.method||"HEAD"===n.method||t.startsWith("http://")||t.startsWith("https://"))return e(n);const r=(0,g.f3M)(u2).getToken(),i=(0,g.f3M)(a2);return null!=r&&!n.headers.has(i)&&(n=n.clone({headers:n.headers.set(i,r)})),e(n)}var wl=function(n){return n[n.Interceptors=0]="Interceptors",n[n.LegacyInterceptors=1]="LegacyInterceptors",n[n.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",n[n.NoXsrfProtection=3]="NoXsrfProtection",n[n.JsonpSupport=4]="JsonpSupport",n[n.RequestsMadeViaParent=5]="RequestsMadeViaParent",n[n.Fetch=6]="Fetch",n}(wl||{});function pH(...n){const e=[$I,s2,r2,{provide:FD,useExisting:r2},{provide:LD,useExisting:s2},{provide:HI,useValue:fH,multi:!0},{provide:CN,useValue:!0},{provide:u2,useClass:hH}];for(const t of n)e.push(...t.\u0275providers);return(0,g.MR2)(e)}const c2=new g.OlP("LEGACY_INTERCEPTOR_FN");function gH(){return function jh(n,e){return{\u0275kind:n,\u0275providers:e}}(wl.LegacyInterceptors,[{provide:c2,useFactory:iH},{provide:HI,useExisting:c2,multi:!0}])}let l2=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=g.oAB({type:n});static#n=this.\u0275inj=g.cJS({providers:[pH(gH())]})}return n})(),IH=(()=>{class n{constructor(t){this.http=t,this.API_ENDPOINT="https://brave-rabbit-annually.ngrok-free.app/api/compile"}handleCompile(t,r,i){var a=this;return F(function*(){const c={code:t,input:r,languageId:i},h={"ngrok-skip-browser-warning":"true"};try{const p=yield function q3(n,e){const t="object"==typeof e;return new Promise((r,i)=>{const a=new z3.Hp({next:c=>{r(c),a.unsubscribe()},error:i,complete:()=>{t?r(e.defaultValue):i(new tr)}});n.subscribe(a)})}(a.http.post(a.API_ENDPOINT,c,{headers:h}));if(p&&p.output)return p.output;throw new Error("Output not found in the response")}catch(p){throw console.error("Error during compilation:",p),p}})()}static#e=this.\u0275fac=function(r){return new(r||n)(g.LFG($I))};static#t=this.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),d2=(()=>{class n{constructor(){this.trophies=[{id:1,description:"Risolvi il primo esercizio",requirement:"hello-security",unlocked:!1,iconURL:"/assets/trophy.png"},{id:2,description:"Mock Description",requirement:"Mock requirement",unlocked:!1,iconURL:"/assets/award.png"},{id:3,description:"Mock Description",requirement:"Mock requirement",unlocked:!1,iconURL:"/assets/award.png"},{id:4,description:"Mock Description",requirement:"Mock requirement",unlocked:!1,iconURL:"/assets/award.png"},{id:5,description:"Mock Description",requirement:"Mock requirement",unlocked:!1,iconURL:"/assets/award.png"}]}isExerciseSolvedByUser(t,r){return F(function*(){try{const i=Ur(Br,"users",t);return((yield es(i)).get("solved_exercises")||[]).includes(r)}catch(i){return console.error("Error:",i),!1}})()}updateTrophiesForUser(t){var r=this;return F(function*(){for(const i of r.trophies)i.unlocked=yield r.isExerciseSolvedByUser(t,i.requirement)})()}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var h2=k(2352),DN=k(3019);class wH extends ao.w0{constructor(e,t){super()}schedule(e,t=0){return this}}const BD={setInterval(n,e,...t){const{delegate:r}=BD;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){const{delegate:e}=BD;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};var TH=k(9039);const AN={now:()=>(AN.delegate||Date).now(),delegate:void 0};class GI{constructor(e,t=GI.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}}GI.now=AN.now;const f2=new class CH extends GI{constructor(e,t=GI.now){super(e,t),this.actions=[],this._active=!1}flush(e){const{actions:t}=this;if(this._active)return void t.push(e);let r;this._active=!0;do{if(r=e.execute(e.state,e.delay))break}while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}}(class bH extends wH{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;const i=this.id,a=this.scheduler;return null!=i&&(this.id=this.recycleAsyncId(a,i,t)),this.pending=!0,this.delay=t,this.id=null!==(r=this.id)&&void 0!==r?r:this.requestAsyncId(a,this.id,t),this}requestAsyncId(e,t,r=0){return BD.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(null!=r&&this.delay===r&&!1===this.pending)return t;null!=t&&BD.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const r=this._execute(e,t);if(r)return r;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let i,r=!1;try{this.work(e)}catch(a){r=!0,i=a||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){const{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,(0,TH.P)(r,this),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}}),DH=f2;var AH=k(671);function p2(n=0,e,t=DH){let r=-1;return null!=e&&((0,AH.K)(e)?t=e:r=e),new er.y(i=>{let a=function SH(n){return n instanceof Date&&!isNaN(n)}(n)?+n-t.now():n;a<0&&(a=0);let c=0;return t.schedule(function(){i.closed||(i.next(c++),0<=r?this.schedule(void 0,r):i.complete())},a)})}var RH=k(3997);class PH extends Sn.x{constructor(e=1/0,t=1/0,r=AN){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:a,_windowTime:c}=this;t||(r.push(e),!i&&r.push(a.now()+c)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,a=i.slice();for(let c=0;c<a.length&&!e.closed;c+=r?1:2)e.next(a[c]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,a=(i?1:2)*e;if(e<1/0&&a<r.length&&r.splice(0,r.length-a),!i){const c=t.now();let h=0;for(let p=1;p<r.length&&r[p]<=c;p+=2)h=p;h&&r.splice(0,h+1)}}}var xH=k(3020);function g2(n,e,t){let r,i=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n):r=n??1/0,(0,xH.B)({connector:()=>new PH(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}let $h={async:!1,baseUrl:null,breaks:!1,extensions:null,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,hooks:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartypants:!1,tokenizer:null,walkTokens:null,xhtml:!1};const _2=/[&<>"']/,OH=new RegExp(_2.source,"g"),y2=/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,NH=new RegExp(y2.source,"g"),kH={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},v2=n=>kH[n];function wi(n,e){if(e){if(_2.test(n))return n.replace(OH,v2)}else if(y2.test(n))return n.replace(NH,v2);return n}const FH=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/gi;function E2(n){return n.replace(FH,(e,t)=>"colon"===(t=t.toLowerCase())?":":"#"===t.charAt(0)?"x"===t.charAt(1)?String.fromCharCode(parseInt(t.substring(2),16)):String.fromCharCode(+t.substring(1)):"")}const LH=/(^|[^\[])\^/g;function dn(n,e){n="string"==typeof n?n:n.source,e=e||"";const t={replace:(r,i)=>(i=(i=i.source||i).replace(LH,"$1"),n=n.replace(r,i),t),getRegex:()=>new RegExp(n,e)};return t}const VH=/[^\w:]/g,UH=/^$|^[a-z][a-z0-9+.-]*:|^[?#]/i;function I2(n,e,t){if(n){let r;try{r=decodeURIComponent(E2(t)).replace(VH,"").toLowerCase()}catch{return null}if(0===r.indexOf("javascript:")||0===r.indexOf("vbscript:")||0===r.indexOf("data:"))return null}e&&!UH.test(t)&&(t=function HH(n,e){jD[" "+n]||(jD[" "+n]=BH.test(n)?n+"/":HD(n,"/",!0));const t=-1===(n=jD[" "+n]).indexOf(":");return"//"===e.substring(0,2)?t?e:n.replace(jH,"$1")+e:"/"===e.charAt(0)?t?e:n.replace($H,"$1")+e:n+e}(e,t));try{t=encodeURI(t).replace(/%25/g,"%")}catch{return null}return t}const jD={},BH=/^[^:]+:\/*[^/]*$/,jH=/^([^:]+:)[\s\S]*$/,$H=/^([^:]+:\/*[^/]*)[\s\S]*$/,$D={exec:function(){}};function w2(n,e){const r=n.replace(/\|/g,(a,c,h)=>{let p=!1,y=c;for(;--y>=0&&"\\"===h[y];)p=!p;return p?"|":" |"}).split(/ \|/);let i=0;if(r[0].trim()||r.shift(),r.length>0&&!r[r.length-1].trim()&&r.pop(),r.length>e)r.splice(e);else for(;r.length<e;)r.push("");for(;i<r.length;i++)r[i]=r[i].trim().replace(/\\\|/g,"|");return r}function HD(n,e,t){const r=n.length;if(0===r)return"";let i=0;for(;i<r;){const a=n.charAt(r-i-1);if(a!==e||t){if(a===e||!t)break;i++}else i++}return n.slice(0,r-i)}function T2(n,e){if(e<1)return"";let t="";for(;e>1;)1&e&&(t+=n),e>>=1,n+=n;return t+n}function b2(n,e,t,r){const i=e.href,a=e.title?wi(e.title):null,c=n[1].replace(/\\([\[\]])/g,"$1");if("!"!==n[0].charAt(0)){r.state.inLink=!0;const h={type:"link",raw:t,href:i,title:a,text:c,tokens:r.inlineTokens(c)};return r.state.inLink=!1,h}return{type:"image",raw:t,href:i,title:a,text:wi(c)}}class SN{constructor(e){this.options=e||$h}space(e){const t=this.rules.block.newline.exec(e);if(t&&t[0].length>0)return{type:"space",raw:t[0]}}code(e){const t=this.rules.block.code.exec(e);if(t){const r=t[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:t[0],codeBlockStyle:"indented",text:this.options.pedantic?r:HD(r,"\n")}}}fences(e){const t=this.rules.block.fences.exec(e);if(t){const r=t[0],i=function qH(n,e){const t=n.match(/^(\s+)(?:```)/);if(null===t)return e;const r=t[1];return e.split("\n").map(i=>{const a=i.match(/^\s+/);if(null===a)return i;const[c]=a;return c.length>=r.length?i.slice(r.length):i}).join("\n")}(r,t[3]||"");return{type:"code",raw:r,lang:t[2]?t[2].trim().replace(this.rules.inline._escapes,"$1"):t[2],text:i}}}heading(e){const t=this.rules.block.heading.exec(e);if(t){let r=t[2].trim();if(/#$/.test(r)){const i=HD(r,"#");(this.options.pedantic||!i||/ $/.test(i))&&(r=i.trim())}return{type:"heading",raw:t[0],depth:t[1].length,text:r,tokens:this.lexer.inline(r)}}}hr(e){const t=this.rules.block.hr.exec(e);if(t)return{type:"hr",raw:t[0]}}blockquote(e){const t=this.rules.block.blockquote.exec(e);if(t){const r=t[0].replace(/^ *>[ \t]?/gm,""),i=this.lexer.state.top;this.lexer.state.top=!0;const a=this.lexer.blockTokens(r);return this.lexer.state.top=i,{type:"blockquote",raw:t[0],tokens:a,text:r}}}list(e){let t=this.rules.block.list.exec(e);if(t){let r,i,a,c,h,p,y,I,D,O,L,J,X=t[1].trim();const ie=X.length>1,_e={type:"list",raw:"",ordered:ie,start:ie?+X.slice(0,-1):"",loose:!1,items:[]};X=ie?`\\d{1,9}\\${X.slice(-1)}`:`\\${X}`,this.options.pedantic&&(X=ie?X:"[*+-]");const Fe=new RegExp(`^( {0,3}${X})((?:[\t ][^\\n]*)?(?:\\n|$))`);for(;e&&(J=!1,(t=Fe.exec(e))&&!this.rules.block.hr.test(e));){if(r=t[0],e=e.substring(r.length),I=t[2].split("\n",1)[0].replace(/^\t+/,tt=>" ".repeat(3*tt.length)),D=e.split("\n",1)[0],this.options.pedantic?(c=2,L=I.trimLeft()):(c=t[2].search(/[^ ]/),c=c>4?1:c,L=I.slice(c),c+=t[1].length),p=!1,!I&&/^ *$/.test(D)&&(r+=D+"\n",e=e.substring(D.length+1),J=!0),!J){const tt=new RegExp(`^ {0,${Math.min(3,c-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ \t][^\\n]*)?(?:\\n|$))`),vt=new RegExp(`^ {0,${Math.min(3,c-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),ut=new RegExp(`^ {0,${Math.min(3,c-1)}}(?:\`\`\`|~~~)`),sn=new RegExp(`^ {0,${Math.min(3,c-1)}}#`);for(;e&&(O=e.split("\n",1)[0],D=O,this.options.pedantic&&(D=D.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  ")),!(ut.test(D)||sn.test(D)||tt.test(D)||vt.test(e)));){if(D.search(/[^ ]/)>=c||!D.trim())L+="\n"+D.slice(c);else{if(p||I.search(/[^ ]/)>=4||ut.test(I)||sn.test(I)||vt.test(I))break;L+="\n"+D}!p&&!D.trim()&&(p=!0),r+=O+"\n",e=e.substring(O.length+1),I=D.slice(c)}}_e.loose||(y?_e.loose=!0:/\n *\n *$/.test(r)&&(y=!0)),this.options.gfm&&(i=/^\[[ xX]\] /.exec(L),i&&(a="[ ] "!==i[0],L=L.replace(/^\[[ xX]\] +/,""))),_e.items.push({type:"list_item",raw:r,task:!!i,checked:a,loose:!1,text:L}),_e.raw+=r}_e.items[_e.items.length-1].raw=r.trimRight(),_e.items[_e.items.length-1].text=L.trimRight(),_e.raw=_e.raw.trimRight();const ke=_e.items.length;for(h=0;h<ke;h++)if(this.lexer.state.top=!1,_e.items[h].tokens=this.lexer.blockTokens(_e.items[h].text,[]),!_e.loose){const tt=_e.items[h].tokens.filter(ut=>"space"===ut.type),vt=tt.length>0&&tt.some(ut=>/\n.*\n/.test(ut.raw));_e.loose=vt}if(_e.loose)for(h=0;h<ke;h++)_e.items[h].loose=!0;return _e}}html(e){const t=this.rules.block.html.exec(e);if(t){const r={type:"html",raw:t[0],pre:!this.options.sanitizer&&("pre"===t[1]||"script"===t[1]||"style"===t[1]),text:t[0]};if(this.options.sanitize){const i=this.options.sanitizer?this.options.sanitizer(t[0]):wi(t[0]);r.type="paragraph",r.text=i,r.tokens=this.lexer.inline(i)}return r}}def(e){const t=this.rules.block.def.exec(e);if(t){const r=t[1].toLowerCase().replace(/\s+/g," "),i=t[2]?t[2].replace(/^<(.*)>$/,"$1").replace(this.rules.inline._escapes,"$1"):"",a=t[3]?t[3].substring(1,t[3].length-1).replace(this.rules.inline._escapes,"$1"):t[3];return{type:"def",tag:r,raw:t[0],href:i,title:a}}}table(e){const t=this.rules.block.table.exec(e);if(t){const r={type:"table",header:w2(t[1]).map(i=>({text:i})),align:t[2].replace(/^ *|\| *$/g,"").split(/ *\| */),rows:t[3]&&t[3].trim()?t[3].replace(/\n[ \t]*$/,"").split("\n"):[]};if(r.header.length===r.align.length){r.raw=t[0];let a,c,h,p,i=r.align.length;for(a=0;a<i;a++)r.align[a]=/^ *-+: *$/.test(r.align[a])?"right":/^ *:-+: *$/.test(r.align[a])?"center":/^ *:-+ *$/.test(r.align[a])?"left":null;for(i=r.rows.length,a=0;a<i;a++)r.rows[a]=w2(r.rows[a],r.header.length).map(y=>({text:y}));for(i=r.header.length,c=0;c<i;c++)r.header[c].tokens=this.lexer.inline(r.header[c].text);for(i=r.rows.length,c=0;c<i;c++)for(p=r.rows[c],h=0;h<p.length;h++)p[h].tokens=this.lexer.inline(p[h].text);return r}}}lheading(e){const t=this.rules.block.lheading.exec(e);if(t)return{type:"heading",raw:t[0],depth:"="===t[2].charAt(0)?1:2,text:t[1],tokens:this.lexer.inline(t[1])}}paragraph(e){const t=this.rules.block.paragraph.exec(e);if(t){const r="\n"===t[1].charAt(t[1].length-1)?t[1].slice(0,-1):t[1];return{type:"paragraph",raw:t[0],text:r,tokens:this.lexer.inline(r)}}}text(e){const t=this.rules.block.text.exec(e);if(t)return{type:"text",raw:t[0],text:t[0],tokens:this.lexer.inline(t[0])}}escape(e){const t=this.rules.inline.escape.exec(e);if(t)return{type:"escape",raw:t[0],text:wi(t[1])}}tag(e){const t=this.rules.inline.tag.exec(e);if(t)return!this.lexer.state.inLink&&/^<a /i.test(t[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test(t[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(t[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(t[0])&&(this.lexer.state.inRawBlock=!1),{type:this.options.sanitize?"text":"html",raw:t[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,text:this.options.sanitize?this.options.sanitizer?this.options.sanitizer(t[0]):wi(t[0]):t[0]}}link(e){const t=this.rules.inline.link.exec(e);if(t){const r=t[2].trim();if(!this.options.pedantic&&/^</.test(r)){if(!/>$/.test(r))return;const c=HD(r.slice(0,-1),"\\");if((r.length-c.length)%2==0)return}else{const c=function GH(n,e){if(-1===n.indexOf(e[1]))return-1;const t=n.length;let r=0,i=0;for(;i<t;i++)if("\\"===n[i])i++;else if(n[i]===e[0])r++;else if(n[i]===e[1]&&(r--,r<0))return i;return-1}(t[2],"()");if(c>-1){const p=(0===t[0].indexOf("!")?5:4)+t[1].length+c;t[2]=t[2].substring(0,c),t[0]=t[0].substring(0,p).trim(),t[3]=""}}let i=t[2],a="";if(this.options.pedantic){const c=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(i);c&&(i=c[1],a=c[3])}else a=t[3]?t[3].slice(1,-1):"";return i=i.trim(),/^</.test(i)&&(i=this.options.pedantic&&!/>$/.test(r)?i.slice(1):i.slice(1,-1)),b2(t,{href:i&&i.replace(this.rules.inline._escapes,"$1"),title:a&&a.replace(this.rules.inline._escapes,"$1")},t[0],this.lexer)}}reflink(e,t){let r;if((r=this.rules.inline.reflink.exec(e))||(r=this.rules.inline.nolink.exec(e))){let i=(r[2]||r[1]).replace(/\s+/g," ");if(i=t[i.toLowerCase()],!i){const a=r[0].charAt(0);return{type:"text",raw:a,text:a}}return b2(r,i,r[0],this.lexer)}}emStrong(e,t,r=""){let i=this.rules.inline.emStrong.lDelim.exec(e);if(!i||i[3]&&r.match(/[\p{L}\p{N}]/u))return;const a=i[1]||i[2]||"";if(!a||a&&(""===r||this.rules.inline.punctuation.exec(r))){const c=i[0].length-1;let h,p,y=c,I=0;const D="*"===i[0][0]?this.rules.inline.emStrong.rDelimAst:this.rules.inline.emStrong.rDelimUnd;for(D.lastIndex=0,t=t.slice(-1*e.length+c);null!=(i=D.exec(t));){if(h=i[1]||i[2]||i[3]||i[4]||i[5]||i[6],!h)continue;if(p=h.length,i[3]||i[4]){y+=p;continue}if((i[5]||i[6])&&c%3&&!((c+p)%3)){I+=p;continue}if(y-=p,y>0)continue;p=Math.min(p,p+y+I);const O=e.slice(0,c+i.index+(i[0].length-h.length)+p);if(Math.min(c,p)%2){const J=O.slice(1,-1);return{type:"em",raw:O,text:J,tokens:this.lexer.inlineTokens(J)}}const L=O.slice(2,-2);return{type:"strong",raw:O,text:L,tokens:this.lexer.inlineTokens(L)}}}}codespan(e){const t=this.rules.inline.code.exec(e);if(t){let r=t[2].replace(/\n/g," ");const i=/[^ ]/.test(r),a=/^ /.test(r)&&/ $/.test(r);return i&&a&&(r=r.substring(1,r.length-1)),r=wi(r,!0),{type:"codespan",raw:t[0],text:r}}}br(e){const t=this.rules.inline.br.exec(e);if(t)return{type:"br",raw:t[0]}}del(e){const t=this.rules.inline.del.exec(e);if(t)return{type:"del",raw:t[0],text:t[2],tokens:this.lexer.inlineTokens(t[2])}}autolink(e,t){const r=this.rules.inline.autolink.exec(e);if(r){let i,a;return"@"===r[2]?(i=wi(this.options.mangle?t(r[1]):r[1]),a="mailto:"+i):(i=wi(r[1]),a=i),{type:"link",raw:r[0],text:i,href:a,tokens:[{type:"text",raw:i,text:i}]}}}url(e,t){let r;if(r=this.rules.inline.url.exec(e)){let i,a;if("@"===r[2])i=wi(this.options.mangle?t(r[0]):r[0]),a="mailto:"+i;else{let c;do{c=r[0],r[0]=this.rules.inline._backpedal.exec(r[0])[0]}while(c!==r[0]);i=wi(r[0]),a="www."===r[1]?"http://"+r[0]:r[0]}return{type:"link",raw:r[0],text:i,href:a,tokens:[{type:"text",raw:i,text:i}]}}}inlineText(e,t){const r=this.rules.inline.text.exec(e);if(r){let i;return i=this.lexer.state.inRawBlock?this.options.sanitize?this.options.sanitizer?this.options.sanitizer(r[0]):wi(r[0]):r[0]:wi(this.options.smartypants?t(r[0]):r[0]),{type:"text",raw:r[0],text:i}}}}const rt={newline:/^(?: *(?:\n|$))+/,code:/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,fences:/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,hr:/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,heading:/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,blockquote:/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/,list:/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/,html:"^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))",def:/^ {0,3}\[(label)\]: *(?:\n *)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n *)?| *\n *)(title))? *(?:\n+|$)/,table:$D,lheading:/^((?:.|\n(?!\n))+?)\n {0,3}(=+|-+) *(?:\n+|$)/,_paragraph:/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,text:/^[^\n]+/,_label:/(?!\s*\])(?:\\.|[^\[\]\\])+/,_title:/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/};rt.def=dn(rt.def).replace("label",rt._label).replace("title",rt._title).getRegex(),rt.bullet=/(?:[*+-]|\d{1,9}[.)])/,rt.listItemStart=dn(/^( *)(bull) */).replace("bull",rt.bullet).getRegex(),rt.list=dn(rt.list).replace(/bull/g,rt.bullet).replace("hr","\\n+(?=\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$))").replace("def","\\n+(?="+rt.def.source+")").getRegex(),rt._tag="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",rt._comment=/<!--(?!-?>)[\s\S]*?(?:-->|$)/,rt.html=dn(rt.html,"i").replace("comment",rt._comment).replace("tag",rt._tag).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),rt.paragraph=dn(rt._paragraph).replace("hr",rt.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",rt._tag).getRegex(),rt.blockquote=dn(rt.blockquote).replace("paragraph",rt.paragraph).getRegex(),rt.normal={...rt},rt.gfm={...rt.normal,table:"^ *([^\\n ].*\\|.*)\\n {0,3}(?:\\| *)?(:?-+:? *(?:\\| *:?-+:? *)*)(?:\\| *)?(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)"},rt.gfm.table=dn(rt.gfm.table).replace("hr",rt.hr).replace("heading"," {0,3}#{1,6} ").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",rt._tag).getRegex(),rt.gfm.paragraph=dn(rt._paragraph).replace("hr",rt.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("table",rt.gfm.table).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",rt._tag).getRegex(),rt.pedantic={...rt.normal,html:dn("^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:\"[^\"]*\"|'[^']*'|\\s[^'\"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))").replace("comment",rt._comment).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:$D,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:dn(rt.normal._paragraph).replace("hr",rt.hr).replace("heading"," *#{1,6} *[^\n]").replace("lheading",rt.lheading).replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").getRegex()};const $e={escape:/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,autolink:/^<(scheme:[^\s\x00-\x1f<>]*|email)>/,url:$D,tag:"^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",link:/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/,reflink:/^!?\[(label)\]\[(ref)\]/,nolink:/^!?\[(ref)\](?:\[\])?/,reflinkSearch:"reflink|nolink(?!\\()",emStrong:{lDelim:/^(?:\*+(?:([punct_])|[^\s*]))|^_+(?:([punct*])|([^\s_]))/,rDelimAst:/^(?:[^_*\\]|\\.)*?\_\_(?:[^_*\\]|\\.)*?\*(?:[^_*\\]|\\.)*?(?=\_\_)|(?:[^*\\]|\\.)+(?=[^*])|[punct_](\*+)(?=[\s]|$)|(?:[^punct*_\s\\]|\\.)(\*+)(?=[punct_\s]|$)|[punct_\s](\*+)(?=[^punct*_\s])|[\s](\*+)(?=[punct_])|[punct_](\*+)(?=[punct_])|(?:[^punct*_\s\\]|\\.)(\*+)(?=[^punct*_\s])/,rDelimUnd:/^(?:[^_*\\]|\\.)*?\*\*(?:[^_*\\]|\\.)*?\_(?:[^_*\\]|\\.)*?(?=\*\*)|(?:[^_\\]|\\.)+(?=[^_])|[punct*](\_+)(?=[\s]|$)|(?:[^punct*_\s\\]|\\.)(\_+)(?=[punct*\s]|$)|[punct*\s](\_+)(?=[^punct*_\s])|[\s](\_+)(?=[punct*])|[punct*](\_+)(?=[punct*])/},code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,br:/^( {2,}|\\)\n(?!\s*$)/,del:$D,text:/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,punctuation:/^([\spunctuation])/};function WH(n){return n.replace(/---/g,"\u2014").replace(/--/g,"\u2013").replace(/(^|[-\u2014/(\[{"\s])'/g,"$1\u2018").replace(/'/g,"\u2019").replace(/(^|[-\u2014/(\[{\u2018\s])"/g,"$1\u201c").replace(/"/g,"\u201d").replace(/\.{3}/g,"\u2026")}function C2(n){let t,r,e="";const i=n.length;for(t=0;t<i;t++)r=n.charCodeAt(t),Math.random()>.5&&(r="x"+r.toString(16)),e+="&#"+r+";";return e}$e._punctuation="!\"#$%&'()+\\-.,/:;<=>?@\\[\\]`^{|}~",$e.punctuation=dn($e.punctuation).replace(/punctuation/g,$e._punctuation).getRegex(),$e.blockSkip=/\[[^\]]*?\]\([^\)]*?\)|`[^`]*?`|<[^>]*?>/g,$e.escapedEmSt=/(?:^|[^\\])(?:\\\\)*\\[*_]/g,$e._comment=dn(rt._comment).replace("(?:--\x3e|$)","--\x3e").getRegex(),$e.emStrong.lDelim=dn($e.emStrong.lDelim).replace(/punct/g,$e._punctuation).getRegex(),$e.emStrong.rDelimAst=dn($e.emStrong.rDelimAst,"g").replace(/punct/g,$e._punctuation).getRegex(),$e.emStrong.rDelimUnd=dn($e.emStrong.rDelimUnd,"g").replace(/punct/g,$e._punctuation).getRegex(),$e._escapes=/\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/g,$e._scheme=/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/,$e._email=/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/,$e.autolink=dn($e.autolink).replace("scheme",$e._scheme).replace("email",$e._email).getRegex(),$e._attribute=/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/,$e.tag=dn($e.tag).replace("comment",$e._comment).replace("attribute",$e._attribute).getRegex(),$e._label=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,$e._href=/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/,$e._title=/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/,$e.link=dn($e.link).replace("label",$e._label).replace("href",$e._href).replace("title",$e._title).getRegex(),$e.reflink=dn($e.reflink).replace("label",$e._label).replace("ref",rt._label).getRegex(),$e.nolink=dn($e.nolink).replace("ref",rt._label).getRegex(),$e.reflinkSearch=dn($e.reflinkSearch,"g").replace("reflink",$e.reflink).replace("nolink",$e.nolink).getRegex(),$e.normal={...$e},$e.pedantic={...$e.normal,strong:{start:/^__|\*\*/,middle:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,endAst:/\*\*(?!\*)/g,endUnd:/__(?!_)/g},em:{start:/^_|\*/,middle:/^()\*(?=\S)([\s\S]*?\S)\*(?!\*)|^_(?=\S)([\s\S]*?\S)_(?!_)/,endAst:/\*(?!\*)/g,endUnd:/_(?!_)/g},link:dn(/^!?\[(label)\]\((.*?)\)/).replace("label",$e._label).getRegex(),reflink:dn(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",$e._label).getRegex()},$e.gfm={...$e.normal,escape:dn($e.escape).replace("])","~|])").getRegex(),_extended_email:/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/,url:/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/},$e.gfm.url=dn($e.gfm.url,"i").replace("email",$e.gfm._extended_email).getRegex(),$e.breaks={...$e.gfm,br:dn($e.br).replace("{2,}","*").getRegex(),text:dn($e.gfm.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()};class Tl{constructor(e){this.tokens=[],this.tokens.links=Object.create(null),this.options=e||$h,this.options.tokenizer=this.options.tokenizer||new SN,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};const t={block:rt.normal,inline:$e.normal};this.options.pedantic?(t.block=rt.pedantic,t.inline=$e.pedantic):this.options.gfm&&(t.block=rt.gfm,t.inline=this.options.breaks?$e.breaks:$e.gfm),this.tokenizer.rules=t}static get rules(){return{block:rt,inline:$e}}static lex(e,t){return new Tl(t).lex(e)}static lexInline(e,t){return new Tl(t).inlineTokens(e)}lex(e){let t;for(e=e.replace(/\r\n|\r/g,"\n"),this.blockTokens(e,this.tokens);t=this.inlineQueue.shift();)this.inlineTokens(t.src,t.tokens);return this.tokens}blockTokens(e,t=[]){let r,i,a,c;for(e=this.options.pedantic?e.replace(/\t/g,"    ").replace(/^ +$/gm,""):e.replace(/^( *)(\t+)/gm,(h,p,y)=>p+"    ".repeat(y.length));e;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some(h=>!!(r=h.call({lexer:this},e,t))&&(e=e.substring(r.raw.length),t.push(r),!0)))){if(r=this.tokenizer.space(e)){e=e.substring(r.raw.length),1===r.raw.length&&t.length>0?t[t.length-1].raw+="\n":t.push(r);continue}if(r=this.tokenizer.code(e)){e=e.substring(r.raw.length),i=t[t.length-1],!i||"paragraph"!==i.type&&"text"!==i.type?t.push(r):(i.raw+="\n"+r.raw,i.text+="\n"+r.text,this.inlineQueue[this.inlineQueue.length-1].src=i.text);continue}if(r=this.tokenizer.fences(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.heading(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.hr(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.blockquote(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.list(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.html(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.def(e)){e=e.substring(r.raw.length),i=t[t.length-1],!i||"paragraph"!==i.type&&"text"!==i.type?this.tokens.links[r.tag]||(this.tokens.links[r.tag]={href:r.href,title:r.title}):(i.raw+="\n"+r.raw,i.text+="\n"+r.raw,this.inlineQueue[this.inlineQueue.length-1].src=i.text);continue}if(r=this.tokenizer.table(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.lheading(e)){e=e.substring(r.raw.length),t.push(r);continue}if(a=e,this.options.extensions&&this.options.extensions.startBlock){let h=1/0;const p=e.slice(1);let y;this.options.extensions.startBlock.forEach(function(I){y=I.call({lexer:this},p),"number"==typeof y&&y>=0&&(h=Math.min(h,y))}),h<1/0&&h>=0&&(a=e.substring(0,h+1))}if(this.state.top&&(r=this.tokenizer.paragraph(a))){i=t[t.length-1],c&&"paragraph"===i.type?(i.raw+="\n"+r.raw,i.text+="\n"+r.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=i.text):t.push(r),c=a.length!==e.length,e=e.substring(r.raw.length);continue}if(r=this.tokenizer.text(e)){e=e.substring(r.raw.length),i=t[t.length-1],i&&"text"===i.type?(i.raw+="\n"+r.raw,i.text+="\n"+r.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=i.text):t.push(r);continue}if(e){const h="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(h);break}throw new Error(h)}}return this.state.top=!0,t}inline(e,t=[]){return this.inlineQueue.push({src:e,tokens:t}),t}inlineTokens(e,t=[]){let r,i,a,h,p,y,c=e;if(this.tokens.links){const I=Object.keys(this.tokens.links);if(I.length>0)for(;null!=(h=this.tokenizer.rules.inline.reflinkSearch.exec(c));)I.includes(h[0].slice(h[0].lastIndexOf("[")+1,-1))&&(c=c.slice(0,h.index)+"["+T2("a",h[0].length-2)+"]"+c.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;null!=(h=this.tokenizer.rules.inline.blockSkip.exec(c));)c=c.slice(0,h.index)+"["+T2("a",h[0].length-2)+"]"+c.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;null!=(h=this.tokenizer.rules.inline.escapedEmSt.exec(c));)c=c.slice(0,h.index+h[0].length-2)+"++"+c.slice(this.tokenizer.rules.inline.escapedEmSt.lastIndex),this.tokenizer.rules.inline.escapedEmSt.lastIndex--;for(;e;)if(p||(y=""),p=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some(I=>!!(r=I.call({lexer:this},e,t))&&(e=e.substring(r.raw.length),t.push(r),!0)))){if(r=this.tokenizer.escape(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.tag(e)){e=e.substring(r.raw.length),i=t[t.length-1],i&&"text"===r.type&&"text"===i.type?(i.raw+=r.raw,i.text+=r.text):t.push(r);continue}if(r=this.tokenizer.link(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.reflink(e,this.tokens.links)){e=e.substring(r.raw.length),i=t[t.length-1],i&&"text"===r.type&&"text"===i.type?(i.raw+=r.raw,i.text+=r.text):t.push(r);continue}if(r=this.tokenizer.emStrong(e,c,y)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.codespan(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.br(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.del(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.autolink(e,C2)){e=e.substring(r.raw.length),t.push(r);continue}if(!this.state.inLink&&(r=this.tokenizer.url(e,C2))){e=e.substring(r.raw.length),t.push(r);continue}if(a=e,this.options.extensions&&this.options.extensions.startInline){let I=1/0;const D=e.slice(1);let O;this.options.extensions.startInline.forEach(function(L){O=L.call({lexer:this},D),"number"==typeof O&&O>=0&&(I=Math.min(I,O))}),I<1/0&&I>=0&&(a=e.substring(0,I+1))}if(r=this.tokenizer.inlineText(a,WH)){e=e.substring(r.raw.length),"_"!==r.raw.slice(-1)&&(y=r.raw.slice(-1)),p=!0,i=t[t.length-1],i&&"text"===i.type?(i.raw+=r.raw,i.text+=r.text):t.push(r);continue}if(e){const I="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(I);break}throw new Error(I)}}return t}}class zI{constructor(e){this.options=e||$h}code(e,t,r){const i=(t||"").match(/\S*/)[0];if(this.options.highlight){const a=this.options.highlight(e,i);null!=a&&a!==e&&(r=!0,e=a)}return e=e.replace(/\n$/,"")+"\n",i?'<pre><code class="'+this.options.langPrefix+wi(i)+'">'+(r?e:wi(e,!0))+"</code></pre>\n":"<pre><code>"+(r?e:wi(e,!0))+"</code></pre>\n"}blockquote(e){return`<blockquote>\n${e}</blockquote>\n`}html(e){return e}heading(e,t,r,i){return this.options.headerIds?`<h${t} id="${this.options.headerPrefix+i.slug(r)}">${e}</h${t}>\n`:`<h${t}>${e}</h${t}>\n`}hr(){return this.options.xhtml?"<hr/>\n":"<hr>\n"}list(e,t,r){const i=t?"ol":"ul";return"<"+i+(t&&1!==r?' start="'+r+'"':"")+">\n"+e+"</"+i+">\n"}listitem(e){return`<li>${e}</li>\n`}checkbox(e){return"<input "+(e?'checked="" ':"")+'disabled="" type="checkbox"'+(this.options.xhtml?" /":"")+"> "}paragraph(e){return`<p>${e}</p>\n`}table(e,t){return t&&(t=`<tbody>${t}</tbody>`),"<table>\n<thead>\n"+e+"</thead>\n"+t+"</table>\n"}tablerow(e){return`<tr>\n${e}</tr>\n`}tablecell(e,t){const r=t.header?"th":"td";return(t.align?`<${r} align="${t.align}">`:`<${r}>`)+e+`</${r}>\n`}strong(e){return`<strong>${e}</strong>`}em(e){return`<em>${e}</em>`}codespan(e){return`<code>${e}</code>`}br(){return this.options.xhtml?"<br/>":"<br>"}del(e){return`<del>${e}</del>`}link(e,t,r){if(null===(e=I2(this.options.sanitize,this.options.baseUrl,e)))return r;let i='<a href="'+e+'"';return t&&(i+=' title="'+t+'"'),i+=">"+r+"</a>",i}image(e,t,r){if(null===(e=I2(this.options.sanitize,this.options.baseUrl,e)))return r;let i=`<img src="${e}" alt="${r}"`;return t&&(i+=` title="${t}"`),i+=this.options.xhtml?"/>":">",i}text(e){return e}}class D2{strong(e){return e}em(e){return e}codespan(e){return e}del(e){return e}html(e){return e}text(e){return e}link(e,t,r){return""+r}image(e,t,r){return""+r}br(){return""}}class A2{constructor(){this.seen={}}serialize(e){return e.toLowerCase().trim().replace(/<[!\/a-z].*?>/gi,"").replace(/[\u2000-\u206F\u2E00-\u2E7F\\'!"#$%&()*+,./:;<=>?@[\]^`{|}~]/g,"").replace(/\s/g,"-")}getNextSafeSlug(e,t){let r=e,i=0;if(this.seen.hasOwnProperty(r)){i=this.seen[e];do{i++,r=e+"-"+i}while(this.seen.hasOwnProperty(r))}return t||(this.seen[e]=i,this.seen[r]=0),r}slug(e,t={}){const r=this.serialize(e);return this.getNextSafeSlug(r,t.dryrun)}}class bl{constructor(e){this.options=e||$h,this.options.renderer=this.options.renderer||new zI,this.renderer=this.options.renderer,this.renderer.options=this.options,this.textRenderer=new D2,this.slugger=new A2}static parse(e,t){return new bl(t).parse(e)}static parseInline(e,t){return new bl(t).parseInline(e)}parse(e,t=!0){let i,a,c,h,p,y,I,D,O,L,J,X,ie,_e,Fe,ke,tt,vt,ut,r="";const sn=e.length;for(i=0;i<sn;i++)if(L=e[i],this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[L.type]&&(ut=this.options.extensions.renderers[L.type].call({parser:this},L),!1!==ut||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(L.type)))r+=ut||"";else switch(L.type){case"space":continue;case"hr":r+=this.renderer.hr();continue;case"heading":r+=this.renderer.heading(this.parseInline(L.tokens),L.depth,E2(this.parseInline(L.tokens,this.textRenderer)),this.slugger);continue;case"code":r+=this.renderer.code(L.text,L.lang,L.escaped);continue;case"table":for(D="",I="",h=L.header.length,a=0;a<h;a++)I+=this.renderer.tablecell(this.parseInline(L.header[a].tokens),{header:!0,align:L.align[a]});for(D+=this.renderer.tablerow(I),O="",h=L.rows.length,a=0;a<h;a++){for(y=L.rows[a],I="",p=y.length,c=0;c<p;c++)I+=this.renderer.tablecell(this.parseInline(y[c].tokens),{header:!1,align:L.align[c]});O+=this.renderer.tablerow(I)}r+=this.renderer.table(D,O);continue;case"blockquote":O=this.parse(L.tokens),r+=this.renderer.blockquote(O);continue;case"list":for(J=L.ordered,X=L.start,ie=L.loose,h=L.items.length,O="",a=0;a<h;a++)Fe=L.items[a],ke=Fe.checked,tt=Fe.task,_e="",Fe.task&&(vt=this.renderer.checkbox(ke),ie?Fe.tokens.length>0&&"paragraph"===Fe.tokens[0].type?(Fe.tokens[0].text=vt+" "+Fe.tokens[0].text,Fe.tokens[0].tokens&&Fe.tokens[0].tokens.length>0&&"text"===Fe.tokens[0].tokens[0].type&&(Fe.tokens[0].tokens[0].text=vt+" "+Fe.tokens[0].tokens[0].text)):Fe.tokens.unshift({type:"text",text:vt}):_e+=vt),_e+=this.parse(Fe.tokens,ie),O+=this.renderer.listitem(_e,tt,ke);r+=this.renderer.list(O,J,X);continue;case"html":r+=this.renderer.html(L.text);continue;case"paragraph":r+=this.renderer.paragraph(this.parseInline(L.tokens));continue;case"text":for(O=L.tokens?this.parseInline(L.tokens):L.text;i+1<sn&&"text"===e[i+1].type;)L=e[++i],O+="\n"+(L.tokens?this.parseInline(L.tokens):L.text);r+=t?this.renderer.paragraph(O):O;continue;default:{const Ti='Token with "'+L.type+'" type was not found.';if(this.options.silent)return void console.error(Ti);throw new Error(Ti)}}return r}parseInline(e,t){t=t||this.renderer;let i,a,c,r="";const h=e.length;for(i=0;i<h;i++)if(a=e[i],this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[a.type]&&(c=this.options.extensions.renderers[a.type].call({parser:this},a),!1!==c||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(a.type)))r+=c||"";else switch(a.type){case"escape":case"text":r+=t.text(a.text);break;case"html":r+=t.html(a.text);break;case"link":r+=t.link(a.href,a.title,this.parseInline(a.tokens,t));break;case"image":r+=t.image(a.href,a.title,a.text);break;case"strong":r+=t.strong(this.parseInline(a.tokens,t));break;case"em":r+=t.em(this.parseInline(a.tokens,t));break;case"codespan":r+=t.codespan(a.text);break;case"br":r+=t.br();break;case"del":r+=t.del(this.parseInline(a.tokens,t));break;default:{const p='Token with "'+a.type+'" type was not found.';if(this.options.silent)return void console.error(p);throw new Error(p)}}return r}}class RN{constructor(e){this.options=e||$h}static passThroughHooks=new Set(["preprocess","postprocess"]);preprocess(e){return e}postprocess(e){return e}}function S2(n,e){return(t,r,i)=>{"function"==typeof r&&(i=r,r=null);const a={...r},c=function KH(n,e,t){return r=>{if(r.message+="\nPlease report this to https://github.com/markedjs/marked.",n){const i="<p>An error occurred:</p><pre>"+wi(r.message+"",!0)+"</pre>";return e?Promise.resolve(i):t?void t(null,i):i}if(e)return Promise.reject(r);if(!t)throw r;t(r)}}((r={...it.defaults,...a}).silent,r.async,i);if(typeof t>"u"||null===t)return c(new Error("marked(): input parameter is undefined or null"));if("string"!=typeof t)return c(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(t)+", string expected"));if(function zH(n){n&&n.sanitize&&!n.silent&&console.warn("marked(): sanitize and sanitizer parameters are deprecated since version 0.7.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/#/USING_ADVANCED.md#options")}(r),r.hooks&&(r.hooks.options=r),i){const h=r.highlight;let p;try{r.hooks&&(t=r.hooks.preprocess(t)),p=n(t,r)}catch(D){return c(D)}const y=function(D){let O;if(!D)try{r.walkTokens&&it.walkTokens(p,r.walkTokens),O=e(p,r),r.hooks&&(O=r.hooks.postprocess(O))}catch(L){D=L}return r.highlight=h,D?c(D):i(null,O)};if(!h||h.length<3||(delete r.highlight,!p.length))return y();let I=0;return it.walkTokens(p,function(D){"code"===D.type&&(I++,setTimeout(()=>{h(D.text,D.lang,function(O,L){if(O)return y(O);null!=L&&L!==D.text&&(D.text=L,D.escaped=!0),I--,0===I&&y()})},0))}),void(0===I&&y())}if(r.async)return Promise.resolve(r.hooks?r.hooks.preprocess(t):t).then(h=>n(h,r)).then(h=>r.walkTokens?Promise.all(it.walkTokens(h,r.walkTokens)).then(()=>h):h).then(h=>e(h,r)).then(h=>r.hooks?r.hooks.postprocess(h):h).catch(c);try{r.hooks&&(t=r.hooks.preprocess(t));const h=n(t,r);r.walkTokens&&it.walkTokens(h,r.walkTokens);let p=e(h,r);return r.hooks&&(p=r.hooks.postprocess(p)),p}catch(h){return c(h)}}}function it(n,e,t){return S2(Tl.lex,bl.parse)(n,e,t)}it.options=it.setOptions=function(n){return function MH(n){$h=n}(it.defaults={...it.defaults,...n}),it},it.getDefaults=function m2(){return{async:!1,baseUrl:null,breaks:!1,extensions:null,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,hooks:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartypants:!1,tokenizer:null,walkTokens:null,xhtml:!1}},it.defaults=$h,it.use=function(...n){const e=it.defaults.extensions||{renderers:{},childTokens:{}};n.forEach(t=>{const r={...t};if(r.async=it.defaults.async||r.async||!1,t.extensions&&(t.extensions.forEach(i=>{if(!i.name)throw new Error("extension name required");if(i.renderer){const a=e.renderers[i.name];e.renderers[i.name]=a?function(...c){let h=i.renderer.apply(this,c);return!1===h&&(h=a.apply(this,c)),h}:i.renderer}if(i.tokenizer){if(!i.level||"block"!==i.level&&"inline"!==i.level)throw new Error("extension level must be 'block' or 'inline'");e[i.level]?e[i.level].unshift(i.tokenizer):e[i.level]=[i.tokenizer],i.start&&("block"===i.level?e.startBlock?e.startBlock.push(i.start):e.startBlock=[i.start]:"inline"===i.level&&(e.startInline?e.startInline.push(i.start):e.startInline=[i.start]))}i.childTokens&&(e.childTokens[i.name]=i.childTokens)}),r.extensions=e),t.renderer){const i=it.defaults.renderer||new zI;for(const a in t.renderer){const c=i[a];i[a]=(...h)=>{let p=t.renderer[a].apply(i,h);return!1===p&&(p=c.apply(i,h)),p}}r.renderer=i}if(t.tokenizer){const i=it.defaults.tokenizer||new SN;for(const a in t.tokenizer){const c=i[a];i[a]=(...h)=>{let p=t.tokenizer[a].apply(i,h);return!1===p&&(p=c.apply(i,h)),p}}r.tokenizer=i}if(t.hooks){const i=it.defaults.hooks||new RN;for(const a in t.hooks){const c=i[a];i[a]=RN.passThroughHooks.has(a)?h=>{if(it.defaults.async)return Promise.resolve(t.hooks[a].call(i,h)).then(y=>c.call(i,y));const p=t.hooks[a].call(i,h);return c.call(i,p)}:(...h)=>{let p=t.hooks[a].apply(i,h);return!1===p&&(p=c.apply(i,h)),p}}r.hooks=i}if(t.walkTokens){const i=it.defaults.walkTokens;r.walkTokens=function(a){let c=[];return c.push(t.walkTokens.call(this,a)),i&&(c=c.concat(i.call(this,a))),c}}it.setOptions(r)})},it.walkTokens=function(n,e){let t=[];for(const r of n)switch(t=t.concat(e.call(it,r)),r.type){case"table":for(const i of r.header)t=t.concat(it.walkTokens(i.tokens,e));for(const i of r.rows)for(const a of i)t=t.concat(it.walkTokens(a.tokens,e));break;case"list":t=t.concat(it.walkTokens(r.items,e));break;default:it.defaults.extensions&&it.defaults.extensions.childTokens&&it.defaults.extensions.childTokens[r.type]?it.defaults.extensions.childTokens[r.type].forEach(function(i){t=t.concat(it.walkTokens(r[i],e))}):r.tokens&&(t=t.concat(it.walkTokens(r.tokens,e)))}return t},it.parseInline=S2(Tl.lexInline,bl.parseInline),it.Parser=bl,it.parser=bl.parse,it.Renderer=zI,it.TextRenderer=D2,it.Lexer=Tl,it.lexer=Tl.lex,it.Tokenizer=SN,it.Slugger=A2,it.Hooks=RN,it.parse=it;const YH=["*"];let R2=(()=>{class n{constructor(){this._buttonClick$=new Sn.x,this.copied$=this._buttonClick$.pipe((0,Mn.w)(()=>(0,DN.T)((0,We.of)(!0),p2(3e3).pipe(Bo(!1)))),(0,RH.x)(),g2(1)),this.copiedText$=this.copied$.pipe(Ds(!1),(0,ct.U)(t=>t?"Copied":"Copy"))}onCopyToClipboardClick(){this._buttonClick$.next()}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=g.Xpm({type:n,selectors:[["markdown-clipboard"]],decls:4,vars:7,consts:[[1,"markdown-clipboard-button",3,"click"]],template:function(r,i){1&r&&(g.TgZ(0,"button",0),g.NdJ("click",function(){return i.onCopyToClipboardClick()}),g.ALo(1,"async"),g._uU(2),g.ALo(3,"async"),g.qZA()),2&r&&(g.ekj("copied",g.lcZ(1,3,i.copied$)),g.xp6(2),g.Oqu(g.lcZ(3,5,i.copiedText$)))},dependencies:[H.Ov],encapsulation:2,changeDetection:0})}return n})();class JH{}var PN=function(n){return n.CommandLine="command-line",n.LineHighlight="line-highlight",n.LineNumbers="line-numbers",n}(PN||{});class eG{}const P2=new g.OlP("SECURITY_CONTEXT");let xN=(()=>{class n{get options(){return this._options}set options(t){this._options={...this.DEFAULT_MARKED_OPTIONS,...t}}get renderer(){return this.options.renderer}set renderer(t){this.options.renderer=t}constructor(t,r,i,a,c,h){this.platform=t,this.securityContext=r,this.http=i,this.clipboardOptions=a,this.sanitizer=h,this.DEFAULT_MARKED_OPTIONS={renderer:new zI},this.DEFAULT_KATEX_OPTIONS={delimiters:[{left:"$$",right:"$$",display:!0},{left:"$",right:"$",display:!1},{left:"\\(",right:"\\)",display:!1},{left:"\\begin{equation}",right:"\\end{equation}",display:!0},{left:"\\begin{align}",right:"\\end{align}",display:!0},{left:"\\begin{alignat}",right:"\\end{alignat}",display:!0},{left:"\\begin{gather}",right:"\\end{gather}",display:!0},{left:"\\begin{CD}",right:"\\end{CD}",display:!0},{left:"\\[",right:"\\]",display:!0}]},this.DEFAULT_MERMAID_OPTIONS={startOnLoad:!1},this.DEFAULT_CLIPBOARD_OPTIONS={buttonComponent:void 0},this.DEFAULT_PARSE_OPTIONS={decodeHtml:!1,inline:!1,emoji:!1,mermaid:!1,markedOptions:this.DEFAULT_MARKED_OPTIONS,disableSanitizer:!1},this.DEFAULT_RENDER_OPTIONS={clipboard:!1,clipboardOptions:void 0,katex:!1,katexOptions:void 0,mermaid:!1,mermaidOptions:void 0},this._reload$=new Sn.x,this.reload$=this._reload$.asObservable(),this.options=c}parse(t,r=this.DEFAULT_PARSE_OPTIONS){const{decodeHtml:i,inline:a,emoji:c,mermaid:h,disableSanitizer:p}=r,y={...this.options,...r.markedOptions};h&&(this.renderer=this.extendRenderer(y.renderer||new zI));const I=this.trimIndentation(t),D=i?this.decodeHtml(I):I,O=c?this.parseEmoji(D):D,L=this.parseMarked(O,y,a);return(p?L:this.sanitizer.sanitize(this.securityContext,L))||""}render(t,r=this.DEFAULT_RENDER_OPTIONS,i){const{clipboard:a,clipboardOptions:c,katex:h,katexOptions:p,mermaid:y,mermaidOptions:I}=r;a&&this.renderClipboard(t,i,{...this.DEFAULT_CLIPBOARD_OPTIONS,...this.clipboardOptions,...c}),h&&this.renderKatex(t,{...this.DEFAULT_KATEX_OPTIONS,...p}),y&&this.renderMermaid(t,{...this.DEFAULT_MERMAID_OPTIONS,...I}),this.highlight(t)}reload(){this._reload$.next()}getSource(t){if(!this.http)throw new Error("[ngx-markdown] When using the `src` attribute you *have to* pass the `HttpClient` as a parameter of the `forRoot` method. See README for more information");return this.http.get(t,{responseType:"text"}).pipe((0,ct.U)(r=>this.handleExtension(t,r)))}highlight(t){if(!(0,H.NF)(this.platform)||typeof Prism>"u"||typeof Prism.highlightAllUnder>"u")return;t||(t=document);const r=t.querySelectorAll('pre code:not([class*="language-"])');Array.prototype.forEach.call(r,i=>i.classList.add("language-none")),Prism.highlightAllUnder(t)}decodeHtml(t){if(!(0,H.NF)(this.platform))return t;const r=document.createElement("textarea");return r.innerHTML=t,r.value}extendRenderer(t){const r=t;if(!0===r.\u0275NgxMarkdownRendererExtended)return t;const i=t.code;return t.code=function(a,c,h){return"mermaid"===c?`<div class="mermaid">${a}</div>`:i.call(this,a,c,h)},r.\u0275NgxMarkdownRendererExtended=!0,t}handleExtension(t,r){const i=t.lastIndexOf("://"),a=i>-1?t.substring(i+4):t,c=a.lastIndexOf("/"),h=c>-1?a.substring(c+1).split("?")[0]:"",p=h.lastIndexOf("."),y=p>-1?h.substring(p+1):"";return y&&"md"!==y?"```"+y+"\n"+r+"\n```":r}parseMarked(t,r,i=!1){return i?it.parseInline(t,r):it.parse(t,r)}parseEmoji(t){if(!(0,H.NF)(this.platform))return t;if(typeof joypixels>"u"||typeof joypixels.shortnameToUnicode>"u")throw new Error("[ngx-markdown] When using the `emoji` attribute you *have to* include Emoji-Toolkit files to `angular.json` or use imports. See README for more information");return joypixels.shortnameToUnicode(t)}renderKatex(t,r){if((0,H.NF)(this.platform)){if(typeof katex>"u"||typeof renderMathInElement>"u")throw new Error("[ngx-markdown] When using the `katex` attribute you *have to* include KaTeX files to `angular.json` or use imports. See README for more information");renderMathInElement(t,r)}}renderClipboard(t,r,i){if(!(0,H.NF)(this.platform))return;if(typeof ClipboardJS>"u")throw new Error("[ngx-markdown] When using the `clipboard` attribute you *have to* include Clipboard files to `angular.json` or use imports. See README for more information");if(!r)throw new Error("[ngx-markdown] When using the `clipboard` attribute you *have to* provide the `viewContainerRef` parameter to `MarkdownService.render()` function");const{buttonComponent:a,buttonTemplate:c}=i,h=t.querySelectorAll("pre");for(let p=0;p<h.length;p++){const y=h.item(p),I=document.createElement("div");I.style.position="relative",y.parentNode.insertBefore(I,y),I.appendChild(y);const D=document.createElement("div");let O,L;D.style.position="absolute",D.style.top=".5em",D.style.right=".5em",D.style.opacity="0",D.style.transition="opacity 250ms ease-out",I.insertAdjacentElement("beforeend",D),y.onmouseover=()=>D.style.opacity="1",y.onmouseout=()=>D.style.opacity="0",O=a?r.createComponent(a).hostView:c?r.createEmbeddedView(c):r.createComponent(R2).hostView,O.rootNodes.forEach(J=>{J.onmouseover=()=>D.style.opacity="1",D.appendChild(J),L=new ClipboardJS(J,{text:()=>y.innerText})}),O.onDestroy(()=>L.destroy())}}renderMermaid(t,r=this.DEFAULT_MERMAID_OPTIONS){if(!(0,H.NF)(this.platform))return;if(typeof mermaid>"u"||typeof mermaid.init>"u")throw new Error("[ngx-markdown] When using the `mermaid` attribute you *have to* include Mermaid files to `angular.json` or use imports. See README for more information");const i=t.querySelectorAll(".mermaid");0!==i.length&&(mermaid.initialize(r),mermaid.init(i))}trimIndentation(t){if(!t)return"";let r;return t.split("\n").map(i=>{let a=r;return i.length>0&&(a=isNaN(a)?i.search(/\S|$/):Math.min(i.search(/\S|$/),a)),isNaN(r)&&(r=a),a?i.substring(a):i}).join("\n")}static#e=this.\u0275fac=function(r){return new(r||n)(g.LFG(g.Lbi),g.LFG(P2),g.LFG($I,8),g.LFG(JH,8),g.LFG(eG,8),g.LFG(io))};static#t=this.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac})}return n})(),x2=(()=>{class n{get disableSanitizer(){return this._disableSanitizer}set disableSanitizer(t){this._disableSanitizer=this.coerceBooleanProperty(t)}get inline(){return this._inline}set inline(t){this._inline=this.coerceBooleanProperty(t)}get srcRelativeLink(){return this._srcRelativeLink}set srcRelativeLink(t){this._srcRelativeLink=this.coerceBooleanProperty(t)}get clipboard(){return this._clipboard}set clipboard(t){this._clipboard=this.coerceBooleanProperty(t)}get emoji(){return this._emoji}set emoji(t){this._emoji=this.coerceBooleanProperty(t)}get katex(){return this._katex}set katex(t){this._katex=this.coerceBooleanProperty(t)}get mermaid(){return this._mermaid}set mermaid(t){this._mermaid=this.coerceBooleanProperty(t)}get lineHighlight(){return this._lineHighlight}set lineHighlight(t){this._lineHighlight=this.coerceBooleanProperty(t)}get lineNumbers(){return this._lineNumbers}set lineNumbers(t){this._lineNumbers=this.coerceBooleanProperty(t)}get commandLine(){return this._commandLine}set commandLine(t){this._commandLine=this.coerceBooleanProperty(t)}constructor(t,r,i){this.element=t,this.markdownService=r,this.viewContainerRef=i,this.error=new g.vpe,this.load=new g.vpe,this.ready=new g.vpe,this._clipboard=!1,this._commandLine=!1,this._disableSanitizer=!1,this._emoji=!1,this._inline=!1,this._katex=!1,this._lineHighlight=!1,this._lineNumbers=!1,this._mermaid=!1,this._srcRelativeLink=!1,this.destroyed$=new Sn.x}ngOnChanges(){this.loadContent()}loadContent(){null==this.data?null==this.src||this.handleSrc():this.handleData()}ngAfterViewInit(){!this.data&&!this.src&&this.handleTransclusion(),this.markdownService.reload$.pipe(co(this.destroyed$)).subscribe(()=>this.loadContent())}ngOnDestroy(){this.destroyed$.next(),this.destroyed$.complete()}render(t,r=!1){let i;this.src&&this.srcRelativeLink&&(i={baseUrl:new URL(this.src,location.origin).pathname});const c={clipboard:this.clipboard,clipboardOptions:{buttonComponent:this.clipboardButtonComponent,buttonTemplate:this.clipboardButtonTemplate},katex:this.katex,katexOptions:this.katexOptions,mermaid:this.mermaid,mermaidOptions:this.mermaidOptions},h=this.markdownService.parse(t,{decodeHtml:r,inline:this.inline,emoji:this.emoji,mermaid:this.mermaid,markedOptions:i,disableSanitizer:this.disableSanitizer});this.element.nativeElement.innerHTML=h,this.handlePlugins(),this.markdownService.render(this.element.nativeElement,c,this.viewContainerRef),this.ready.emit()}coerceBooleanProperty(t){return null!=t&&"false"!=`${String(t)}`}handleData(){this.render(this.data)}handleSrc(){this.markdownService.getSource(this.src).subscribe({next:t=>{this.render(t),this.load.emit(t)},error:t=>this.error.emit(t)})}handleTransclusion(){this.render(this.element.nativeElement.innerHTML,!0)}handlePlugins(){this.commandLine&&(this.setPluginClass(this.element.nativeElement,PN.CommandLine),this.setPluginOptions(this.element.nativeElement,{dataFilterOutput:this.filterOutput,dataHost:this.host,dataPrompt:this.prompt,dataOutput:this.output,dataUser:this.user})),this.lineHighlight&&this.setPluginOptions(this.element.nativeElement,{dataLine:this.line,dataLineOffset:this.lineOffset}),this.lineNumbers&&(this.setPluginClass(this.element.nativeElement,PN.LineNumbers),this.setPluginOptions(this.element.nativeElement,{dataStart:this.start}))}setPluginClass(t,r){const i=t.querySelectorAll("pre");for(let a=0;a<i.length;a++){const c=r instanceof Array?r:[r];i.item(a).classList.add(...c)}}setPluginOptions(t,r){const i=t.querySelectorAll("pre");for(let a=0;a<i.length;a++)Object.keys(r).forEach(c=>{const h=r[c];if(h){const p=this.toLispCase(c);i.item(a).setAttribute(p,h.toString())}})}toLispCase(t){const r=t.match(/([A-Z])/g);if(!r)return t;let i=t.toString();for(let a=0,c=r.length;a<c;a++)i=i.replace(new RegExp(r[a]),"-"+r[a].toLowerCase());return"-"===i.slice(0,1)&&(i=i.slice(1)),i}static#e=this.\u0275fac=function(r){return new(r||n)(g.Y36(g.SBq),g.Y36(xN),g.Y36(g.s_b))};static#t=this.\u0275cmp=g.Xpm({type:n,selectors:[["markdown"],["","markdown",""]],inputs:{data:"data",src:"src",disableSanitizer:"disableSanitizer",inline:"inline",srcRelativeLink:"srcRelativeLink",clipboard:"clipboard",clipboardButtonComponent:"clipboardButtonComponent",clipboardButtonTemplate:"clipboardButtonTemplate",emoji:"emoji",katex:"katex",katexOptions:"katexOptions",mermaid:"mermaid",mermaidOptions:"mermaidOptions",lineHighlight:"lineHighlight",line:"line",lineOffset:"lineOffset",lineNumbers:"lineNumbers",start:"start",commandLine:"commandLine",filterOutput:"filterOutput",host:"host",prompt:"prompt",output:"output",user:"user"},outputs:{error:"error",load:"load",ready:"ready"},features:[g.TTD],ngContentSelectors:YH,decls:1,vars:0,template:function(r,i){1&r&&(g.F$t(),g.Hsn(0))},encapsulation:2})}return n})(),aG=(()=>{class n{static forRoot(t){return{ngModule:n,providers:[xN,t&&t.loader||[],t&&t.clipboardOptions||[],t&&t.markedOptions||[],{provide:P2,useValue:t&&null!=t.sanitize?t.sanitize:g.q3G.HTML}]}}static forChild(){return{ngModule:n}}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=g.oAB({type:n});static#n=this.\u0275inj=g.cJS({imports:[H.ez]})}return n})();var M2;!function(n){let e;var i;let t,r;(i=e=n.SecurityLevel||(n.SecurityLevel={})).Strict="strict",i.Loose="loose",i.Antiscript="antiscript",i.Sandbox="sandbox",function(i){i.Base="base",i.Forest="forest",i.Dark="dark",i.Default="default",i.Neutral="neutral"}(t=n.Theme||(n.Theme={})),function(i){i[i.Debug=1]="Debug",i[i.Info=2]="Info",i[i.Warn=3]="Warn",i[i.Error=4]="Error",i[i.Fatal=5]="Fatal"}(r=n.LogLevel||(n.LogLevel={}))}(M2||(M2={}));const uG=function(n){return{"is-loading":n}};let O2=(()=>{class n{constructor(t,r,i){this.auth=t,this.serverService=r,this.trophyService=i,this.editorOptions={theme:"vs-dark",language:"javascript"},this.code="",this.languageId="",this.idTrophy=0,this.output="",this.customInput="",this.isProcessing=!1,this.currentTab="instructions"}runCode(){this.isProcessing=!0,this.serverService.handleCompile(this.code,this.customInput,+this.languageId).then(t=>{this.output=t,this.checkSolution(this.output),this.isProcessing=!1}).catch(t=>{this.output="Error during compilation or execution.",console.error(t),this.isProcessing=!1})}checkSolution(t){var r=this;return F(function*(){try{const i=Ur(Br,"exercises","hello-security");(yield es(i)).get("solution").trim()===t.trim()?(zV(),rn.currentUser?yield r.updateExperienceAndSolvedExercises(rn.currentUser.uid,"hello-security"):console.error("No user is currently logged in.")):console.log("Wrong Solution")}catch(i){console.error("Error:",i)}})()}updateExperienceAndSolvedExercises(t,r){return F(function*(){const i=Ur(Br,"users",t),a=yield es(i),c=a.get("experience")||0,h=a.get("exercises_solved")||0,p=a.get("solved_exercises")||[],y=a.get("percentage")||0;p.includes(r)||(yield function d3(n,e,t,...r){n=Nt(n,Zn);const i=Nt(n.firestore,yn),a=Vh(i);let c;return c="string"==typeof(e=nn(e))||e instanceof Lh?uN(a,"updateDoc",n._key,e,t,r):aN(a,"updateDoc",n._key,e),BI(i,[c.toMutation(n._key,Pn.exists(!0))])}(i,{exp:c+50,exercises_solved:h+1,solved_exercises:[...p,r],percentage:y+5}))})()}static#e=this.\u0275fac=function(r){return new(r||n)(g.Y36(Nu),g.Y36(IH),g.Y36(d2))};static#t=this.\u0275cmp=g.Xpm({type:n,selectors:[["app-code-editor"]],inputs:{editorOptions:"editorOptions",code:"code",languageId:"languageId",idTrophy:"idTrophy",instructions:"instructions"},decls:17,vars:9,consts:[[1,"columns","is-vcentered","is-gapless","is-fullheight"],[1,"column","is-two-thirds"],[1,"editor-height",3,"options","ngModel","ngModelChange"],[1,"m-2"],[1,"button","is-primary","is-pulled-right",3,"disabled","ngClass","click"],[1,"box","m-4","output-height"],[1,"title","is-5"],[1,"column"],[1,"content","p-4","istruzioni"],[3,"data"]],template:function(r,i){1&r&&(g._UZ(0,"app-navbar"),g.TgZ(1,"div",0)(2,"div",1)(3,"ngx-monaco-editor",2),g.NdJ("ngModelChange",function(c){return i.code=c}),g.qZA(),g.TgZ(4,"div",3)(5,"button",4),g.NdJ("click",function(){return i.runCode()}),g._uU(6),g.qZA()(),g.TgZ(7,"div",5)(8,"h2",6),g._uU(9,"Output"),g.qZA(),g.TgZ(10,"pre"),g._uU(11),g.qZA()()(),g.TgZ(12,"div",7)(13,"div",8)(14,"h2"),g._uU(15,"Istruzioni"),g.qZA(),g._UZ(16,"markdown",9),g.qZA()()()),2&r&&(g.xp6(3),g.Q6J("options",i.editorOptions)("ngModel",i.code),g.xp6(2),g.Q6J("disabled",i.isProcessing)("ngClass",g.VKq(7,uG,i.isProcessing)),g.xp6(1),g.hij(" ",i.isProcessing?"Processing":"Run Code"," "),g.xp6(5),g.Oqu(i.output),g.xp6(5),g.Q6J("data",i.instructions))},dependencies:[H.mk,h2.PG,dr.JJ,dr.On,x2,Am],styles:[".columns.is-fullheight[_ngcontent-%COMP%]{min-height:100vh}.istruzioni[_ngcontent-%COMP%]{top:0;width:100%;z-index:100;background-color:#fff;overflow-y:auto;max-height:100vh}ngx-monaco-editor[_ngcontent-%COMP%]{height:80vh;width:100%}@media only screen and (max-width: 768px){.columns[_ngcontent-%COMP%]{flex-direction:column}}"]})}return n})();function cG(n,e){if(1&n){const t=g.EpF();g.TgZ(0,"button",21),g.NdJ("click",function(){g.CHM(t);const i=g.oxw();return g.KtG(i.deleteUser())}),g._uU(1," Delete User "),g.qZA()}}function lG(n,e){if(1&n){const t=g.EpF();g.TgZ(0,"button",22),g.NdJ("click",function(){g.CHM(t);const i=g.oxw();return g.KtG(i.logoutFromGoogle())}),g._uU(1," Logout "),g.qZA()}}function dG(n,e){if(1&n){const t=g.EpF();g.TgZ(0,"button",23),g.NdJ("click",function(){g.CHM(t);const i=g.oxw();return g.KtG(i.navigate())}),g._uU(1," Login "),g.qZA()}}function hG(n,e){if(1&n){const t=g.EpF();g.TgZ(0,"button",24),g.NdJ("click",function(){g.CHM(t);const i=g.oxw();return g.KtG(i.editUsername())}),g._uU(1,"Modifica"),g.qZA()}}function fG(n,e){if(1&n&&(g.TgZ(0,"li"),g._uU(1),g.qZA()),2&n){const t=e.$implicit;g.xp6(1),g.Oqu(t)}}function pG(n,e){if(1&n){const t=g.EpF();g.TgZ(0,"button",23),g.NdJ("click",function(){g.CHM(t);const i=g.oxw();return g.KtG(i.saveUsername())}),g._uU(1,"Salva"),g.qZA()}}let gG=(()=>{class n{constructor(t,r){this.authService=t,this.router=r,this.username="",this.isLogged=!1,this.logoutFromGoogle=GV,this.editable=!1,rn.onAuthStateChanged(i=>{i?this.retrieveData():this.username="Stranger!"})}ngOnInit(){this.authService.user$.subscribe(t=>{t?(this.isLogged=!0,this.retrieveData()):this.isLogged=!1})}editUsername(){this.editable=!0}saveUsername(){var t=this;return F(function*(){if(rn.currentUser){const i=Ur(Br,"users",rn.currentUser.uid);yield dN(i,{username:t.username},{merge:!0}),t.editable=!1}else alert("No user uid found")})()}navigate(){this.router.navigate(["/auth"])}retrieveData(){var t=this;return F(function*(){if(rn.currentUser)try{const i=Ur(Br,"users",rn.currentUser.uid),a=yield es(i);t.username=a.get("username")||"Stranger!",t.clan=a.get("clan")||"No clan!",t.exp=a.get("exp")||"No exp",t.level=a.get("level")||"No level",t.percentage=a.get("percentage")||"No percentage",t.email=a.get("email")||"Weird no Email",t.solved_exercises=a.get("solved_exercises")||"No exercises solved"}catch(r){console.error("Error retrieving user data:",r)}else alert("No user uid found")})()}deleteUser(){return F(function*(){const t=rn.currentUser;if(t){const i=Ur(Br,"users",t.uid);if((yield es(i)).exists())try{yield FV(i),yield GV(),yield t.delete()}catch(c){c.details&&console.error("Error details:",c.details)}}else console.warn("No authenticated user found")})()}static#e=this.\u0275fac=function(r){return new(r||n)(g.Y36(Nu),g.Y36(Qr))};static#t=this.\u0275cmp=g.Xpm({type:n,selectors:[["app-profile"]],decls:55,vars:15,consts:[[1,"section","reduced-padding"],[1,"container"],[1,"title"],[1,"buttons","are-centered"],["class","button is-danger",3,"click",4,"ngIf"],["class","button is-info",3,"click",4,"ngIf"],["class","button is-primary",3,"click",4,"ngIf"],[1,"section"],[1,"box"],[1,"title","is-4"],[1,"field"],[1,"label"],[1,"control"],["type","text","placeholder","Nome utente",1,"input",3,"ngModel","readonly","ngModelChange"],["class","button is-small",3,"click",4,"ngIf"],["type","email","placeholder","Email","readonly","",1,"input",3,"value"],["type","text","placeholder","Nome Clan","readonly","",1,"input",3,"value"],["type","text","placeholder","Livello","readonly","",1,"input",3,"value"],["type","text","placeholder","exp","readonly","",1,"input",3,"value"],["max","100",1,"progress","is-primary",3,"value"],[4,"ngFor","ngForOf"],[1,"button","is-danger",3,"click"],[1,"button","is-info",3,"click"],[1,"button","is-primary",3,"click"],[1,"button","is-small",3,"click"]],template:function(r,i){1&r&&(g._UZ(0,"app-navbar"),g.TgZ(1,"section",0)(2,"div",1)(3,"h1",2),g._uU(4),g.qZA(),g.TgZ(5,"div",3),g.YNc(6,cG,2,0,"button",4),g.YNc(7,lG,2,0,"button",5),g.YNc(8,dG,2,0,"button",6),g.qZA()()(),g.TgZ(9,"section",0)(10,"div",1)(11,"section",7)(12,"div",1)(13,"div",8)(14,"h1",9),g._uU(15,"User Profile"),g.qZA(),g.TgZ(16,"div",10)(17,"label",11),g._uU(18,"Username"),g.qZA(),g.TgZ(19,"div",12)(20,"input",13),g.NdJ("ngModelChange",function(c){return i.username=c}),g.qZA(),g.YNc(21,hG,2,0,"button",14),g.qZA()(),g.TgZ(22,"div",10)(23,"label",11),g._uU(24,"Email"),g.qZA(),g.TgZ(25,"div",12),g._UZ(26,"input",15),g.qZA()(),g.TgZ(27,"div",10)(28,"label",11),g._uU(29,"Clan"),g.qZA(),g.TgZ(30,"div",12),g._UZ(31,"input",16),g.qZA()(),g.TgZ(32,"div",10)(33,"label",11),g._uU(34,"Level"),g.qZA(),g.TgZ(35,"div",12),g._UZ(36,"input",17),g.qZA()(),g.TgZ(37,"div",10)(38,"label",11),g._uU(39,"Experience Points (exp)"),g.qZA(),g.TgZ(40,"div",12),g._UZ(41,"input",18),g.qZA()(),g.TgZ(42,"div",10)(43,"label",11),g._uU(44,"Percentage of completion"),g.qZA(),g.TgZ(45,"progress",19),g._uU(46),g.qZA()(),g.TgZ(47,"div",10)(48,"label",11),g._uU(49,"Solved Exercises"),g.qZA(),g.TgZ(50,"ul"),g.YNc(51,fG,2,1,"li",20),g.qZA()(),g.TgZ(52,"div",10)(53,"div",12),g.YNc(54,pG,2,0,"button",6),g.qZA()()()()()()()),2&r&&(g.xp6(4),g.hij(" Hello, ",i.username," "),g.xp6(2),g.Q6J("ngIf","Stranger!"!==i.username),g.xp6(1),g.Q6J("ngIf","Stranger!"!==i.username),g.xp6(1),g.Q6J("ngIf","Stranger!"===i.username),g.xp6(12),g.Q6J("ngModel",i.username)("readonly",!i.editable),g.xp6(1),g.Q6J("ngIf",!i.editable),g.xp6(5),g.s9C("value",i.email),g.xp6(5),g.s9C("value",i.clan),g.xp6(5),g.s9C("value",i.level),g.xp6(5),g.s9C("value",i.exp),g.xp6(4),g.s9C("value",i.percentage),g.xp6(1),g.hij("",i.percentage,"%"),g.xp6(5),g.Q6J("ngForOf",i.solved_exercises),g.xp6(3),g.Q6J("ngIf","Stranger!"!==i.username))},dependencies:[H.sg,H.O5,dr.Fj,dr.JJ,dr.On,Am],styles:[".reduced-padding[_ngcontent-%COMP%]{padding:20px 0!important}"]})}return n})();function mG(n,e){if(1&n&&(g.TgZ(0,"div",4)(1,"figure",5),g._UZ(2,"img",6),g.qZA(),g.TgZ(3,"p"),g._uU(4),g.qZA()()),2&n){const t=e.$implicit;g.xp6(1),g.ekj("grayed-out",!t.unlocked),g.xp6(1),g.Q6J("src",t.iconURL,g.LSH)("alt","Icona Trofeo "+t.id),g.xp6(2),g.Oqu(t.description)}}let N2=(()=>{class n{constructor(t,r){this.trophyService=t,this.authService=r,this.trophies=this.trophyService.trophies}ngOnInit(){this.authService.user$.subscribe(t=>{if(t){const r=this.authService.getUserUid();this.trophyService.updateTrophiesForUser(r)}})}static#e=this.\u0275fac=function(r){return new(r||n)(g.Y36(d2),g.Y36(Nu))};static#t=this.\u0275cmp=g.Xpm({type:n,selectors:[["app-trophies-page"]],decls:4,vars:1,consts:[[1,"section"],[1,"container"],[1,"columns","is-multiline"],["class","column is-3",4,"ngFor","ngForOf"],[1,"column","is-3"],[1,"image","is-128x128"],[3,"src","alt"]],template:function(r,i){1&r&&(g.TgZ(0,"section",0)(1,"div",1)(2,"div",2),g.YNc(3,mG,5,5,"div",3),g.qZA()()()),2&r&&(g.xp6(3),g.Q6J("ngForOf",i.trophies))},dependencies:[H.sg],styles:[".grayed-out[_ngcontent-%COMP%]{filter:grayscale(100%);opacity:.6}"]})}return n})();function _G(n,e){if(1&n){const t=g.EpF();g.TgZ(0,"div",14),g.NdJ("click",function(){const a=g.CHM(t).index,c=g.oxw();return g.KtG(c.navigateToExercise(a))}),g._uU(1),g.qZA()}if(2&n){const t=e.$implicit;g.xp6(1),g.hij(" ",t.name," ")}}let yG=(()=>{class n{navigateToExercise(t){0===t&&this.router.navigate(["/exercises/1-hello-security"])}getStudentCount(){return F(function*(){if(!rn.currentUser)return console.warn("Utente non autenticato"),0;try{const r=Ur(Br,"metadata","student_count");return(yield es(r)).get("count")}catch(r){return console.error("Errore durante la lettura del conto studenti:",r),0}})()}getUserProgression(){return F(function*(){const t=rn.currentUser;if(!t)return console.warn("Utente non autenticato"),0;try{const r=Ur(Br,"users",t.uid);return(yield es(r)).get("percentage")}catch(r){return console.error("Errore durante la lettura della percentuale:",r),0}})()}getUserExercises(){return F(function*(){const t=rn.currentUser;if(!t)return console.warn("Utente non autenticato"),0;try{const r=Ur(Br,"users",t.uid);return(yield es(r)).get("exercises_solved")}catch(r){return console.error("Errore durante la lettura della percentuale:",r),0}})()}getUserName(){return F(function*(){const t=rn.currentUser;if(!t)return console.warn("Utente non autenticato"),"";try{const r=Ur(Br,"users",t.uid);return(yield es(r)).get("username")}catch(r){return console.error("Errore durante la lettura della percentuale:",r),""}})()}createBoxes(){let t=[];for(let r=0;r<20;r++)t.push({name:`Box ${r+1}`});return t}constructor(t,r){this.router=t,this.autho=r,this.boxes=[{name:"Hello Security!"},{name:"Exercise 2"},{name:"Exercise 3"},{name:"Exercise 4"},{name:"Exercise 5"},{name:"Exercise 6"},{name:"Exercise 7"},{name:"Exercise 8"},{name:"Exercise 9"},{name:"Exercise 10"},{name:"Exercise 11"},{name:"Exercise 2"},{name:"Exercise 3"},{name:"Exercise 4"},{name:"Exercise 5"},{name:"Exercise 6"},{name:"Exercise 7"},{name:"Exercise 8"},{name:"Exercise 9"},{name:"Exercise 10"}],rn.onAuthStateChanged(i=>{i?(console.log("user auth"),this.getStudentCount().then(a=>{this.studentsCount=a}).catch(a=>{console.error("Errore durante la lettura del conto studenti:",a)}),this.getUserProgression().then(a=>{this.progressPercentage=a}),this.getUserExercises().then(a=>{this.exercisesCompleted=a}),this.getUserName().then(a=>{this.userName=a}).catch(a=>{console.error("Errore durante la lettura del conto studenti:",a)})):this.navigate()})}ngOnInit(){}navigate(){this.router.navigate(["/auth"])}static#e=this.\u0275fac=function(r){return new(r||n)(g.Y36(Qr),g.Y36(Nu))};static#t=this.\u0275cmp=g.Xpm({type:n,selectors:[["app-exercises"]],decls:30,vars:6,consts:[[1,"section"],[1,"level"],[1,"level-left"],[1,"title","java-classname"],[1,"subtitle"],[1,"level-right"],[1,"box"],[1,"block"],[1,"columns"],[1,"column","is-two-quarters"],[1,"title"],[1,"box-grid"],["class","box-item",3,"click",4,"ngFor","ngForOf"],[1,"column"],[1,"box-item",3,"click"]],template:function(r,i){1&r&&(g._UZ(0,"app-navbar"),g.TgZ(1,"section",0)(2,"div",1)(3,"div",2)(4,"h1",3),g._uU(5,"Cybersecurity"),g.qZA(),g.TgZ(6,"h3",4),g._uU(7),g.qZA()(),g._UZ(8,"div",5),g.qZA(),g.TgZ(9,"div",6)(10,"p"),g._uU(11),g.qZA(),g._UZ(12,"div",7),g.qZA(),g.TgZ(13,"div",8)(14,"div",9)(15,"div",6)(16,"h2",10),g._uU(17,"Exercises"),g.qZA(),g.TgZ(18,"p"),g._uU(19),g.qZA(),g.TgZ(20,"p"),g._uU(21),g.qZA(),g._UZ(22,"br"),g.TgZ(23,"div",11),g.YNc(24,_G,2,1,"div",12),g.qZA()()(),g.TgZ(25,"div",13)(26,"div",6)(27,"h2",10),g._uU(28),g.qZA(),g._UZ(29,"app-trophies-page"),g.qZA()()()()),2&r&&(g.xp6(7),g.hij("students: ",i.studentsCount," "),g.xp6(4),g.hij("You're ",i.progressPercentage,"% through the Cybersecurity track. Keep up the good work! \u{1f680}"),g.xp6(8),g.hij("Avg. exercises completed per week: ",i.exercisesCompleted,""),g.xp6(2),g.hij("Exercises completed: ",i.exercisesCompleted,""),g.xp6(3),g.Q6J("ngForOf",i.boxes),g.xp6(4),g.hij("",i.userName,"'s Trophies"))},dependencies:[H.sg,Am,N2],styles:[".java-classname[_ngcontent-%COMP%]{margin-right:10px}.box-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(5,1fr);gap:10px}.box-item[_ngcontent-%COMP%]{background-color:#f5f5f5;padding:5px;cursor:pointer;border-radius:10%;display:flex;align-items:center;justify-content:center;height:50px;width:100px}.box-item[_ngcontent-%COMP%]:first-child{background-color:#00d1b2;justify-content:center}"]})}return n})(),vG=(()=>{class n{constructor(t){this.http=t,this.helloSecurityInstructions="",this.defaultCode="",this.languageId="48",this.idTrophy=1,this.editorOptions={theme:"vs-dark",language:"c"}}ngOnInit(){this.http.get("assets/exercises/1/helloSecurityInstructions.md",{responseType:"text"}).subscribe(t=>{this.helloSecurityInstructions=t}),this.http.get("assets/exercises/1/hello-securityCode.c",{responseType:"text"}).subscribe(t=>{this.defaultCode=t})}static#e=this.\u0275fac=function(r){return new(r||n)(g.Y36($I))};static#t=this.\u0275cmp=g.Xpm({type:n,selectors:[["app-hello-security"]],decls:1,vars:5,consts:[[3,"instructions","code","languageId","editorOptions","idTrophy"]],template:function(r,i){1&r&&g._UZ(0,"app-code-editor",0),2&r&&g.Q6J("instructions",i.helloSecurityInstructions)("code",i.defaultCode)("languageId",i.languageId)("editorOptions",i.editorOptions)("idTrophy",i.idTrophy)},dependencies:[O2],styles:[".columns.is-fullheight[_ngcontent-%COMP%]{min-height:100vh}.istruzioni[_ngcontent-%COMP%]{top:0;width:100%;z-index:100;background-color:#fff;overflow-y:auto;max-height:100vh}ngx-monaco-editor[_ngcontent-%COMP%]{height:80vh;width:100%}@media only screen and (max-width: 768px){.columns[_ngcontent-%COMP%]{flex-direction:column}}"]})}return n})();function EG(n,e){if(1&n&&(g.TgZ(0,"h1",2),g._uU(1),g.qZA()),2&n){const t=g.oxw();g.xp6(1),g.hij("",t.userName,"'s Trophies cabinet")}}function IG(n,e){1&n&&(g.TgZ(0,"h1",2),g._uU(1,"Stranger's Trophies cabinet"),g.qZA())}let wG=(()=>{class n{constructor(t){this.autho=t,rn.onAuthStateChanged(r=>{r&&this.getUserName().then(i=>{this.userName=i}).catch(i=>{console.error("Errore durante la lettura del nome studente",i)})})}getUserName(){return F(function*(){const t=rn.currentUser;if(!t)return console.warn("Utente non autenticato"),"";try{const r=Ur(Br,"users",t.uid);return(yield es(r)).get("username")}catch(r){return console.error("Errore durante la lettura della percentuale:",r),""}})()}ngOnInit(){}static#e=this.\u0275fac=function(r){return new(r||n)(g.Y36(Nu))};static#t=this.\u0275cmp=g.Xpm({type:n,selectors:[["app-trophies"]],decls:5,vars:2,consts:[["class","is-size-2 has-text-centered",4,"ngIf","ngIfElse"],["strangerTitle",""],[1,"is-size-2","has-text-centered"]],template:function(r,i){if(1&r&&(g._UZ(0,"app-navbar"),g.YNc(1,EG,2,1,"h1",0),g.YNc(2,IG,2,0,"ng-template",null,1,g.W1O),g._UZ(4,"app-trophies-page")),2&r){const a=g.MAs(3);g.xp6(1),g.Q6J("ngIf",i.userName)("ngIfElse",a)}},dependencies:[H.O5,Am,N2]})}return n})();const bG=[{path:"offline",component:k(8653).J},{path:"",component:G3},{path:"auth",component:H3},{path:"code",component:O2},{path:"user",component:gG},{path:"trophies",component:wG},{path:"exercises",component:yG},{path:"exercises/1-hello-security",component:vG}];let CG=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=g.oAB({type:n});static#n=this.\u0275inj=g.cJS({imports:[d_.forRoot(bG,{useHash:!0}),d_]})}return n})();const ka=Object.create(null);ka.open="0",ka.close="1",ka.ping="2",ka.pong="3",ka.message="4",ka.upgrade="5",ka.noop="6";const GD=Object.create(null);Object.keys(ka).forEach(n=>{GD[ka[n]]=n});const MN={type:"error",data:"parser error"},k2="function"==typeof Blob||typeof Blob<"u"&&"[object BlobConstructor]"===Object.prototype.toString.call(Blob),F2="function"==typeof ArrayBuffer,L2=n=>"function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(n):n&&n.buffer instanceof ArrayBuffer,ON=({type:n,data:e},t,r)=>k2&&e instanceof Blob?t?r(e):V2(e,r):F2&&(e instanceof ArrayBuffer||L2(e))?t?r(e):V2(new Blob([e]),r):r(ka[n]+(e||"")),V2=(n,e)=>{const t=new FileReader;return t.onload=function(){const r=t.result.split(",")[1];e("b"+(r||""))},t.readAsDataURL(n)};function U2(n){return n instanceof Uint8Array?n:n instanceof ArrayBuffer?new Uint8Array(n):new Uint8Array(n.buffer,n.byteOffset,n.byteLength)}let NN;const qI=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let n=0;n<64;n++)qI["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charCodeAt(n)]=n;const SG="function"==typeof ArrayBuffer,kN=(n,e)=>{if("string"!=typeof n)return{type:"message",data:B2(n,e)};const t=n.charAt(0);return"b"===t?{type:"message",data:RG(n.substring(1),e)}:GD[t]?n.length>1?{type:GD[t],data:n.substring(1)}:{type:GD[t]}:MN},RG=(n,e)=>{if(SG){const t=(n=>{let r,a,c,h,p,e=.75*n.length,t=n.length,i=0;"="===n[n.length-1]&&(e--,"="===n[n.length-2]&&e--);const y=new ArrayBuffer(e),I=new Uint8Array(y);for(r=0;r<t;r+=4)a=qI[n.charCodeAt(r)],c=qI[n.charCodeAt(r+1)],h=qI[n.charCodeAt(r+2)],p=qI[n.charCodeAt(r+3)],I[i++]=a<<2|c>>4,I[i++]=(15&c)<<4|h>>2,I[i++]=(3&h)<<6|63&p;return y})(n);return B2(t,e)}return{base64:!0,data:n}},B2=(n,e)=>"blob"===e?n instanceof Blob?n:new Blob([n]):n instanceof ArrayBuffer?n:n.buffer,j2=String.fromCharCode(30);let FN;function zD(n){return n.reduce((e,t)=>e+t.length,0)}function qD(n,e){if(n[0].length===e)return n.shift();const t=new Uint8Array(e);let r=0;for(let i=0;i<e;i++)t[i]=n[0][r++],r===n[0].length&&(n.shift(),r=0);return n.length&&r<n[0].length&&(n[0]=n[0].slice(r)),t}function hr(n){if(n)return function NG(n){for(var e in hr.prototype)n[e]=hr.prototype[e];return n}(n)}hr.prototype.on=hr.prototype.addEventListener=function(n,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+n]=this._callbacks["$"+n]||[]).push(e),this},hr.prototype.once=function(n,e){function t(){this.off(n,t),e.apply(this,arguments)}return t.fn=e,this.on(n,t),this},hr.prototype.off=hr.prototype.removeListener=hr.prototype.removeAllListeners=hr.prototype.removeEventListener=function(n,e){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var t=this._callbacks["$"+n];if(!t)return this;if(1==arguments.length)return delete this._callbacks["$"+n],this;for(var r,i=0;i<t.length;i++)if((r=t[i])===e||r.fn===e){t.splice(i,1);break}return 0===t.length&&delete this._callbacks["$"+n],this},hr.prototype.emit=function(n){this._callbacks=this._callbacks||{};for(var e=new Array(arguments.length-1),t=this._callbacks["$"+n],r=1;r<arguments.length;r++)e[r-1]=arguments[r];if(t){r=0;for(var i=(t=t.slice(0)).length;r<i;++r)t[r].apply(this,e)}return this},hr.prototype.emitReserved=hr.prototype.emit,hr.prototype.listeners=function(n){return this._callbacks=this._callbacks||{},this._callbacks["$"+n]||[]},hr.prototype.hasListeners=function(n){return!!this.listeners(n).length};const to=typeof self<"u"?self:typeof window<"u"?window:Function("return this")();function H2(n,...e){return e.reduce((t,r)=>(n.hasOwnProperty(r)&&(t[r]=n[r]),t),{})}const kG=to.setTimeout,FG=to.clearTimeout;function WD(n,e){e.useNativeTimers?(n.setTimeoutFn=kG.bind(to),n.clearTimeoutFn=FG.bind(to)):(n.setTimeoutFn=to.setTimeout.bind(to),n.clearTimeoutFn=to.clearTimeout.bind(to))}function VG(n){return"string"==typeof n?function UG(n){let e=0,t=0;for(let r=0,i=n.length;r<i;r++)e=n.charCodeAt(r),e<128?t+=1:e<2048?t+=2:e<55296||e>=57344?t+=3:(r++,t+=4);return t}(n):Math.ceil(1.33*(n.byteLength||n.size))}class $G extends Error{constructor(e,t,r){super(e),this.description=t,this.context=r,this.type="TransportError"}}class LN extends hr{constructor(e){super(),this.writable=!1,WD(this,e),this.opts=e,this.query=e.query,this.socket=e.socket}onError(e,t,r){return super.emitReserved("error",new $G(e,t,r)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return("opening"===this.readyState||"open"===this.readyState)&&(this.doClose(),this.onClose()),this}send(e){"open"===this.readyState&&this.write(e)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(e){const t=kN(e,this.socket.binaryType);this.onPacket(t)}onPacket(e){super.emitReserved("packet",e)}onClose(e){this.readyState="closed",super.emitReserved("close",e)}pause(e){}createUri(e,t={}){return e+"://"+this._hostname()+this._port()+this.opts.path+this._query(t)}_hostname(){const e=this.opts.hostname;return-1===e.indexOf(":")?e:"["+e+"]"}_port(){return this.opts.port&&(this.opts.secure&&+(443!==this.opts.port)||!this.opts.secure&&80!==Number(this.opts.port))?":"+this.opts.port:""}_query(e){const t=function BG(n){let e="";for(let t in n)n.hasOwnProperty(t)&&(e.length&&(e+="&"),e+=encodeURIComponent(t)+"="+encodeURIComponent(n[t]));return e}(e);return t.length?"?"+t:""}}const G2="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),KD=64,z2={};let W2,q2=0,Cl=0;function K2(n){let e="";do{e=G2[n%KD]+e,n=Math.floor(n/KD)}while(n>0);return e}function Y2(){const n=K2(+new Date);return n!==W2?(q2=0,W2=n):n+"."+K2(q2++)}for(;Cl<KD;Cl++)z2[G2[Cl]]=Cl;let Q2=!1;try{Q2=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const HG=Q2;function Z2(n){const e=n.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!e||HG))return new XMLHttpRequest}catch{}if(!e)try{return new(to[["Active"].concat("Object").join("X")])("Microsoft.XMLHTTP")}catch{}}function GG(){}const zG=null!=new Z2({xdomain:!1}).responseType;let YD=(()=>{class n extends hr{constructor(t,r){super(),WD(this,r),this.opts=r,this.method=r.method||"GET",this.uri=t,this.data=void 0!==r.data?r.data:null,this.create()}create(){var t;const r=H2(this.opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");r.xdomain=!!this.opts.xd;const i=this.xhr=new Z2(r);try{i.open(this.method,this.uri,!0);try{if(this.opts.extraHeaders){i.setDisableHeaderCheck&&i.setDisableHeaderCheck(!0);for(let a in this.opts.extraHeaders)this.opts.extraHeaders.hasOwnProperty(a)&&i.setRequestHeader(a,this.opts.extraHeaders[a])}}catch{}if("POST"===this.method)try{i.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{i.setRequestHeader("Accept","*/*")}catch{}null===(t=this.opts.cookieJar)||void 0===t||t.addCookies(i),"withCredentials"in i&&(i.withCredentials=this.opts.withCredentials),this.opts.requestTimeout&&(i.timeout=this.opts.requestTimeout),i.onreadystatechange=()=>{var a;3===i.readyState&&(null===(a=this.opts.cookieJar)||void 0===a||a.parseCookies(i)),4===i.readyState&&(200===i.status||1223===i.status?this.onLoad():this.setTimeoutFn(()=>{this.onError("number"==typeof i.status?i.status:0)},0))},i.send(this.data)}catch(a){return void this.setTimeoutFn(()=>{this.onError(a)},0)}typeof document<"u"&&(this.index=n.requestsCount++,n.requests[this.index]=this)}onError(t){this.emitReserved("error",t,this.xhr),this.cleanup(!0)}cleanup(t){if(!(typeof this.xhr>"u"||null===this.xhr)){if(this.xhr.onreadystatechange=GG,t)try{this.xhr.abort()}catch{}typeof document<"u"&&delete n.requests[this.index],this.xhr=null}}onLoad(){const t=this.xhr.responseText;null!==t&&(this.emitReserved("data",t),this.emitReserved("success"),this.cleanup())}abort(){this.cleanup()}}return n.requestsCount=0,n.requests={},n})();function J2(){for(let n in YD.requests)YD.requests.hasOwnProperty(n)&&YD.requests[n].abort()}typeof document<"u"&&("function"==typeof attachEvent?attachEvent("onunload",J2):"function"==typeof addEventListener&&addEventListener("onpagehide"in to?"pagehide":"unload",J2,!1));const VN="function"==typeof Promise&&"function"==typeof Promise.resolve?e=>Promise.resolve().then(e):(e,t)=>t(e,0),QD=to.WebSocket||to.MozWebSocket,X2=typeof navigator<"u"&&"string"==typeof navigator.product&&"reactnative"===navigator.product.toLowerCase(),QG={websocket:class KG extends LN{constructor(e){super(e),this.supportsBinary=!e.forceBase64}get name(){return"websocket"}doOpen(){if(!this.check())return;const e=this.uri(),t=this.opts.protocols,r=X2?{}:H2(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(r.headers=this.opts.extraHeaders);try{this.ws=X2?new QD(e,t,r):t?new QD(e,t):new QD(e)}catch(i){return this.emitReserved("error",i)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=e=>this.onClose({description:"websocket connection closed",context:e}),this.ws.onmessage=e=>this.onData(e.data),this.ws.onerror=e=>this.onError("websocket error",e)}write(e){this.writable=!1;for(let t=0;t<e.length;t++){const i=t===e.length-1;ON(e[t],this.supportsBinary,a=>{try{this.ws.send(a)}catch{}i&&VN(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.close(),this.ws=null)}uri(){const e=this.opts.secure?"wss":"ws",t=this.query||{};return this.opts.timestampRequests&&(t[this.opts.timestampParam]=Y2()),this.supportsBinary||(t.b64=1),this.createUri(e,t)}check(){return!!QD}},webtransport:class YG extends LN{get name(){return"webtransport"}doOpen(){"function"==typeof WebTransport&&(this.transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name]),this.transport.closed.then(()=>{this.onClose()}).catch(e=>{this.onError("webtransport error",e)}),this.transport.ready.then(()=>{this.transport.createBidirectionalStream().then(e=>{const t=function OG(n,e){FN||(FN=new TextDecoder);const t=[];let r=0,i=-1,a=!1;return new TransformStream({transform(c,h){for(t.push(c);;){if(0===r){if(zD(t)<1)break;const p=qD(t,1);a=128==(128&p[0]),i=127&p[0],r=i<126?3:126===i?1:2}else if(1===r){if(zD(t)<2)break;const p=qD(t,2);i=new DataView(p.buffer,p.byteOffset,p.length).getUint16(0),r=3}else if(2===r){if(zD(t)<8)break;const p=qD(t,8),y=new DataView(p.buffer,p.byteOffset,p.length),I=y.getUint32(0);if(I>Math.pow(2,21)-1){h.enqueue(MN);break}i=I*Math.pow(2,32)+y.getUint32(4),r=3}else{if(zD(t)<i)break;const p=qD(t,i);h.enqueue(kN(a?p:FN.decode(p),e)),r=0}if(0===i||i>n){h.enqueue(MN);break}}}})}(Number.MAX_SAFE_INTEGER,this.socket.binaryType),r=e.readable.pipeThrough(t).getReader(),i=function MG(){return new TransformStream({transform(n,e){!function DG(n,e){k2&&n.data instanceof Blob?n.data.arrayBuffer().then(U2).then(e):F2&&(n.data instanceof ArrayBuffer||L2(n.data))?e(U2(n.data)):ON(n,!1,t=>{NN||(NN=new TextEncoder),e(NN.encode(t))})}(n,t=>{const r=t.length;let i;if(r<126)i=new Uint8Array(1),new DataView(i.buffer).setUint8(0,r);else if(r<65536){i=new Uint8Array(3);const a=new DataView(i.buffer);a.setUint8(0,126),a.setUint16(1,r)}else{i=new Uint8Array(9);const a=new DataView(i.buffer);a.setUint8(0,127),a.setBigUint64(1,BigInt(r))}n.data&&"string"!=typeof n.data&&(i[0]|=128),e.enqueue(i),e.enqueue(t)})}})}();i.readable.pipeTo(e.writable),this.writer=i.writable.getWriter();const a=()=>{r.read().then(({done:h,value:p})=>{h||(this.onPacket(p),a())}).catch(h=>{})};a();const c={type:"open"};this.query.sid&&(c.data=`{"sid":"${this.query.sid}"}`),this.writer.write(c).then(()=>this.onOpen())})}))}write(e){this.writable=!1;for(let t=0;t<e.length;t++){const i=t===e.length-1;this.writer.write(e[t]).then(()=>{i&&VN(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var e;null===(e=this.transport)||void 0===e||e.close()}},polling:class qG extends LN{constructor(e){if(super(e),this.polling=!1,typeof location<"u"){const r="https:"===location.protocol;let i=location.port;i||(i=r?"443":"80"),this.xd=typeof location<"u"&&e.hostname!==location.hostname||i!==e.port}this.supportsBinary=zG&&!(e&&e.forceBase64),this.opts.withCredentials&&(this.cookieJar=void 0)}get name(){return"polling"}doOpen(){this.poll()}pause(e){this.readyState="pausing";const t=()=>{this.readyState="paused",e()};if(this.polling||!this.writable){let r=0;this.polling&&(r++,this.once("pollComplete",function(){--r||t()})),this.writable||(r++,this.once("drain",function(){--r||t()}))}else t()}poll(){this.polling=!0,this.doPoll(),this.emitReserved("poll")}onData(e){((n,e)=>{const t=n.split(j2),r=[];for(let i=0;i<t.length;i++){const a=kN(t[i],e);if(r.push(a),"error"===a.type)break}return r})(e,this.socket.binaryType).forEach(r=>{if("opening"===this.readyState&&"open"===r.type&&this.onOpen(),"close"===r.type)return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(r)}),"closed"!==this.readyState&&(this.polling=!1,this.emitReserved("pollComplete"),"open"===this.readyState&&this.poll())}doClose(){const e=()=>{this.write([{type:"close"}])};"open"===this.readyState?e():this.once("open",e)}write(e){this.writable=!1,((n,e)=>{const t=n.length,r=new Array(t);let i=0;n.forEach((a,c)=>{ON(a,!1,h=>{r[c]=h,++i===t&&e(r.join(j2))})})})(e,t=>{this.doWrite(t,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const e=this.opts.secure?"https":"http",t=this.query||{};return!1!==this.opts.timestampRequests&&(t[this.opts.timestampParam]=Y2()),!this.supportsBinary&&!t.sid&&(t.b64=1),this.createUri(e,t)}request(e={}){return Object.assign(e,{xd:this.xd,cookieJar:this.cookieJar},this.opts),new YD(this.uri(),e)}doWrite(e,t){const r=this.request({method:"POST",data:e});r.on("success",t),r.on("error",(i,a)=>{this.onError("xhr post error",i,a)})}doPoll(){const e=this.request();e.on("data",this.onData.bind(this)),e.on("error",(t,r)=>{this.onError("xhr poll error",t,r)}),this.pollXhr=e}}},ZG=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,JG=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function BN(n){if(n.length>2e3)throw"URI too long";const e=n,t=n.indexOf("["),r=n.indexOf("]");-1!=t&&-1!=r&&(n=n.substring(0,t)+n.substring(t,r).replace(/:/g,";")+n.substring(r,n.length));let i=ZG.exec(n||""),a={},c=14;for(;c--;)a[JG[c]]=i[c]||"";return-1!=t&&-1!=r&&(a.source=e,a.host=a.host.substring(1,a.host.length-1).replace(/;/g,":"),a.authority=a.authority.replace("[","").replace("]","").replace(/;/g,":"),a.ipv6uri=!0),a.pathNames=function XG(n,e){const r=e.replace(/\/{2,9}/g,"/").split("/");return("/"==e.slice(0,1)||0===e.length)&&r.splice(0,1),"/"==e.slice(-1)&&r.splice(r.length-1,1),r}(0,a.path),a.queryKey=function e4(n,e){const t={};return e.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(r,i,a){i&&(t[i]=a)}),t}(0,a.query),a}let eU=(()=>{class n extends hr{constructor(t,r={}){super(),this.binaryType="arraybuffer",this.writeBuffer=[],t&&"object"==typeof t&&(r=t,t=null),t?(t=BN(t),r.hostname=t.host,r.secure="https"===t.protocol||"wss"===t.protocol,r.port=t.port,t.query&&(r.query=t.query)):r.host&&(r.hostname=BN(r.host).host),WD(this,r),this.secure=null!=r.secure?r.secure:typeof location<"u"&&"https:"===location.protocol,r.hostname&&!r.port&&(r.port=this.secure?"443":"80"),this.hostname=r.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=r.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=r.transports||["polling","websocket","webtransport"],this.writeBuffer=[],this.prevBufferLen=0,this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},r),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),"string"==typeof this.opts.query&&(this.opts.query=function jG(n){let e={},t=n.split("&");for(let r=0,i=t.length;r<i;r++){let a=t[r].split("=");e[decodeURIComponent(a[0])]=decodeURIComponent(a[1])}return e}(this.opts.query)),this.id=null,this.upgrades=null,this.pingInterval=null,this.pingTimeout=null,this.pingTimeoutTimer=null,"function"==typeof addEventListener&&(this.opts.closeOnBeforeunload&&(this.beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this.beforeunloadEventListener,!1)),"localhost"!==this.hostname&&(this.offlineEventListener=()=>{this.onClose("transport close",{description:"network connection lost"})},addEventListener("offline",this.offlineEventListener,!1))),this.open()}createTransport(t){const r=Object.assign({},this.opts.query);r.EIO=4,r.transport=t,this.id&&(r.sid=this.id);const i=Object.assign({},this.opts,{query:r,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[t]);return new QG[t](i)}open(){let t;if(this.opts.rememberUpgrade&&n.priorWebsocketSuccess&&-1!==this.transports.indexOf("websocket"))t="websocket";else{if(0===this.transports.length)return void this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);t=this.transports[0]}this.readyState="opening";try{t=this.createTransport(t)}catch{return this.transports.shift(),void this.open()}t.open(),this.setTransport(t)}setTransport(t){this.transport&&this.transport.removeAllListeners(),this.transport=t,t.on("drain",this.onDrain.bind(this)).on("packet",this.onPacket.bind(this)).on("error",this.onError.bind(this)).on("close",r=>this.onClose("transport close",r))}probe(t){let r=this.createTransport(t),i=!1;n.priorWebsocketSuccess=!1;const a=()=>{i||(r.send([{type:"ping",data:"probe"}]),r.once("packet",O=>{if(!i)if("pong"===O.type&&"probe"===O.data){if(this.upgrading=!0,this.emitReserved("upgrading",r),!r)return;n.priorWebsocketSuccess="websocket"===r.name,this.transport.pause(()=>{i||"closed"!==this.readyState&&(D(),this.setTransport(r),r.send([{type:"upgrade"}]),this.emitReserved("upgrade",r),r=null,this.upgrading=!1,this.flush())})}else{const L=new Error("probe error");L.transport=r.name,this.emitReserved("upgradeError",L)}}))};function c(){i||(i=!0,D(),r.close(),r=null)}const h=O=>{const L=new Error("probe error: "+O);L.transport=r.name,c(),this.emitReserved("upgradeError",L)};function p(){h("transport closed")}function y(){h("socket closed")}function I(O){r&&O.name!==r.name&&c()}const D=()=>{r.removeListener("open",a),r.removeListener("error",h),r.removeListener("close",p),this.off("close",y),this.off("upgrading",I)};r.once("open",a),r.once("error",h),r.once("close",p),this.once("close",y),this.once("upgrading",I),-1!==this.upgrades.indexOf("webtransport")&&"webtransport"!==t?this.setTimeoutFn(()=>{i||r.open()},200):r.open()}onOpen(){if(this.readyState="open",n.priorWebsocketSuccess="websocket"===this.transport.name,this.emitReserved("open"),this.flush(),"open"===this.readyState&&this.opts.upgrade){let t=0;const r=this.upgrades.length;for(;t<r;t++)this.probe(this.upgrades[t])}}onPacket(t){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState)switch(this.emitReserved("packet",t),this.emitReserved("heartbeat"),this.resetPingTimeout(),t.type){case"open":this.onHandshake(JSON.parse(t.data));break;case"ping":this.sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong");break;case"error":const r=new Error("server error");r.code=t.data,this.onError(r);break;case"message":this.emitReserved("data",t.data),this.emitReserved("message",t.data)}}onHandshake(t){this.emitReserved("handshake",t),this.id=t.sid,this.transport.query.sid=t.sid,this.upgrades=this.filterUpgrades(t.upgrades),this.pingInterval=t.pingInterval,this.pingTimeout=t.pingTimeout,this.maxPayload=t.maxPayload,this.onOpen(),"closed"!==this.readyState&&this.resetPingTimeout()}resetPingTimeout(){this.clearTimeoutFn(this.pingTimeoutTimer),this.pingTimeoutTimer=this.setTimeoutFn(()=>{this.onClose("ping timeout")},this.pingInterval+this.pingTimeout),this.opts.autoUnref&&this.pingTimeoutTimer.unref()}onDrain(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,0===this.writeBuffer.length?this.emitReserved("drain"):this.flush()}flush(){if("closed"!==this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const t=this.getWritablePackets();this.transport.send(t),this.prevBufferLen=t.length,this.emitReserved("flush")}}getWritablePackets(){if(!(this.maxPayload&&"polling"===this.transport.name&&this.writeBuffer.length>1))return this.writeBuffer;let r=1;for(let i=0;i<this.writeBuffer.length;i++){const a=this.writeBuffer[i].data;if(a&&(r+=VG(a)),i>0&&r>this.maxPayload)return this.writeBuffer.slice(0,i);r+=2}return this.writeBuffer}write(t,r,i){return this.sendPacket("message",t,r,i),this}send(t,r,i){return this.sendPacket("message",t,r,i),this}sendPacket(t,r,i,a){if("function"==typeof r&&(a=r,r=void 0),"function"==typeof i&&(a=i,i=null),"closing"===this.readyState||"closed"===this.readyState)return;(i=i||{}).compress=!1!==i.compress;const c={type:t,data:r,options:i};this.emitReserved("packetCreate",c),this.writeBuffer.push(c),a&&this.once("flush",a),this.flush()}close(){const t=()=>{this.onClose("forced close"),this.transport.close()},r=()=>{this.off("upgrade",r),this.off("upgradeError",r),t()},i=()=>{this.once("upgrade",r),this.once("upgradeError",r)};return("opening"===this.readyState||"open"===this.readyState)&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?i():t()}):this.upgrading?i():t()),this}onError(t){n.priorWebsocketSuccess=!1,this.emitReserved("error",t),this.onClose("transport error",t)}onClose(t,r){("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState)&&(this.clearTimeoutFn(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),"function"==typeof removeEventListener&&(removeEventListener("beforeunload",this.beforeunloadEventListener,!1),removeEventListener("offline",this.offlineEventListener,!1)),this.readyState="closed",this.id=null,this.emitReserved("close",t,r),this.writeBuffer=[],this.prevBufferLen=0)}filterUpgrades(t){const r=[];let i=0;const a=t.length;for(;i<a;i++)~this.transports.indexOf(t[i])&&r.push(t[i]);return r}}return n.protocol=4,n})();const n4="function"==typeof ArrayBuffer,r4=n=>"function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(n):n.buffer instanceof ArrayBuffer,tU=Object.prototype.toString,i4="function"==typeof Blob||typeof Blob<"u"&&"[object BlobConstructor]"===tU.call(Blob),s4="function"==typeof File||typeof File<"u"&&"[object FileConstructor]"===tU.call(File);function jN(n){return n4&&(n instanceof ArrayBuffer||r4(n))||i4&&n instanceof Blob||s4&&n instanceof File}function ZD(n,e){if(!n||"object"!=typeof n)return!1;if(Array.isArray(n)){for(let t=0,r=n.length;t<r;t++)if(ZD(n[t]))return!0;return!1}if(jN(n))return!0;if(n.toJSON&&"function"==typeof n.toJSON&&1===arguments.length)return ZD(n.toJSON(),!0);for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t)&&ZD(n[t]))return!0;return!1}function o4(n){const e=[],r=n;return r.data=$N(n.data,e),r.attachments=e.length,{packet:r,buffers:e}}function $N(n,e){if(!n)return n;if(jN(n)){const t={_placeholder:!0,num:e.length};return e.push(n),t}if(Array.isArray(n)){const t=new Array(n.length);for(let r=0;r<n.length;r++)t[r]=$N(n[r],e);return t}if("object"==typeof n&&!(n instanceof Date)){const t={};for(const r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=$N(n[r],e));return t}return n}function a4(n,e){return n.data=HN(n.data,e),delete n.attachments,n}function HN(n,e){if(!n)return n;if(n&&!0===n._placeholder){if("number"==typeof n.num&&n.num>=0&&n.num<e.length)return e[n.num];throw new Error("illegal attachments")}if(Array.isArray(n))for(let t=0;t<n.length;t++)n[t]=HN(n[t],e);else if("object"==typeof n)for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&(n[t]=HN(n[t],e));return n}const u4=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],c4=5;var Ut=function(n){return n[n.CONNECT=0]="CONNECT",n[n.DISCONNECT=1]="DISCONNECT",n[n.EVENT=2]="EVENT",n[n.ACK=3]="ACK",n[n.CONNECT_ERROR=4]="CONNECT_ERROR",n[n.BINARY_EVENT=5]="BINARY_EVENT",n[n.BINARY_ACK=6]="BINARY_ACK",n}(Ut||{});class l4{constructor(e){this.replacer=e}encode(e){return e.type!==Ut.EVENT&&e.type!==Ut.ACK||!ZD(e)?[this.encodeAsString(e)]:this.encodeAsBinary({type:e.type===Ut.EVENT?Ut.BINARY_EVENT:Ut.BINARY_ACK,nsp:e.nsp,data:e.data,id:e.id})}encodeAsString(e){let t=""+e.type;return(e.type===Ut.BINARY_EVENT||e.type===Ut.BINARY_ACK)&&(t+=e.attachments+"-"),e.nsp&&"/"!==e.nsp&&(t+=e.nsp+","),null!=e.id&&(t+=e.id),null!=e.data&&(t+=JSON.stringify(e.data,this.replacer)),t}encodeAsBinary(e){const t=o4(e),r=this.encodeAsString(t.packet),i=t.buffers;return i.unshift(r),i}}function nU(n){return"[object Object]"===Object.prototype.toString.call(n)}class GN extends hr{constructor(e){super(),this.reviver=e}add(e){let t;if("string"==typeof e){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");t=this.decodeString(e);const r=t.type===Ut.BINARY_EVENT;r||t.type===Ut.BINARY_ACK?(t.type=r?Ut.EVENT:Ut.ACK,this.reconstructor=new d4(t),0===t.attachments&&super.emitReserved("decoded",t)):super.emitReserved("decoded",t)}else{if(!jN(e)&&!e.base64)throw new Error("Unknown type: "+e);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");t=this.reconstructor.takeBinaryData(e),t&&(this.reconstructor=null,super.emitReserved("decoded",t))}}decodeString(e){let t=0;const r={type:Number(e.charAt(0))};if(void 0===Ut[r.type])throw new Error("unknown packet type "+r.type);if(r.type===Ut.BINARY_EVENT||r.type===Ut.BINARY_ACK){const a=t+1;for(;"-"!==e.charAt(++t)&&t!=e.length;);const c=e.substring(a,t);if(c!=Number(c)||"-"!==e.charAt(t))throw new Error("Illegal attachments");r.attachments=Number(c)}if("/"===e.charAt(t+1)){const a=t+1;for(;++t&&","!==e.charAt(t)&&t!==e.length;);r.nsp=e.substring(a,t)}else r.nsp="/";const i=e.charAt(t+1);if(""!==i&&Number(i)==i){const a=t+1;for(;++t;){const c=e.charAt(t);if(null==c||Number(c)!=c){--t;break}if(t===e.length)break}r.id=Number(e.substring(a,t+1))}if(e.charAt(++t)){const a=this.tryParse(e.substr(t));if(!GN.isPayloadValid(r.type,a))throw new Error("invalid payload");r.data=a}return r}tryParse(e){try{return JSON.parse(e,this.reviver)}catch{return!1}}static isPayloadValid(e,t){switch(e){case Ut.CONNECT:return nU(t);case Ut.DISCONNECT:return void 0===t;case Ut.CONNECT_ERROR:return"string"==typeof t||nU(t);case Ut.EVENT:case Ut.BINARY_EVENT:return Array.isArray(t)&&("number"==typeof t[0]||"string"==typeof t[0]&&-1===u4.indexOf(t[0]));case Ut.ACK:case Ut.BINARY_ACK:return Array.isArray(t)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class d4{constructor(e){this.packet=e,this.buffers=[],this.reconPack=e}takeBinaryData(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){const t=a4(this.reconPack,this.buffers);return this.finishedReconstruction(),t}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}function xo(n,e,t){return n.on(e,t),function(){n.off(e,t)}}const h4=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class rU extends hr{constructor(e,t,r){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=e,this.nsp=t,r&&r.auth&&(this.auth=r.auth),this._opts=Object.assign({},r),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const e=this.io;this.subs=[xo(e,"open",this.onopen.bind(this)),xo(e,"packet",this.onpacket.bind(this)),xo(e,"error",this.onerror.bind(this)),xo(e,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected||(this.subEvents(),this.io._reconnecting||this.io.open(),"open"===this.io._readyState&&this.onopen()),this}open(){return this.connect()}send(...e){return e.unshift("message"),this.emit.apply(this,e),this}emit(e,...t){if(h4.hasOwnProperty(e))throw new Error('"'+e.toString()+'" is a reserved event name');if(t.unshift(e),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(t),this;const r={type:Ut.EVENT,data:t,options:{}};if(r.options.compress=!1!==this.flags.compress,"function"==typeof t[t.length-1]){const c=this.ids++,h=t.pop();this._registerAckCallback(c,h),r.id=c}return this.flags.volatile&&(!(this.io.engine&&this.io.engine.transport&&this.io.engine.transport.writable)||!this.connected)||(this.connected?(this.notifyOutgoingListeners(r),this.packet(r)):this.sendBuffer.push(r)),this.flags={},this}_registerAckCallback(e,t){var r;const i=null!==(r=this.flags.timeout)&&void 0!==r?r:this._opts.ackTimeout;if(void 0===i)return void(this.acks[e]=t);const a=this.io.setTimeoutFn(()=>{delete this.acks[e];for(let c=0;c<this.sendBuffer.length;c++)this.sendBuffer[c].id===e&&this.sendBuffer.splice(c,1);t.call(this,new Error("operation has timed out"))},i);this.acks[e]=(...c)=>{this.io.clearTimeoutFn(a),t.apply(this,[null,...c])}}emitWithAck(e,...t){const r=void 0!==this.flags.timeout||void 0!==this._opts.ackTimeout;return new Promise((i,a)=>{t.push((c,h)=>r?c?a(c):i(h):i(c)),this.emit(e,...t)})}_addToQueue(e){let t;"function"==typeof e[e.length-1]&&(t=e.pop());const r={id:this._queueSeq++,tryCount:0,pending:!1,args:e,flags:Object.assign({fromQueue:!0},this.flags)};e.push((i,...a)=>r!==this._queue[0]?void 0:(null!==i?r.tryCount>this._opts.retries&&(this._queue.shift(),t&&t(i)):(this._queue.shift(),t&&t(null,...a)),r.pending=!1,this._drainQueue())),this._queue.push(r),this._drainQueue()}_drainQueue(e=!1){if(!this.connected||0===this._queue.length)return;const t=this._queue[0];t.pending&&!e||(t.pending=!0,t.tryCount++,this.flags=t.flags,this.emit.apply(this,t.args))}packet(e){e.nsp=this.nsp,this.io._packet(e)}onopen(){"function"==typeof this.auth?this.auth(e=>{this._sendConnectPacket(e)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(e){this.packet({type:Ut.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},e):e})}onerror(e){this.connected||this.emitReserved("connect_error",e)}onclose(e,t){this.connected=!1,delete this.id,this.emitReserved("disconnect",e,t)}onpacket(e){if(e.nsp===this.nsp)switch(e.type){case Ut.CONNECT:e.data&&e.data.sid?this.onconnect(e.data.sid,e.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case Ut.EVENT:case Ut.BINARY_EVENT:this.onevent(e);break;case Ut.ACK:case Ut.BINARY_ACK:this.onack(e);break;case Ut.DISCONNECT:this.ondisconnect();break;case Ut.CONNECT_ERROR:this.destroy();const r=new Error(e.data.message);r.data=e.data.data,this.emitReserved("connect_error",r)}}onevent(e){const t=e.data||[];null!=e.id&&t.push(this.ack(e.id)),this.connected?this.emitEvent(t):this.receiveBuffer.push(Object.freeze(t))}emitEvent(e){if(this._anyListeners&&this._anyListeners.length){const t=this._anyListeners.slice();for(const r of t)r.apply(this,e)}super.emit.apply(this,e),this._pid&&e.length&&"string"==typeof e[e.length-1]&&(this._lastOffset=e[e.length-1])}ack(e){const t=this;let r=!1;return function(...i){r||(r=!0,t.packet({type:Ut.ACK,id:e,data:i}))}}onack(e){const t=this.acks[e.id];"function"==typeof t&&(t.apply(this,e.data),delete this.acks[e.id])}onconnect(e,t){this.id=e,this.recovered=t&&this._pid===t,this._pid=t,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(e=>this.emitEvent(e)),this.receiveBuffer=[],this.sendBuffer.forEach(e=>{this.notifyOutgoingListeners(e),this.packet(e)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(e=>e()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:Ut.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(e){return this.flags.compress=e,this}get volatile(){return this.flags.volatile=!0,this}timeout(e){return this.flags.timeout=e,this}onAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(e),this}prependAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(e),this}offAny(e){if(!this._anyListeners)return this;if(e){const t=this._anyListeners;for(let r=0;r<t.length;r++)if(e===t[r])return t.splice(r,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(e),this}prependAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(e),this}offAnyOutgoing(e){if(!this._anyOutgoingListeners)return this;if(e){const t=this._anyOutgoingListeners;for(let r=0;r<t.length;r++)if(e===t[r])return t.splice(r,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(e){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const t=this._anyOutgoingListeners.slice();for(const r of t)r.apply(this,e.data)}}}function xm(n){this.ms=(n=n||{}).min||100,this.max=n.max||1e4,this.factor=n.factor||2,this.jitter=n.jitter>0&&n.jitter<=1?n.jitter:0,this.attempts=0}xm.prototype.duration=function(){var n=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var e=Math.random(),t=Math.floor(e*this.jitter*n);n=1&Math.floor(10*e)?n+t:n-t}return 0|Math.min(n,this.max)},xm.prototype.reset=function(){this.attempts=0},xm.prototype.setMin=function(n){this.ms=n},xm.prototype.setMax=function(n){this.max=n},xm.prototype.setJitter=function(n){this.jitter=n};class zN extends hr{constructor(e,t){var r;super(),this.nsps={},this.subs=[],e&&"object"==typeof e&&(t=e,e=void 0),(t=t||{}).path=t.path||"/socket.io",this.opts=t,WD(this,t),this.reconnection(!1!==t.reconnection),this.reconnectionAttempts(t.reconnectionAttempts||1/0),this.reconnectionDelay(t.reconnectionDelay||1e3),this.reconnectionDelayMax(t.reconnectionDelayMax||5e3),this.randomizationFactor(null!==(r=t.randomizationFactor)&&void 0!==r?r:.5),this.backoff=new xm({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(null==t.timeout?2e4:t.timeout),this._readyState="closed",this.uri=e;const i=t.parser||b;this.encoder=new i.Encoder,this.decoder=new i.Decoder,this._autoConnect=!1!==t.autoConnect,this._autoConnect&&this.open()}reconnection(e){return arguments.length?(this._reconnection=!!e,this):this._reconnection}reconnectionAttempts(e){return void 0===e?this._reconnectionAttempts:(this._reconnectionAttempts=e,this)}reconnectionDelay(e){var t;return void 0===e?this._reconnectionDelay:(this._reconnectionDelay=e,null===(t=this.backoff)||void 0===t||t.setMin(e),this)}randomizationFactor(e){var t;return void 0===e?this._randomizationFactor:(this._randomizationFactor=e,null===(t=this.backoff)||void 0===t||t.setJitter(e),this)}reconnectionDelayMax(e){var t;return void 0===e?this._reconnectionDelayMax:(this._reconnectionDelayMax=e,null===(t=this.backoff)||void 0===t||t.setMax(e),this)}timeout(e){return arguments.length?(this._timeout=e,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()}open(e){if(~this._readyState.indexOf("open"))return this;this.engine=new eU(this.uri,this.opts);const t=this.engine,r=this;this._readyState="opening",this.skipReconnect=!1;const i=xo(t,"open",function(){r.onopen(),e&&e()}),a=h=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",h),e?e(h):this.maybeReconnectOnOpen()},c=xo(t,"error",a);if(!1!==this._timeout){const p=this.setTimeoutFn(()=>{i(),a(new Error("timeout")),t.close()},this._timeout);this.opts.autoUnref&&p.unref(),this.subs.push(()=>{this.clearTimeoutFn(p)})}return this.subs.push(i),this.subs.push(c),this}connect(e){return this.open(e)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const e=this.engine;this.subs.push(xo(e,"ping",this.onping.bind(this)),xo(e,"data",this.ondata.bind(this)),xo(e,"error",this.onerror.bind(this)),xo(e,"close",this.onclose.bind(this)),xo(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(e){try{this.decoder.add(e)}catch(t){this.onclose("parse error",t)}}ondecoded(e){VN(()=>{this.emitReserved("packet",e)},this.setTimeoutFn)}onerror(e){this.emitReserved("error",e)}socket(e,t){let r=this.nsps[e];return r?this._autoConnect&&!r.active&&r.connect():(r=new rU(this,e,t),this.nsps[e]=r),r}_destroy(e){const t=Object.keys(this.nsps);for(const r of t)if(this.nsps[r].active)return;this._close()}_packet(e){const t=this.encoder.encode(e);for(let r=0;r<t.length;r++)this.engine.write(t[r],e.options)}cleanup(){this.subs.forEach(e=>e()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close"),this.engine&&this.engine.close()}disconnect(){return this._close()}onclose(e,t){this.cleanup(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",e,t),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const e=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const t=this.backoff.duration();this._reconnecting=!0;const r=this.setTimeoutFn(()=>{e.skipReconnect||(this.emitReserved("reconnect_attempt",e.backoff.attempts),!e.skipReconnect&&e.open(i=>{i?(e._reconnecting=!1,e.reconnect(),this.emitReserved("reconnect_error",i)):e.onreconnect()}))},t);this.opts.autoUnref&&r.unref(),this.subs.push(()=>{this.clearTimeoutFn(r)})}}onreconnect(){const e=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",e)}}const WI={};function JD(n,e){"object"==typeof n&&(e=n,n=void 0);const t=function t4(n,e="",t){let r=n;t=t||typeof location<"u"&&location,null==n&&(n=t.protocol+"//"+t.host),"string"==typeof n&&("/"===n.charAt(0)&&(n="/"===n.charAt(1)?t.protocol+n:t.host+n),/^(https?|wss?):\/\//.test(n)||(n=typeof t<"u"?t.protocol+"//"+n:"https://"+n),r=BN(n)),r.port||(/^(http|ws)$/.test(r.protocol)?r.port="80":/^(http|ws)s$/.test(r.protocol)&&(r.port="443")),r.path=r.path||"/";const a=-1!==r.host.indexOf(":")?"["+r.host+"]":r.host;return r.id=r.protocol+"://"+a+":"+r.port+e,r.href=r.protocol+"://"+a+(t&&t.port===r.port?"":":"+r.port),r}(n,(e=e||{}).path||"/socket.io"),r=t.source,i=t.id;let p;return e.forceNew||e["force new connection"]||!1===e.multiplex||WI[i]&&t.path in WI[i].nsps?p=new zN(r,e):(WI[i]||(WI[i]=new zN(r,e)),p=WI[i]),t.query&&!e.query&&(e.query=t.queryKey),p.socket(t.path,e)}function f4(n,e){if(1&n&&(g.TgZ(0,"div",10)(1,"strong"),g._uU(2),g.qZA(),g._uU(3),g.qZA()),2&n){const t=e.$implicit;g.xp6(2),g.hij("",t.username,":"),g.xp6(1),g.hij(" ",t.message," ")}}function p4(n,e){if(1&n&&(g.TgZ(0,"li",14),g._uU(1),g.qZA()),2&n){const t=e.$implicit;g.xp6(1),g.hij(" ",t," ")}}function g4(n,e){if(1&n){const t=g.EpF();g.TgZ(0,"div",3)(1,"div",4)(2,"p",5)(3,"button",6),g.NdJ("click",function(){g.CHM(t);const i=g.oxw();return g.KtG(i.joinGlobalChat())}),g._uU(4," Join Global Chat "),g.qZA()()(),g.TgZ(5,"div",7)(6,"p",8)(7,"input",9),g.NdJ("ngModelChange",function(i){g.CHM(t);const a=g.oxw();return g.KtG(a.roomCode=i)}),g.qZA()(),g.TgZ(8,"p",5)(9,"button",10),g.NdJ("click",function(){g.CHM(t);const i=g.oxw();return g.KtG(i.joinNamedRoom())}),g._uU(10," Create/Join Room "),g.qZA()()(),g.TgZ(11,"div",11)(12,"h3",12),g._uU(13,"Available Rooms:"),g.qZA(),g.TgZ(14,"ul"),g.YNc(15,p4,2,1,"li",13),g.qZA()()()}if(2&n){const t=g.oxw();g.xp6(7),g.Q6J("ngModel",t.roomCode),g.xp6(2),g.Q6J("disabled",!t.roomCode.trim()),g.xp6(6),g.Q6J("ngForOf",t.activeRooms)}}function m4(n,e){if(1&n){const t=g.EpF();g.TgZ(0,"app-chat-room",15),g.NdJ("leave",function(){g.CHM(t);const i=g.oxw();return g.KtG(i.leaveNamedRoom())}),g.qZA()}if(2&n){const t=g.oxw();g.Q6J("room",t.roomCode)("username",t.username)}}function _4(n,e){if(1&n){const t=g.EpF();g.TgZ(0,"div",3),g.NdJ("click",function(){g.CHM(t);const i=g.oxw();return g.KtG(i.toggleChat())}),g._UZ(1,"i",4),g.qZA()}}function y4(n,e){if(1&n){const t=g.EpF();g.TgZ(0,"div"),g._UZ(1,"app-chat",5),g.TgZ(2,"button",6),g.NdJ("click",function(){g.CHM(t);const i=g.oxw();return g.KtG(i.toggleChat())}),g._UZ(3,"i",7),g.qZA()()}if(2&n){const t=g.oxw();g.xp6(1),g.Q6J("username",t.username)}}Object.assign(JD,{Manager:zN,Socket:rU,io:JD,connect:JD});let XD=(()=>{class n{constructor(t){this.http=t,this.baseUrl="http://localhost:3001",localStorage.getItem("chatRoom"),this.socket=JD("http://localhost:3001")}getGlobalMessages(){return this.http.get(`${this.baseUrl}/global-messages`)}sendMessage(t){this.socket.emit("sendMessage",t)}getMessages(){return new er.y(t=>{this.socket.on("message",r=>{t.next(r)})})}joinRoom(t,r){this.socket.emit("joinRoom",{room:t,username:r||"default"})}leaveRoom(t,r){this.socket.emit("leaveRoom",{room:t,username:r||"default"})}sendMessageToRoom(t,r,i){this.socket.emit("sendMessage",{room:t,message:r,username:i})}generateRoomCode(){return Math.random().toString(36).substring(2,9)}getActiveRooms(){return this.http.get("http://localhost:3000/active-rooms")}getActiveRoomsUpdates(){return new er.y(t=>{this.socket.on("activeRooms",r=>{t.next(r)})})}static#e=this.\u0275fac=function(r){return new(r||n)(g.LFG($I))};static#t=this.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),v4=(()=>{class n{constructor(t){this.chatService=t,this.room="",this.username="default",this.message="",this.messages=[],this.inRoom=!1,this.leave=new g.vpe}ngOnInit(){"Global Chat"===this.room&&this.fetchGlobalMessages(),this.chatService.getMessages().subscribe(t=>{t.room===this.room&&this.messages.push(t)})}fetchGlobalMessages(){this.chatService.getGlobalMessages().subscribe(t=>{this.messages=t.filter(r=>"Global Chat"===r.room)})}joinRoom(){this.chatService.joinRoom(this.room,this.username||"default"),this.inRoom=!0}leaveRoom(){console.log(`Leaving room: ${this.room}`),this.chatService.leaveRoom(this.room,this.username||"default"),this.inRoom=!1,this.leave.emit()}sendMessage(){null!=this.username&&this.chatService.sendMessageToRoom(this.room,this.message,this.username),this.message=""}generateRoomCode(){this.room=Math.random().toString(36).substring(2,9)}static#e=this.\u0275fac=function(r){return new(r||n)(g.Y36(XD))};static#t=this.\u0275cmp=g.Xpm({type:n,selectors:[["app-chat-room"]],inputs:{room:"room",username:"username"},outputs:{leave:"leave"},decls:13,vars:3,consts:[[1,"chat-room"],[1,"title","is-5","has-background-primary","has-text-white","p-3"],[1,"messages"],["class","message",4,"ngFor","ngForOf"],[1,"field","has-addons"],[1,"control","is-expanded"],["placeholder","Type a message",1,"input",3,"ngModel","ngModelChange"],[1,"control"],[1,"button","is-info",3,"click"],[1,"button","is-danger","mr-5",3,"click"],[1,"message"]],template:function(r,i){1&r&&(g.TgZ(0,"div",0)(1,"h3",1),g._uU(2),g.qZA(),g.TgZ(3,"div",2),g.YNc(4,f4,4,2,"div",3),g.qZA(),g.TgZ(5,"div",4)(6,"div",5)(7,"input",6),g.NdJ("ngModelChange",function(c){return i.message=c}),g.qZA()(),g.TgZ(8,"div",7)(9,"button",8),g.NdJ("click",function(){return i.sendMessage()}),g._uU(10,"Send"),g.qZA()()(),g.TgZ(11,"button",9),g.NdJ("click",function(){return i.leaveRoom()}),g._uU(12," Leave Room "),g.qZA()()),2&r&&(g.xp6(2),g.hij(" ",i.room," "),g.xp6(2),g.Q6J("ngForOf",i.messages),g.xp6(3),g.Q6J("ngModel",i.message))},dependencies:[H.sg,dr.Fj,dr.JJ,dr.On],styles:[".chat-room[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:space-between;height:80vh;width:30vw;background-color:#fff;border:1px solid #ddd;padding:.75rem;overflow:hidden;position:fixed;bottom:20px;right:20px;box-shadow:0 2px 10px #0000001a;z-index:1000}.messages[_ngcontent-%COMP%]{overflow-y:auto;flex-grow:1}.message[_ngcontent-%COMP%]{margin-bottom:.5rem;padding:.5rem;background-color:#f5f5f5;border-radius:4px}"]})}return n})(),E4=(()=>{class n{constructor(t){this.chatService=t,this.activeRooms=[],this.roomCode="",this.inRoom=!1,this.globalRoomId="Global Chat",this.username="default",this.globalMessages=[]}joinGlobalChat(){this.roomCode=this.globalRoomId,this.joinRoom(),this.fetchGlobalMessages()}fetchGlobalMessages(){this.roomCode===this.globalRoomId&&this.chatService.getGlobalMessages().subscribe(t=>{this.globalMessages=t})}joinNamedRoom(){this.roomCode.trim()&&this.joinRoom()}createRoom(){this.roomCode=this.chatService.generateRoomCode(),console.log(this.roomCode),this.joinRoom()}joinRoom(){null!=this.username&&(this.chatService.joinRoom(this.roomCode,this.username),this.inRoom=!0)}leaveNamedRoom(){null!=this.username&&(this.chatService.leaveRoom(this.roomCode,this.username),this.roomCode="",this.inRoom=!1)}ngOnInit(){console.log("Username in ChatComponent:",this.username),this.chatService.getActiveRoomsUpdates().subscribe(t=>{this.activeRooms=t}),this.fetchActiveRooms()}fetchActiveRooms(){this.chatService.getActiveRooms().subscribe(t=>{this.activeRooms=t})}static#e=this.\u0275fac=function(r){return new(r||n)(g.Y36(XD))};static#t=this.\u0275cmp=g.Xpm({type:n,selectors:[["app-chat"]],inputs:{username:"username"},decls:3,vars:2,consts:[[1,"chat-container"],["class","box",4,"ngIf"],[3,"room","username","leave",4,"ngIf"],[1,"box"],[1,"field"],[1,"control"],[1,"button","is-primary","is-fullwidth",3,"click"],[1,"field","has-addons"],[1,"control","is-expanded"],["type","text","placeholder","Enter room name",1,"input",3,"ngModel","ngModelChange"],[1,"button","is-info",3,"disabled","click"],[1,"active-rooms"],[1,"title","is-4"],["class","room-list-item",4,"ngFor","ngForOf"],[1,"room-list-item"],[3,"room","username","leave"]],template:function(r,i){1&r&&(g.TgZ(0,"div",0),g.YNc(1,g4,16,3,"div",1),g.YNc(2,m4,1,2,"app-chat-room",2),g.qZA()),2&r&&(g.xp6(1),g.Q6J("ngIf",!i.inRoom),g.xp6(1),g.Q6J("ngIf",i.inRoom))},dependencies:[H.sg,H.O5,dr.Fj,dr.JJ,dr.On,v4],styles:[".chat-container[_ngcontent-%COMP%]{position:fixed;right:20px;bottom:20px;width:300px;max-height:400px;border:1px solid #ddd;background-color:#fff;box-shadow:0 2px 10px #0003;z-index:1000;overflow:hidden}.chat-entry[_ngcontent-%COMP%]{padding:10px}.active-rooms[_ngcontent-%COMP%]{max-height:200px;overflow-y:auto}.room-list-item[_ngcontent-%COMP%]{margin-bottom:.5em}.button.is-fullwidth[_ngcontent-%COMP%]{margin-bottom:10px}"]})}return n})(),I4=(()=>{class n{constructor(){this.username="default",this.chatOpen=!1}toggleChat(){this.chatOpen=!this.chatOpen}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=g.Xpm({type:n,selectors:[["app-wrapper"]],inputs:{username:"username"},decls:3,vars:2,consts:[[1,"chat-wrapper"],["class","chat-icon",3,"click",4,"ngIf"],[4,"ngIf"],[1,"chat-icon",3,"click"],[1,"fa","fa-comments","custom"],[3,"username"],[1,"close-chat-btn",3,"click"],[1,"fa","fa-times-circle"]],template:function(r,i){1&r&&(g.TgZ(0,"div",0),g.YNc(1,_4,2,0,"div",1),g.YNc(2,y4,4,1,"div",2),g.qZA()),2&r&&(g.xp6(1),g.Q6J("ngIf",!i.chatOpen),g.xp6(1),g.Q6J("ngIf",i.chatOpen))},dependencies:[H.O5,E4],styles:[".chat-wrapper[_ngcontent-%COMP%]{position:fixed;bottom:20px;right:20px;z-index:1000}.chat-icon[_ngcontent-%COMP%]{width:50px;height:50px;background-color:#007bff;border-radius:50%;display:flex;justify-content:center;align-items:center;cursor:pointer;box-shadow:0 0 10px #00000080}.close-chat-btn[_ngcontent-%COMP%]{position:absolute;bottom:10px;right:0;background-color:transparent;border:none;cursor:pointer;font-size:24px;line-height:1;padding:10px;z-index:1010}.custom[_ngcontent-%COMP%]{color:#fff}"]})}return n})(),w4=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=g.oAB({type:n});static#n=this.\u0275inj=g.cJS({providers:[XD],imports:[H.ez,dr.u5,l2]})}return n})(),T4=(()=>{class n{constructor(t,r){this.authService=t,this.chatService=r,this.title="HackEd",this.sendNotification=zV,this.sendNotificationDelayed=S3,this.activeRooms=[],this.roomCode="",this.inRoom=!1,this.username="",rn.onAuthStateChanged(i=>{i?this.retrieveData():this.username="Stranger"})}ngOnInit(){this.registerServiceWorker(),this.authService.user$.subscribe(t=>{t&&this.requestNotificationPermission()}),this.chatService.getActiveRoomsUpdates().subscribe(t=>{this.activeRooms=t}),this.fetchActiveRooms()}delay(t){return F(function*(){return new Promise(r=>setTimeout(r,t))})()}requestNotificationPermission(){return F(function*(){setTimeout(F(function*(){yield function A3(){return _N.apply(this,arguments)}()}),2e3)})()}registerServiceWorker(){"serviceWorker"in navigator&&navigator.serviceWorker.register("/firebase-messaging-sw.js").then(t=>{console.log("Service Worker registered with scope:",t.scope)}).catch(t=>{console.error("Service Worker registration failed:",t)})}createRoom(){this.roomCode=this.chatService.generateRoomCode(),console.log(this.roomCode),this.joinRoom()}joinRoom(){this.chatService.joinRoom(this.roomCode,this.username),this.inRoom=!0}leaveRoom(){this.chatService.leaveRoom(this.roomCode,this.username),this.roomCode="",this.inRoom=!1}fetchActiveRooms(){this.chatService.getActiveRooms().subscribe(t=>{this.activeRooms=t})}retrieveData(){var t=this;return F(function*(){if(rn.currentUser){const i=Ur(Br,"users",rn.currentUser.uid);yield t.delay(300);const a=yield es(i);t.username=a.get("username")?a.get("username"):"Stranger!"}})()}static#e=this.\u0275fac=function(r){return new(r||n)(g.Y36(Nu),g.Y36(XD))};static#t=this.\u0275cmp=g.Xpm({type:n,selectors:[["app-root"]],decls:2,vars:1,consts:[[3,"username"]],template:function(r,i){1&r&&g._UZ(0,"router-outlet")(1,"app-wrapper",0),2&r&&(g.xp6(1),g.Q6J("username",i.username))},dependencies:[Ko,I4]})}return n})();var eA=k(2438);const Dl=new er.y(La.Z),C4={connector:()=>new Sn.x};function iU(n,e=C4){const{connector:t}=e;return(0,An.e)((r,i)=>{const a=t();(0,Ui.Xf)(n(function b4(n){return new er.y(e=>n.subscribe(e))}(a))).subscribe(i),i.add(r.subscribe(a))})}function sU(n,e){return e?t=>Si(e.pipe(Hn(1),function S4(){return(0,An.e)((n,e)=>{n.subscribe((0,fn.x)(e,La.Z))})}()),t.pipe(sU(n))):(0,Fn.z)((t,r)=>(0,Ui.Xf)(n(t,r)).pipe(Hn(1),Bo(t)))}const KI="Service workers are disabled or not supported by this browser";class tA{constructor(e){if(this.serviceWorker=e,e){const r=(0,eA.R)(e,"controllerchange").pipe((0,ct.U)(()=>e.controller)),a=Si(ss(()=>(0,We.of)(e.controller)),r);this.worker=a.pipe(Gn(I=>!!I)),this.registration=this.worker.pipe((0,Mn.w)(()=>e.getRegistration()));const y=(0,eA.R)(e,"message").pipe((0,ct.U)(I=>I.data)).pipe(Gn(I=>I&&I.type)).pipe(function A4(n){return n?e=>iU(n)(e):e=>function D4(n,e){const t=(0,pr.m)(n)?n:()=>n;return(0,pr.m)(e)?iU(e,{connector:t}):r=>new Vo(r,t)}(new Sn.x)(e)}());y.connect(),this.events=y}else this.worker=this.events=this.registration=function P4(n){return ss(()=>$r(new Error(n)))}(KI)}postMessage(e,t){return this.worker.pipe(Hn(1),vn(r=>{r.postMessage({action:e,...t})})).toPromise().then(()=>{})}postMessageWithOperation(e,t,r){const i=this.waitForOperationCompleted(r),a=this.postMessage(e,t);return Promise.all([a,i]).then(([,c])=>c)}generateNonce(){return Math.round(1e7*Math.random())}eventsOfType(e){let t;return t="string"==typeof e?r=>r.type===e:r=>e.includes(r.type),this.events.pipe(Gn(t))}nextEventOfType(e){return this.eventsOfType(e).pipe(Hn(1))}waitForOperationCompleted(e){return this.eventsOfType("OPERATION_COMPLETED").pipe(Gn(t=>t.nonce===e),Hn(1),(0,ct.U)(t=>{if(void 0!==t.result)return t.result;throw new Error(t.error)})).toPromise()}get isEnabled(){return!!this.serviceWorker}}let oU=(()=>{class n{get isEnabled(){return this.sw.isEnabled}constructor(t){if(this.sw=t,this.pushManager=null,this.subscriptionChanges=new Sn.x,!t.isEnabled)return this.messages=Dl,this.notificationClicks=Dl,void(this.subscription=Dl);this.messages=this.sw.eventsOfType("PUSH").pipe((0,ct.U)(i=>i.data)),this.notificationClicks=this.sw.eventsOfType("NOTIFICATION_CLICK").pipe((0,ct.U)(i=>i.data)),this.pushManager=this.sw.registration.pipe((0,ct.U)(i=>i.pushManager));const r=this.pushManager.pipe((0,Mn.w)(i=>i.getSubscription()));this.subscription=(0,DN.T)(r,this.subscriptionChanges)}requestSubscription(t){if(!this.sw.isEnabled||null===this.pushManager)return Promise.reject(new Error(KI));const r={userVisibleOnly:!0};let i=this.decodeBase64(t.serverPublicKey.replace(/_/g,"/").replace(/-/g,"+")),a=new Uint8Array(new ArrayBuffer(i.length));for(let c=0;c<i.length;c++)a[c]=i.charCodeAt(c);return r.applicationServerKey=a,this.pushManager.pipe((0,Mn.w)(c=>c.subscribe(r)),Hn(1)).toPromise().then(c=>(this.subscriptionChanges.next(c),c))}unsubscribe(){return this.sw.isEnabled?this.subscription.pipe(Hn(1),(0,Mn.w)(r=>{if(null===r)throw new Error("Not subscribed to push notifications.");return r.unsubscribe().then(i=>{if(!i)throw new Error("Unsubscribe failed!");this.subscriptionChanges.next(null)})})).toPromise():Promise.reject(new Error(KI))}decodeBase64(t){return atob(t)}static#e=this.\u0275fac=function(r){return new(r||n)(g.LFG(tA))};static#t=this.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac})}return n})(),aU=(()=>{class n{get isEnabled(){return this.sw.isEnabled}constructor(t){if(this.sw=t,!t.isEnabled)return this.versionUpdates=Dl,this.available=Dl,this.activated=Dl,void(this.unrecoverable=Dl);this.versionUpdates=this.sw.eventsOfType(["VERSION_DETECTED","VERSION_INSTALLATION_FAILED","VERSION_READY","NO_NEW_VERSION_DETECTED"]),this.available=this.versionUpdates.pipe(Gn(r=>"VERSION_READY"===r.type),(0,ct.U)(r=>({type:"UPDATE_AVAILABLE",current:r.currentVersion,available:r.latestVersion}))),this.activated=this.sw.eventsOfType("UPDATE_ACTIVATED"),this.unrecoverable=this.sw.eventsOfType("UNRECOVERABLE_STATE")}checkForUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(KI));const t=this.sw.generateNonce();return this.sw.postMessageWithOperation("CHECK_FOR_UPDATES",{nonce:t},t)}activateUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(KI));const t=this.sw.generateNonce();return this.sw.postMessageWithOperation("ACTIVATE_UPDATE",{nonce:t},t)}static#e=this.\u0275fac=function(r){return new(r||n)(g.LFG(tA))};static#t=this.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac})}return n})();const uU=new g.OlP("NGSW_REGISTER_SCRIPT");function x4(n,e,t,r){return()=>{if(!(0,H.NF)(r)||!("serviceWorker"in navigator)||!1===t.enabled)return;let i;if(navigator.serviceWorker.addEventListener("controllerchange",()=>{null!==navigator.serviceWorker.controller&&navigator.serviceWorker.controller.postMessage({action:"INITIALIZE"})}),"function"==typeof t.registrationStrategy)i=t.registrationStrategy();else{const[c,...h]=(t.registrationStrategy||"registerWhenStable:30000").split(":");switch(c){case"registerImmediately":i=(0,We.of)(null);break;case"registerWithDelay":i=cU(+h[0]||0);break;case"registerWhenStable":i=h[0]?(0,DN.T)(lU(n),cU(+h[0])):lU(n);break;default:throw new Error(`Unknown ServiceWorker registration strategy: ${t.registrationStrategy}`)}}n.get(g.R0b).runOutsideAngular(()=>i.pipe(Hn(1)).subscribe(()=>navigator.serviceWorker.register(e,{scope:t.scope}).catch(c=>console.error("Service worker registration failed with:",c))))}}function cU(n){return(0,We.of)(null).pipe(function R4(n,e=f2){const t=p2(n,e);return sU(()=>t)}(n))}function lU(n){return n.get(g.z2F).isStable.pipe(Gn(t=>t))}function M4(n,e){return new tA((0,H.NF)(e)&&!1!==n.enabled?navigator.serviceWorker:void 0)}class qN{}function O4(n,e={}){return(0,g.MR2)([oU,aU,{provide:uU,useValue:n},{provide:qN,useValue:e},{provide:tA,useFactory:M4,deps:[qN,g.Lbi]},{provide:g.ip1,useFactory:x4,deps:[g.zs3,uU,qN,g.Lbi],multi:!0}])}let N4=(()=>{class n{static register(t,r={}){return{ngModule:n,providers:[O4(t,r)]}}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=g.oAB({type:n});static#n=this.\u0275inj=g.cJS({providers:[oU,aU]})}return n})();function k4(n,e){}const nA=()=>{const n=typeof window<"u"?window:void 0;return n&&n.tinymce?n.tinymce:null};let F4=(()=>{class n{constructor(){this.onBeforePaste=new g.vpe,this.onBlur=new g.vpe,this.onClick=new g.vpe,this.onContextMenu=new g.vpe,this.onCopy=new g.vpe,this.onCut=new g.vpe,this.onDblclick=new g.vpe,this.onDrag=new g.vpe,this.onDragDrop=new g.vpe,this.onDragEnd=new g.vpe,this.onDragGesture=new g.vpe,this.onDragOver=new g.vpe,this.onDrop=new g.vpe,this.onFocus=new g.vpe,this.onFocusIn=new g.vpe,this.onFocusOut=new g.vpe,this.onKeyDown=new g.vpe,this.onKeyPress=new g.vpe,this.onKeyUp=new g.vpe,this.onMouseDown=new g.vpe,this.onMouseEnter=new g.vpe,this.onMouseLeave=new g.vpe,this.onMouseMove=new g.vpe,this.onMouseOut=new g.vpe,this.onMouseOver=new g.vpe,this.onMouseUp=new g.vpe,this.onPaste=new g.vpe,this.onSelectionChange=new g.vpe,this.onActivate=new g.vpe,this.onAddUndo=new g.vpe,this.onBeforeAddUndo=new g.vpe,this.onBeforeExecCommand=new g.vpe,this.onBeforeGetContent=new g.vpe,this.onBeforeRenderUI=new g.vpe,this.onBeforeSetContent=new g.vpe,this.onChange=new g.vpe,this.onClearUndos=new g.vpe,this.onDeactivate=new g.vpe,this.onDirty=new g.vpe,this.onExecCommand=new g.vpe,this.onGetContent=new g.vpe,this.onHide=new g.vpe,this.onInit=new g.vpe,this.onInitNgModel=new g.vpe,this.onLoadContent=new g.vpe,this.onNodeChange=new g.vpe,this.onPostProcess=new g.vpe,this.onPostRender=new g.vpe,this.onPreInit=new g.vpe,this.onPreProcess=new g.vpe,this.onProgressState=new g.vpe,this.onRedo=new g.vpe,this.onRemove=new g.vpe,this.onReset=new g.vpe,this.onResizeEditor=new g.vpe,this.onSaveContent=new g.vpe,this.onSetAttrib=new g.vpe,this.onObjectResizeStart=new g.vpe,this.onObjectResized=new g.vpe,this.onObjectSelected=new g.vpe,this.onSetContent=new g.vpe,this.onShow=new g.vpe,this.onSubmit=new g.vpe,this.onUndo=new g.vpe,this.onVisualAid=new g.vpe}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=g.lG2({type:n,outputs:{onBeforePaste:"onBeforePaste",onBlur:"onBlur",onClick:"onClick",onContextMenu:"onContextMenu",onCopy:"onCopy",onCut:"onCut",onDblclick:"onDblclick",onDrag:"onDrag",onDragDrop:"onDragDrop",onDragEnd:"onDragEnd",onDragGesture:"onDragGesture",onDragOver:"onDragOver",onDrop:"onDrop",onFocus:"onFocus",onFocusIn:"onFocusIn",onFocusOut:"onFocusOut",onKeyDown:"onKeyDown",onKeyPress:"onKeyPress",onKeyUp:"onKeyUp",onMouseDown:"onMouseDown",onMouseEnter:"onMouseEnter",onMouseLeave:"onMouseLeave",onMouseMove:"onMouseMove",onMouseOut:"onMouseOut",onMouseOver:"onMouseOver",onMouseUp:"onMouseUp",onPaste:"onPaste",onSelectionChange:"onSelectionChange",onActivate:"onActivate",onAddUndo:"onAddUndo",onBeforeAddUndo:"onBeforeAddUndo",onBeforeExecCommand:"onBeforeExecCommand",onBeforeGetContent:"onBeforeGetContent",onBeforeRenderUI:"onBeforeRenderUI",onBeforeSetContent:"onBeforeSetContent",onChange:"onChange",onClearUndos:"onClearUndos",onDeactivate:"onDeactivate",onDirty:"onDirty",onExecCommand:"onExecCommand",onGetContent:"onGetContent",onHide:"onHide",onInit:"onInit",onInitNgModel:"onInitNgModel",onLoadContent:"onLoadContent",onNodeChange:"onNodeChange",onPostProcess:"onPostProcess",onPostRender:"onPostRender",onPreInit:"onPreInit",onPreProcess:"onPreProcess",onProgressState:"onProgressState",onRedo:"onRedo",onRemove:"onRemove",onReset:"onReset",onResizeEditor:"onResizeEditor",onSaveContent:"onSaveContent",onSetAttrib:"onSetAttrib",onObjectResizeStart:"onObjectResizeStart",onObjectResized:"onObjectResized",onObjectSelected:"onObjectSelected",onSetContent:"onSetContent",onShow:"onShow",onSubmit:"onSubmit",onUndo:"onUndo",onVisualAid:"onVisualAid"}}),n})();const dU=["onActivate","onAddUndo","onBeforeAddUndo","onBeforeExecCommand","onBeforeGetContent","onBeforeRenderUI","onBeforeSetContent","onBeforePaste","onBlur","onChange","onClearUndos","onClick","onContextMenu","onCopy","onCut","onDblclick","onDeactivate","onDirty","onDrag","onDragDrop","onDragEnd","onDragGesture","onDragOver","onDrop","onExecCommand","onFocus","onFocusIn","onFocusOut","onGetContent","onHide","onInit","onKeyDown","onKeyPress","onKeyUp","onLoadContent","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp","onNodeChange","onObjectResizeStart","onObjectResized","onObjectSelected","onPaste","onPostProcess","onPostRender","onPreProcess","onProgressState","onRedo","onRemove","onReset","onResizeEditor","onSaveContent","onSelectionChange","onSetAttrib","onSetContent","onShow","onSubmit","onUndo","onVisualAid"],rA=(n,e,t)=>(0,eA.R)(n,e).pipe(co(t)),hU=(n,e)=>"string"==typeof n?n.split(",").map(t=>t.trim()):Array.isArray(n)?n:e;let fU=0;const pU=n=>typeof n<"u"&&"textarea"===n.tagName.toLowerCase(),gU=n=>typeof n>"u"||""===n?[]:Array.isArray(n)?n:n.split(" "),B4=(n,e)=>gU(n).concat(gU(e)),j4=()=>{},mU=n=>null==n,$4=(()=>{let n={script$:null};return{load:(r,i)=>n.script$||(n.script$=ss(()=>{const a=r.createElement("script");return a.referrerPolicy="origin",a.type="application/javascript",a.src=i,r.head.appendChild(a),(0,eA.R)(a,"load").pipe(Hn(1),Bo(void 0))}).pipe(g2({bufferSize:1,refCount:!0}))),reinitialize:()=>{n={script$:null}}}})(),H4=new g.OlP("TINYMCE_SCRIPT_SRC"),G4={provide:dr.JU,useExisting:(0,g.Gpc)(()=>yU),multi:!0};let yU=(()=>{class n extends F4{constructor(t,r,i,a){super(),this.platformId=i,this.tinymceScriptSrc=a,this.cloudChannel="6",this.apiKey="no-api-key",this.id="",this.modelEvents="change input undo redo",this.onTouchedCallback=j4,this.destroy$=new Sn.x,this.initialise=()=>{const c={...this.init,selector:void 0,target:this._element,inline:this.inline,readonly:this.disabled,plugins:B4(this.init&&this.init.plugins,this.plugins),toolbar:this.toolbar||this.init&&this.init.toolbar,setup:h=>{this._editor=h,rA(h,"init",this.destroy$).subscribe(()=>{this.initEditor(h)}),((n,e,t)=>{(n=>{const e=hU(n.ignoreEvents,[]);return hU(n.allowedEvents,dU).filter(r=>dU.includes(r)&&!e.includes(r))})(n).forEach(i=>{const a=n[i];rA(e,i.substring(2),t).subscribe(c=>{a.observers.length>0&&n.ngZone.run(()=>a.emit({event:c,editor:e}))})})})(this,h,this.destroy$),this.init&&"function"==typeof this.init.setup&&this.init.setup(h)}};pU(this._element)&&(this._element.style.visibility=""),this.ngZone.runOutsideAngular(()=>{nA().init(c)})},this._elementRef=t,this.ngZone=r}set disabled(t){this._disabled=t,this._editor&&this._editor.initialized&&("function"==typeof this._editor.mode?.set?this._editor.mode.set(t?"readonly":"design"):this._editor.setMode(t?"readonly":"design"))}get disabled(){return this._disabled}get editor(){return this._editor}writeValue(t){this._editor&&this._editor.initialized?this._editor.setContent(mU(t)?"":t):this.initialValue=null===t?void 0:t}registerOnChange(t){this.onChangeCallback=t}registerOnTouched(t){this.onTouchedCallback=t}setDisabledState(t){this.disabled=t}ngAfterViewInit(){(0,H.NF)(this.platformId)&&(this.id=this.id||(n=>{const t=(new Date).getTime(),r=Math.floor(1e9*Math.random());return fU++,"tiny-angular_"+r+fU+String(t)})(),this.inline=void 0!==this.inline?!1!==this.inline:!!this.init?.inline,this.createElement(),null!==nA()?this.initialise():this._element&&this._element.ownerDocument&&$4.load(this._element.ownerDocument,this.getScriptSrc()).pipe(co(this.destroy$)).subscribe(this.initialise))}ngOnDestroy(){this.destroy$.next(),null!==nA()&&nA().remove(this._editor)}createElement(){this._element=document.createElement(this.inline?"string"==typeof this.tagName?this.tagName:"div":"textarea"),this._element&&(document.getElementById(this.id)&&console.warn(`TinyMCE-Angular: an element with id [${this.id}] already exists. Editors with duplicate Id will not be able to mount`),this._element.id=this.id,pU(this._element)&&(this._element.style.visibility="hidden"),this._elementRef.nativeElement.appendChild(this._element))}getScriptSrc(){return mU(this.tinymceScriptSrc)?`https://cdn.tiny.cloud/1/${this.apiKey}/tinymce/${this.cloudChannel}/tinymce.min.js`:this.tinymceScriptSrc}initEditor(t){rA(t,"blur",this.destroy$).subscribe(()=>{this.ngZone.run(()=>this.onTouchedCallback())}),rA(t,this.modelEvents,this.destroy$).subscribe(()=>{this.ngZone.run(()=>this.emitOnChange(t))}),"string"==typeof this.initialValue&&this.ngZone.run(()=>{t.setContent(this.initialValue),t.getContent()!==this.initialValue&&this.emitOnChange(t),void 0!==this.onInitNgModel&&this.onInitNgModel.emit(t)})}emitOnChange(t){this.onChangeCallback&&this.onChangeCallback(t.getContent({format:this.outputFormat}))}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(g.SBq),g.Y36(g.R0b),g.Y36(g.Lbi),g.Y36(H4,8))},n.\u0275cmp=g.Xpm({type:n,selectors:[["editor"]],inputs:{cloudChannel:"cloudChannel",apiKey:"apiKey",init:"init",id:"id",initialValue:"initialValue",outputFormat:"outputFormat",inline:"inline",tagName:"tagName",plugins:"plugins",toolbar:"toolbar",modelEvents:"modelEvents",allowedEvents:"allowedEvents",ignoreEvents:"ignoreEvents",disabled:"disabled"},standalone:!0,features:[g._Bn([G4]),g.qOj,g.jDz],decls:1,vars:0,template:function(t,r){1&t&&g.YNc(0,k4,0,0,"ng-template")},dependencies:[H.ez,dr.u5],styles:["[_nghost-%COMP%]{display:block}"]}),n})(),z4=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({imports:[yU]}),n})(),q4=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=g.oAB({type:n,bootstrap:[T4]});static#n=this.\u0275inj=g.cJS({imports:[fr,z4,h2.nm.forRoot(),dr.u5,aG.forRoot(),l2,CG,N4.register("ngsw-worker.js",{enabled:!(0,g.X6Q)(),registrationStrategy:"registerWhenStable:30000"}),w4]})}return n})();on().bootstrapModule(q4).catch(n=>console.error(n))},5619:(Qe,he,k)=>{k.d(he,{X:()=>g});var b=k(8645);class g extends b.x{constructor(ue){super(),this._value=ue}get value(){return this.getValue()}_subscribe(ue){const oe=super._subscribe(ue);return!oe.closed&&ue.next(this._value),oe}getValue(){const{hasError:ue,thrownError:oe,_value:ve}=this;if(ue)throw oe;return this._throwIfClosed(),ve}next(ue){super.next(this._value=ue)}}},5592:(Qe,he,k)=>{k.d(he,{y:()=>Le});var b=k(305),g=k(7394),H=k(4850),ue=k(8407),oe=k(2653),ve=k(4674),Te=k(1441);let Le=(()=>{class ae{constructor(me){me&&(this._subscribe=me)}lift(me){const Ie=new ae;return Ie.source=this,Ie.operator=me,Ie}subscribe(me,Ie,Q){const Se=function ee(ae){return ae&&ae instanceof b.Lv||function Y(ae){return ae&&(0,ve.m)(ae.next)&&(0,ve.m)(ae.error)&&(0,ve.m)(ae.complete)}(ae)&&(0,g.Nn)(ae)}(me)?me:new b.Hp(me,Ie,Q);return(0,Te.x)(()=>{const{operator:qe,source:Et}=this;Se.add(qe?qe.call(Se,Et):Et?this._subscribe(Se):this._trySubscribe(Se))}),Se}_trySubscribe(me){try{return this._subscribe(me)}catch(Ie){me.error(Ie)}}forEach(me,Ie){return new(Ie=Me(Ie))((Q,Se)=>{const qe=new b.Hp({next:Et=>{try{me(Et)}catch(Ct){Se(Ct),qe.unsubscribe()}},error:Se,complete:Q});this.subscribe(qe)})}_subscribe(me){var Ie;return null===(Ie=this.source)||void 0===Ie?void 0:Ie.subscribe(me)}[H.L](){return this}pipe(...me){return(0,ue.U)(me)(this)}toPromise(me){return new(me=Me(me))((Ie,Q)=>{let Se;this.subscribe(qe=>Se=qe,qe=>Q(qe),()=>Ie(Se))})}}return ae.create=ze=>new ae(ze),ae})();function Me(ae){var ze;return null!==(ze=ae??oe.config.Promise)&&void 0!==ze?ze:Promise}},8645:(Qe,he,k)=>{k.d(he,{x:()=>Te});var b=k(5592),g=k(7394);const ue=(0,k(2306).d)(Me=>function(){Me(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var oe=k(9039),ve=k(1441);let Te=(()=>{class Me extends b.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(ee){const ae=new Le(this,this);return ae.operator=ee,ae}_throwIfClosed(){if(this.closed)throw new ue}next(ee){(0,ve.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const ae of this.currentObservers)ae.next(ee)}})}error(ee){(0,ve.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=ee;const{observers:ae}=this;for(;ae.length;)ae.shift().error(ee)}})}complete(){(0,ve.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:ee}=this;for(;ee.length;)ee.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var ee;return(null===(ee=this.observers)||void 0===ee?void 0:ee.length)>0}_trySubscribe(ee){return this._throwIfClosed(),super._trySubscribe(ee)}_subscribe(ee){return this._throwIfClosed(),this._checkFinalizedStatuses(ee),this._innerSubscribe(ee)}_innerSubscribe(ee){const{hasError:ae,isStopped:ze,observers:me}=this;return ae||ze?g.Lc:(this.currentObservers=null,me.push(ee),new g.w0(()=>{this.currentObservers=null,(0,oe.P)(me,ee)}))}_checkFinalizedStatuses(ee){const{hasError:ae,thrownError:ze,isStopped:me}=this;ae?ee.error(ze):me&&ee.complete()}asObservable(){const ee=new b.y;return ee.source=this,ee}}return Me.create=(Y,ee)=>new Le(Y,ee),Me})();class Le extends Te{constructor(Y,ee){super(),this.destination=Y,this.source=ee}next(Y){var ee,ae;null===(ae=null===(ee=this.destination)||void 0===ee?void 0:ee.next)||void 0===ae||ae.call(ee,Y)}error(Y){var ee,ae;null===(ae=null===(ee=this.destination)||void 0===ee?void 0:ee.error)||void 0===ae||ae.call(ee,Y)}complete(){var Y,ee;null===(ee=null===(Y=this.destination)||void 0===Y?void 0:Y.complete)||void 0===ee||ee.call(Y)}_subscribe(Y){var ee,ae;return null!==(ae=null===(ee=this.source)||void 0===ee?void 0:ee.subscribe(Y))&&void 0!==ae?ae:g.Lc}}},305:(Qe,he,k)=>{k.d(he,{Hp:()=>Q,Lv:()=>ae});var b=k(4674),g=k(7394),H=k(2653),ue=k(3894),oe=k(2420);const ve=Me("C",void 0,void 0);function Me(G,de,ce){return{kind:G,value:de,error:ce}}var Y=k(7599),ee=k(1441);class ae extends g.w0{constructor(de){super(),this.isStopped=!1,de?(this.destination=de,(0,g.Nn)(de)&&de.add(this)):this.destination=Ct}static create(de,ce,we){return new Q(de,ce,we)}next(de){this.isStopped?Et(function Le(G){return Me("N",G,void 0)}(de),this):this._next(de)}error(de){this.isStopped?Et(function Te(G){return Me("E",void 0,G)}(de),this):(this.isStopped=!0,this._error(de))}complete(){this.isStopped?Et(ve,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(de){this.destination.next(de)}_error(de){try{this.destination.error(de)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const ze=Function.prototype.bind;function me(G,de){return ze.call(G,de)}class Ie{constructor(de){this.partialObserver=de}next(de){const{partialObserver:ce}=this;if(ce.next)try{ce.next(de)}catch(we){Se(we)}}error(de){const{partialObserver:ce}=this;if(ce.error)try{ce.error(de)}catch(we){Se(we)}else Se(de)}complete(){const{partialObserver:de}=this;if(de.complete)try{de.complete()}catch(ce){Se(ce)}}}class Q extends ae{constructor(de,ce,we){let be;if(super(),(0,b.m)(de)||!de)be={next:de??void 0,error:ce??void 0,complete:we??void 0};else{let Ce;this&&H.config.useDeprecatedNextContext?(Ce=Object.create(de),Ce.unsubscribe=()=>this.unsubscribe(),be={next:de.next&&me(de.next,Ce),error:de.error&&me(de.error,Ce),complete:de.complete&&me(de.complete,Ce)}):be=de}this.destination=new Ie(be)}}function Se(G){H.config.useDeprecatedSynchronousErrorHandling?(0,ee.O)(G):(0,ue.h)(G)}function Et(G,de){const{onStoppedNotification:ce}=H.config;ce&&Y.z.setTimeout(()=>ce(G,de))}const Ct={closed:!0,next:oe.Z,error:function qe(G){throw G},complete:oe.Z}},7394:(Qe,he,k)=>{k.d(he,{Lc:()=>ve,w0:()=>oe,Nn:()=>Te});var b=k(4674);const H=(0,k(2306).d)(Me=>function(ee){Me(this),this.message=ee?`${ee.length} errors occurred during unsubscription:\n${ee.map((ae,ze)=>`${ze+1}) ${ae.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=ee});var ue=k(9039);class oe{constructor(Y){this.initialTeardown=Y,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let Y;if(!this.closed){this.closed=!0;const{_parentage:ee}=this;if(ee)if(this._parentage=null,Array.isArray(ee))for(const me of ee)me.remove(this);else ee.remove(this);const{initialTeardown:ae}=this;if((0,b.m)(ae))try{ae()}catch(me){Y=me instanceof H?me.errors:[me]}const{_finalizers:ze}=this;if(ze){this._finalizers=null;for(const me of ze)try{Le(me)}catch(Ie){Y=Y??[],Ie instanceof H?Y=[...Y,...Ie.errors]:Y.push(Ie)}}if(Y)throw new H(Y)}}add(Y){var ee;if(Y&&Y!==this)if(this.closed)Le(Y);else{if(Y instanceof oe){if(Y.closed||Y._hasParent(this))return;Y._addParent(this)}(this._finalizers=null!==(ee=this._finalizers)&&void 0!==ee?ee:[]).push(Y)}}_hasParent(Y){const{_parentage:ee}=this;return ee===Y||Array.isArray(ee)&&ee.includes(Y)}_addParent(Y){const{_parentage:ee}=this;this._parentage=Array.isArray(ee)?(ee.push(Y),ee):ee?[ee,Y]:Y}_removeParent(Y){const{_parentage:ee}=this;ee===Y?this._parentage=null:Array.isArray(ee)&&(0,ue.P)(ee,Y)}remove(Y){const{_finalizers:ee}=this;ee&&(0,ue.P)(ee,Y),Y instanceof oe&&Y._removeParent(this)}}oe.EMPTY=(()=>{const Me=new oe;return Me.closed=!0,Me})();const ve=oe.EMPTY;function Te(Me){return Me instanceof oe||Me&&"closed"in Me&&(0,b.m)(Me.remove)&&(0,b.m)(Me.add)&&(0,b.m)(Me.unsubscribe)}function Le(Me){(0,b.m)(Me)?Me():Me.unsubscribe()}},2653:(Qe,he,k)=>{k.d(he,{config:()=>b});const b={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},6232:(Qe,he,k)=>{k.d(he,{E:()=>g});const g=new(k(5592).y)(oe=>oe.complete())},7715:(Qe,he,k)=>{k.d(he,{D:()=>we});var b=k(4829),g=k(7103),H=k(9360),ue=k(8251);function oe(be,Ce=0){return(0,H.e)((mt,Ze)=>{mt.subscribe((0,ue.x)(Ze,$t=>(0,g.f)(Ze,be,()=>Ze.next($t),Ce),()=>(0,g.f)(Ze,be,()=>Ze.complete(),Ce),$t=>(0,g.f)(Ze,be,()=>Ze.error($t),Ce)))})}function ve(be,Ce=0){return(0,H.e)((mt,Ze)=>{Ze.add(be.schedule(()=>mt.subscribe(Ze),Ce))})}var Me=k(5592),ee=k(4971),ae=k(4674);function me(be,Ce){if(!be)throw new Error("Iterable cannot be null");return new Me.y(mt=>{(0,g.f)(mt,Ce,()=>{const Ze=be[Symbol.asyncIterator]();(0,g.f)(mt,Ce,()=>{Ze.next().then($t=>{$t.done?mt.complete():mt.next($t.value)})},0,!0)})})}var Ie=k(8382),Q=k(4026),Se=k(4266),qe=k(3664),Et=k(5726),Ct=k(9853),G=k(541);function we(be,Ce){return Ce?function ce(be,Ce){if(null!=be){if((0,Ie.c)(be))return function Te(be,Ce){return(0,b.Xf)(be).pipe(ve(Ce),oe(Ce))}(be,Ce);if((0,Se.z)(be))return function Y(be,Ce){return new Me.y(mt=>{let Ze=0;return Ce.schedule(function(){Ze===be.length?mt.complete():(mt.next(be[Ze++]),mt.closed||this.schedule())})})}(be,Ce);if((0,Q.t)(be))return function Le(be,Ce){return(0,b.Xf)(be).pipe(ve(Ce),oe(Ce))}(be,Ce);if((0,Et.D)(be))return me(be,Ce);if((0,qe.T)(be))return function ze(be,Ce){return new Me.y(mt=>{let Ze;return(0,g.f)(mt,Ce,()=>{Ze=be[ee.h](),(0,g.f)(mt,Ce,()=>{let $t,no;try{({value:$t,done:no}=Ze.next())}catch(ts){return void mt.error(ts)}no?mt.complete():mt.next($t)},0,!0)}),()=>(0,ae.m)(Ze?.return)&&Ze.return()})}(be,Ce);if((0,G.L)(be))return function de(be,Ce){return me((0,G.Q)(be),Ce)}(be,Ce)}throw(0,Ct.z)(be)}(be,Ce):(0,b.Xf)(be)}},2438:(Qe,he,k)=>{k.d(he,{R:()=>Y});var b=k(4829),g=k(5592),H=k(1631),ue=k(4266),oe=k(4674),ve=k(7400);const Te=["addListener","removeListener"],Le=["addEventListener","removeEventListener"],Me=["on","off"];function Y(Ie,Q,Se,qe){if((0,oe.m)(Se)&&(qe=Se,Se=void 0),qe)return Y(Ie,Q,Se).pipe((0,ve.Z)(qe));const[Et,Ct]=function me(Ie){return(0,oe.m)(Ie.addEventListener)&&(0,oe.m)(Ie.removeEventListener)}(Ie)?Le.map(G=>de=>Ie[G](Q,de,Se)):function ae(Ie){return(0,oe.m)(Ie.addListener)&&(0,oe.m)(Ie.removeListener)}(Ie)?Te.map(ee(Ie,Q)):function ze(Ie){return(0,oe.m)(Ie.on)&&(0,oe.m)(Ie.off)}(Ie)?Me.map(ee(Ie,Q)):[];if(!Et&&(0,ue.z)(Ie))return(0,H.z)(G=>Y(G,Q,Se))((0,b.Xf)(Ie));if(!Et)throw new TypeError("Invalid event target");return new g.y(G=>{const de=(...ce)=>G.next(1<ce.length?ce:ce[0]);return Et(de),()=>Ct(de)})}function ee(Ie,Q){return Se=>qe=>Ie[Se](Q,qe)}},4829:(Qe,he,k)=>{k.d(he,{Xf:()=>ze});var b=k(7582),g=k(4266),H=k(4026),ue=k(5592),oe=k(8382),ve=k(5726),Te=k(9853),Le=k(3664),Me=k(541),Y=k(4674),ee=k(3894),ae=k(4850);function ze(G){if(G instanceof ue.y)return G;if(null!=G){if((0,oe.c)(G))return function me(G){return new ue.y(de=>{const ce=G[ae.L]();if((0,Y.m)(ce.subscribe))return ce.subscribe(de);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(G);if((0,g.z)(G))return function Ie(G){return new ue.y(de=>{for(let ce=0;ce<G.length&&!de.closed;ce++)de.next(G[ce]);de.complete()})}(G);if((0,H.t)(G))return function Q(G){return new ue.y(de=>{G.then(ce=>{de.closed||(de.next(ce),de.complete())},ce=>de.error(ce)).then(null,ee.h)})}(G);if((0,ve.D)(G))return qe(G);if((0,Le.T)(G))return function Se(G){return new ue.y(de=>{for(const ce of G)if(de.next(ce),de.closed)return;de.complete()})}(G);if((0,Me.L)(G))return function Et(G){return qe((0,Me.Q)(G))}(G)}throw(0,Te.z)(G)}function qe(G){return new ue.y(de=>{(function Ct(G,de){var ce,we,be,Ce;return(0,b.mG)(this,void 0,void 0,function*(){try{for(ce=(0,b.KL)(G);!(we=yield ce.next()).done;)if(de.next(we.value),de.closed)return}catch(mt){be={error:mt}}finally{try{we&&!we.done&&(Ce=ce.return)&&(yield Ce.call(ce))}finally{if(be)throw be.error}}de.complete()})})(G,de).catch(ce=>de.error(ce))})}},3019:(Qe,he,k)=>{k.d(he,{T:()=>ve});var b=k(7537),g=k(4829),H=k(6232),ue=k(9940),oe=k(7715);function ve(...Te){const Le=(0,ue.yG)(Te),Me=(0,ue._6)(Te,1/0),Y=Te;return Y.length?1===Y.length?(0,g.Xf)(Y[0]):(0,b.J)(Me)((0,oe.D)(Y,Le)):H.E}},2096:(Qe,he,k)=>{k.d(he,{of:()=>H});var b=k(9940),g=k(7715);function H(...ue){const oe=(0,b.yG)(ue);return(0,g.D)(ue,oe)}},8251:(Qe,he,k)=>{k.d(he,{x:()=>g});var b=k(305);function g(ue,oe,ve,Te,Le){return new H(ue,oe,ve,Te,Le)}class H extends b.Lv{constructor(oe,ve,Te,Le,Me,Y){super(oe),this.onFinalize=Me,this.shouldUnsubscribe=Y,this._next=ve?function(ee){try{ve(ee)}catch(ae){oe.error(ae)}}:super._next,this._error=Le?function(ee){try{Le(ee)}catch(ae){oe.error(ae)}finally{this.unsubscribe()}}:super._error,this._complete=Te?function(){try{Te()}catch(ee){oe.error(ee)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var oe;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:ve}=this;super.unsubscribe(),!ve&&(null===(oe=this.onFinalize)||void 0===oe||oe.call(this))}}}},3997:(Qe,he,k)=>{k.d(he,{x:()=>ue});var b=k(2737),g=k(9360),H=k(8251);function ue(ve,Te=b.y){return ve=ve??oe,(0,g.e)((Le,Me)=>{let Y,ee=!0;Le.subscribe((0,H.x)(Me,ae=>{const ze=Te(ae);(ee||!ve(Y,ze))&&(ee=!1,Y=ze,Me.next(ae))}))})}function oe(ve,Te){return ve===Te}},7398:(Qe,he,k)=>{k.d(he,{U:()=>H});var b=k(9360),g=k(8251);function H(ue,oe){return(0,b.e)((ve,Te)=>{let Le=0;ve.subscribe((0,g.x)(Te,Me=>{Te.next(ue.call(oe,Me,Le++))}))})}},7537:(Qe,he,k)=>{k.d(he,{J:()=>H});var b=k(1631),g=k(2737);function H(ue=1/0){return(0,b.z)(g.y,ue)}},1631:(Qe,he,k)=>{k.d(he,{z:()=>Le});var b=k(7398),g=k(4829),H=k(9360),ue=k(7103),oe=k(8251),Te=k(4674);function Le(Me,Y,ee=1/0){return(0,Te.m)(Y)?Le((ae,ze)=>(0,b.U)((me,Ie)=>Y(ae,me,ze,Ie))((0,g.Xf)(Me(ae,ze))),ee):("number"==typeof Y&&(ee=Y),(0,H.e)((ae,ze)=>function ve(Me,Y,ee,ae,ze,me,Ie,Q){const Se=[];let qe=0,Et=0,Ct=!1;const G=()=>{Ct&&!Se.length&&!qe&&Y.complete()},de=we=>qe<ae?ce(we):Se.push(we),ce=we=>{me&&Y.next(we),qe++;let be=!1;(0,g.Xf)(ee(we,Et++)).subscribe((0,oe.x)(Y,Ce=>{ze?.(Ce),me?de(Ce):Y.next(Ce)},()=>{be=!0},void 0,()=>{if(be)try{for(qe--;Se.length&&qe<ae;){const Ce=Se.shift();Ie?(0,ue.f)(Y,Ie,()=>ce(Ce)):ce(Ce)}G()}catch(Ce){Y.error(Ce)}}))};return Me.subscribe((0,oe.x)(Y,de,()=>{Ct=!0,G()})),()=>{Q?.()}}(ae,ze,Me,ee)))}},3020:(Qe,he,k)=>{k.d(he,{B:()=>oe});var b=k(4829),g=k(8645),H=k(305),ue=k(9360);function oe(Te={}){const{connector:Le=(()=>new g.x),resetOnError:Me=!0,resetOnComplete:Y=!0,resetOnRefCountZero:ee=!0}=Te;return ae=>{let ze,me,Ie,Q=0,Se=!1,qe=!1;const Et=()=>{me?.unsubscribe(),me=void 0},Ct=()=>{Et(),ze=Ie=void 0,Se=qe=!1},G=()=>{const de=ze;Ct(),de?.unsubscribe()};return(0,ue.e)((de,ce)=>{Q++,!qe&&!Se&&Et();const we=Ie=Ie??Le();ce.add(()=>{Q--,0===Q&&!qe&&!Se&&(me=ve(G,ee))}),we.subscribe(ce),!ze&&Q>0&&(ze=new H.Hp({next:be=>we.next(be),error:be=>{qe=!0,Et(),me=ve(Ct,Me,be),we.error(be)},complete:()=>{Se=!0,Et(),me=ve(Ct,Y),we.complete()}}),(0,b.Xf)(de).subscribe(ze))})(ae)}}function ve(Te,Le,...Me){if(!0===Le)return void Te();if(!1===Le)return;const Y=new H.Hp({next:()=>{Y.unsubscribe(),Te()}});return(0,b.Xf)(Le(...Me)).subscribe(Y)}},4664:(Qe,he,k)=>{k.d(he,{w:()=>ue});var b=k(4829),g=k(9360),H=k(8251);function ue(oe,ve){return(0,g.e)((Te,Le)=>{let Me=null,Y=0,ee=!1;const ae=()=>ee&&!Me&&Le.complete();Te.subscribe((0,H.x)(Le,ze=>{Me?.unsubscribe();let me=0;const Ie=Y++;(0,b.Xf)(oe(ze,Ie)).subscribe(Me=(0,H.x)(Le,Q=>Le.next(ve?ve(ze,Q,Ie,me++):Q),()=>{Me=null,ae()}))},()=>{ee=!0,ae()}))})}},7599:(Qe,he,k)=>{k.d(he,{z:()=>b});const b={setTimeout(g,H,...ue){const{delegate:oe}=b;return oe?.setTimeout?oe.setTimeout(g,H,...ue):setTimeout(g,H,...ue)},clearTimeout(g){const{delegate:H}=b;return(H?.clearTimeout||clearTimeout)(g)},delegate:void 0}},4971:(Qe,he,k)=>{k.d(he,{h:()=>g});const g=function b(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},4850:(Qe,he,k)=>{k.d(he,{L:()=>b});const b="function"==typeof Symbol&&Symbol.observable||"@@observable"},9940:(Qe,he,k)=>{k.d(he,{_6:()=>ve,jO:()=>ue,yG:()=>oe});var b=k(4674),g=k(671);function H(Te){return Te[Te.length-1]}function ue(Te){return(0,b.m)(H(Te))?Te.pop():void 0}function oe(Te){return(0,g.K)(H(Te))?Te.pop():void 0}function ve(Te,Le){return"number"==typeof H(Te)?Te.pop():Le}},7453:(Qe,he,k)=>{k.d(he,{D:()=>oe});const{isArray:b}=Array,{getPrototypeOf:g,prototype:H,keys:ue}=Object;function oe(Te){if(1===Te.length){const Le=Te[0];if(b(Le))return{args:Le,keys:null};if(function ve(Te){return Te&&"object"==typeof Te&&g(Te)===H}(Le)){const Me=ue(Le);return{args:Me.map(Y=>Le[Y]),keys:Me}}}return{args:Te,keys:null}}},9039:(Qe,he,k)=>{function b(g,H){if(g){const ue=g.indexOf(H);0<=ue&&g.splice(ue,1)}}k.d(he,{P:()=>b})},2306:(Qe,he,k)=>{function b(g){const ue=g(oe=>{Error.call(oe),oe.stack=(new Error).stack});return ue.prototype=Object.create(Error.prototype),ue.prototype.constructor=ue,ue}k.d(he,{d:()=>b})},2714:(Qe,he,k)=>{function b(g,H){return g.reduce((ue,oe,ve)=>(ue[oe]=H[ve],ue),{})}k.d(he,{n:()=>b})},1441:(Qe,he,k)=>{k.d(he,{O:()=>ue,x:()=>H});var b=k(2653);let g=null;function H(oe){if(b.config.useDeprecatedSynchronousErrorHandling){const ve=!g;if(ve&&(g={errorThrown:!1,error:null}),oe(),ve){const{errorThrown:Te,error:Le}=g;if(g=null,Te)throw Le}}else oe()}function ue(oe){b.config.useDeprecatedSynchronousErrorHandling&&g&&(g.errorThrown=!0,g.error=oe)}},7103:(Qe,he,k)=>{function b(g,H,ue,oe=0,ve=!1){const Te=H.schedule(function(){ue(),ve?g.add(this.schedule(null,oe)):this.unsubscribe()},oe);if(g.add(Te),!ve)return Te}k.d(he,{f:()=>b})},2737:(Qe,he,k)=>{function b(g){return g}k.d(he,{y:()=>b})},4266:(Qe,he,k)=>{k.d(he,{z:()=>b});const b=g=>g&&"number"==typeof g.length&&"function"!=typeof g},5726:(Qe,he,k)=>{k.d(he,{D:()=>g});var b=k(4674);function g(H){return Symbol.asyncIterator&&(0,b.m)(H?.[Symbol.asyncIterator])}},4674:(Qe,he,k)=>{function b(g){return"function"==typeof g}k.d(he,{m:()=>b})},8382:(Qe,he,k)=>{k.d(he,{c:()=>H});var b=k(4850),g=k(4674);function H(ue){return(0,g.m)(ue[b.L])}},3664:(Qe,he,k)=>{k.d(he,{T:()=>H});var b=k(4971),g=k(4674);function H(ue){return(0,g.m)(ue?.[b.h])}},4026:(Qe,he,k)=>{k.d(he,{t:()=>g});var b=k(4674);function g(H){return(0,b.m)(H?.then)}},541:(Qe,he,k)=>{k.d(he,{L:()=>ue,Q:()=>H});var b=k(7582),g=k(4674);function H(oe){return(0,b.FC)(this,arguments,function*(){const Te=oe.getReader();try{for(;;){const{value:Le,done:Me}=yield(0,b.qq)(Te.read());if(Me)return yield(0,b.qq)(void 0);yield yield(0,b.qq)(Le)}}finally{Te.releaseLock()}})}function ue(oe){return(0,g.m)(oe?.getReader)}},671:(Qe,he,k)=>{k.d(he,{K:()=>g});var b=k(4674);function g(H){return H&&(0,b.m)(H.schedule)}},9360:(Qe,he,k)=>{k.d(he,{A:()=>g,e:()=>H});var b=k(4674);function g(ue){return(0,b.m)(ue?.lift)}function H(ue){return oe=>{if(g(oe))return oe.lift(function(ve){try{return ue(ve,this)}catch(Te){this.error(Te)}});throw new TypeError("Unable to lift unknown Observable type")}}},7400:(Qe,he,k)=>{k.d(he,{Z:()=>ue});var b=k(7398);const{isArray:g}=Array;function ue(oe){return(0,b.U)(ve=>function H(oe,ve){return g(ve)?oe(...ve):oe(ve)}(oe,ve))}},2420:(Qe,he,k)=>{function b(){}k.d(he,{Z:()=>b})},8407:(Qe,he,k)=>{k.d(he,{U:()=>H,z:()=>g});var b=k(2737);function g(...ue){return H(ue)}function H(ue){return 0===ue.length?b.y:1===ue.length?ue[0]:function(ve){return ue.reduce((Te,Le)=>Le(Te),ve)}}},3894:(Qe,he,k)=>{k.d(he,{h:()=>H});var b=k(2653),g=k(7599);function H(ue){g.z.setTimeout(()=>{const{onUnhandledError:oe}=b.config;if(!oe)throw ue;oe(ue)})}},9853:(Qe,he,k)=>{function b(g){return new TypeError(`You provided ${null!==g&&"object"==typeof g?"an invalid object":`'${g}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}k.d(he,{z:()=>b})},6814:(Qe,he,k)=>{k.d(he,{Do:()=>Q,EM:()=>zr,HT:()=>ue,JF:()=>di,K0:()=>ve,Mx:()=>$r,NF:()=>Hi,O5:()=>Ds,Ov:()=>st,PM:()=>Gr,S$:()=>ze,V_:()=>Le,Ye:()=>Se,b0:()=>Ie,bD:()=>ui,ez:()=>jt,mk:()=>An,q:()=>H,sg:()=>ct,w_:()=>oe});var b=k(5879);let g=null;function H(){return g}function ue(v){g||(g=v)}class oe{}const ve=new b.OlP("DocumentToken");let Te=(()=>{class v{historyGo(T){throw new Error("Not implemented")}static#e=this.\u0275fac=function(S){return new(S||v)};static#t=this.\u0275prov=b.Yz7({token:v,factory:function(){return(0,b.f3M)(Me)},providedIn:"platform"})}return v})();const Le=new b.OlP("Location Initialized");let Me=(()=>{class v extends Te{constructor(){super(),this._doc=(0,b.f3M)(ve),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return H().getBaseHref(this._doc)}onPopState(T){const S=H().getGlobalEventTarget(this._doc,"window");return S.addEventListener("popstate",T,!1),()=>S.removeEventListener("popstate",T)}onHashChange(T){const S=H().getGlobalEventTarget(this._doc,"window");return S.addEventListener("hashchange",T,!1),()=>S.removeEventListener("hashchange",T)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(T){this._location.pathname=T}pushState(T,S,V){this._history.pushState(T,S,V)}replaceState(T,S,V){this._history.replaceState(T,S,V)}forward(){this._history.forward()}back(){this._history.back()}historyGo(T=0){this._history.go(T)}getState(){return this._history.state}static#e=this.\u0275fac=function(S){return new(S||v)};static#t=this.\u0275prov=b.Yz7({token:v,factory:function(){return new v},providedIn:"platform"})}return v})();function Y(v,P){if(0==v.length)return P;if(0==P.length)return v;let T=0;return v.endsWith("/")&&T++,P.startsWith("/")&&T++,2==T?v+P.substring(1):1==T?v+P:v+"/"+P}function ee(v){const P=v.match(/#|\?|$/),T=P&&P.index||v.length;return v.slice(0,T-("/"===v[T-1]?1:0))+v.slice(T)}function ae(v){return v&&"?"!==v[0]?"?"+v:v}let ze=(()=>{class v{historyGo(T){throw new Error("Not implemented")}static#e=this.\u0275fac=function(S){return new(S||v)};static#t=this.\u0275prov=b.Yz7({token:v,factory:function(){return(0,b.f3M)(Ie)},providedIn:"root"})}return v})();const me=new b.OlP("appBaseHref");let Ie=(()=>{class v extends ze{constructor(T,S){super(),this._platformLocation=T,this._removeListenerFns=[],this._baseHref=S??this._platformLocation.getBaseHrefFromDOM()??(0,b.f3M)(ve).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(T){this._removeListenerFns.push(this._platformLocation.onPopState(T),this._platformLocation.onHashChange(T))}getBaseHref(){return this._baseHref}prepareExternalUrl(T){return Y(this._baseHref,T)}path(T=!1){const S=this._platformLocation.pathname+ae(this._platformLocation.search),V=this._platformLocation.hash;return V&&T?`${S}${V}`:S}pushState(T,S,V,z){const se=this.prepareExternalUrl(V+ae(z));this._platformLocation.pushState(T,S,se)}replaceState(T,S,V,z){const se=this.prepareExternalUrl(V+ae(z));this._platformLocation.replaceState(T,S,se)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(T=0){this._platformLocation.historyGo?.(T)}static#e=this.\u0275fac=function(S){return new(S||v)(b.LFG(Te),b.LFG(me,8))};static#t=this.\u0275prov=b.Yz7({token:v,factory:v.\u0275fac,providedIn:"root"})}return v})(),Q=(()=>{class v extends ze{constructor(T,S){super(),this._platformLocation=T,this._baseHref="",this._removeListenerFns=[],null!=S&&(this._baseHref=S)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(T){this._removeListenerFns.push(this._platformLocation.onPopState(T),this._platformLocation.onHashChange(T))}getBaseHref(){return this._baseHref}path(T=!1){let S=this._platformLocation.hash;return null==S&&(S="#"),S.length>0?S.substring(1):S}prepareExternalUrl(T){const S=Y(this._baseHref,T);return S.length>0?"#"+S:S}pushState(T,S,V,z){let se=this.prepareExternalUrl(V+ae(z));0==se.length&&(se=this._platformLocation.pathname),this._platformLocation.pushState(T,S,se)}replaceState(T,S,V,z){let se=this.prepareExternalUrl(V+ae(z));0==se.length&&(se=this._platformLocation.pathname),this._platformLocation.replaceState(T,S,se)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(T=0){this._platformLocation.historyGo?.(T)}static#e=this.\u0275fac=function(S){return new(S||v)(b.LFG(Te),b.LFG(me,8))};static#t=this.\u0275prov=b.Yz7({token:v,factory:v.\u0275fac})}return v})(),Se=(()=>{class v{constructor(T){this._subject=new b.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=T;const S=this._locationStrategy.getBaseHref();this._basePath=function G(v){if(new RegExp("^(https?:)?//").test(v)){const[,T]=v.split(/\/\/[^\/]+/);return T}return v}(ee(Ct(S))),this._locationStrategy.onPopState(V=>{this._subject.emit({url:this.path(!0),pop:!0,state:V.state,type:V.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(T=!1){return this.normalize(this._locationStrategy.path(T))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(T,S=""){return this.path()==this.normalize(T+ae(S))}normalize(T){return v.stripTrailingSlash(function Et(v,P){if(!v||!P.startsWith(v))return P;const T=P.substring(v.length);return""===T||["/",";","?","#"].includes(T[0])?T:P}(this._basePath,Ct(T)))}prepareExternalUrl(T){return T&&"/"!==T[0]&&(T="/"+T),this._locationStrategy.prepareExternalUrl(T)}go(T,S="",V=null){this._locationStrategy.pushState(V,"",T,S),this._notifyUrlChangeListeners(this.prepareExternalUrl(T+ae(S)),V)}replaceState(T,S="",V=null){this._locationStrategy.replaceState(V,"",T,S),this._notifyUrlChangeListeners(this.prepareExternalUrl(T+ae(S)),V)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(T=0){this._locationStrategy.historyGo?.(T)}onUrlChange(T){return this._urlChangeListeners.push(T),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(S=>{this._notifyUrlChangeListeners(S.url,S.state)})),()=>{const S=this._urlChangeListeners.indexOf(T);this._urlChangeListeners.splice(S,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(T="",S){this._urlChangeListeners.forEach(V=>V(T,S))}subscribe(T,S,V){return this._subject.subscribe({next:T,error:S,complete:V})}static#e=this.normalizeQueryParams=ae;static#t=this.joinWithSlash=Y;static#n=this.stripTrailingSlash=ee;static#r=this.\u0275fac=function(S){return new(S||v)(b.LFG(ze))};static#i=this.\u0275prov=b.Yz7({token:v,factory:function(){return function qe(){return new Se((0,b.LFG)(ze))}()},providedIn:"root"})}return v})();function Ct(v){return v.replace(/\/index.html$/,"")}function $r(v,P){P=encodeURIComponent(P);for(const T of v.split(";")){const S=T.indexOf("="),[V,z]=-1==S?[T,""]:[T.slice(0,S),T.slice(S+1)];if(V.trim()===P)return decodeURIComponent(z)}return null}const Hr=/\s+/,ao=[];let An=(()=>{class v{constructor(T,S,V,z){this._iterableDiffers=T,this._keyValueDiffers=S,this._ngEl=V,this._renderer=z,this.initialClasses=ao,this.stateMap=new Map}set klass(T){this.initialClasses=null!=T?T.trim().split(Hr):ao}set ngClass(T){this.rawClass="string"==typeof T?T.trim().split(Hr):T}ngDoCheck(){for(const S of this.initialClasses)this._updateState(S,!0);const T=this.rawClass;if(Array.isArray(T)||T instanceof Set)for(const S of T)this._updateState(S,!0);else if(null!=T)for(const S of Object.keys(T))this._updateState(S,!!T[S]);this._applyStateDiff()}_updateState(T,S){const V=this.stateMap.get(T);void 0!==V?(V.enabled!==S&&(V.changed=!0,V.enabled=S),V.touched=!0):this.stateMap.set(T,{enabled:S,changed:!0,touched:!0})}_applyStateDiff(){for(const T of this.stateMap){const S=T[0],V=T[1];V.changed?(this._toggleClass(S,V.enabled),V.changed=!1):V.touched||(V.enabled&&this._toggleClass(S,!1),this.stateMap.delete(S)),V.touched=!1}}_toggleClass(T,S){(T=T.trim()).length>0&&T.split(Hr).forEach(V=>{S?this._renderer.addClass(this._ngEl.nativeElement,V):this._renderer.removeClass(this._ngEl.nativeElement,V)})}static#e=this.\u0275fac=function(S){return new(S||v)(b.Y36(b.ZZ4),b.Y36(b.aQg),b.Y36(b.SBq),b.Y36(b.Qsj))};static#t=this.\u0275dir=b.lG2({type:v,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0})}return v})();class Sn{constructor(P,T,S,V){this.$implicit=P,this.ngForOf=T,this.index=S,this.count=V}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let ct=(()=>{class v{set ngForOf(T){this._ngForOf=T,this._ngForOfDirty=!0}set ngForTrackBy(T){this._trackByFn=T}get ngForTrackBy(){return this._trackByFn}constructor(T,S,V){this._viewContainer=T,this._template=S,this._differs=V,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(T){T&&(this._template=T)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const T=this._ngForOf;!this._differ&&T&&(this._differ=this._differs.find(T).create(this.ngForTrackBy))}if(this._differ){const T=this._differ.diff(this._ngForOf);T&&this._applyChanges(T)}}_applyChanges(T){const S=this._viewContainer;T.forEachOperation((V,z,se)=>{if(null==V.previousIndex)S.createEmbeddedView(this._template,new Sn(V.item,this._ngForOf,-1,-1),null===se?void 0:se);else if(null==se)S.remove(null===z?void 0:z);else if(null!==z){const je=S.get(z);S.move(je,se),Mn(je,V)}});for(let V=0,z=S.length;V<z;V++){const je=S.get(V).context;je.index=V,je.count=z,je.ngForOf=this._ngForOf}T.forEachIdentityChange(V=>{Mn(S.get(V.currentIndex),V)})}static ngTemplateContextGuard(T,S){return!0}static#e=this.\u0275fac=function(S){return new(S||v)(b.Y36(b.s_b),b.Y36(b.Rgc),b.Y36(b.ZZ4))};static#t=this.\u0275dir=b.lG2({type:v,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}return v})();function Mn(v,P){v.context.$implicit=P.item}let Ds=(()=>{class v{constructor(T,S){this._viewContainer=T,this._context=new Gn,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=S}set ngIf(T){this._context.$implicit=this._context.ngIf=T,this._updateView()}set ngIfThen(T){Fn("ngIfThen",T),this._thenTemplateRef=T,this._thenViewRef=null,this._updateView()}set ngIfElse(T){Fn("ngIfElse",T),this._elseTemplateRef=T,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(T,S){return!0}static#e=this.\u0275fac=function(S){return new(S||v)(b.Y36(b.s_b),b.Y36(b.Rgc))};static#t=this.\u0275dir=b.lG2({type:v,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}return v})();class Gn{constructor(){this.$implicit=null,this.ngIf=null}}function Fn(v,P){if(P&&!P.createEmbeddedView)throw new Error(`${v} must be a TemplateRef, but received '${(0,b.AaK)(P)}'.`)}class Bo{createSubscription(P,T){return(0,b.rg0)(()=>P.subscribe({next:T,error:S=>{throw S}}))}dispose(P){(0,b.rg0)(()=>P.unsubscribe())}}class jo{createSubscription(P,T){return P.then(T,S=>{throw S})}dispose(P){}}const La=new jo,co=new Bo;let st=(()=>{class v{constructor(T){this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null,this._ref=T}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(T){return this._obj?T!==this._obj?(this._dispose(),this.transform(T)):this._latestValue:(T&&this._subscribe(T),this._latestValue)}_subscribe(T){this._obj=T,this._strategy=this._selectStrategy(T),this._subscription=this._strategy.createSubscription(T,S=>this._updateLatestValue(T,S))}_selectStrategy(T){if((0,b.QGY)(T))return La;if((0,b.F4k)(T))return co;throw function ai(v,P){return new b.vHH(2100,!1)}()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(T,S){T===this._obj&&(this._latestValue=S,this._ref.markForCheck())}static#e=this.\u0275fac=function(S){return new(S||v)(b.Y36(b.sBO,16))};static#t=this.\u0275pipe=b.Yjl({name:"async",type:v,pure:!1,standalone:!0})}return v})(),jt=(()=>{class v{static#e=this.\u0275fac=function(S){return new(S||v)};static#t=this.\u0275mod=b.oAB({type:v});static#n=this.\u0275inj=b.cJS({})}return v})();const ui="browser",ci="server";function Hi(v){return v===ui}function Gr(v){return v===ci}let zr=(()=>{class v{static#e=this.\u0275prov=(0,b.Yz7)({token:v,providedIn:"root",factory:()=>new li((0,b.LFG)(ve),window)})}return v})();class li{constructor(P,T){this.document=P,this.window=T,this.offset=()=>[0,0]}setOffset(P){this.offset=Array.isArray(P)?()=>P:P}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(P){this.supportsScrolling()&&this.window.scrollTo(P[0],P[1])}scrollToAnchor(P){if(!this.supportsScrolling())return;const T=function Ho(v,P){const T=v.getElementById(P)||v.getElementsByName(P)[0];if(T)return T;if("function"==typeof v.createTreeWalker&&v.body&&"function"==typeof v.body.attachShadow){const S=v.createTreeWalker(v.body,NodeFilter.SHOW_ELEMENT);let V=S.currentNode;for(;V;){const z=V.shadowRoot;if(z){const se=z.getElementById(P)||z.querySelector(`[name="${P}"]`);if(se)return se}V=S.nextNode()}}return null}(this.document,P);T&&(this.scrollToElement(T),T.focus())}setHistoryScrollRestoration(P){this.supportsScrolling()&&(this.window.history.scrollRestoration=P)}scrollToElement(P){const T=P.getBoundingClientRect(),S=T.left+this.window.pageXOffset,V=T.top+this.window.pageYOffset,z=this.offset();this.window.scrollTo(S-z[0],V-z[1])}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}class di{}},5879:(Qe,he,k)=>{k.d(he,{$8M:()=>f_,$WT:()=>$i,$Z:()=>cR,AFp:()=>Pf,ALo:()=>jv,AaK:()=>ae,CHM:()=>tw,CRH:()=>zC,DdM:()=>og,EJc:()=>bE,EiD:()=>H_,EpF:()=>OR,F$t:()=>Pp,F4k:()=>Cp,FYo:()=>xr,FiY:()=>p_,Gf:()=>aE,GfV:()=>UT,Gpc:()=>Ie,HDt:()=>CE,Hsn:()=>kR,JOm:()=>Rr,JVY:()=>lT,JZr:()=>Ct,KtG:()=>nw,L6k:()=>wS,LAX:()=>bS,LFG:()=>At,LSH:()=>G_,Lbi:()=>X_,Lck:()=>HP,MAs:()=>wp,MMx:()=>Fv,MR2:()=>td,NdJ:()=>Ld,Ojb:()=>ey,OlP:()=>kt,Oqu:()=>dv,P3R:()=>Cf,PXZ:()=>h0,Q6J:()=>xd,QGY:()=>Fd,Qsj:()=>GS,R0b:()=>or,RDi:()=>_S,Rgc:()=>Xd,SBq:()=>Rn,Sil:()=>DE,Suo:()=>gg,TTD:()=>Rt,TgZ:()=>Mc,VKq:()=>Bv,VuI:()=>Eh,W1O:()=>dE,X6Q:()=>kg,XFs:()=>Xe,Xpm:()=>Bo,Xq5:()=>up,Xts:()=>su,Y36:()=>uu,YKP:()=>RC,YNc:()=>xR,Yjl:()=>Vu,Yz7:()=>dt,Z0I:()=>Gt,ZZ4:()=>YE,_Bn:()=>SC,_UZ:()=>Nd,_c5:()=>R0,_uU:()=>eP,aQg:()=>QE,c2e:()=>Sg,cJS:()=>kn,cg1:()=>gv,dDg:()=>Mx,dqk:()=>Qt,eBb:()=>TS,eFA:()=>FE,eJc:()=>hE,ekj:()=>av,eoX:()=>l0,f3M:()=>xt,g9A:()=>xT,h0i:()=>yu,hGG:()=>mh,hij:()=>Up,iGM:()=>pg,ifc:()=>jr,ip1:()=>wE,jDz:()=>PC,kL8:()=>aC,lG2:()=>os,lcZ:()=>UC,lqb:()=>Hs,lri:()=>ME,mCW:()=>pc,n5z:()=>d_,oAB:()=>st,oxw:()=>Rp,pB0:()=>CS,q3G:()=>iu,qFp:()=>V0,qLn:()=>ua,qOj:()=>Fy,qZA:()=>Od,qzn:()=>fc,rWj:()=>ch,rg0:()=>V,s9C:()=>Vd,sBO:()=>Ox,s_b:()=>eh,soG:()=>qc,tb:()=>Qc,tp0:()=>oc,uIk:()=>cp,vHH:()=>G,vpe:()=>zs,wAp:()=>Ia,xp6:()=>Ey,z2F:()=>Da,z3N:()=>Us,zSh:()=>Y_,zs3:()=>fs});var b=k(8645),g=k(7394),H=k(5592),ue=k(3019),oe=k(5619),ve=k(2096),Te=k(3020),Le=k(4664),Me=k(3997);function Y(s){for(let o in s)if(s[o]===Y)return o;throw Error("Could not find renamed property on target object.")}function ee(s,o){for(const u in o)o.hasOwnProperty(u)&&!s.hasOwnProperty(u)&&(s[u]=o[u])}function ae(s){if("string"==typeof s)return s;if(Array.isArray(s))return"["+s.map(ae).join(", ")+"]";if(null==s)return""+s;if(s.overriddenName)return`${s.overriddenName}`;if(s.name)return`${s.name}`;const o=s.toString();if(null==o)return""+o;const u=o.indexOf("\n");return-1===u?o:o.substring(0,u)}function ze(s,o){return null==s||""===s?null===o?"":o:null==o||""===o?s:s+" "+o}const me=Y({__forward_ref__:Y});function Ie(s){return s.__forward_ref__=Ie,s.toString=function(){return ae(this())},s}function Q(s){return Se(s)?s():s}function Se(s){return"function"==typeof s&&s.hasOwnProperty(me)&&s.__forward_ref__===Ie}function qe(s){return s&&!!s.\u0275providers}const Ct="https://g.co/ng/security#xss";class G extends Error{constructor(o,u){super(function de(s,o){return`NG0${Math.abs(s)}${o?": "+o:""}`}(o,u)),this.code=o}}function ce(s){return"string"==typeof s?s:null==s?"":String(s)}function Ze(s,o){throw new G(-201,!1)}function Ge(s,o){null==s&&function Ae(s,o,u,l){throw new Error(`ASSERTION ERROR: ${s}`+(null==l?"":` [Expected=> ${u} ${l} ${o} <=Actual]`))}(o,s,null,"!=")}function dt(s){return{token:s.token,providedIn:s.providedIn||null,factory:s.factory,value:void 0}}function kn(s){return{providers:s.providers||[],imports:s.imports||[]}}function $n(s){return fr(s,xn)||fr(s,Vi)}function Gt(s){return null!==$n(s)}function fr(s,o){return s.hasOwnProperty(o)?s[o]:null}function ro(s){return s&&(s.hasOwnProperty(ii)||s.hasOwnProperty(Sl))?s[ii]:null}const xn=Y({\u0275prov:Y}),ii=Y({\u0275inj:Y}),Vi=Y({ngInjectableDef:Y}),Sl=Y({ngInjectorDef:Y});var Xe=function(s){return s[s.Default=0]="Default",s[s.Host=1]="Host",s[s.Self=2]="Self",s[s.SkipSelf=4]="SkipSelf",s[s.Optional=8]="Optional",s}(Xe||{});let bt;function Dn(s){const o=bt;return bt=s,o}function bi(s,o,u){const l=$n(s);return l&&"root"==l.providedIn?void 0===l.value?l.value=l.factory():l.value:u&Xe.Optional?null:void 0!==o?o:void Ze(ae(s))}const Qt=globalThis,si={},so="__NG_DI_FLAG__",Di="ngTempTokenPath",Lu=/\n/gm,er="__source";let pr;function qt(s){const o=pr;return pr=s,o}function We(s,o=Xe.Default){if(void 0===pr)throw new G(-203,!1);return null===pr?bi(s,void 0,o):pr.get(s,o&Xe.Optional?null:void 0,o)}function At(s,o=Xe.Default){return(function Dt(){return bt}()||We)(Q(s),o)}function xt(s,o=Xe.Default){return At(s,oo(o))}function oo(s){return typeof s>"u"||"number"==typeof s?s:0|(s.optional&&8)|(s.host&&1)|(s.self&&2)|(s.skipSelf&&4)}function is(s){const o=[];for(let u=0;u<s.length;u++){const l=Q(s[u]);if(Array.isArray(l)){if(0===l.length)throw new G(900,!1);let d,f=Xe.Default;for(let m=0;m<l.length;m++){const _=l[m],E=fn(_);"number"==typeof E?-1===E?d=_.token:f|=E:d=_}o.push(At(d,f))}else o.push(At(l))}return o}function Fo(s,o){return s[so]=o,s.prototype[so]=o,s}function fn(s){return s[so]}function gr(s){return{toString:s}.toString()}var oi=function(s){return s[s.OnPush=0]="OnPush",s[s.Default=1]="Default",s}(oi||{}),jr=function(s){return s[s.Emulated=0]="Emulated",s[s.None=2]="None",s[s.ShadowDom=3]="ShadowDom",s}(jr||{});const tr={},_t=[],Ai=Y({\u0275cmp:Y}),Si=Y({\u0275dir:Y}),Ui=Y({\u0275pipe:Y}),ss=Y({\u0275mod:Y}),Bi=Y({\u0275fac:Y}),$r=Y({__NG_ELEMENT_ID__:Y}),Hr=Y({__NG_ENV_ID__:Y});function ao(s,o,u){let l=s.length;for(;;){const d=s.indexOf(o,u);if(-1===d)return d;if(0===d||s.charCodeAt(d-1)<=32){const f=o.length;if(d+f===l||s.charCodeAt(d+f)<=32)return d}u=d+1}}function An(s,o,u){let l=0;for(;l<u.length;){const d=u[l];if("number"==typeof d){if(0!==d)break;l++;const f=u[l++],m=u[l++],_=u[l++];s.setAttribute(o,m,_,f)}else{const f=d,m=u[++l];Vo(f)?s.setProperty(o,f,m):s.setAttribute(o,f,m),l++}}return l}function Cs(s){return 3===s||4===s||6===s}function Vo(s){return 64===s.charCodeAt(0)}function Sn(s,o){if(null!==o&&0!==o.length)if(null===s||0===s.length)s=o.slice();else{let u=-1;for(let l=0;l<o.length;l++){const d=o[l];"number"==typeof d?u=d:0===u||ct(s,u,d,null,-1===u||2===u?o[++l]:null)}}return s}function ct(s,o,u,l,d){let f=0,m=s.length;if(-1===o)m=-1;else for(;f<s.length;){const _=s[f++];if("number"==typeof _){if(_===o){m=-1;break}if(_>o){m=f-1;break}}}for(;f<s.length;){const _=s[f];if("number"==typeof _)break;if(_===u){if(null===l)return void(null!==d&&(s[f+1]=d));if(l===s[f+1])return void(s[f+2]=d)}f++,null!==l&&f++,null!==d&&f++}-1!==m&&(s.splice(m,0,o),f=m+1),s.splice(f++,0,u),null!==l&&s.splice(f++,0,l),null!==d&&s.splice(f++,0,d)}const Mn="ng-template";function Hn(s,o,u){let l=0,d=!0;for(;l<s.length;){let f=s[l++];if("string"==typeof f&&d){const m=s[l++];if(u&&"class"===f&&-1!==ao(m.toLowerCase(),o,0))return!0}else{if(1===f){for(;l<s.length&&"string"==typeof(f=s[l++]);)if(f.toLowerCase()===o)return!0;return!1}"number"==typeof f&&(d=!1)}}return!1}function Ds(s){return 4===s.type&&s.value!==Mn}function Gn(s,o,u){return o===(4!==s.type||u?s.value:Mn)}function Fn(s,o,u){let l=4;const d=s.attrs||[],f=function As(s){for(let o=0;o<s.length;o++)if(Cs(s[o]))return o;return s.length}(d);let m=!1;for(let _=0;_<o.length;_++){const E=o[_];if("number"!=typeof E){if(!m)if(4&l){if(l=2|1&l,""!==E&&!Gn(s,E,u)||""===E&&1===o.length){if(Ln(l))return!1;m=!0}}else{const C=8&l?E:o[++_];if(8&l&&null!==s.attrs){if(!Hn(s.attrs,C,u)){if(Ln(l))return!1;m=!0}continue}const N=ji(8&l?"class":E,d,Ds(s),u);if(-1===N){if(Ln(l))return!1;m=!0;continue}if(""!==C){let B;B=N>f?"":d[N+1].toLowerCase();const j=8&l?B:null;if(j&&-1!==ao(j,C,0)||2&l&&C!==B){if(Ln(l))return!1;m=!0}}}}else{if(!m&&!Ln(l)&&!Ln(E))return!1;if(m&&Ln(E))continue;m=!1,l=E|1&l}}return Ln(l)||m}function Ln(s){return 0==(1&s)}function ji(s,o,u,l){if(null===o)return-1;let d=0;if(l||!u){let f=!1;for(;d<o.length;){const m=o[d];if(m===s)return d;if(3===m||6===m)f=!0;else{if(1===m||2===m){let _=o[++d];for(;"string"==typeof _;)_=o[++d];continue}if(4===m)break;if(0===m){d+=4;continue}}d+=f?1:2}return-1}return function vn(s,o){let u=s.indexOf(4);if(u>-1)for(u++;u<s.length;){const l=s[u];if("number"==typeof l)return-1;if(l===o)return u;u++}return-1}(o,s)}function Uo(s,o,u=!1){for(let l=0;l<o.length;l++)if(Fn(s,o[l],u))return!0;return!1}function uo(s,o){e:for(let u=0;u<o.length;u++){const l=o[u];if(s.length===l.length){for(let d=0;d<s.length;d++)if(s[d]!==l[d])continue e;return!0}}return!1}function kl(s,o){return s?":not("+o.trim()+")":o}function Fl(s){let o=s[0],u=1,l=2,d="",f=!1;for(;u<s.length;){let m=s[u];if("string"==typeof m)if(2&l){const _=s[++u];d+="["+m+(_.length>0?'="'+_+'"':"")+"]"}else 8&l?d+="."+m:4&l&&(d+=" "+m);else""!==d&&!Ln(m)&&(o+=kl(f,d),d=""),l=m,f=f||!Ln(l);u++}return""!==d&&(o+=kl(f,d)),o}function Bo(s){return gr(()=>{const o=Va(s),u={...o,decls:s.decls,vars:s.vars,template:s.template,consts:s.consts||null,ngContentSelectors:s.ngContentSelectors,onPush:s.changeDetection===oi.OnPush,directiveDefs:null,pipeDefs:null,dependencies:o.standalone&&s.dependencies||null,getStandaloneInjector:null,signals:s.signals??!1,data:s.data||{},encapsulation:s.encapsulation||jr.Emulated,styles:s.styles||_t,_:null,schemas:s.schemas||null,tView:null,id:""};Ua(u);const l=s.dependencies;return u.directiveDefs=Rs(l,!1),u.pipeDefs=Rs(l,!0),u.id=function Bu(s){let o=0;const u=[s.selectors,s.ngContentSelectors,s.hostVars,s.hostAttrs,s.consts,s.vars,s.decls,s.encapsulation,s.standalone,s.signals,s.exportAs,JSON.stringify(s.inputs),JSON.stringify(s.outputs),Object.getOwnPropertyNames(s.type.prototype),!!s.contentQueries,!!s.viewQuery].join("|");for(const d of u)o=Math.imul(31,o)+d.charCodeAt(0)<<0;return o+=2147483648,"c"+o}(u),u})}function La(s){return wt(s)||Ht(s)}function co(s){return null!==s}function st(s){return gr(()=>({type:s.type,bootstrap:s.bootstrap||_t,declarations:s.declarations||_t,imports:s.imports||_t,exports:s.exports||_t,transitiveCompileScopes:null,schemas:s.schemas||null,id:s.id||null}))}function $o(s,o){if(null==s)return tr;const u={};for(const l in s)if(s.hasOwnProperty(l)){let d=s[l],f=d;Array.isArray(d)&&(f=d[1],d=d[0]),u[d]=l,o&&(o[d]=f)}return u}function os(s){return gr(()=>{const o=Va(s);return Ua(o),o})}function Vu(s){return{type:s.type,name:s.name,factory:null,pure:!1!==s.pure,standalone:!0===s.standalone,onDestroy:s.type.prototype.ngOnDestroy||null}}function wt(s){return s[Ai]||null}function Ht(s){return s[Si]||null}function zn(s){return s[Ui]||null}function $i(s){const o=wt(s)||Ht(s)||zn(s);return null!==o&&o.standalone}function pn(s,o){const u=s[ss]||null;if(!u&&!0===o)throw new Error(`Type ${ae(s)} does not have '\u0275mod' property.`);return u}function Va(s){const o={};return{type:s.type,providersResolver:null,factory:null,hostBindings:s.hostBindings||null,hostVars:s.hostVars||0,hostAttrs:s.hostAttrs||null,contentQueries:s.contentQueries||null,declaredInputs:o,inputTransforms:null,inputConfig:s.inputs||tr,exportAs:s.exportAs||null,standalone:!0===s.standalone,signals:!0===s.signals,selectors:s.selectors||_t,viewQuery:s.viewQuery||null,features:s.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:$o(s.inputs,o),outputs:$o(s.outputs)}}function Ua(s){s.features?.forEach(o=>o(s))}function Rs(s,o){if(!s)return null;const u=o?zn:La;return()=>("function"==typeof s?s():s).map(l=>u(l)).filter(co)}const Zt=0,Re=1,nt=2,Bt=3,gn=4,Tt=5,an=6,Ps=7,jt=8,ui=9,ci=10,et=11,lo=12,Hi=13,Gr=14,un=15,Gi=16,ho=17,zr=18,li=19,Ho=20,Pi=21,di=22,hi=23,as=24,ft=25,Go=1,ju=2,mr=7,Ms=9,En=11;function nr(s){return Array.isArray(s)&&"object"==typeof s[Go]}function cn(s){return Array.isArray(s)&&!0===s[Go]}function zo(s){return 0!=(4&s.flags)}function zi(s){return s.componentOffset>-1}function po(s){return 1==(1&s.flags)}function Dr(s){return!!s.template}function Os(s){return 0!=(512&s[nt])}function qr(s,o){return s.hasOwnProperty(Bi)?s[Bi]:null}let rr=null,Vl=!1;function Wr(s){const o=rr;return rr=s,o}const Ul={version:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{}};function Um(s){if(!qo(s)||s.dirty){if(!s.producerMustRecompute(s)&&!jm(s))return void(s.dirty=!1);s.producerRecomputeValue(s),s.dirty=!1}}function Bl(s){s.dirty=!0,function Kh(s){if(void 0===s.liveConsumerNode)return;const o=Vl;Vl=!0;try{for(const u of s.liveConsumerNode)u.dirty||Bl(u)}finally{Vl=o}}(s),s.consumerMarkedDirty?.(s)}function qu(s){return s&&(s.nextProducerIndex=0),Wr(s)}function Bm(s,o){if(Wr(o),s&&void 0!==s.producerNode&&void 0!==s.producerIndexOfThis&&void 0!==s.producerLastReadVersion){if(qo(s))for(let u=s.nextProducerIndex;u<s.producerNode.length;u++)Ha(s.producerNode[u],s.producerIndexOfThis[u]);for(;s.producerNode.length>s.nextProducerIndex;)s.producerNode.pop(),s.producerLastReadVersion.pop(),s.producerIndexOfThis.pop()}}function jm(s){Ar(s);for(let o=0;o<s.producerNode.length;o++){const u=s.producerNode[o],l=s.producerLastReadVersion[o];if(l!==u.version||(Um(u),l!==u.version))return!0}return!1}function $a(s){if(Ar(s),qo(s))for(let o=0;o<s.producerNode.length;o++)Ha(s.producerNode[o],s.producerIndexOfThis[o]);s.producerNode.length=s.producerLastReadVersion.length=s.producerIndexOfThis.length=0,s.liveConsumerNode&&(s.liveConsumerNode.length=s.liveConsumerIndexOfThis.length=0)}function Ha(s,o){if(function Wo(s){s.liveConsumerNode??=[],s.liveConsumerIndexOfThis??=[]}(s),Ar(s),1===s.liveConsumerNode.length)for(let l=0;l<s.producerNode.length;l++)Ha(s.producerNode[l],s.producerIndexOfThis[l]);const u=s.liveConsumerNode.length-1;if(s.liveConsumerNode[o]=s.liveConsumerNode[u],s.liveConsumerIndexOfThis[o]=s.liveConsumerIndexOfThis[u],s.liveConsumerNode.length--,s.liveConsumerIndexOfThis.length--,o<s.liveConsumerNode.length){const l=s.liveConsumerIndexOfThis[o],d=s.liveConsumerNode[o];Ar(d),d.producerIndexOfThis[l]=o}}function qo(s){return s.consumerIsAlwaysLive||(s?.liveConsumerNode?.length??0)>0}function Ar(s){s.producerNode??=[],s.producerIndexOfThis??=[],s.producerLastReadVersion??=[]}let Wu=null;function V(s){const o=Wr(null);try{return s()}finally{Wr(o)}}const se=()=>{},je=(()=>({...Ul,consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!1,consumerMarkedDirty:s=>{s.schedule(s.ref)},hasRun:!1,cleanupFn:se}))();class Kt{constructor(o,u,l){this.previousValue=o,this.currentValue=u,this.firstChange=l}isFirstChange(){return this.firstChange}}function Rt(){return yt}function yt(s){return s.type.prototype.ngOnChanges&&(s.setInput=en),In}function In(){const s=Ns(this),o=s?.current;if(o){const u=s.previous;if(u===tr)s.previous=o;else for(let l in o)u[l]=o[l];s.current=null,this.ngOnChanges(o)}}function en(s,o,u,l){const d=this.declaredInputs[u],f=Ns(s)||function ks(s,o){return s[Vn]=o}(s,{previous:tr,current:null}),m=f.current||(f.current={}),_=f.previous,E=_[d];m[d]=new Kt(E&&E.currentValue,o,_===tr),s[l]=o}Rt.ngInherit=!0;const Vn="__ngSimpleChanges__";function Ns(s){return s[Vn]||null}const ir=function(s,o,u){};function St(s){for(;Array.isArray(s);)s=s[Zt];return s}function Yo(s,o){return St(o[s])}function Mi(s,o){return St(o[s.index])}function ZI(s,o){return s.data[o]}function za(s,o){return s[o]}function Sr(s,o){const u=o[s];return nr(u)?u:u[Zt]}function Wi(s,o){return null==o?null:s[o]}function JI(s){s[ho]=0}function lA(s){1024&s[nt]||(s[nt]|=1024,Qu(s,1))}function Yu(s){1024&s[nt]&&(s[nt]&=-1025,Qu(s,-1))}function Qu(s,o){let u=s[Bt];if(null===u)return;u[Tt]+=o;let l=u;for(u=u[Bt];null!==u&&(1===o&&1===l[Tt]||-1===o&&0===l[Tt]);)u[Tt]+=o,l=u,u=u[Bt]}const at={lFrame:wA(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function Ym(){return at.bindingsEnabled}function go(){return null!==at.skipHydrationRootTNode}function le(){return at.lFrame.lView}function Mt(){return at.lFrame.tView}function tw(s){return at.lFrame.contextLView=s,s[jt]}function nw(s){return at.lFrame.contextLView=null,s}function _r(){let s=Qm();for(;null!==s&&64===s.type;)s=s.parent;return s}function Qm(){return at.lFrame.currentTNode}function Oi(s,o){const u=at.lFrame;u.currentTNode=s,u.isParent=o}function Zh(){return at.lFrame.isParent}function Qo(){at.lFrame.isParent=!1}function Kr(){const s=at.lFrame;let o=s.bindingRootIndex;return-1===o&&(o=s.bindingRootIndex=s.tView.bindingStartIndex),o}function Zo(){return at.lFrame.bindingIndex++}function vA(s,o){const u=at.lFrame;u.bindingIndex=u.bindingRootIndex=s,Ju(o)}function Ju(s){at.lFrame.currentDirectiveIndex=s}function aw(){return at.lFrame.currentQueryIndex}function Jm(s){at.lFrame.currentQueryIndex=s}function IA(s){const o=s[Re];return 2===o.type?o.declTNode:1===o.type?s[an]:null}function uw(s,o,u){if(u&Xe.SkipSelf){let d=o,f=s;for(;!(d=d.parent,null!==d||u&Xe.Host||(d=IA(f),null===d||(f=f[Gr],10&d.type))););if(null===d)return!1;o=d,s=f}const l=at.lFrame=e_();return l.currentTNode=o,l.lView=s,!0}function Xm(s){const o=e_(),u=s[Re];at.lFrame=o,o.currentTNode=u.firstChild,o.lView=s,o.tView=u,o.contextLView=s,o.bindingIndex=u.bindingStartIndex,o.inI18n=!1}function e_(){const s=at.lFrame,o=null===s?null:s.child;return null===o?wA(s):o}function wA(s){const o={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:s,child:null,inI18n:!1};return null!==s&&(s.child=o),o}function t_(){const s=at.lFrame;return at.lFrame=s.parent,s.currentTNode=null,s.lView=null,s}const n_=t_;function r_(){const s=t_();s.isParent=!0,s.tView=null,s.selectedIndex=-1,s.contextLView=null,s.elementDepthCount=0,s.currentDirectiveIndex=-1,s.currentNamespace=null,s.bindingRootIndex=-1,s.bindingIndex=-1,s.currentQueryIndex=0}function Yr(){return at.lFrame.selectedIndex}function qa(s){at.lFrame.selectedIndex=s}function wn(){const s=at.lFrame;return ZI(s.tView,s.selectedIndex)}let dw=!0;function Gl(){return dw}function ls(s){dw=s}function zl(s,o){for(let u=o.directiveStart,l=o.directiveEnd;u<l;u++){const f=s.data[u].type.prototype,{ngAfterContentInit:m,ngAfterContentChecked:_,ngAfterViewInit:E,ngAfterViewChecked:C,ngOnDestroy:x}=f;m&&(s.contentHooks??=[]).push(-u,m),_&&((s.contentHooks??=[]).push(u,_),(s.contentCheckHooks??=[]).push(u,_)),E&&(s.viewHooks??=[]).push(-u,E),C&&((s.viewHooks??=[]).push(u,C),(s.viewCheckHooks??=[]).push(u,C)),null!=x&&(s.destroyHooks??=[]).push(u,x)}}function Jh(s,o,u){fw(s,o,3,u)}function Xh(s,o,u,l){(3&s[nt])===u&&fw(s,o,u,l)}function o_(s,o){let u=s[nt];(3&u)===o&&(u&=8191,u+=1,s[nt]=u)}function fw(s,o,u,l){const f=l??-1,m=o.length-1;let _=0;for(let E=void 0!==l?65535&s[ho]:0;E<m;E++)if("number"==typeof o[E+1]){if(_=o[E],null!=l&&_>=l)break}else o[E]<0&&(s[ho]+=65536),(_<f||-1==f)&&(CA(s,u,o,E),s[ho]=(4294901760&s[ho])+E+2),E++}function ql(s,o){ir(4,s,o);const u=Wr(null);try{o.call(s)}finally{Wr(u),ir(5,s,o)}}function CA(s,o,u,l){const d=u[l]<0,f=u[l+1],_=s[d?-u[l]:u[l]];d?s[nt]>>13<s[ho]>>16&&(3&s[nt])===o&&(s[nt]+=8192,ql(_,f)):ql(_,f)}const ec=-1;class mo{constructor(o,u,l){this.factory=o,this.resolving=!1,this.canSeeViewProviders=u,this.injectImpl=l}}function tc(s){return s!==ec}function Wl(s){return 32767&s}function nc(s,o){let u=function SA(s){return s>>16}(s),l=o;for(;u>0;)l=l[Gr],u--;return l}let gw=!0;function u_(s){const o=gw;return gw=s,o}const ef=255,c_=5;let e1=0;const ds={};function tf(s,o){const u=RA(s,o);if(-1!==u)return u;const l=o[Re];l.firstCreatePass&&(s.injectorIndex=o.length,mw(l.data,s),mw(o,null),mw(l.blueprint,null));const d=l_(s,o),f=s.injectorIndex;if(tc(d)){const m=Wl(d),_=nc(d,o),E=_[Re].data;for(let C=0;C<8;C++)o[f+C]=_[m+C]|E[m+C]}return o[f+8]=d,f}function mw(s,o){s.push(0,0,0,0,0,0,0,0,o)}function RA(s,o){return-1===s.injectorIndex||s.parent&&s.parent.injectorIndex===s.injectorIndex||null===o[s.injectorIndex+8]?-1:s.injectorIndex}function l_(s,o){if(s.parent&&-1!==s.parent.injectorIndex)return s.parent.injectorIndex;let u=0,l=null,d=o;for(;null!==d;){if(l=Tw(d),null===l)return ec;if(u++,d=d[Gr],-1!==l.injectorIndex)return l.injectorIndex|u<<16}return ec}function nf(s,o,u){!function _o(s,o,u){let l;"string"==typeof u?l=u.charCodeAt(0)||0:u.hasOwnProperty($r)&&(l=u[$r]),null==l&&(l=u[$r]=e1++);const d=l&ef;o.data[s+(d>>c_)]|=1<<d}(s,o,u)}function rf(s,o,u){if(u&Xe.Optional||void 0!==s)return s;Ze()}function yw(s,o,u,l){if(u&Xe.Optional&&void 0===l&&(l=null),!(u&(Xe.Self|Xe.Host))){const d=s[ui],f=Dn(void 0);try{return d?d.get(o,l,u&Xe.Optional):bi(o,l,u&Xe.Optional)}finally{Dn(f)}}return rf(l,0,u)}function vw(s,o,u,l=Xe.Default,d){if(null!==s){if(2048&o[nt]&&!(l&Xe.Self)){const m=function OA(s,o,u,l,d){let f=s,m=o;for(;null!==f&&null!==m&&2048&m[nt]&&!(512&m[nt]);){const _=PA(f,m,u,l|Xe.Self,ds);if(_!==ds)return _;let E=f.parent;if(!E){const C=m[Ho];if(C){const x=C.get(u,ds,l);if(x!==ds)return x}E=Tw(m),m=m[Gr]}f=E}return d}(s,o,u,l,ds);if(m!==ds)return m}const f=PA(s,o,u,l,ds);if(f!==ds)return f}return yw(o,u,l,d)}function PA(s,o,u,l,d){const f=function t1(s){if("string"==typeof s)return s.charCodeAt(0)||0;const o=s.hasOwnProperty($r)?s[$r]:void 0;return"number"==typeof o?o>=0?o&ef:MA:o}(u);if("function"==typeof f){if(!uw(o,s,l))return l&Xe.Host?rf(d,0,l):yw(o,u,l,d);try{let m;if(m=f(l),null!=m||l&Xe.Optional)return m;Ze()}finally{n_()}}else if("number"==typeof f){let m=null,_=RA(s,o),E=ec,C=l&Xe.Host?o[un][an]:null;for((-1===_||l&Xe.SkipSelf)&&(E=-1===_?l_(s,o):o[_+8],E!==ec&&Iw(l,!1)?(m=o[Re],_=Wl(E),o=nc(E,o)):_=-1);-1!==_;){const x=o[Re];if(xA(f,_,x.data)){const N=Ew(_,o,u,m,l,C);if(N!==ds)return N}E=o[_+8],E!==ec&&Iw(l,o[Re].data[_+8]===C)&&xA(f,_,o)?(m=x,_=Wl(E),o=nc(E,o)):_=-1}}return d}function Ew(s,o,u,l,d,f){const m=o[Re],_=m.data[s+8],x=sf(_,m,u,null==l?zi(_)&&gw:l!=m&&0!=(3&_.type),d&Xe.Host&&f===_);return null!==x?rc(o,m,x,_):ds}function sf(s,o,u,l,d){const f=s.providerIndexes,m=o.data,_=1048575&f,E=s.directiveStart,x=f>>20,B=d?_+x:s.directiveEnd;for(let j=l?_:_+x;j<B;j++){const Z=m[j];if(j<E&&u===Z||j>=E&&Z.type===u)return j}if(d){const j=m[E];if(j&&Dr(j)&&j.type===u)return E}return null}function rc(s,o,u,l){let d=s[u];const f=o.data;if(function pw(s){return s instanceof mo}(d)){const m=d;m.resolving&&function be(s,o){const u=o?`. Dependency path: ${o.join(" > ")} > ${s}`:"";throw new G(-200,`Circular dependency in DI detected for ${s}${u}`)}(function we(s){return"function"==typeof s?s.name||s.toString():"object"==typeof s&&null!=s&&"function"==typeof s.type?s.type.name||s.type.toString():ce(s)}(f[u]));const _=u_(m.canSeeViewProviders);m.resolving=!0;const C=m.injectImpl?Dn(m.injectImpl):null;uw(s,l,Xe.Default);try{d=s[u]=m.factory(void 0,f,s,l),o.firstCreatePass&&u>=l.directiveStart&&function hw(s,o,u){const{ngOnChanges:l,ngOnInit:d,ngDoCheck:f}=o.type.prototype;if(l){const m=yt(o);(u.preOrderHooks??=[]).push(s,m),(u.preOrderCheckHooks??=[]).push(s,m)}d&&(u.preOrderHooks??=[]).push(0-s,d),f&&((u.preOrderHooks??=[]).push(s,f),(u.preOrderCheckHooks??=[]).push(s,f))}(u,f[u],o)}finally{null!==C&&Dn(C),u_(_),m.resolving=!1,n_()}}return d}function xA(s,o,u){return!!(u[o+(s>>c_)]&1<<s)}function Iw(s,o){return!(s&Xe.Self||s&Xe.Host&&o)}class Zr{constructor(o,u){this._tNode=o,this._lView=u}get(o,u,l){return vw(this._tNode,this._lView,o,oo(l),u)}}function MA(){return new Zr(_r(),le())}function d_(s){return gr(()=>{const o=s.prototype.constructor,u=o[Bi]||h_(o),l=Object.prototype;let d=Object.getPrototypeOf(s.prototype).constructor;for(;d&&d!==l;){const f=d[Bi]||h_(d);if(f&&f!==u)return f;d=Object.getPrototypeOf(d)}return f=>new f})}function h_(s){return Se(s)?()=>{const o=h_(Q(s));return o&&o()}:qr(s)}function Tw(s){const o=s[Re],u=o.type;return 2===u?o.declTNode:1===u?s[an]:null}function f_(s){return function _w(s,o){if("class"===o)return s.classes;if("style"===o)return s.styles;const u=s.attrs;if(u){const l=u.length;let d=0;for(;d<l;){const f=u[d];if(Cs(f))break;if(0===f)d+=2;else if("number"==typeof f)for(d++;d<l&&"string"==typeof u[d];)d++;else{if(f===o)return u[d+1];d+=2}}}return null}(_r(),s)}const Wa="__parameters__";function Kl(s,o,u){return gr(()=>{const l=function bw(s){return function(...u){if(s){const l=s(...u);for(const d in l)this[d]=l[d]}}}(o);function d(...f){if(this instanceof d)return l.apply(this,f),this;const m=new d(...f);return _.annotation=m,_;function _(E,C,x){const N=E.hasOwnProperty(Wa)?E[Wa]:Object.defineProperty(E,Wa,{value:[]})[Wa];for(;N.length<=x;)N.push(null);return(N[x]=N[x]||[]).push(m),E}}return u&&(d.prototype=Object.create(u.prototype)),d.prototype.ngMetadataName=s,d.annotationCls=d,d})}function Ya(s,o){s.forEach(u=>Array.isArray(u)?Ya(u,o):o(u))}function Aw(s,o,u){o>=s.length?s.push(u):s.splice(o,0,u)}function cf(s,o){return o>=s.length-1?s.pop():s.splice(o,1)[0]}function Yl(s,o){const u=[];for(let l=0;l<s;l++)u.push(o);return u}function Ni(s,o,u){let l=Qa(s,o);return l>=0?s[1|l]=u:(l=~l,function lf(s,o,u,l){let d=s.length;if(d==o)s.push(u,l);else if(1===d)s.push(l,s[0]),s[0]=u;else{for(d--,s.push(s[d-1],s[d]);d>o;)s[d]=s[d-2],d--;s[o]=u,s[o+1]=l}}(s,l,o,u)),l}function df(s,o){const u=Qa(s,o);if(u>=0)return s[1|u]}function Qa(s,o){return function Sw(s,o,u){let l=0,d=s.length>>u;for(;d!==l;){const f=l+(d-l>>1),m=s[f<<u];if(o===m)return f<<u;m>o?d=f:l=f+1}return~(d<<u)}(s,o,1)}const p_=Fo(Kl("Optional"),8),oc=Fo(Kl("SkipSelf"),4);function mf(s){return 128==(128&s.flags)}var Rr=function(s){return s[s.Important=1]="Important",s[s.DashCase=2]="DashCase",s}(Rr||{});const T_=new Map;let b_=0;const C_="__ngContext__";function vr(s,o){nr(o)?(s[C_]=o[li],function Lw(s){T_.set(s[li],s)}(o)):s[C_]=o}let S_;function R_(s,o){return S_(s,o)}function Ki(s){const o=s[Bt];return cn(o)?o[Bt]:o}function oS(s){return qw(s[lo])}function zw(s){return qw(s[gn])}function qw(s){for(;null!==s&&!cn(s);)s=s[gn];return s}function Xo(s,o,u,l,d){if(null!=l){let f,m=!1;cn(l)?f=l:nr(l)&&(m=!0,l=l[Zt]);const _=St(l);0===s&&null!==u?null==d?Zw(o,u,_):eu(o,u,_,d||null,!0):1===s&&null!==u?eu(o,u,_,d||null,!0):2===s?function tu(s,o,u){const l=Ef(s,o);l&&function fS(s,o,u,l){s.removeChild(o,u,l)}(s,l,o,u)}(o,_,m):3===s&&o.destroyNode(_),null!=f&&function m1(s,o,u,l,d){const f=u[mr];f!==St(u)&&Xo(o,s,l,f,d);for(let _=En;_<u.length;_++){const E=u[_];Pr(E[Re],E,s,o,l,f)}}(o,s,f,u,d)}}function lc(s,o,u){return s.createElement(o,u)}function Yw(s,o){const u=s[Ms],l=u.indexOf(o);Yu(o),u.splice(l,1)}function vf(s,o){if(s.length<=En)return;const u=En+o,l=s[u];if(l){const d=l[Gi];null!==d&&d!==s&&Yw(d,l),o>0&&(s[u-1][gn]=l[gn]);const f=cf(s,En+o);!function Kw(s,o){Pr(s,o,o[et],2,null,null),o[Zt]=null,o[an]=null}(l[Re],l);const m=f[zr];null!==m&&m.detachView(f[Re]),l[Bt]=null,l[gn]=null,l[nt]&=-129}return l}function M_(s,o){if(!(256&o[nt])){const u=o[et];o[hi]&&$a(o[hi]),o[as]&&$a(o[as]),u.destroyNode&&Pr(s,o,u,3,null,null),function uS(s){let o=s[lo];if(!o)return O_(s[Re],s);for(;o;){let u=null;if(nr(o))u=o[lo];else{const l=o[En];l&&(u=l)}if(!u){for(;o&&!o[gn]&&o!==s;)nr(o)&&O_(o[Re],o),o=o[Bt];null===o&&(o=s),nr(o)&&O_(o[Re],o),u=o&&o[gn]}o=u}}(o)}}function O_(s,o){if(!(256&o[nt])){o[nt]&=-129,o[nt]|=256,function hS(s,o){let u;if(null!=s&&null!=(u=s.destroyHooks))for(let l=0;l<u.length;l+=2){const d=o[u[l]];if(!(d instanceof mo)){const f=u[l+1];if(Array.isArray(f))for(let m=0;m<f.length;m+=2){const _=d[f[m]],E=f[m+1];ir(4,_,E);try{E.call(_)}finally{ir(5,_,E)}}else{ir(4,d,f);try{f.call(d)}finally{ir(5,d,f)}}}}}(s,o),function dS(s,o){const u=s.cleanup,l=o[Ps];if(null!==u)for(let f=0;f<u.length-1;f+=2)if("string"==typeof u[f]){const m=u[f+3];m>=0?l[m]():l[-m].unsubscribe(),f+=2}else u[f].call(l[u[f+1]]);null!==l&&(o[Ps]=null);const d=o[Pi];if(null!==d){o[Pi]=null;for(let f=0;f<d.length;f++)(0,d[f])()}}(s,o),1===o[Re].type&&o[et].destroy();const u=o[Gi];if(null!==u&&cn(o[Bt])){u!==o[Bt]&&Yw(u,o);const l=o[zr];null!==l&&l.detachView(s)}!function eS(s){T_.delete(s[li])}(o)}}function N_(s,o,u){return function Qw(s,o,u){let l=o;for(;null!==l&&40&l.type;)l=(o=l).parent;if(null===l)return u[Zt];{const{componentOffset:d}=l;if(d>-1){const{encapsulation:f}=s.data[l.directiveStart+d];if(f===jr.None||f===jr.Emulated)return null}return Mi(l,u)}}(s,o.parent,u)}function eu(s,o,u,l,d){s.insertBefore(o,u,l,d)}function Zw(s,o,u){s.appendChild(o,u)}function Jw(s,o,u,l,d){null!==l?eu(s,o,u,l,d):Zw(s,o,u)}function Ef(s,o){return s.parentNode(o)}function Xw(s,o,u){return tT(s,o,u)}let k_,Jl,aT,ta,tT=function eT(s,o,u){return 40&s.type?Mi(s,u):null};function If(s,o,u,l){const d=N_(s,l,o),f=o[et],_=Xw(l.parent||o[an],l,o);if(null!=d)if(Array.isArray(u))for(let E=0;E<u.length;E++)Jw(f,d,u[E],_,!1);else Jw(f,d,u,_,!1);void 0!==k_&&k_(f,l,o,u,d)}function ea(s,o){if(null!==o){const u=o.type;if(3&u)return Mi(o,s);if(4&u)return vo(-1,s[o.index]);if(8&u){const l=o.child;if(null!==l)return ea(s,l);{const d=s[o.index];return cn(d)?vo(-1,d):St(d)}}if(32&u)return R_(o,s)()||St(s[o.index]);{const l=rT(s,o);return null!==l?Array.isArray(l)?l[0]:ea(Ki(s[un]),l):ea(s,o.next)}}return null}function rT(s,o){return null!==o?s[un][an].projection[o.projection]:null}function vo(s,o){const u=En+s+1;if(u<o.length){const l=o[u],d=l[Re].firstChild;if(null!==d)return ea(l,d)}return o[mr]}function sT(s,o,u,l,d,f,m){for(;null!=u;){const _=l[u.index],E=u.type;if(m&&0===o&&(_&&vr(St(_),l),u.flags|=2),32!=(32&u.flags))if(8&E)sT(s,o,u.child,l,d,f,!1),Xo(o,s,d,_,f);else if(32&E){const C=R_(u,l);let x;for(;x=C();)Xo(o,s,d,x,f);Xo(o,s,d,_,f)}else 16&E?gS(s,o,l,u,d,f):Xo(o,s,d,_,f);u=m?u.projectionNext:u.next}}function Pr(s,o,u,l,d,f){sT(u,l,s.firstChild,o,d,f,!1)}function gS(s,o,u,l,d,f){const m=u[un],E=m[an].projection[l.projection];if(Array.isArray(E))for(let C=0;C<E.length;C++)Xo(o,s,d,E[C],f);else{let C=E;const x=m[Bt];mf(l)&&(C.flags|=128),sT(s,o,C,x,d,f,!0)}}function oT(s,o,u){""===u?s.removeAttribute(o,"class"):s.setAttribute(o,"class",u)}function nu(s,o,u){const{mergedAttrs:l,classes:d,styles:f}=u;null!==l&&An(s,o,l),null!==d&&oT(s,o,d),null!==f&&function Io(s,o,u){s.setAttribute(o,"style",u)}(s,o,f)}function Xl(s){return function dc(){if(void 0===Jl&&(Jl=null,Qt.trustedTypes))try{Jl=Qt.trustedTypes.createPolicy("angular",{createHTML:s=>s,createScript:s=>s,createScriptURL:s=>s})}catch{}return Jl}()?.createHTML(s)||s}function _S(s){aT=s}function wf(s){return function ed(){if(void 0===ta&&(ta=null,Qt.trustedTypes))try{ta=Qt.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:s=>s,createScript:s=>s,createScriptURL:s=>s})}catch{}return ta}()?.createScriptURL(s)||s}class na{constructor(o){this.changingThisBreaksApplicationSecurity=o}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Ct})`}}class V_ extends na{getTypeName(){return"HTML"}}class cT extends na{getTypeName(){return"Style"}}class yS extends na{getTypeName(){return"Script"}}class vS extends na{getTypeName(){return"URL"}}class ES extends na{getTypeName(){return"ResourceURL"}}function Us(s){return s instanceof na?s.changingThisBreaksApplicationSecurity:s}function fc(s,o){const u=function IS(s){return s instanceof na&&s.getTypeName()||null}(s);if(null!=u&&u!==o){if("ResourceURL"===u&&"URL"===o)return!0;throw new Error(`Required a safe ${o}, got a ${u} (see ${Ct})`)}return u===o}function lT(s){return new V_(s)}function wS(s){return new cT(s)}function TS(s){return new yS(s)}function bS(s){return new vS(s)}function CS(s){return new ES(s)}class dT{constructor(o){this.inertDocumentHelper=o}getInertBodyElement(o){o="<body><remove></remove>"+o;try{const u=(new window.DOMParser).parseFromString(Xl(o),"text/html").body;return null===u?this.inertDocumentHelper.getInertBodyElement(o):(u.removeChild(u.firstChild),u)}catch{return null}}}class DS{constructor(o){this.defaultDoc=o,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(o){const u=this.inertDocument.createElement("template");return u.innerHTML=Xl(o),u}}const hT=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function pc(s){return(s=String(s)).match(hT)?s:"unsafe:"+s}function Bs(s){const o={};for(const u of s.split(","))o[u]=!0;return o}function ru(...s){const o={};for(const u of s)for(const l in u)u.hasOwnProperty(l)&&(o[l]=!0);return o}const Tf=Bs("area,br,col,hr,img,wbr"),fT=Bs("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),pT=Bs("rp,rt"),B_=ru(Tf,ru(fT,Bs("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),ru(pT,Bs("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),ru(pT,fT)),js=Bs("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),SS=ru(js,Bs("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Bs("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),RS=Bs("script,style,template");class PS{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(o){let u=o.firstChild,l=!0;for(;u;)if(u.nodeType===Node.ELEMENT_NODE?l=this.startElement(u):u.nodeType===Node.TEXT_NODE?this.chars(u.nodeValue):this.sanitizedSomething=!0,l&&u.firstChild)u=u.firstChild;else for(;u;){u.nodeType===Node.ELEMENT_NODE&&this.endElement(u);let d=this.checkClobberedElement(u,u.nextSibling);if(d){u=d;break}u=this.checkClobberedElement(u,u.parentNode)}return this.buf.join("")}startElement(o){const u=o.nodeName.toLowerCase();if(!B_.hasOwnProperty(u))return this.sanitizedSomething=!0,!RS.hasOwnProperty(u);this.buf.push("<"),this.buf.push(u);const l=o.attributes;for(let d=0;d<l.length;d++){const f=l.item(d),m=f.name,_=m.toLowerCase();if(!SS.hasOwnProperty(_)){this.sanitizedSomething=!0;continue}let E=f.value;js[_]&&(E=pc(E)),this.buf.push(" ",m,'="',$_(E),'"')}return this.buf.push(">"),!0}endElement(o){const u=o.nodeName.toLowerCase();B_.hasOwnProperty(u)&&!Tf.hasOwnProperty(u)&&(this.buf.push("</"),this.buf.push(u),this.buf.push(">"))}chars(o){this.buf.push($_(o))}checkClobberedElement(o,u){if(u&&(o.compareDocumentPosition(u)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${o.outerHTML}`);return u}}const j_=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,_T=/([^\#-~ |!])/g;function $_(s){return s.replace(/&/g,"&amp;").replace(j_,function(o){return"&#"+(1024*(o.charCodeAt(0)-55296)+(o.charCodeAt(1)-56320)+65536)+";"}).replace(_T,function(o){return"&#"+o.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let gc;function H_(s,o){let u=null;try{gc=gc||function U_(s){const o=new DS(s);return function AS(){try{return!!(new window.DOMParser).parseFromString(Xl(""),"text/html")}catch{return!1}}()?new dT(o):o}(s);let l=o?String(o):"";u=gc.getInertBodyElement(l);let d=5,f=l;do{if(0===d)throw new Error("Failed to sanitize html because the input is unstable");d--,l=f,f=u.innerHTML,u=gc.getInertBodyElement(l)}while(l!==f);return Xl((new PS).sanitizeChildren(bf(u)||u))}finally{if(u){const l=bf(u)||u;for(;l.firstChild;)l.removeChild(l.firstChild)}}}function bf(s){return"content"in s&&function yT(s){return s.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===s.nodeName}(s)?s.content:null}var iu=function(s){return s[s.NONE=0]="NONE",s[s.HTML=1]="HTML",s[s.STYLE=2]="STYLE",s[s.SCRIPT=3]="SCRIPT",s[s.URL=4]="URL",s[s.RESOURCE_URL=5]="RESOURCE_URL",s}(iu||{});function G_(s){const o=mc();return o?o.sanitize(iu.URL,s)||"":fc(s,"URL")?Us(s):pc(ce(s))}function vT(s){const o=mc();if(o)return wf(o.sanitize(iu.RESOURCE_URL,s)||"");if(fc(s,"ResourceURL"))return wf(Us(s));throw new G(904,!1)}function Cf(s,o,u){return function IT(s,o){return"src"===o&&("embed"===s||"frame"===s||"iframe"===s||"media"===s||"script"===s)||"href"===o&&("base"===s||"link"===s)?vT:G_}(o,u)(s)}function mc(){const s=le();return s&&s[ci].sanitizer}class kt{constructor(o,u){this._desc=o,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof u?this.__NG_ELEMENT_ID__=u:void 0!==u&&(this.\u0275prov=dt({token:this,providedIn:u.providedIn||"root",factory:u.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}const su=new kt("ENVIRONMENT_INITIALIZER"),TT=new kt("INJECTOR",-1),bT=new kt("INJECTOR_DEF_TYPES");class q_{get(o,u=si){if(u===si){const l=new Error(`NullInjectorError: No provider for ${ae(o)}!`);throw l.name="NullInjectorError",l}return u}}function td(s){return{\u0275providers:s}}function CT(...s){return{\u0275providers:DT(0,s),\u0275fromNgModule:!0}}function DT(s,...o){const u=[],l=new Set;let d;const f=m=>{u.push(m)};return Ya(o,m=>{const _=m;_c(_,f,[],l)&&(d||=[],d.push(_))}),void 0!==d&&AT(d,f),u}function AT(s,o){for(let u=0;u<s.length;u++){const{ngModule:l,providers:d}=s[u];W_(d,f=>{o(f,l)})}}function _c(s,o,u,l){if(!(s=Q(s)))return!1;let d=null,f=ro(s);const m=!f&&wt(s);if(f||m){if(m&&!m.standalone)return!1;d=s}else{const E=s.ngModule;if(f=ro(E),!f)return!1;d=E}const _=l.has(d);if(m){if(_)return!1;if(l.add(d),m.dependencies){const E="function"==typeof m.dependencies?m.dependencies():m.dependencies;for(const C of E)_c(C,o,u,l)}}else{if(!f)return!1;{if(null!=f.imports&&!_){let C;l.add(d);try{Ya(f.imports,x=>{_c(x,o,u,l)&&(C||=[],C.push(x))})}finally{}void 0!==C&&AT(C,o)}if(!_){const C=qr(d)||(()=>new d);o({provide:d,useFactory:C,deps:_t},d),o({provide:bT,useValue:d,multi:!0},d),o({provide:su,useValue:()=>At(d),multi:!0},d)}const E=f.providers;if(null!=E&&!_){const C=s;W_(E,x=>{o(x,C)})}}}return d!==s&&void 0!==s.providers}function W_(s,o){for(let u of s)qe(u)&&(u=u.\u0275providers),Array.isArray(u)?W_(u,o):o(u)}const yc=Y({provide:String,useValue:Y});function ra(s){return null!==s&&"object"==typeof s&&yc in s}function ou(s){return"function"==typeof s}const Y_=new kt("Set Injector scope."),$s={},PT={};let Df;function Af(){return void 0===Df&&(Df=new q_),Df}class Hs{}class Gs extends Hs{get destroyed(){return this._destroyed}constructor(o,u,l,d){super(),this.parent=u,this.source=l,this.scopes=d,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,id(o,m=>this.processProvider(m)),this.records.set(TT,ia(void 0,this)),d.has("environment")&&this.records.set(Hs,ia(void 0,this));const f=this.records.get(Y_);null!=f&&"string"==typeof f.value&&this.scopes.add(f.value),this.injectorDefTypes=new Set(this.get(bT.multi,_t,Xe.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const u of this._ngOnDestroyHooks)u.ngOnDestroy();const o=this._onDestroyHooks;this._onDestroyHooks=[];for(const u of o)u()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear()}}onDestroy(o){return this.assertNotDestroyed(),this._onDestroyHooks.push(o),()=>this.removeOnDestroy(o)}runInContext(o){this.assertNotDestroyed();const u=qt(this),l=Dn(void 0);try{return o()}finally{qt(u),Dn(l)}}get(o,u=si,l=Xe.Default){if(this.assertNotDestroyed(),o.hasOwnProperty(Hr))return o[Hr](this);l=oo(l);const f=qt(this),m=Dn(void 0);try{if(!(l&Xe.SkipSelf)){let E=this.records.get(o);if(void 0===E){const C=function J_(s){return"function"==typeof s||"object"==typeof s&&s instanceof kt}(o)&&$n(o);E=C&&this.injectableDefInScope(C)?ia(nd(o),$s):null,this.records.set(o,E)}if(null!=E)return this.hydrate(o,E)}return(l&Xe.Self?Af():this.parent).get(o,u=l&Xe.Optional&&u===si?null:u)}catch(_){if("NullInjectorError"===_.name){if((_[Di]=_[Di]||[]).unshift(ae(o)),f)throw _;return function Lo(s,o,u,l){const d=s[Di];throw o[er]&&d.unshift(o[er]),s.message=function bs(s,o,u,l=null){s=s&&"\n"===s.charAt(0)&&"\u0275"==s.charAt(1)?s.slice(2):s;let d=ae(o);if(Array.isArray(o))d=o.map(ae).join(" -> ");else if("object"==typeof o){let f=[];for(let m in o)if(o.hasOwnProperty(m)){let _=o[m];f.push(m+":"+("string"==typeof _?JSON.stringify(_):ae(_)))}d=`{${f.join(", ")}}`}return`${u}${l?"("+l+")":""}[${d}]: ${s.replace(Lu,"\n  ")}`}("\n"+s.message,d,u,l),s.ngTokenPath=d,s[Di]=null,s}(_,o,"R3InjectorError",this.source)}throw _}finally{Dn(m),qt(f)}}resolveInjectorInitializers(){const o=qt(this),u=Dn(void 0);try{const d=this.get(su.multi,_t,Xe.Self);for(const f of d)f()}finally{qt(o),Dn(u)}}toString(){const o=[],u=this.records;for(const l of u.keys())o.push(ae(l));return`R3Injector[${o.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new G(205,!1)}processProvider(o){let u=ou(o=Q(o))?o:Q(o&&o.provide);const l=function Sf(s){return ra(s)?ia(void 0,s.useValue):ia(Rf(s),$s)}(o);if(ou(o)||!0!==o.multi)this.records.get(u);else{let d=this.records.get(u);d||(d=ia(void 0,$s,!0),d.factory=()=>is(d.multi),this.records.set(u,d)),u=o,d.multi.push(o)}this.records.set(u,l)}hydrate(o,u){return u.value===$s&&(u.value=PT,u.value=u.factory()),"object"==typeof u.value&&u.value&&function rd(s){return null!==s&&"object"==typeof s&&"function"==typeof s.ngOnDestroy}(u.value)&&this._ngOnDestroyHooks.add(u.value),u.value}injectableDefInScope(o){if(!o.providedIn)return!1;const u=Q(o.providedIn);return"string"==typeof u?"any"===u||this.scopes.has(u):this.injectorDefTypes.has(u)}removeOnDestroy(o){const u=this._onDestroyHooks.indexOf(o);-1!==u&&this._onDestroyHooks.splice(u,1)}}function nd(s){const o=$n(s),u=null!==o?o.factory:qr(s);if(null!==u)return u;if(s instanceof kt)throw new G(204,!1);if(s instanceof Function)return function Q_(s){const o=s.length;if(o>0)throw Yl(o,"?"),new G(204,!1);const u=function ns(s){return s&&(s[xn]||s[Vi])||null}(s);return null!==u?()=>u.factory(s):()=>new s}(s);throw new G(204,!1)}function Rf(s,o,u){let l;if(ou(s)){const d=Q(s);return qr(d)||nd(d)}if(ra(s))l=()=>Q(s.useValue);else if(function ST(s){return!(!s||!s.useFactory)}(s))l=()=>s.useFactory(...is(s.deps||[]));else if(function K_(s){return!(!s||!s.useExisting)}(s))l=()=>At(Q(s.useExisting));else{const d=Q(s&&(s.useClass||s.provide));if(!function Z_(s){return!!s.deps}(s))return qr(d)||nd(d);l=()=>new d(...is(s.deps))}return l}function ia(s,o,u=!1){return{factory:s,value:o,multi:u?[]:void 0}}function id(s,o){for(const u of s)Array.isArray(u)?id(u,o):u&&qe(u)?id(u.\u0275providers,o):o(u)}const Pf=new kt("AppId",{providedIn:"root",factory:()=>NS}),NS="ng",xT=new kt("Platform Initializer"),X_=new kt("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),ey=new kt("CSP nonce",{providedIn:"root",factory:()=>function hc(){if(void 0!==aT)return aT;if(typeof document<"u")return document;throw new G(210,!1)}().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});let NT=(s,o,u)=>null;function ud(s,o,u=!1){return NT(s,o,u)}class US{}class LT{}class jS{resolveComponentFactory(o){throw function BS(s){const o=Error(`No component factory found for ${ae(s)}.`);return o.ngComponent=s,o}(o)}}let Vf=(()=>{class s{static#e=this.NULL=new jS}return s})();function $S(){return aa(_r(),le())}function aa(s,o){return new Rn(Mi(s,o))}let Rn=(()=>{class s{constructor(u){this.nativeElement=u}static#e=this.__NG_ELEMENT_ID__=$S}return s})();function HS(s){return s instanceof Rn?s.nativeElement:s}class xr{}let GS=(()=>{class s{constructor(){this.destroyNode=null}static#e=this.__NG_ELEMENT_ID__=()=>function VT(){const s=le(),u=Sr(_r().index,s);return(nr(u)?u:s)[et]}()}return s})(),zS=(()=>{class s{static#e=this.\u0275prov=dt({token:s,providedIn:"root",factory:()=>null})}return s})();class UT{constructor(o){this.full=o,this.major=o.split(".")[0],this.minor=o.split(".")[1],this.patch=o.split(".").slice(2).join(".")}}const qS=new UT("16.2.8"),dy={};function GT(s,o=null,u=null,l){const d=Bf(s,o,u,l);return d.resolveInjectorInitializers(),d}function Bf(s,o=null,u=null,l,d=new Set){const f=[u||_t,CT(s)];return l=l||("object"==typeof s?void 0:ae(s)),new Gs(f,o||Af(),l||null,d)}let fs=(()=>{class s{static#e=this.THROW_IF_NOT_FOUND=si;static#t=this.NULL=new q_;static create(u,l){if(Array.isArray(u))return GT({name:""},l,u,"");{const d=u.name??"";return GT({name:d},u.parent,u.providers,d)}}static#n=this.\u0275prov=dt({token:s,providedIn:"any",factory:()=>At(TT)});static#r=this.__NG_ELEMENT_ID__=-1}return s})();function ld(s){return s.ngOriginalError}class ua{constructor(){this._console=console}handleError(o){const u=this._findOriginalError(o);this._console.error("ERROR",o),u&&this._console.error("ORIGINAL ERROR",u)}_findOriginalError(o){let u=o&&ld(o);for(;u&&ld(u);)u=ld(u);return u||null}}function dd(s){return o=>{setTimeout(s,void 0,o)}}const zs=class XS extends b.x{constructor(o=!1){super(),this.__isAsync=o}emit(o){super.next(o)}subscribe(o,u,l){let d=o,f=u||(()=>null),m=l;if(o&&"object"==typeof o){const E=o;d=E.next?.bind(E),f=E.error?.bind(E),m=E.complete?.bind(E)}this.__isAsync&&(f=dd(f),d&&(d=dd(d)),m&&(m=dd(m)));const _=super.subscribe({next:d,error:f,complete:m});return o instanceof g.w0&&o.add(_),_}};function $f(...s){}class or{constructor({enableLongStackTrace:o=!1,shouldCoalesceEventChangeDetection:u=!1,shouldCoalesceRunChangeDetection:l=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new zs(!1),this.onMicrotaskEmpty=new zs(!1),this.onStable=new zs(!1),this.onError=new zs(!1),typeof Zone>"u")throw new G(908,!1);Zone.assertZonePatched();const d=this;d._nesting=0,d._outer=d._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(d._inner=d._inner.fork(new Zone.TaskTrackingZoneSpec)),o&&Zone.longStackTraceZoneSpec&&(d._inner=d._inner.fork(Zone.longStackTraceZoneSpec)),d.shouldCoalesceEventChangeDetection=!l&&u,d.shouldCoalesceRunChangeDetection=l,d.lastRequestAnimationFrameId=-1,d.nativeRequestAnimationFrame=function eR(){const s="function"==typeof Qt.requestAnimationFrame;let o=Qt[s?"requestAnimationFrame":"setTimeout"],u=Qt[s?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&o&&u){const l=o[Zone.__symbol__("OriginalDelegate")];l&&(o=l);const d=u[Zone.__symbol__("OriginalDelegate")];d&&(u=d)}return{nativeRequestAnimationFrame:o,nativeCancelAnimationFrame:u}}().nativeRequestAnimationFrame,function tR(s){const o=()=>{!function my(s){s.isCheckStableRunning||-1!==s.lastRequestAnimationFrameId||(s.lastRequestAnimationFrameId=s.nativeRequestAnimationFrame.call(Qt,()=>{s.fakeTopEventTask||(s.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{s.lastRequestAnimationFrameId=-1,hd(s),s.isCheckStableRunning=!0,gy(s),s.isCheckStableRunning=!1},void 0,()=>{},()=>{})),s.fakeTopEventTask.invoke()}),hd(s))}(s)};s._inner=s._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(u,l,d,f,m,_)=>{if(function nR(s){return!(!Array.isArray(s)||1!==s.length)&&!0===s[0].data?.__ignore_ng_zone__}(_))return u.invokeTask(d,f,m,_);try{return Hf(s),u.invokeTask(d,f,m,_)}finally{(s.shouldCoalesceEventChangeDetection&&"eventTask"===f.type||s.shouldCoalesceRunChangeDetection)&&o(),_y(s)}},onInvoke:(u,l,d,f,m,_,E)=>{try{return Hf(s),u.invoke(d,f,m,_,E)}finally{s.shouldCoalesceRunChangeDetection&&o(),_y(s)}},onHasTask:(u,l,d,f)=>{u.hasTask(d,f),l===d&&("microTask"==f.change?(s._hasPendingMicrotasks=f.microTask,hd(s),gy(s)):"macroTask"==f.change&&(s.hasPendingMacrotasks=f.macroTask))},onHandleError:(u,l,d,f)=>(u.handleError(d,f),s.runOutsideAngular(()=>s.onError.emit(f)),!1)})}(d)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!or.isInAngularZone())throw new G(909,!1)}static assertNotInAngularZone(){if(or.isInAngularZone())throw new G(909,!1)}run(o,u,l){return this._inner.run(o,u,l)}runTask(o,u,l,d){const f=this._inner,m=f.scheduleEventTask("NgZoneEvent: "+d,o,py,$f,$f);try{return f.runTask(m,u,l)}finally{f.cancelTask(m)}}runGuarded(o,u,l){return this._inner.runGuarded(o,u,l)}runOutsideAngular(o){return this._outer.run(o)}}const py={};function gy(s){if(0==s._nesting&&!s.hasPendingMicrotasks&&!s.isStable)try{s._nesting++,s.onMicrotaskEmpty.emit(null)}finally{if(s._nesting--,!s.hasPendingMicrotasks)try{s.runOutsideAngular(()=>s.onStable.emit(null))}finally{s.isStable=!0}}}function hd(s){s.hasPendingMicrotasks=!!(s._hasPendingMicrotasks||(s.shouldCoalesceEventChangeDetection||s.shouldCoalesceRunChangeDetection)&&-1!==s.lastRequestAnimationFrameId)}function Hf(s){s._nesting++,s.isStable&&(s.isStable=!1,s.onUnstable.emit(null))}function _y(s){s._nesting--,gy(s)}class WT{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new zs,this.onMicrotaskEmpty=new zs,this.onStable=new zs,this.onError=new zs}run(o,u,l){return o.apply(u,l)}runGuarded(o,u,l){return o.apply(u,l)}runOutsideAngular(o){return o()}runTask(o,u,l,d){return o.apply(u,l)}}const KT=new kt("",{providedIn:"root",factory:Gf});function Gf(){const s=xt(or);let o=!0;const u=new H.y(d=>{o=s.isStable&&!s.hasPendingMacrotasks&&!s.hasPendingMicrotasks,s.runOutsideAngular(()=>{d.next(o),d.complete()})}),l=new H.y(d=>{let f;s.runOutsideAngular(()=>{f=s.onStable.subscribe(()=>{or.assertNotInAngularZone(),queueMicrotask(()=>{!o&&!s.hasPendingMacrotasks&&!s.hasPendingMicrotasks&&(o=!0,d.next(!0))})})});const m=s.onUnstable.subscribe(()=>{or.assertInAngularZone(),o&&(o=!1,s.runOutsideAngular(()=>{d.next(!1)}))});return()=>{f.unsubscribe(),m.unsubscribe()}});return(0,ue.T)(u,l.pipe((0,Te.B)()))}function qs(s){return s instanceof Function?s():s}let ZT=(()=>{class s{constructor(){this.renderDepth=0,this.handler=null}begin(){this.handler?.validateBegin(),this.renderDepth++}end(){this.renderDepth--,0===this.renderDepth&&this.handler?.execute()}ngOnDestroy(){this.handler?.destroy(),this.handler=null}static#e=this.\u0275prov=dt({token:s,providedIn:"root",factory:()=>new s})}return s})();function fd(s){for(;s;){s[nt]|=64;const o=Ki(s);if(Os(s)&&!o)return s;s=o}return null}const XT=new kt("",{providedIn:"root",factory:()=>!1});let pd=null;function Kf(s,o){return s[o]??uR()}function oR(s,o){const u=uR();u.producerNode?.length&&(s[o]=pd,u.lView=s,pd=aR())}const O1={...Ul,consumerIsAlwaysLive:!0,consumerMarkedDirty:s=>{fd(s.lView)},lView:null};function aR(){return Object.create(O1)}function uR(){return pd??=aR(),pd}const pt={};function Ey(s){Iy(Mt(),le(),Yr()+s,!1)}function Iy(s,o,u,l){if(!l)if(3==(3&o[nt])){const f=s.preOrderCheckHooks;null!==f&&Jh(o,f,u)}else{const f=s.preOrderHooks;null!==f&&Xh(o,f,0,u)}qa(u)}function uu(s,o=Xe.Default){const u=le();return null===u?At(s,o):vw(_r(),u,Q(s),o)}function cR(){throw new Error("invalid")}function wy(s,o,u,l,d,f,m,_,E,C,x){const N=o.blueprint.slice();return N[Zt]=d,N[nt]=140|l,(null!==C||s&&2048&s[nt])&&(N[nt]|=2048),JI(N),N[Bt]=N[Gr]=s,N[jt]=u,N[ci]=m||s&&s[ci],N[et]=_||s&&s[et],N[ui]=E||s&&s[ui]||null,N[an]=f,N[li]=function Pt(){return b_++}(),N[di]=x,N[Ho]=C,N[un]=2==o.type?s[un]:N,N}function Ec(s,o,u,l,d){let f=s.data[o];if(null===f)f=function Yf(s,o,u,l,d){const f=Qm(),m=Zh(),E=s.data[o]=function nb(s,o,u,l,d,f){let m=o?o.injectorIndex:-1,_=0;return go()&&(_|=128),{type:u,index:l,insertBeforeIndex:null,injectorIndex:m,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:_,providerIndexes:0,value:d,attrs:f,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:o,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,m?f:f&&f.parent,u,o,l,d);return null===s.firstChild&&(s.firstChild=E),null!==f&&(m?null==f.child&&null!==E.parent&&(f.child=E):null===f.next&&(f.next=E,E.prev=f)),E}(s,o,u,l,d),function yA(){return at.lFrame.inI18n}()&&(f.flags|=32);else if(64&f.type){f.type=u,f.value=l,f.attrs=d;const m=function Hl(){const s=at.lFrame,o=s.currentTNode;return s.isParent?o:o.parent}();f.injectorIndex=null===m?-1:m.injectorIndex}return Oi(f,!0),f}function Qf(s,o,u,l){if(0===u)return-1;const d=o.length;for(let f=0;f<u;f++)o.push(l),s.blueprint.push(l),s.data.push(null);return d}function gd(s,o,u,l,d){const f=Kf(o,hi),m=Yr(),_=2&l;try{qa(-1),_&&o.length>ft&&Iy(s,o,ft,!1),ir(_?2:0,d);const C=_?f:null,x=qu(C);try{null!==C&&(C.dirty=!1),u(l,d)}finally{Bm(C,x)}}finally{_&&null===o[hi]&&oR(o,hi),qa(m),ir(_?3:1,d)}}function Ty(s,o,u){if(zo(o)){const l=Wr(null);try{const f=o.directiveEnd;for(let m=o.directiveStart;m<f;m++){const _=s.data[m];_.contentQueries&&_.contentQueries(1,u[m],m)}}finally{Wr(l)}}}function Ic(s,o,u){Ym()&&(function Co(s,o,u,l){const d=u.directiveStart,f=u.directiveEnd;zi(u)&&function pR(s,o,u){const l=Mi(o,s),d=mi(u);let m=16;u.signals?m=4096:u.onPush&&(m=64);const _=ep(s,wy(s,d,null,m,l,o,null,s[ci].rendererFactory.createRenderer(l,u),null,null,null));s[o.index]=_}(o,u,s.data[d+u.componentOffset]),s.firstCreatePass||tf(u,o),vr(l,o);const m=u.initialInputs;for(let _=d;_<f;_++){const E=s.data[_],C=rc(o,s,_,u);vr(C,o),null!==m&&xy(0,_-d,C,E,0,m),Dr(E)&&(Sr(u.index,o)[jt]=rc(o,s,_,u))}}(s,o,u,Mi(u,o)),64==(64&u.flags)&&Xf(s,o,u))}function Mr(s,o,u=Mi){const l=o.localNames;if(null!==l){let d=o.index+1;for(let f=0;f<l.length;f+=2){const m=l[f+1],_=-1===m?u(o,s):s[m];s[d++]=_}}}function mi(s){const o=s.tView;return null===o||o.incompleteFirstPass?s.tView=Zf(1,null,s.template,s.decls,s.vars,s.directiveDefs,s.pipeDefs,s.viewQuery,s.schemas,s.consts,s.id):o}function Zf(s,o,u,l,d,f,m,_,E,C,x){const N=ft+l,B=N+d,j=function wc(s,o){const u=[];for(let l=0;l<o;l++)u.push(l<s?null:pt);return u}(N,B),Z="function"==typeof C?C():C;return j[Re]={type:s,blueprint:j,template:u,queries:null,viewQuery:_,declTNode:o,data:j.slice().fill(null,N),bindingStartIndex:N,expandoStartIndex:B,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof f?f():f,pipeRegistry:"function"==typeof m?m():m,firstChild:null,schemas:E,consts:Z,incompleteFirstPass:!1,ssrId:x}}let ms=s=>null;function rb(s,o,u,l){for(let d in s)if(s.hasOwnProperty(d)){u=null===u?{}:u;const f=s[d];null===l?ib(u,o,d,f):l.hasOwnProperty(d)&&ib(u,o,l[d],f)}return u}function ib(s,o,u,l){s.hasOwnProperty(u)?s[u].push(o,l):s[u]=[o,l]}function _i(s,o,u,l,d,f,m,_){const E=Mi(o,u);let x,C=o.inputs;!_&&null!=C&&(x=C[l])?(Oy(s,u,x,l,d),zi(o)&&function lR(s,o){const u=Sr(o,s);16&u[nt]||(u[nt]|=64)}(u,o.index)):3&o.type&&(l=function Dy(s){return"class"===s?"className":"for"===s?"htmlFor":"formaction"===s?"formAction":"innerHtml"===s?"innerHTML":"readonly"===s?"readOnly":"tabindex"===s?"tabIndex":s}(l),d=null!=m?m(d,o.value||"",l):d,f.setProperty(E,l,d))}function ln(s,o,u,l){if(Ym()){const d=null===l?null:{"":-1},f=function hR(s,o){const u=s.directiveRegistry;let l=null,d=null;if(u)for(let f=0;f<u.length;f++){const m=u[f];if(Uo(o,m.selectors,!1))if(l||(l=[]),Dr(m))if(null!==m.findHostDirectiveDefs){const _=[];d=d||new Map,m.findHostDirectiveDefs(m,_,d),l.unshift(..._,m),cu(s,o,_.length)}else l.unshift(m),cu(s,o,0);else d=d||new Map,m.findHostDirectiveDefs?.(m,l,d),l.push(m)}return null===l?null:[l,d]}(s,u);let m,_;null===f?m=_=null:[m,_]=f,null!==m&&Jf(s,o,u,m,d,_),d&&function fR(s,o,u){if(o){const l=s.localNames=[];for(let d=0;d<o.length;d+=2){const f=u[o[d+1]];if(null==f)throw new G(-301,!1);l.push(o[d],f)}}}(u,l,d)}u.mergedAttrs=Sn(u.mergedAttrs,u.attrs)}function Jf(s,o,u,l,d,f){for(let C=0;C<l.length;C++)nf(tf(u,o),s,l[C].type);!function ab(s,o,u){s.flags|=1,s.directiveStart=o,s.directiveEnd=o+u,s.providerIndexes=o}(u,s.data.length,l.length);for(let C=0;C<l.length;C++){const x=l[C];x.providersResolver&&x.providersResolver(x)}let m=!1,_=!1,E=Qf(s,o,l.length,null);for(let C=0;C<l.length;C++){const x=l[C];u.mergedAttrs=Sn(u.mergedAttrs,x.hostAttrs),Ry(s,u,o,E,x),Sy(E,x,d),null!==x.contentQueries&&(u.flags|=4),(null!==x.hostBindings||null!==x.hostAttrs||0!==x.hostVars)&&(u.flags|=64);const N=x.type.prototype;!m&&(N.ngOnChanges||N.ngOnInit||N.ngDoCheck)&&((s.preOrderHooks??=[]).push(u.index),m=!0),!_&&(N.ngOnChanges||N.ngDoCheck)&&((s.preOrderCheckHooks??=[]).push(u.index),_=!0),E++}!function _d(s,o,u){const d=o.directiveEnd,f=s.data,m=o.attrs,_=[];let E=null,C=null;for(let x=o.directiveStart;x<d;x++){const N=f[x],B=u?u.get(N):null,Z=B?B.outputs:null;E=rb(N.inputs,x,E,B?B.inputs:null),C=rb(N.outputs,x,C,Z);const ge=null===E||null===m||Ds(o)?null:My(E,x,m);_.push(ge)}null!==E&&(E.hasOwnProperty("class")&&(o.flags|=8),E.hasOwnProperty("style")&&(o.flags|=16)),o.initialInputs=_,o.inputs=E,o.outputs=C}(s,u,f)}function Xf(s,o,u){const l=u.directiveStart,d=u.directiveEnd,f=u.index,m=function EA(){return at.lFrame.currentDirectiveIndex}();try{qa(f);for(let _=l;_<d;_++){const E=s.data[_],C=o[_];Ju(_),(null!==E.hostBindings||0!==E.hostVars||null!==E.hostAttrs)&&ob(E,C)}}finally{qa(-1),Ju(m)}}function ob(s,o){null!==s.hostBindings&&s.hostBindings(1,o)}function cu(s,o,u){o.componentOffset=u,(s.components??=[]).push(o.index)}function Sy(s,o,u){if(u){if(o.exportAs)for(let l=0;l<o.exportAs.length;l++)u[o.exportAs[l]]=s;Dr(o)&&(u[""]=s)}}function Ry(s,o,u,l,d){s.data[l]=d;const f=d.factory||(d.factory=qr(d.type)),m=new mo(f,Dr(d),uu);s.blueprint[l]=m,u[l]=m,function sb(s,o,u,l,d){const f=d.hostBindings;if(f){let m=s.hostBindingOpCodes;null===m&&(m=s.hostBindingOpCodes=[]);const _=~o.index;(function Ay(s){let o=s.length;for(;o>0;){const u=s[--o];if("number"==typeof u&&u<0)return u}return 0})(m)!=_&&m.push(_),m.push(u,l,f)}}(s,o,l,Qf(s,u,d.hostVars,pt),d)}function Yi(s,o,u,l,d,f){const m=Mi(s,o);!function Py(s,o,u,l,d,f,m){if(null==f)s.removeAttribute(o,d,u);else{const _=null==m?ce(f):m(f,l||"",d);s.setAttribute(o,d,_,u)}}(o[et],m,f,s.value,u,l,d)}function xy(s,o,u,l,d,f){const m=f[o];if(null!==m)for(let _=0;_<m.length;)ub(l,u,m[_++],m[_++],m[_++])}function ub(s,o,u,l,d){const f=Wr(null);try{const m=s.inputTransforms;null!==m&&m.hasOwnProperty(l)&&(d=m[l].call(o,d)),null!==s.setInput?s.setInput(o,d,u,l):o[l]=d}finally{Wr(f)}}function My(s,o,u){let l=null,d=0;for(;d<u.length;){const f=u[d];if(0!==f)if(5!==f){if("number"==typeof f)break;if(s.hasOwnProperty(f)){null===l&&(l=[]);const m=s[f];for(let _=0;_<m.length;_+=2)if(m[_]===o){l.push(f,m[_+1],u[d+1]);break}}d+=2}else d+=2;else d+=4}return l}function Tc(s,o,u,l){return[s,!0,!1,o,null,0,l,u,null,null,null]}function gR(s,o){const u=s.contentQueries;if(null!==u)for(let l=0;l<u.length;l+=2){const f=u[l+1];if(-1!==f){const m=s.data[f];Jm(u[l]),m.contentQueries(2,o[f],f)}}}function ep(s,o){return s[lo]?s[Hi][gn]=o:s[lo]=o,s[Hi]=o,o}function yd(s,o,u){Jm(0);const l=Wr(null);try{o(s,u)}finally{Wr(l)}}function vd(s){return s[Ps]||(s[Ps]=[])}function lb(s){return s.cleanup||(s.cleanup=[])}function tp(s,o){const u=s[ui],l=u?u.get(ua,null):null;l&&l.handleError(o)}function Oy(s,o,u,l,d){for(let f=0;f<u.length;){const m=u[f++],_=u[f++];ub(s.data[m],o[m],l,_,d)}}function db(s,o){const u=Sr(o,s),l=u[Re];!function Ed(s,o){for(let u=o.length;u<s.blueprint.length;u++)o.push(s.blueprint[u])}(l,u);const d=u[Zt];null!==d&&null===u[di]&&(u[di]=ud(d,u[ui])),Id(l,u,u[jt])}function Id(s,o,u){Xm(o);try{const l=s.viewQuery;null!==l&&yd(1,l,u);const d=s.template;null!==d&&gd(s,o,d,1,u),s.firstCreatePass&&(s.firstCreatePass=!1),s.staticContentQueries&&gR(s,o),s.staticViewQueries&&yd(2,s.viewQuery,u);const f=s.components;null!==f&&function mR(s,o){for(let u=0;u<o.length;u++)db(s,o[u])}(o,f)}catch(l){throw s.firstCreatePass&&(s.incompleteFirstPass=!0,s.firstCreatePass=!1),l}finally{o[nt]&=-5,r_()}}let np=(()=>{class s{constructor(){this.all=new Set,this.queue=new Map}create(u,l,d){const f=typeof Zone>"u"?null:Zone.current,m=function z(s,o,u){const l=Object.create(je);u&&(l.consumerAllowSignalWrites=!0),l.fn=s,l.schedule=o;const d=m=>{l.cleanupFn=m};return l.ref={notify:()=>Bl(l),run:()=>{if(l.dirty=!1,l.hasRun&&!jm(l))return;l.hasRun=!0;const m=qu(l);try{l.cleanupFn(),l.cleanupFn=se,l.fn(d)}finally{Bm(l,m)}},cleanup:()=>l.cleanupFn()},l.ref}(u,C=>{this.all.has(C)&&this.queue.set(C,f)},d);let _;this.all.add(m),m.notify();const E=()=>{m.cleanup(),_?.(),this.all.delete(m),this.queue.delete(m)};return _=l?.onDestroy(E),{destroy:E}}flush(){if(0!==this.queue.size)for(const[u,l]of this.queue)this.queue.delete(u),l?l.run(()=>u.run()):u.run()}get isQueueEmpty(){return 0===this.queue.size}static#e=this.\u0275prov=dt({token:s,providedIn:"root",factory:()=>new s})}return s})();function rp(s,o,u){let l=u?s.styles:null,d=u?s.classes:null,f=0;if(null!==o)for(let m=0;m<o.length;m++){const _=o[m];"number"==typeof _?f=_:1==f?d=ze(d,_):2==f&&(l=ze(l,_+": "+o[++m]+";"))}u?s.styles=l:s.stylesWithoutHost=l,u?s.classes=d:s.classesWithoutHost=d}function wd(s,o,u,l,d=!1){for(;null!==u;){const f=o[u.index];null!==f&&l.push(St(f)),cn(f)&&ip(f,l);const m=u.type;if(8&m)wd(s,o,u.child,l);else if(32&m){const _=R_(u,o);let E;for(;E=_();)l.push(E)}else if(16&m){const _=rT(o,u);if(Array.isArray(_))l.push(..._);else{const E=Ki(o[un]);wd(E[Re],E,_,l,!0)}}u=d?u.projectionNext:u.next}return l}function ip(s,o){for(let u=En;u<s.length;u++){const l=s[u],d=l[Re].firstChild;null!==d&&wd(l[Re],l,d,o)}s[mr]!==s[Zt]&&o.push(s[mr])}function ca(s,o,u,l=!0){const d=o[ci],f=d.rendererFactory,m=d.afterRenderEventManager;f.begin?.(),m?.begin();try{Ny(s,o,s.template,u)}catch(E){throw l&&tp(o,E),E}finally{f.end?.(),d.effectManager?.flush(),m?.end()}}function Ny(s,o,u,l){const d=o[nt];if(256!=(256&d)){o[ci].effectManager?.flush(),Xm(o);try{JI(o),function sw(s){return at.lFrame.bindingIndex=s}(s.bindingStartIndex),null!==u&&gd(s,o,u,2,l);const m=3==(3&d);if(m){const C=s.preOrderCheckHooks;null!==C&&Jh(o,C,null)}else{const C=s.preOrderHooks;null!==C&&Xh(o,C,0,null),o_(o,0)}if(function N1(s){for(let o=oS(s);null!==o;o=zw(o)){if(!o[ju])continue;const u=o[Ms];for(let l=0;l<u.length;l++){lA(u[l])}}}(o),Ks(o,2),null!==s.contentQueries&&gR(s,o),m){const C=s.contentCheckHooks;null!==C&&Jh(o,C)}else{const C=s.contentHooks;null!==C&&Xh(o,C,1),o_(o,1)}!function tb(s,o){const u=s.hostBindingOpCodes;if(null===u)return;const l=Kf(o,as);try{for(let d=0;d<u.length;d++){const f=u[d];if(f<0)qa(~f);else{const m=f,_=u[++d],E=u[++d];vA(_,m),l.dirty=!1;const C=qu(l);try{E(2,o[m])}finally{Bm(l,C)}}}}finally{null===o[as]&&oR(o,as),qa(-1)}}(s,o);const _=s.components;null!==_&&hu(o,_,0);const E=s.viewQuery;if(null!==E&&yd(2,E,l),m){const C=s.viewCheckHooks;null!==C&&Jh(o,C)}else{const C=s.viewHooks;null!==C&&Xh(o,C,2),o_(o,2)}!0===s.firstUpdatePass&&(s.firstUpdatePass=!1),o[nt]&=-73,Yu(o)}finally{r_()}}}function Ks(s,o){for(let u=oS(s);null!==u;u=zw(u))for(let l=En;l<u.length;l++)Td(u[l],o)}function hb(s,o,u){Td(Sr(o,s),u)}function Td(s,o){if(!function cA(s){return 128==(128&s[nt])}(s))return;const u=s[Re],l=s[nt];if(80&l&&0===o||1024&l||2===o)Ny(u,s,u.template,s[jt]);else if(s[Tt]>0){Ks(s,1);const d=u.components;null!==d&&hu(s,d,1)}}function hu(s,o,u){for(let l=0;l<o.length;l++)hb(s,o[l],u)}class bc{get rootNodes(){const o=this._lView,u=o[Re];return wd(u,o,u.firstChild,[])}constructor(o,u){this._lView=o,this._cdRefInjectingView=u,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[jt]}set context(o){this._lView[jt]=o}get destroyed(){return 256==(256&this._lView[nt])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const o=this._lView[Bt];if(cn(o)){const u=o[8],l=u?u.indexOf(this):-1;l>-1&&(vf(o,l),cf(u,l))}this._attachedToViewContainer=!1}M_(this._lView[Re],this._lView)}onDestroy(o){!function XI(s,o){if(256==(256&s[nt]))throw new G(911,!1);null===s[Pi]&&(s[Pi]=[]),s[Pi].push(o)}(this._lView,o)}markForCheck(){fd(this._cdRefInjectingView||this._lView)}detach(){this._lView[nt]&=-129}reattach(){this._lView[nt]|=128}detectChanges(){ca(this._lView[Re],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new G(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function aS(s,o){Pr(s,o,o[et],2,null,null)}(this._lView[Re],this._lView)}attachToAppRef(o){if(this._attachedToViewContainer)throw new G(902,!1);this._appRef=o}}class fb extends bc{constructor(o){super(o),this._view=o}detectChanges(){const o=this._view;ca(o[Re],o,o[jt],!1)}checkNoChanges(){}get context(){return null}}class sp extends Vf{constructor(o){super(),this.ngModule=o}resolveComponentFactory(o){const u=wt(o);return new Cc(u,this.ngModule)}}function ky(s){const o=[];for(let u in s)s.hasOwnProperty(u)&&o.push({propName:s[u],templateName:u});return o}class gb{constructor(o,u){this.injector=o,this.parentInjector=u}get(o,u,l){l=oo(l);const d=this.injector.get(o,dy,l);return d!==dy||u===dy?d:this.parentInjector.get(o,u,l)}}class Cc extends LT{get inputs(){const o=this.componentDef,u=o.inputTransforms,l=ky(o.inputs);if(null!==u)for(const d of l)u.hasOwnProperty(d.propName)&&(d.transform=u[d.propName]);return l}get outputs(){return ky(this.componentDef.outputs)}constructor(o,u){super(),this.componentDef=o,this.ngModule=u,this.componentType=o.type,this.selector=function Ll(s){return s.map(Fl).join(",")}(o.selectors),this.ngContentSelectors=o.ngContentSelectors?o.ngContentSelectors:[],this.isBoundToModule=!!u}create(o,u,l,d){let f=(d=d||this.ngModule)instanceof Hs?d:d?.injector;f&&null!==this.componentDef.getStandaloneInjector&&(f=this.componentDef.getStandaloneInjector(f)||f);const m=f?new gb(o,f):o,_=m.get(xr,null);if(null===_)throw new G(407,!1);const N={rendererFactory:_,sanitizer:m.get(zS,null),effectManager:m.get(np,null),afterRenderEventManager:m.get(ZT,null)},B=_.createRenderer(null,this.componentDef),j=this.componentDef.selectors[0][0]||"div",Z=l?function by(s,o,u,l){const f=l.get(XT,!1)||u===jr.ShadowDom,m=s.selectRootElement(o,f);return function De(s){ms(s)}(m),m}(B,l,this.componentDef.encapsulation,m):lc(B,j,function pb(s){const o=s.toLowerCase();return"svg"===o?"svg":"math"===o?"math":null}(j)),Ue=this.componentDef.signals?4608:this.componentDef.onPush?576:528;let re=null;null!==Z&&(re=ud(Z,m,!0));const He=Zf(0,null,null,1,0,null,null,null,null,null,null),gt=wy(null,He,null,Ue,null,null,N,B,m,null,re);let Ft,cr;Xm(gt);try{const Zi=this.componentDef;let Au,Sa=null;Zi.findHostDirectiveDefs?(Au=[],Sa=new Map,Zi.findHostDirectiveDefs(Zi,Au,Sa),Au.push(Zi)):Au=[Zi];const eM=function op(s,o){const u=s[Re],l=ft;return s[l]=o,Ec(u,l,2,"#host",null)}(gt,Z),tM=function k1(s,o,u,l,d,f,m){const _=d[Re];!function yR(s,o,u,l){for(const d of s)o.mergedAttrs=Sn(o.mergedAttrs,d.hostAttrs);null!==o.mergedAttrs&&(rp(o,o.mergedAttrs,!0),null!==u&&nu(l,u,o))}(l,s,o,m);let E=null;null!==o&&(E=ud(o,d[ui]));const C=f.rendererFactory.createRenderer(o,u);let x=16;u.signals?x=4096:u.onPush&&(x=64);const N=wy(d,mi(u),null,x,d[s.index],s,f,C,null,null,E);return _.firstCreatePass&&cu(_,s,l.length-1),ep(d,N),d[s.index]=N}(eM,Z,Zi,Au,gt,N,B);cr=ZI(He,ft),Z&&function _b(s,o,u,l){if(l)An(s,u,["ng-version",qS.full]);else{const{attrs:d,classes:f}=function ai(s){const o=[],u=[];let l=1,d=2;for(;l<s.length;){let f=s[l];if("string"==typeof f)2===d?""!==f&&o.push(f,s[++l]):8===d&&u.push(f);else{if(!Ln(d))break;d=f}l++}return{attrs:o,classes:u}}(o.selectors[0]);d&&An(s,u,d),f&&f.length>0&&oT(s,u,f.join(" "))}}(B,Zi,Z,l),void 0!==u&&function ER(s,o,u){const l=s.projection=[];for(let d=0;d<o.length;d++){const f=u[d];l.push(null!=f?Array.from(f):null)}}(cr,this.ngContentSelectors,u),Ft=function vR(s,o,u,l,d,f){const m=_r(),_=d[Re],E=Mi(m,d);Jf(_,d,m,u,null,l);for(let x=0;x<u.length;x++)vr(rc(d,_,m.directiveStart+x,m),d);Xf(_,d,m),E&&vr(E,d);const C=rc(d,_,m.directiveStart+m.componentOffset,m);if(s[jt]=d[jt]=C,null!==f)for(const x of f)x(C,o);return Ty(_,m,s),C}(tM,Zi,Au,Sa,gt,[yb]),Id(He,gt,null)}finally{r_()}return new mb(this.componentType,Ft,aa(cr,gt),gt,cr)}}class mb extends US{constructor(o,u,l,d,f){super(),this.location=l,this._rootLView=d,this._tNode=f,this.previousInputValues=null,this.instance=u,this.hostView=this.changeDetectorRef=new fb(d),this.componentType=o}setInput(o,u){const l=this._tNode.inputs;let d;if(null!==l&&(d=l[o])){if(this.previousInputValues??=new Map,this.previousInputValues.has(o)&&Object.is(this.previousInputValues.get(o),u))return;const f=this._rootLView;Oy(f[Re],f,d,o,u),this.previousInputValues.set(o,u),fd(Sr(this._tNode.index,f))}}get injector(){return new Zr(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(o){this.hostView.onDestroy(o)}}function yb(){const s=_r();zl(le()[Re],s)}function Fy(s){let o=function vb(s){return Object.getPrototypeOf(s.prototype).constructor}(s.type),u=!0;const l=[s];for(;o;){let d;if(Dr(s))d=o.\u0275cmp||o.\u0275dir;else{if(o.\u0275cmp)throw new G(903,!1);d=o.\u0275dir}if(d){if(u){l.push(d);const m=s;m.inputs=ap(s.inputs),m.inputTransforms=ap(s.inputTransforms),m.declaredInputs=ap(s.declaredInputs),m.outputs=ap(s.outputs);const _=d.hostBindings;_&&Un(s,_);const E=d.viewQuery,C=d.contentQueries;if(E&&IR(s,E),C&&wR(s,C),ee(s.inputs,d.inputs),ee(s.declaredInputs,d.declaredInputs),ee(s.outputs,d.outputs),null!==d.inputTransforms&&(null===m.inputTransforms&&(m.inputTransforms={}),ee(m.inputTransforms,d.inputTransforms)),Dr(d)&&d.data.animation){const x=s.data;x.animation=(x.animation||[]).concat(d.data.animation)}}const f=d.features;if(f)for(let m=0;m<f.length;m++){const _=f[m];_&&_.ngInherit&&_(s),_===Fy&&(u=!1)}}o=Object.getPrototypeOf(o)}!function Ly(s){let o=0,u=null;for(let l=s.length-1;l>=0;l--){const d=s[l];d.hostVars=o+=d.hostVars,d.hostAttrs=Sn(d.hostAttrs,u=Sn(u,d.hostAttrs))}}(l)}function ap(s){return s===tr?{}:s===_t?[]:s}function IR(s,o){const u=s.viewQuery;s.viewQuery=u?(l,d)=>{o(l,d),u(l,d)}:o}function wR(s,o){const u=s.contentQueries;s.contentQueries=u?(l,d,f)=>{o(l,d,f),u(l,d,f)}:o}function Un(s,o){const u=s.hostBindings;s.hostBindings=u?(l,d)=>{o(l,d),u(l,d)}:o}function up(s){const o=s.inputConfig,u={};for(const l in o)if(o.hasOwnProperty(l)){const d=o[l];Array.isArray(d)&&d[2]&&(u[l]=d[2])}s.inputTransforms=u}function Dc(s){return!!Uy(s)&&(Array.isArray(s)||!(s instanceof Map)&&Symbol.iterator in s)}function Uy(s){return null!==s&&("function"==typeof s||"object"==typeof s)}function Ys(s,o,u){return s[o]=u}function Or(s,o,u){return!Object.is(s[o],u)&&(s[o]=u,!0)}function cp(s,o,u,l){const d=le();return Or(d,Zo(),o)&&(Mt(),Yi(wn(),d,s,o,u,l)),cp}function Sc(s,o,u,l){return Or(s,Zo(),u)?o+ce(u)+l:pt}function xR(s,o,u,l,d,f,m,_){const E=le(),C=Mt(),x=s+ft,N=C.firstCreatePass?function Mb(s,o,u,l,d,f,m,_,E){const C=o.consts,x=Ec(o,s,4,m||null,Wi(C,_));ln(o,u,x,Wi(C,E)),zl(o,x);const N=x.tView=Zf(2,x,l,d,f,o.directiveRegistry,o.pipeRegistry,null,o.schemas,C,null);return null!==o.queries&&(o.queries.template(o,x),N.queries=o.queries.embeddedTView(x)),x}(x,C,E,o,u,l,d,f,m):C.data[x];Oi(N,!1);const B=Ip(C,E,N,s);Gl()&&If(C,E,B,N),vr(B,E),ep(E,E[x]=Tc(B,E,B,N)),po(N)&&Ic(C,E,N),null!=m&&Mr(E,N,_)}let Ip=function Pd(s,o,u,l){return ls(!0),o[et].createComment("")};function wp(s){return za(function rw(){return at.lFrame.contextLView}(),ft+s)}function xd(s,o,u){const l=le();return Or(l,Zo(),o)&&_i(Mt(),wn(),l,s,o,l[et],u,!1),xd}function Md(s,o,u,l,d){const m=d?"class":"style";Oy(s,u,o.inputs[m],m,l)}function Mc(s,o,u,l){const d=le(),f=Mt(),m=ft+s,_=d[et],E=f.firstCreatePass?function Tp(s,o,u,l,d,f){const m=o.consts,E=Ec(o,s,2,l,Wi(m,d));return ln(o,u,E,Wi(m,f)),null!==E.attrs&&rp(E,E.attrs,!1),null!==E.mergedAttrs&&rp(E,E.mergedAttrs,!0),null!==o.queries&&o.queries.elementStart(o,E),E}(m,f,d,o,u,l):f.data[m],C=Ky(f,d,E,_,o,s);d[m]=C;const x=po(E);return Oi(E,!0),nu(_,C,E),32!=(32&E.flags)&&Gl()&&If(f,d,C,E),0===function hA(){return at.lFrame.elementDepthCount}()&&vr(C,d),function KN(){at.lFrame.elementDepthCount++}(),x&&(Ic(f,d,E),Ty(f,E,d)),null!==l&&Mr(d,E),Mc}function Od(){let s=_r();Zh()?Qo():(s=s.parent,Oi(s,!1));const o=s;(function Zu(s){return at.skipHydrationRootTNode===s})(o)&&function _A(){at.skipHydrationRootTNode=null}(),function fA(){at.lFrame.elementDepthCount--}();const u=Mt();return u.firstCreatePass&&(zl(u,s),zo(s)&&u.queries.elementEnd(s)),null!=o.classesWithoutHost&&function DA(s){return 0!=(8&s.flags)}(o)&&Md(u,o,le(),o.classesWithoutHost,!0),null!=o.stylesWithoutHost&&function Qr(s){return 0!=(16&s.flags)}(o)&&Md(u,o,le(),o.stylesWithoutHost,!1),Od}function Nd(s,o,u,l){return Mc(s,o,u,l),Od(),Nd}let Ky=(s,o,u,l,d,f)=>(ls(!0),lc(l,d,function lw(){return at.lFrame.currentNamespace}()));function OR(){return le()}function Fd(s){return!!s&&"function"==typeof s.then}function Cp(s){return!!s&&"function"==typeof s.subscribe}function Ld(s,o,u,l){const d=le(),f=Mt(),m=_r();return function Ap(s,o,u,l,d,f,m){const _=po(l),C=s.firstCreatePass&&lb(s),x=o[jt],N=vd(o);let B=!0;if(3&l.type||m){const ge=Mi(l,o),Pe=m?m(ge):ge,Ue=N.length,re=m?gt=>m(St(gt[l.index])):l.index;let He=null;if(!m&&_&&(He=function Oc(s,o,u,l){const d=s.cleanup;if(null!=d)for(let f=0;f<d.length-1;f+=2){const m=d[f];if(m===u&&d[f+1]===l){const _=o[Ps],E=d[f+2];return _.length>E?_[E]:null}"string"==typeof m&&(f+=2)}return null}(s,o,d,l.index)),null!==He)(He.__ngLastListenerFn__||He).__ngNextListenerFn__=f,He.__ngLastListenerFn__=f,B=!1;else{f=NR(l,o,x,f,!1);const gt=u.listen(Pe,d,f);N.push(f,gt),C&&C.push(d,re,Ue,Ue+1)}}else f=NR(l,o,x,f,!1);const j=l.outputs;let Z;if(B&&null!==j&&(Z=j[d])){const ge=Z.length;if(ge)for(let Pe=0;Pe<ge;Pe+=2){const Ft=o[Z[Pe]][Z[Pe+1]].subscribe(f),cr=N.length;N.push(f,Ft),C&&C.push(d,l.index,cr,-(cr+1))}}}(f,d,d[et],m,s,o,l),Ld}function Sp(s,o,u,l){try{return ir(6,o,u),!1!==u(l)}catch(d){return tp(s,d),!1}finally{ir(7,o,u)}}function NR(s,o,u,l,d){return function f(m){if(m===Function)return l;fd(s.componentOffset>-1?Sr(s.index,o):o);let E=Sp(o,u,l,m),C=f.__ngNextListenerFn__;for(;C;)E=Sp(o,u,C,m)&&E,C=C.__ngNextListenerFn__;return d&&!1===E&&m.preventDefault(),E}}function Rp(s=1){return function TA(s){return(at.lFrame.contextLView=function bA(s,o){for(;s>0;)o=o[Gr],s--;return o}(s,at.lFrame.contextLView))[jt]}(s)}function $1(s,o){let u=null;const l=function Ri(s){const o=s.attrs;if(null!=o){const u=o.indexOf(5);if(!(1&u))return o[u+1]}return null}(s);for(let d=0;d<o.length;d++){const f=o[d];if("*"!==f){if(null===l?Uo(s,f,!0):uo(l,f))return d}else u=d}return u}function Pp(s){const o=le()[un][an];if(!o.projection){const l=o.projection=Yl(s?s.length:1,null),d=l.slice();let f=o.child;for(;null!==f;){const m=s?$1(f,s):0;null!==m&&(d[m]?d[m].projectionNext=f:l[m]=f,d[m]=f),f=f.next}}}function kR(s,o=0,u){const l=le(),d=Mt(),f=Ec(d,ft+s,16,null,u||null);null===f.projection&&(f.projection=o),Qo(),(!l[di]||go())&&32!=(32&f.flags)&&function Eo(s,o,u){gS(o[et],0,o,u,N_(s,u,o),Xw(u.parent||o[an],u,o))}(d,l,f)}function Vd(s,o,u){return ev(s,"",o,"",u),Vd}function ev(s,o,u,l,d){const f=le(),m=Sc(f,o,u,l);return m!==pt&&_i(Mt(),wn(),f,s,m,f[et],d,!1),ev}function tv(s,o){return s<<17|o<<2}function fu(s){return s>>17&32767}function Ud(s){return 2|s}function Nc(s){return(131068&s)>>2}function Bd(s,o){return-131069&s|o<<2}function jd(s){return 1|s}function $R(s,o,u,l,d){const f=s[u+1],m=null===o;let _=l?fu(f):Nc(f),E=!1;for(;0!==_&&(!1===E||m);){const x=s[_+1];iv(s[_],o)&&(E=!0,s[_+1]=l?jd(x):Ud(x)),_=l?fu(x):Nc(x)}E&&(s[u+1]=l?Ud(f):jd(f))}function iv(s,o){return null===s||null==o||(Array.isArray(s)?s[1]:s)===o||!(!Array.isArray(s)||"string"!=typeof o)&&Qa(s,o)>=0}function av(s,o){return function _s(s,o,u,l){const d=le(),f=Mt(),m=function Vs(s){const o=at.lFrame,u=o.bindingIndex;return o.bindingIndex=o.bindingIndex+s,u}(2);f.firstUpdatePass&&function Ea(s,o,u,l){const d=s.data;if(null===d[u+1]){const f=d[Yr()],m=function Fp(s,o){return o>=s.expandoStartIndex}(s,u);(function jb(s,o){return 0!=(s.flags&(o?8:16))})(f,l)&&null===o&&!m&&(o=!1),o=function uv(s,o,u,l){const d=function Zm(s){const o=at.lFrame.currentDirectiveIndex;return-1===o?null:s[o]}(s);let f=l?o.residualClasses:o.residualStyles;if(null===d)0===(l?o.classBindings:o.styleBindings)&&(u=$d(u=Bb(null,s,o,u,l),o.attrs,l),f=null);else{const m=o.directiveStylingLast;if(-1===m||s[m]!==d)if(u=Bb(d,s,o,u,l),null===f){let E=function q1(s,o,u){const l=u?o.classBindings:o.styleBindings;if(0!==Nc(l))return s[fu(l)]}(s,o,l);void 0!==E&&Array.isArray(E)&&(E=Bb(null,s,o,E[1],l),E=$d(E,o.attrs,l),function QR(s,o,u,l){s[fu(u?o.classBindings:o.styleBindings)]=l}(s,o,l,E))}else f=function ZR(s,o,u){let l;const d=o.directiveEnd;for(let f=1+o.directiveStylingLast;f<d;f++)l=$d(l,s[f].hostAttrs,u);return $d(l,o.attrs,u)}(s,o,l)}return void 0!==f&&(l?o.residualClasses=f:o.residualStyles=f),u}(d,f,o,l),function jR(s,o,u,l,d,f){let m=f?o.classBindings:o.styleBindings,_=fu(m),E=Nc(m);s[l]=u;let x,C=!1;if(Array.isArray(u)?(x=u[1],(null===x||Qa(u,x)>0)&&(C=!0)):x=u,d)if(0!==E){const B=fu(s[_+1]);s[l+1]=tv(B,_),0!==B&&(s[B+1]=Bd(s[B+1],l)),s[_+1]=function BR(s,o){return 131071&s|o<<17}(s[_+1],l)}else s[l+1]=tv(_,0),0!==_&&(s[_+1]=Bd(s[_+1],l)),_=l;else s[l+1]=tv(E,0),0===_?_=l:s[E+1]=Bd(s[E+1],l),E=l;C&&(s[l+1]=Ud(s[l+1])),$R(s,x,l,!0),$R(s,x,l,!1),function rv(s,o,u,l,d){const f=d?s.residualClasses:s.residualStyles;null!=f&&"string"==typeof o&&Qa(f,o)>=0&&(u[l+1]=jd(u[l+1]))}(o,x,s,l,f),m=tv(_,E),f?o.classBindings=m:o.styleBindings=m}(d,f,o,u,m,l)}}(f,s,m,l),o!==pt&&Or(d,m,o)&&function Hd(s,o,u,l,d,f,m,_){if(!(3&o.type))return;const E=s.data,C=E[_+1],x=function H1(s){return 1==(1&s)}(C)?lv(E,o,u,d,Nc(C),m):void 0;Vp(x)||(Vp(f)||function nv(s){return 2==(2&s)}(C)&&(f=lv(E,null,u,d,_,m)),function mS(s,o,u,l,d){if(o)d?s.addClass(u,l):s.removeClass(u,l);else{let f=-1===l.indexOf("-")?void 0:Rr.DashCase;null==d?s.removeStyle(u,l,f):("string"==typeof d&&d.endsWith("!important")&&(d=d.slice(0,-10),f|=Rr.Important),s.setStyle(u,l,d,f))}}(l,m,Yo(Yr(),u),d,f))}(f,f.data[Yr()],d,d[et],s,d[m+1]=function XR(s,o){return null==s||""===s||("string"==typeof o?s+=o:"object"==typeof s&&(s=ae(Us(s)))),s}(o,u),l,m)}(s,o,null,!0),av}function Bb(s,o,u,l,d){let f=null;const m=u.directiveEnd;let _=u.directiveStylingLast;for(-1===_?_=u.directiveStart:_++;_<m&&(f=o[_],l=$d(l,f.hostAttrs,d),f!==s);)_++;return null!==s&&(u.directiveStylingLast=_),l}function $d(s,o,u){const l=u?1:2;let d=-1;if(null!==o)for(let f=0;f<o.length;f++){const m=o[f];"number"==typeof m?d=m:d===l&&(Array.isArray(s)||(s=void 0===s?[]:["",s]),Ni(s,m,!!u||o[++f]))}return void 0===s?null:s}function lv(s,o,u,l,d,f){const m=null===o;let _;for(;d>0;){const E=s[d],C=Array.isArray(E),x=C?E[1]:E,N=null===x;let B=u[d+1];B===pt&&(B=N?_t:void 0);let j=N?df(B,l):x===l?B:void 0;if(C&&!Vp(j)&&(j=df(E,l)),Vp(j)&&(_=j,m))return _;const Z=s[d+1];d=m?fu(Z):Nc(Z)}if(null!==o){let E=f?o.residualClasses:o.residualStyles;null!=E&&(_=df(E,l))}return _}function Vp(s){return void 0!==s}function eP(s,o=""){const u=le(),l=Mt(),d=s+ft,f=l.firstCreatePass?Ec(l,d,1,o,null):l.data[d],m=$b(l,u,f,o,s);u[d]=m,Gl()&&If(l,u,m,f),Oi(f,!1)}let $b=(s,o,u,l,d)=>(ls(!0),function Zl(s,o){return s.createText(o)}(o[et],l));function dv(s){return Up("",s,""),dv}function Up(s,o,u){const l=le(),d=Sc(l,s,o,u);return d!==pt&&function Do(s,o,u){const l=Yo(o,s);!function Ww(s,o,u){s.setValue(o,u)}(s[et],l,u)}(l,Yr(),d),Up}const pu=void 0;var cP=["en",[["a","p"],["AM","PM"],pu],[["AM","PM"],pu,pu],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],pu,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],pu,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",pu,"{1} 'at' {0}",pu],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function uP(s){const u=Math.floor(Math.abs(s)),l=s.toString().replace(/^[^.]*\.?/,"").length;return 1===u&&0===l?1:5}];let Fc={};function gv(s){const o=function Q1(s){return s.toLowerCase().replace(/_/g,"-")}(s);let u=zp(o);if(u)return u;const l=o.split("-")[0];if(u=zp(l),u)return u;if("en"===l)return cP;throw new G(701,!1)}function aC(s){return gv(s)[Ia.PluralCase]}function zp(s){return s in Fc||(Fc[s]=Qt.ng&&Qt.ng.common&&Qt.ng.common.locales&&Qt.ng.common.locales[s]),Fc[s]}var Ia=function(s){return s[s.LocaleId=0]="LocaleId",s[s.DayPeriodsFormat=1]="DayPeriodsFormat",s[s.DayPeriodsStandalone=2]="DayPeriodsStandalone",s[s.DaysFormat=3]="DaysFormat",s[s.DaysStandalone=4]="DaysStandalone",s[s.MonthsFormat=5]="MonthsFormat",s[s.MonthsStandalone=6]="MonthsStandalone",s[s.Eras=7]="Eras",s[s.FirstDayOfWeek=8]="FirstDayOfWeek",s[s.WeekendRange=9]="WeekendRange",s[s.DateFormat=10]="DateFormat",s[s.TimeFormat=11]="TimeFormat",s[s.DateTimeFormat=12]="DateTimeFormat",s[s.NumberSymbols=13]="NumberSymbols",s[s.NumberFormats=14]="NumberFormats",s[s.CurrencyCode=15]="CurrencyCode",s[s.CurrencySymbol=16]="CurrencySymbol",s[s.CurrencyName=17]="CurrencyName",s[s.Currencies=18]="Currencies",s[s.Directionality=19]="Directionality",s[s.PluralCase=20]="PluralCase",s[s.ExtraData=21]="ExtraData",s}(Ia||{});const wa="en-US";let Ta=wa;function CC(s,o,u,l,d){if(s=Q(s),Array.isArray(s))for(let f=0;f<s.length;f++)CC(s[f],o,u,l,d);else{const f=Mt(),m=le(),_=_r();let E=ou(s)?s:Q(s.provide);const C=Rf(s),x=1048575&_.providerIndexes,N=_.directiveStart,B=_.providerIndexes>>20;if(ou(s)||!s.multi){const j=new mo(C,d,uu),Z=Xp(E,o,d?x:x+B,N);-1===Z?(nf(tf(_,m),f,E),DC(f,s,o.length),o.push(E),_.directiveStart++,_.directiveEnd++,d&&(_.providerIndexes+=1048576),u.push(j),m.push(j)):(u[Z]=j,m[Z]=j)}else{const j=Xp(E,o,x+B,N),Z=Xp(E,o,x,x+B),Pe=Z>=0&&u[Z];if(d&&!Pe||!d&&!(j>=0&&u[j])){nf(tf(_,m),f,E);const Ue=function $P(s,o,u,l,d){const f=new mo(s,u,uu);return f.multi=[],f.index=o,f.componentProviders=0,Jp(f,d,l&&!u),f}(d?AC:eg,u.length,d,l,C);!d&&Pe&&(u[Z].providerFactory=Ue),DC(f,s,o.length,0),o.push(E),_.directiveStart++,_.directiveEnd++,d&&(_.providerIndexes+=1048576),u.push(Ue),m.push(Ue)}else DC(f,s,j>-1?j:Z,Jp(u[d?Z:j],C,!d&&l));!d&&l&&Pe&&u[Z].componentProviders++}}}function DC(s,o,u,l){const d=ou(o),f=function RT(s){return!!s.useClass}(o);if(d||f){const E=(f?Q(o.useClass):o).prototype.ngOnDestroy;if(E){const C=s.destroyHooks||(s.destroyHooks=[]);if(!d&&o.multi){const x=C.indexOf(u);-1===x?C.push(u,[l,E]):C[x+1].push(l,E)}else C.push(u,E)}}}function Jp(s,o,u){return u&&s.componentProviders++,s.multi.push(o)-1}function Xp(s,o,u,l){for(let d=u;d<l;d++)if(o[d]===s)return d;return-1}function eg(s,o,u,l){return tg(this.multi,[])}function AC(s,o,u,l){const d=this.multi;let f;if(this.providerFactory){const m=this.providerFactory.componentProviders,_=rc(u,u[Re],this.providerFactory.index,l);f=_.slice(0,m),tg(d,f);for(let E=m;E<_.length;E++)f.push(_[E])}else f=[],tg(d,f);return f}function tg(s,o){for(let u=0;u<s.length;u++)o.push((0,s[u])());return o}function SC(s,o=[]){return u=>{u.providersResolver=(l,d)=>function bC(s,o,u){const l=Mt();if(l.firstCreatePass){const d=Dr(s);CC(u,l.data,l.blueprint,d,!0),CC(o,l.data,l.blueprint,d,!1)}}(l,d?d(s):s,o)}}class yu{}class RC{}function HP(s,o){return new Ov(s,o??null,[])}class Ov extends yu{constructor(o,u,l){super(),this._parent=u,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new sp(this);const d=pn(o);this._bootstrapComponents=qs(d.bootstrap),this._r3Injector=Bf(o,u,[{provide:yu,useValue:this},{provide:Vf,useValue:this.componentFactoryResolver},...l],ae(o),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(o)}get injector(){return this._r3Injector}destroy(){const o=this._r3Injector;!o.destroyed&&o.destroy(),this.destroyCbs.forEach(u=>u()),this.destroyCbs=null}onDestroy(o){this.destroyCbs.push(o)}}class Nv extends RC{constructor(o){super(),this.moduleType=o}create(o){return new Ov(this.moduleType,o,[])}}class kv extends yu{constructor(o){super(),this.componentFactoryResolver=new sp(this),this.instance=null;const u=new Gs([...o.providers,{provide:yu,useValue:this},{provide:Vf,useValue:this.componentFactoryResolver}],o.parent||Af(),o.debugName,new Set(["environment"]));this.injector=u,o.runEnvironmentInitializers&&u.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(o){this.injector.onDestroy(o)}}function Fv(s,o,u=null){return new kv({providers:s,parent:o,debugName:u,runEnvironmentInitializers:!0}).injector}let qP=(()=>{class s{constructor(u){this._injector=u,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(u){if(!u.standalone)return null;if(!this.cachedInjectors.has(u)){const l=DT(0,u.type),d=l.length>0?Fv([l],this._injector,`Standalone[${u.type.name}]`):null;this.cachedInjectors.set(u,d)}return this.cachedInjectors.get(u)}ngOnDestroy(){try{for(const u of this.cachedInjectors.values())null!==u&&u.destroy()}finally{this.cachedInjectors.clear()}}static#e=this.\u0275prov=dt({token:s,providedIn:"environment",factory:()=>new s(At(Hs))})}return s})();function PC(s){s.getStandaloneInjector=o=>o.get(qP).getOrCreateStandaloneInjector(s)}function og(s,o,u){const l=Kr()+s,d=le();return d[l]===pt?Ys(d,l,u?o.call(u):o()):function Ac(s,o){return s[o]}(d,l)}function Bv(s,o,u,l){return Zd(le(),Kr(),s,o,u,l)}function Zd(s,o,u,l,d,f){const m=o+u;return Or(s,m,d)?Ys(s,m+1,f?l.call(f,d):l(d)):function Qd(s,o){const u=s[o];return u===pt?void 0:u}(s,m+1)}function jv(s,o){const u=Mt();let l;const d=s+ft;u.firstCreatePass?(l=function ix(s,o){if(o)for(let u=o.length-1;u>=0;u--){const l=o[u];if(s===l.name)return l}}(o,u.pipeRegistry),u.data[d]=l,l.onDestroy&&(u.destroyHooks??=[]).push(d,l.onDestroy)):l=u.data[d];const f=l.factory||(l.factory=qr(l.type)),_=Dn(uu);try{const E=u_(!1),C=f();return u_(E),function j1(s,o,u,l){u>=s.data.length&&(s.data[u]=null,s.blueprint[u]=null),o[u]=l}(u,le(),d,C),C}finally{Dn(_)}}function UC(s,o,u){const l=s+ft,d=le(),f=za(d,l);return function jc(s,o){return s[Re].data[o].pure}(d,l)?Zd(d,Kr(),o,f.transform,u,f):f.transform(u)}function Gv(){return this._results[Symbol.iterator]()}class Jd{static#e=Symbol.iterator;get changes(){return this._changes||(this._changes=new zs)}constructor(o=!1){this._emitDistinctChangesOnly=o,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const u=Jd.prototype;u[Symbol.iterator]||(u[Symbol.iterator]=Gv)}get(o){return this._results[o]}map(o){return this._results.map(o)}filter(o){return this._results.filter(o)}find(o){return this._results.find(o)}reduce(o,u){return this._results.reduce(o,u)}forEach(o){this._results.forEach(o)}some(o){return this._results.some(o)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(o,u){const l=this;l.dirty=!1;const d=function hs(s){return s.flat(Number.POSITIVE_INFINITY)}(o);(this._changesDetected=!function uf(s,o,u){if(s.length!==o.length)return!1;for(let l=0;l<s.length;l++){let d=s[l],f=o[l];if(u&&(d=u(d),f=u(f)),f!==d)return!1}return!0}(l._results,d,u))&&(l._results=d,l.length=d.length,l.last=d[this.length-1],l.first=d[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}function qv(s,o,u,l=!0){const d=o[Re];if(function cS(s,o,u,l){const d=En+l,f=u.length;l>0&&(u[d-1][gn]=o),l<f-En?(o[gn]=u[d],Aw(u,En+l,o)):(u.push(o),o[gn]=null),o[Bt]=u;const m=o[Gi];null!==m&&u!==m&&function lS(s,o){const u=s[Ms];o[un]!==o[Bt][Bt][un]&&(s[ju]=!0),null===u?s[Ms]=[o]:u.push(o)}(m,o);const _=o[zr];null!==_&&_.insertView(s),o[nt]|=128}(d,o,s,u),l){const f=vo(u,s),m=o[et],_=Ef(m,s[mr]);null!==_&&function Xa(s,o,u,l,d,f){l[Zt]=d,l[an]=o,Pr(s,l,u,1,d,f)}(d,s[an],m,o,_,f)}}let Xd=(()=>{class s{static#e=this.__NG_ELEMENT_ID__=Wv}return s})();const Er=Xd,ox=class extends Er{constructor(o,u,l){super(),this._declarationLView=o,this._declarationTContainer=u,this.elementRef=l}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(o,u){return this.createEmbeddedViewImpl(o,u)}createEmbeddedViewImpl(o,u,l){const d=function zv(s,o,u,l){const d=o.tView,_=wy(s,d,u,4096&s[nt]?4096:16,null,o,null,null,null,l?.injector??null,l?.hydrationInfo??null);_[Gi]=s[o.index];const C=s[zr];return null!==C&&(_[zr]=C.createEmbeddedView(d)),Id(d,_,u),_}(this._declarationLView,this._declarationTContainer,o,{injector:u,hydrationInfo:l});return new bc(d)}};function Wv(){return ug(_r(),le())}function ug(s,o){return 4&s.type?new ox(o,s,aa(s,o)):null}let eh=(()=>{class s{static#e=this.__NG_ELEMENT_ID__=Zv}return s})();function Zv(){return $C(_r(),le())}const cx=eh,hg=class extends cx{constructor(o,u,l){super(),this._lContainer=o,this._hostTNode=u,this._hostLView=l}get element(){return aa(this._hostTNode,this._hostLView)}get injector(){return new Zr(this._hostTNode,this._hostLView)}get parentInjector(){const o=l_(this._hostTNode,this._hostLView);if(tc(o)){const u=nc(o,this._hostLView),l=Wl(o);return new Zr(u[Re].data[l+8],u)}return new Zr(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(o){const u=Jv(this._lContainer);return null!==u&&u[o]||null}get length(){return this._lContainer.length-En}createEmbeddedView(o,u,l){let d,f;"number"==typeof l?d=l:null!=l&&(d=l.index,f=l.injector);const _=o.createEmbeddedViewImpl(u||{},f,null);return this.insertImpl(_,d,false),_}createComponent(o,u,l,d,f){const m=o&&!function Jo(s){return"function"==typeof s}(o);let _;if(m)_=u;else{const ge=u||{};_=ge.index,l=ge.injector,d=ge.projectableNodes,f=ge.environmentInjector||ge.ngModuleRef}const E=m?o:new Cc(wt(o)),C=l||this.parentInjector;if(!f&&null==E.ngModule){const Pe=(m?C:this.parentInjector).get(Hs,null);Pe&&(f=Pe)}wt(E.componentType??{});const j=E.create(C,d,null,f);return this.insertImpl(j.hostView,_,false),j}insert(o,u){return this.insertImpl(o,u,!1)}insertImpl(o,u,l){const d=o._lView;if(function Ku(s){return cn(s[Bt])}(d)){const E=this.indexOf(o);if(-1!==E)this.detach(E);else{const C=d[Bt],x=new hg(C,C[an],C[Bt]);x.detach(x.indexOf(o))}}const m=this._adjustIndex(u),_=this._lContainer;return qv(_,d,m,!l),o.attachToViewContainerRef(),Aw(th(_),m,o),o}move(o,u){return this.insert(o,u)}indexOf(o){const u=Jv(this._lContainer);return null!==u?u.indexOf(o):-1}remove(o){const u=this._adjustIndex(o,-1),l=vf(this._lContainer,u);l&&(cf(th(this._lContainer),u),M_(l[Re],l))}detach(o){const u=this._adjustIndex(o,-1),l=vf(this._lContainer,u);return l&&null!=cf(th(this._lContainer),u)?new bc(l):null}_adjustIndex(o,u=0){return o??this.length+u}};function Jv(s){return s[8]}function th(s){return s[8]||(s[8]=[])}function $C(s,o){let u;const l=o[s.index];return cn(l)?u=l:(u=Tc(l,o,null,s),o[s.index]=u,ep(o,u)),HC(u,o,s,l),new hg(u,s,o)}let HC=function eE(s,o,u,l){if(s[mr])return;let d;d=8&u.type?St(l):function Xv(s,o){const u=s[et],l=u.createComment(""),d=Mi(o,s);return eu(u,Ef(u,d),l,function pS(s,o){return s.nextSibling(o)}(u,d),!1),l}(o,u),s[mr]=d};class tE{constructor(o){this.queryList=o,this.matches=null}clone(){return new tE(this.queryList)}setDirty(){this.queryList.setDirty()}}class nE{constructor(o=[]){this.queries=o}createEmbeddedView(o){const u=o.queries;if(null!==u){const l=null!==o.contentQueries?o.contentQueries[0]:u.length,d=[];for(let f=0;f<l;f++){const m=u.getByIndex(f);d.push(this.queries[m.indexInDeclarationView].clone())}return new nE(d)}return null}insertView(o){this.dirtyQueriesWithMatches(o)}detachView(o){this.dirtyQueriesWithMatches(o)}dirtyQueriesWithMatches(o){for(let u=0;u<this.queries.length;u++)null!==lE(o,u).matches&&this.queries[u].setDirty()}}class rE{constructor(o,u,l=null){this.predicate=o,this.flags=u,this.read=l}}class iE{constructor(o=[]){this.queries=o}elementStart(o,u){for(let l=0;l<this.queries.length;l++)this.queries[l].elementStart(o,u)}elementEnd(o){for(let u=0;u<this.queries.length;u++)this.queries[u].elementEnd(o)}embeddedTView(o){let u=null;for(let l=0;l<this.length;l++){const d=null!==u?u.length:0,f=this.getByIndex(l).embeddedTView(o,d);f&&(f.indexInDeclarationView=l,null!==u?u.push(f):u=[f])}return null!==u?new iE(u):null}template(o,u){for(let l=0;l<this.queries.length;l++)this.queries[l].template(o,u)}getByIndex(o){return this.queries[o]}get length(){return this.queries.length}track(o){this.queries.push(o)}}class nh{constructor(o,u=-1){this.metadata=o,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=u}elementStart(o,u){this.isApplyingToNode(u)&&this.matchTNode(o,u)}elementEnd(o){this._declarationNodeIndex===o.index&&(this._appliesToNextNode=!1)}template(o,u){this.elementStart(o,u)}embeddedTView(o,u){return this.isApplyingToNode(o)?(this.crossesNgTemplate=!0,this.addMatch(-o.index,u),new nh(this.metadata)):null}isApplyingToNode(o){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const u=this._declarationNodeIndex;let l=o.parent;for(;null!==l&&8&l.type&&l.index!==u;)l=l.parent;return u===(null!==l?l.index:-1)}return this._appliesToNextNode}matchTNode(o,u){const l=this.metadata.predicate;if(Array.isArray(l))for(let d=0;d<l.length;d++){const f=l[d];this.matchTNodeWithReadOption(o,u,hx(u,f)),this.matchTNodeWithReadOption(o,u,sf(u,o,f,!1,!1))}else l===Xd?4&u.type&&this.matchTNodeWithReadOption(o,u,-1):this.matchTNodeWithReadOption(o,u,sf(u,o,l,!1,!1))}matchTNodeWithReadOption(o,u,l){if(null!==l){const d=this.metadata.read;if(null!==d)if(d===Rn||d===eh||d===Xd&&4&u.type)this.addMatch(u.index,-2);else{const f=sf(u,o,d,!1,!1);null!==f&&this.addMatch(u.index,f)}else this.addMatch(u.index,l)}}addMatch(o,u){null===this.matches?this.matches=[o,u]:this.matches.push(o,u)}}function hx(s,o){const u=s.localNames;if(null!==u)for(let l=0;l<u.length;l+=2)if(u[l]===o)return u[l+1];return null}function sE(s,o,u,l){return-1===u?function GC(s,o){return 11&s.type?aa(s,o):4&s.type?ug(s,o):null}(o,s):-2===u?function fx(s,o,u){return u===Rn?aa(o,s):u===Xd?ug(o,s):u===eh?$C(o,s):void 0}(s,o,l):rc(s,s[Re],u,o)}function fg(s,o,u,l){const d=o[zr].queries[l];if(null===d.matches){const f=s.data,m=u.matches,_=[];for(let E=0;E<m.length;E+=2){const C=m[E];_.push(C<0?null:sE(o,f[C],m[E+1],u.metadata.read))}d.matches=_}return d.matches}function oE(s,o,u,l){const d=s.queries.getByIndex(u),f=d.matches;if(null!==f){const m=fg(s,o,d,u);for(let _=0;_<f.length;_+=2){const E=f[_];if(E>0)l.push(m[_/2]);else{const C=f[_+1],x=o[-E];for(let N=En;N<x.length;N++){const B=x[N];B[Gi]===B[Bt]&&oE(B[Re],B,C,l)}if(null!==x[Ms]){const N=x[Ms];for(let B=0;B<N.length;B++){const j=N[B];oE(j[Re],j,C,l)}}}}}return l}function pg(s){const o=le(),u=Mt(),l=aw();Jm(l+1);const d=lE(u,l);if(s.dirty&&function uA(s){return 4==(4&s[nt])}(o)===(2==(2&d.metadata.flags))){if(null===d.matches)s.reset([]);else{const f=d.crossesNgTemplate?oE(u,o,l,[]):fg(u,o,d,l);s.reset(f,HS),s.notifyOnChanges()}return!0}return!1}function aE(s,o,u){const l=Mt();l.firstCreatePass&&(WC(l,new rE(s,o,u),-1),2==(2&o)&&(l.staticViewQueries=!0)),qC(l,le(),o)}function gg(s,o,u,l){const d=Mt();if(d.firstCreatePass){const f=_r();WC(d,new rE(o,u,l),f.index),function cE(s,o){const u=s.contentQueries||(s.contentQueries=[]);o!==(u.length?u[u.length-1]:-1)&&u.push(s.queries.length-1,o)}(d,s),2==(2&u)&&(d.staticContentQueries=!0)}qC(d,le(),u)}function zC(){return function uE(s,o){return s[zr].queries[o].queryList}(le(),aw())}function qC(s,o,u){const l=new Jd(4==(4&u));(function Cy(s,o,u,l){const d=vd(o);d.push(u),s.firstCreatePass&&lb(s).push(l,d.length-1)})(s,o,l,l.destroy),null===o[zr]&&(o[zr]=new nE),o[zr].queries.push(new tE(l))}function WC(s,o,u){null===s.queries&&(s.queries=new iE),s.queries.track(new nh(o,u))}function lE(s,o){return s.queries.getByIndex(o)}function dE(s,o){return ug(s,o)}function hE(s){return!!pn(s)}const wE=new kt("Application Initializer");let zc=(()=>{class s{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((u,l)=>{this.resolve=u,this.reject=l}),this.appInits=xt(wE,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const u=[];for(const d of this.appInits){const f=d();if(Fd(f))u.push(f);else if(Cp(f)){const m=new Promise((_,E)=>{f.subscribe({complete:_,error:E})});u.push(m)}}const l=()=>{this.done=!0,this.resolve()};Promise.all(u).then(()=>{l()}).catch(d=>{this.reject(d)}),0===u.length&&l(),this.initialized=!0}static#e=this.\u0275fac=function(l){return new(l||s)};static#t=this.\u0275prov=dt({token:s,factory:s.\u0275fac,providedIn:"root"})}return s})(),Sg=(()=>{class s{log(u){console.log(u)}warn(u){console.warn(u)}static#e=this.\u0275fac=function(l){return new(l||s)};static#t=this.\u0275prov=dt({token:s,factory:s.\u0275fac,providedIn:"platform"})}return s})();const qc=new kt("LocaleId",{providedIn:"root",factory:()=>xt(qc,Xe.Optional|Xe.SkipSelf)||function TE(){return typeof $localize<"u"&&$localize.locale||wa}()}),bE=new kt("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});let CE=(()=>{class s{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new oe.X(!1)}add(){this.hasPendingTasks.next(!0);const u=this.taskId++;return this.pendingTasks.add(u),u}remove(u){this.pendingTasks.delete(u),0===this.pendingTasks.size&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks.next(!1)}static#e=this.\u0275fac=function(l){return new(l||s)};static#t=this.\u0275prov=dt({token:s,factory:s.\u0275fac,providedIn:"root"})}return s})();class r0{constructor(o,u){this.ngModuleFactory=o,this.componentFactories=u}}let DE=(()=>{class s{compileModuleSync(u){return new Nv(u)}compileModuleAsync(u){return Promise.resolve(this.compileModuleSync(u))}compileModuleAndAllComponentsSync(u){const l=this.compileModuleSync(u),f=qs(pn(u).declarations).reduce((m,_)=>{const E=wt(_);return E&&m.push(new Cc(E)),m},[]);return new r0(l,f)}compileModuleAndAllComponentsAsync(u){return Promise.resolve(this.compileModuleAndAllComponentsSync(u))}clearCache(){}clearCacheFor(u){}getModuleId(u){}static#e=this.\u0275fac=function(l){return new(l||s)};static#t=this.\u0275prov=dt({token:s,factory:s.\u0275fac,providedIn:"root"})}return s})();const ME=new kt(""),ch=new kt("");let OE,Mx=(()=>{class s{constructor(u,l,d){this._ngZone=u,this.registry=l,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,OE||(function Yc(s){OE=s}(d),d.addToWindow(l)),this._watchAngularEvents(),u.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{or.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;0!==this._callbacks.length;){let u=this._callbacks.pop();clearTimeout(u.timeoutId),u.doneCb(this._didWork)}this._didWork=!1});else{let u=this.getPendingTasks();this._callbacks=this._callbacks.filter(l=>!l.updateCb||!l.updateCb(u)||(clearTimeout(l.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(u=>({source:u.source,creationLocation:u.creationLocation,data:u.data})):[]}addCallback(u,l,d){let f=-1;l&&l>0&&(f=setTimeout(()=>{this._callbacks=this._callbacks.filter(m=>m.timeoutId!==f),u(this._didWork,this.getPendingTasks())},l)),this._callbacks.push({doneCb:u,timeoutId:f,updateCb:d})}whenStable(u,l,d){if(d&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(u,l,d),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(u){this.registry.registerApplication(u,this)}unregisterApplication(u){this.registry.unregisterApplication(u)}findProviders(u,l,d){return[]}static#e=this.\u0275fac=function(l){return new(l||s)(At(or),At(l0),At(ch))};static#t=this.\u0275prov=dt({token:s,factory:s.\u0275fac})}return s})(),l0=(()=>{class s{constructor(){this._applications=new Map}registerApplication(u,l){this._applications.set(u,l)}unregisterApplication(u){this._applications.delete(u)}unregisterAllApplications(){this._applications.clear()}getTestability(u){return this._applications.get(u)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(u,l=!0){return OE?.findTestabilityInTree(this,u,l)??null}static#e=this.\u0275fac=function(l){return new(l||s)};static#t=this.\u0275prov=dt({token:s,factory:s.\u0275fac,providedIn:"platform"})}return s})(),ba=null;const Ca=new kt("AllowMultipleToken"),Pg=new kt("PlatformDestroyListeners"),Qc=new kt("appBootstrapListener");class h0{constructor(o,u){this.name=o,this.token=u}}function FE(s,o,u=[]){const l=`Platform: ${o}`,d=new kt(l);return(f=[])=>{let m=dh();if(!m||m.injector.get(Ca,!1)){const _=[...u,...f,{provide:d,useValue:!0}];s?s(_):function lh(s){if(ba&&!ba.get(Ca,!1))throw new G(400,!1);(function NE(){!function Qh(s){Wu=s}(()=>{throw new G(600,!1)})})(),ba=s;const o=s.get(Og);(function kE(s){s.get(xT,null)?.forEach(u=>u())})(s)}(function Zc(s=[],o){return fs.create({name:o,providers:[{provide:Y_,useValue:"platform"},{provide:Pg,useValue:new Set([()=>ba=null])},...s]})}(_,l))}return function p0(s){const o=dh();if(!o)throw new G(401,!1);return o}()}}function dh(){return ba?.get(Og)??null}let Og=(()=>{class s{constructor(u){this._injector=u,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(u,l){const d=function fh(s="zone.js",o){return"noop"===s?new WT:"zone.js"===s?new or(o):s}(l?.ngZone,function hh(s){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:s?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:s?.runCoalescing??!1}}({eventCoalescing:l?.ngZoneEventCoalescing,runCoalescing:l?.ngZoneRunCoalescing}));return d.run(()=>{const f=function zP(s,o,u){return new Ov(s,o,u)}(u.moduleType,this.injector,function Jc(s){return[{provide:or,useFactory:s},{provide:su,multi:!0,useFactory:()=>{const o=xt(y0,{optional:!0});return()=>o.initialize()}},{provide:VE,useFactory:_0},{provide:KT,useFactory:Gf}]}(()=>d)),m=f.injector.get(ua,null);return d.runOutsideAngular(()=>{const _=d.onError.subscribe({next:E=>{m.handleError(E)}});f.onDestroy(()=>{Tu(this._modules,f),_.unsubscribe()})}),function LE(s,o,u){try{const l=u();return Fd(l)?l.catch(d=>{throw o.runOutsideAngular(()=>s.handleError(d)),d}):l}catch(l){throw o.runOutsideAngular(()=>s.handleError(l)),l}}(m,d,()=>{const _=f.injector.get(zc);return _.runInitializers(),_.donePromise.then(()=>(function qp(s){Ge(s,"Expected localeId to be defined"),"string"==typeof s&&(Ta=s.toLowerCase().replace(/_/g,"-"))}(f.injector.get(qc,wa)||wa),this._moduleDoBootstrap(f),f))})})}bootstrapModule(u,l=[]){const d=m0({},l);return function d0(s,o,u){const l=new Nv(u);return Promise.resolve(l)}(0,0,u).then(f=>this.bootstrapModuleFactory(f,d))}_moduleDoBootstrap(u){const l=u.injector.get(Da);if(u._bootstrapComponents.length>0)u._bootstrapComponents.forEach(d=>l.bootstrap(d));else{if(!u.instance.ngDoBootstrap)throw new G(-403,!1);u.instance.ngDoBootstrap(l)}this._modules.push(u)}onDestroy(u){this._destroyListeners.push(u)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new G(404,!1);this._modules.slice().forEach(l=>l.destroy()),this._destroyListeners.forEach(l=>l());const u=this._injector.get(Pg,null);u&&(u.forEach(l=>l()),u.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static#e=this.\u0275fac=function(l){return new(l||s)(At(fs))};static#t=this.\u0275prov=dt({token:s,factory:s.\u0275fac,providedIn:"platform"})}return s})();function m0(s,o){return Array.isArray(o)?o.reduce(m0,s):{...s,...o}}let Da=(()=>{class s{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=xt(VE),this.zoneIsStable=xt(KT),this.componentTypes=[],this.components=[],this.isStable=xt(CE).hasPendingTasks.pipe((0,Le.w)(u=>u?(0,ve.of)(!1):this.zoneIsStable),(0,Me.x)(),(0,Te.B)()),this._injector=xt(Hs)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(u,l){const d=u instanceof LT;if(!this._injector.get(zc).done)throw!d&&$i(u),new G(405,!1);let m;m=d?u:this._injector.get(Vf).resolveComponentFactory(u),this.componentTypes.push(m.componentType);const _=function ei(s){return s.isBoundToModule}(m)?void 0:this._injector.get(yu),C=m.create(fs.NULL,[],l||m.selector,_),x=C.location.nativeElement,N=C.injector.get(ME,null);return N?.registerApplication(x),C.onDestroy(()=>{this.detachView(C.hostView),Tu(this.components,C),N?.unregisterApplication(x)}),this._loadComponent(C),C}tick(){if(this._runningTick)throw new G(101,!1);try{this._runningTick=!0;for(let u of this._views)u.detectChanges()}catch(u){this.internalErrorHandler(u)}finally{this._runningTick=!1}}attachView(u){const l=u;this._views.push(l),l.attachToAppRef(this)}detachView(u){const l=u;Tu(this._views,l),l.detachFromAppRef()}_loadComponent(u){this.attachView(u.hostView),this.tick(),this.components.push(u);const l=this._injector.get(Qc,[]);l.push(...this._bootstrapListeners),l.forEach(d=>d(u))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(u=>u()),this._views.slice().forEach(u=>u.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(u){return this._destroyListeners.push(u),()=>Tu(this._destroyListeners,u)}destroy(){if(this._destroyed)throw new G(406,!1);const u=this._injector;u.destroy&&!u.destroyed&&u.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static#e=this.\u0275fac=function(l){return new(l||s)};static#t=this.\u0275prov=dt({token:s,factory:s.\u0275fac,providedIn:"root"})}return s})();function Tu(s,o){const u=s.indexOf(o);u>-1&&s.splice(u,1)}const VE=new kt("",{providedIn:"root",factory:()=>xt(ua).handleError.bind(void 0)});function _0(){const s=xt(or),o=xt(ua);return u=>s.runOutsideAngular(()=>o.handleError(u))}let y0=(()=>{class s{constructor(){this.zone=xt(or),this.applicationRef=xt(Da)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static#e=this.\u0275fac=function(l){return new(l||s)};static#t=this.\u0275prov=dt({token:s,factory:s.\u0275fac,providedIn:"root"})}return s})();function kg(){return!1}let Ox=(()=>{class s{static#e=this.__NG_ELEMENT_ID__=w0}return s})();function w0(s){return function T0(s,o,u){if(zi(s)&&!u){const l=Sr(s.index,o);return new bc(l,l)}return 47&s.type?new bc(o[un],o):null}(_r(),le(),16==(16&s))}class Du{constructor(){}supports(o){return Dc(o)}create(o){return new Ux(o)}}const Vx=(s,o)=>o;class Ux{constructor(o){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=o||Vx}forEachItem(o){let u;for(u=this._itHead;null!==u;u=u._next)o(u)}forEachOperation(o){let u=this._itHead,l=this._removalsHead,d=0,f=null;for(;u||l;){const m=!l||u&&u.currentIndex<qE(l,d,f)?u:l,_=qE(m,d,f),E=m.currentIndex;if(m===l)d--,l=l._nextRemoved;else if(u=u._next,null==m.previousIndex)d++;else{f||(f=[]);const C=_-d,x=E-d;if(C!=x){for(let B=0;B<C;B++){const j=B<f.length?f[B]:f[B]=0,Z=j+B;x<=Z&&Z<C&&(f[B]=j+1)}f[m.previousIndex]=x-C}}_!==E&&o(m,_,E)}}forEachPreviousItem(o){let u;for(u=this._previousItHead;null!==u;u=u._nextPrevious)o(u)}forEachAddedItem(o){let u;for(u=this._additionsHead;null!==u;u=u._nextAdded)o(u)}forEachMovedItem(o){let u;for(u=this._movesHead;null!==u;u=u._nextMoved)o(u)}forEachRemovedItem(o){let u;for(u=this._removalsHead;null!==u;u=u._nextRemoved)o(u)}forEachIdentityChange(o){let u;for(u=this._identityChangesHead;null!==u;u=u._nextIdentityChange)o(u)}diff(o){if(null==o&&(o=[]),!Dc(o))throw new G(900,!1);return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let d,f,m,u=this._itHead,l=!1;if(Array.isArray(o)){this.length=o.length;for(let _=0;_<this.length;_++)f=o[_],m=this._trackByFn(_,f),null!==u&&Object.is(u.trackById,m)?(l&&(u=this._verifyReinsertion(u,f,m,_)),Object.is(u.item,f)||this._addIdentityChange(u,f)):(u=this._mismatch(u,f,m,_),l=!0),u=u._next}else d=0,function AR(s,o){if(Array.isArray(s))for(let u=0;u<s.length;u++)o(s[u]);else{const u=s[Symbol.iterator]();let l;for(;!(l=u.next()).done;)o(l.value)}}(o,_=>{m=this._trackByFn(d,_),null!==u&&Object.is(u.trackById,m)?(l&&(u=this._verifyReinsertion(u,_,m,d)),Object.is(u.item,_)||this._addIdentityChange(u,_)):(u=this._mismatch(u,_,m,d),l=!0),u=u._next,d++}),this.length=d;return this._truncate(u),this.collection=o,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let o;for(o=this._previousItHead=this._itHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._additionsHead;null!==o;o=o._nextAdded)o.previousIndex=o.currentIndex;for(this._additionsHead=this._additionsTail=null,o=this._movesHead;null!==o;o=o._nextMoved)o.previousIndex=o.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(o,u,l,d){let f;return null===o?f=this._itTail:(f=o._prev,this._remove(o)),null!==(o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null))?(Object.is(o.item,u)||this._addIdentityChange(o,u),this._reinsertAfter(o,f,d)):null!==(o=null===this._linkedRecords?null:this._linkedRecords.get(l,d))?(Object.is(o.item,u)||this._addIdentityChange(o,u),this._moveAfter(o,f,d)):o=this._addAfter(new C0(u,l),f,d),o}_verifyReinsertion(o,u,l,d){let f=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null);return null!==f?o=this._reinsertAfter(f,o._prev,d):o.currentIndex!=d&&(o.currentIndex=d,this._addToMoves(o,d)),o}_truncate(o){for(;null!==o;){const u=o._next;this._addToRemovals(this._unlink(o)),o=u}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(o,u,l){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(o);const d=o._prevRemoved,f=o._nextRemoved;return null===d?this._removalsHead=f:d._nextRemoved=f,null===f?this._removalsTail=d:f._prevRemoved=d,this._insertAfter(o,u,l),this._addToMoves(o,l),o}_moveAfter(o,u,l){return this._unlink(o),this._insertAfter(o,u,l),this._addToMoves(o,l),o}_addAfter(o,u,l){return this._insertAfter(o,u,l),this._additionsTail=null===this._additionsTail?this._additionsHead=o:this._additionsTail._nextAdded=o,o}_insertAfter(o,u,l){const d=null===u?this._itHead:u._next;return o._next=d,o._prev=u,null===d?this._itTail=o:d._prev=o,null===u?this._itHead=o:u._next=o,null===this._linkedRecords&&(this._linkedRecords=new zE),this._linkedRecords.put(o),o.currentIndex=l,o}_remove(o){return this._addToRemovals(this._unlink(o))}_unlink(o){null!==this._linkedRecords&&this._linkedRecords.remove(o);const u=o._prev,l=o._next;return null===u?this._itHead=l:u._next=l,null===l?this._itTail=u:l._prev=u,o}_addToMoves(o,u){return o.previousIndex===u||(this._movesTail=null===this._movesTail?this._movesHead=o:this._movesTail._nextMoved=o),o}_addToRemovals(o){return null===this._unlinkedRecords&&(this._unlinkedRecords=new zE),this._unlinkedRecords.put(o),o.currentIndex=null,o._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=o,o._prevRemoved=null):(o._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=o),o}_addIdentityChange(o,u){return o.item=u,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=o:this._identityChangesTail._nextIdentityChange=o,o}}class C0{constructor(o,u){this.item=o,this.trackById=u,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class Bx{constructor(){this._head=null,this._tail=null}add(o){null===this._head?(this._head=this._tail=o,o._nextDup=null,o._prevDup=null):(this._tail._nextDup=o,o._prevDup=this._tail,o._nextDup=null,this._tail=o)}get(o,u){let l;for(l=this._head;null!==l;l=l._nextDup)if((null===u||u<=l.currentIndex)&&Object.is(l.trackById,o))return l;return null}remove(o){const u=o._prevDup,l=o._nextDup;return null===u?this._head=l:u._nextDup=l,null===l?this._tail=u:l._prevDup=u,null===this._head}}class zE{constructor(){this.map=new Map}put(o){const u=o.trackById;let l=this.map.get(u);l||(l=new Bx,this.map.set(u,l)),l.add(o)}get(o,u){const d=this.map.get(o);return d?d.get(o,u):null}remove(o){const u=o.trackById;return this.map.get(u).remove(o)&&this.map.delete(u),o}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function qE(s,o,u){const l=s.previousIndex;if(null===l)return l;let d=0;return u&&l<u.length&&(d=u[l]),l+o+d}class Vg{constructor(){}supports(o){return o instanceof Map||Uy(o)}create(){return new WE}}class WE{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(o){let u;for(u=this._mapHead;null!==u;u=u._next)o(u)}forEachPreviousItem(o){let u;for(u=this._previousMapHead;null!==u;u=u._nextPrevious)o(u)}forEachChangedItem(o){let u;for(u=this._changesHead;null!==u;u=u._nextChanged)o(u)}forEachAddedItem(o){let u;for(u=this._additionsHead;null!==u;u=u._nextAdded)o(u)}forEachRemovedItem(o){let u;for(u=this._removalsHead;null!==u;u=u._nextRemoved)o(u)}diff(o){if(o){if(!(o instanceof Map||Uy(o)))throw new G(900,!1)}else o=new Map;return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let u=this._mapHead;if(this._appendAfter=null,this._forEach(o,(l,d)=>{if(u&&u.key===d)this._maybeAddToChanges(u,l),this._appendAfter=u,u=u._next;else{const f=this._getOrCreateRecordForKey(d,l);u=this._insertBeforeOrAppend(u,f)}}),u){u._prev&&(u._prev._next=null),this._removalsHead=u;for(let l=u;null!==l;l=l._nextRemoved)l===this._mapHead&&(this._mapHead=null),this._records.delete(l.key),l._nextRemoved=l._next,l.previousValue=l.currentValue,l.currentValue=null,l._prev=null,l._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(o,u){if(o){const l=o._prev;return u._next=o,u._prev=l,o._prev=u,l&&(l._next=u),o===this._mapHead&&(this._mapHead=u),this._appendAfter=o,o}return this._appendAfter?(this._appendAfter._next=u,u._prev=this._appendAfter):this._mapHead=u,this._appendAfter=u,null}_getOrCreateRecordForKey(o,u){if(this._records.has(o)){const d=this._records.get(o);this._maybeAddToChanges(d,u);const f=d._prev,m=d._next;return f&&(f._next=m),m&&(m._prev=f),d._next=null,d._prev=null,d}const l=new D0(o);return this._records.set(o,l),l.currentValue=u,this._addToAdditions(l),l}_reset(){if(this.isDirty){let o;for(this._previousMapHead=this._mapHead,o=this._previousMapHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._changesHead;null!==o;o=o._nextChanged)o.previousValue=o.currentValue;for(o=this._additionsHead;null!=o;o=o._nextAdded)o.previousValue=o.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(o,u){Object.is(u,o.currentValue)||(o.previousValue=o.currentValue,o.currentValue=u,this._addToChanges(o))}_addToAdditions(o){null===this._additionsHead?this._additionsHead=this._additionsTail=o:(this._additionsTail._nextAdded=o,this._additionsTail=o)}_addToChanges(o){null===this._changesHead?this._changesHead=this._changesTail=o:(this._changesTail._nextChanged=o,this._changesTail=o)}_forEach(o,u){o instanceof Map?o.forEach(u):Object.keys(o).forEach(l=>u(o[l],l))}}class D0{constructor(o){this.key=o,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function KE(){return new YE([new Du])}let YE=(()=>{class s{static#e=this.\u0275prov=dt({token:s,providedIn:"root",factory:KE});constructor(u){this.factories=u}static create(u,l){if(null!=l){const d=l.factories.slice();u=u.concat(d)}return new s(u)}static extend(u){return{provide:s,useFactory:l=>s.create(u,l||KE()),deps:[[s,new oc,new p_]]}}find(u){const l=this.factories.find(d=>d.supports(u));if(null!=l)return l;throw new G(901,!1)}}return s})();function A0(){return new QE([new Vg])}let QE=(()=>{class s{static#e=this.\u0275prov=dt({token:s,providedIn:"root",factory:A0});constructor(u){this.factories=u}static create(u,l){if(l){const d=l.factories.slice();u=u.concat(d)}return new s(u)}static extend(u){return{provide:s,useFactory:l=>s.create(u,l||A0()),deps:[[s,new oc,new p_]]}}find(u){const l=this.factories.find(d=>d.supports(u));if(l)return l;throw new G(901,!1)}}return s})();const R0=FE(null,"core",[]);let mh=(()=>{class s{constructor(u){}static#e=this.\u0275fac=function(l){return new(l||s)(At(Da))};static#t=this.\u0275mod=st({type:s});static#n=this.\u0275inj=kn({})}return s})();function Eh(s){return"boolean"==typeof s?s:null!=s&&"false"!==s}function V0(s){const o=wt(s);if(!o)return null;const u=new Cc(o);return{get selector(){return u.selector},get type(){return u.componentType},get inputs(){return u.inputs},get outputs(){return u.outputs},get ngContentSelectors(){return u.ngContentSelectors},get isStandalone(){return o.standalone},get isSignal(){return o.signals}}}},95:(Qe,he,k)=>{k.d(he,{Fj:()=>G,u5:()=>Lm,JU:()=>Ie,JJ:()=>bt,On:()=>$o,YN:()=>Gr,EJ:()=>Hi,Kr:()=>Ho});var b=k(5879),g=k(6814),H=k(7715),ue=k(5592),oe=k(7453),ve=k(4829),Te=k(9940),Le=k(8251),Me=k(7400),Y=k(2714),ae=k(7398);let ze=(()=>{class A{constructor(w,M){this._renderer=w,this._elementRef=M,this.onChange=U=>{},this.onTouched=()=>{}}setProperty(w,M){this._renderer.setProperty(this._elementRef.nativeElement,w,M)}registerOnTouched(w){this.onTouched=w}registerOnChange(w){this.onChange=w}setDisabledState(w){this.setProperty("disabled",w)}static#e=this.\u0275fac=function(M){return new(M||A)(b.Y36(b.Qsj),b.Y36(b.SBq))};static#t=this.\u0275dir=b.lG2({type:A})}return A})(),me=(()=>{class A extends ze{static#e=this.\u0275fac=function(){let w;return function(U){return(w||(w=b.n5z(A)))(U||A)}}();static#t=this.\u0275dir=b.lG2({type:A,features:[b.qOj]})}return A})();const Ie=new b.OlP("NgValueAccessor"),qe={provide:Ie,useExisting:(0,b.Gpc)(()=>G),multi:!0},Ct=new b.OlP("CompositionEventMode");let G=(()=>{class A extends ze{constructor(w,M,U){super(w,M),this._compositionMode=U,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function Et(){const A=(0,g.q)()?(0,g.q)().getUserAgent():"";return/android (\d+)/.test(A.toLowerCase())}())}writeValue(w){this.setProperty("value",w??"")}_handleInput(w){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(w)}_compositionStart(){this._composing=!0}_compositionEnd(w){this._composing=!1,this._compositionMode&&this.onChange(w)}static#e=this.\u0275fac=function(M){return new(M||A)(b.Y36(b.Qsj),b.Y36(b.SBq),b.Y36(Ct,8))};static#t=this.\u0275dir=b.lG2({type:A,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(M,U){1&M&&b.NdJ("input",function(Je){return U._handleInput(Je.target.value)})("blur",function(){return U.onTouched()})("compositionstart",function(){return U._compositionStart()})("compositionend",function(Je){return U._compositionEnd(Je.target.value)})},features:[b._Bn([qe]),b.qOj]})}return A})();const we=new b.OlP("NgValidators"),be=new b.OlP("NgAsyncValidators");function K(A){return null!=A}function te(A){return(0,b.QGY)(A)?(0,H.D)(A):A}function ne(A){let R={};return A.forEach(w=>{R=null!=w?{...R,...w}:R}),0===Object.keys(R).length?null:R}function ye(A,R){return R.map(w=>w(A))}function Ge(A){return A.map(R=>function Ee(A){return!A.validate}(R)?R:w=>R.validate(w))}function Xn(A){return null!=A?function Ae(A){if(!A)return null;const R=A.filter(K);return 0==R.length?null:function(w){return ne(ye(w,R))}}(Ge(A)):null}function Yt(A){return null!=A?function ot(A){if(!A)return null;const R=A.filter(K);return 0==R.length?null:function(w){return function ee(...A){const R=(0,Te.jO)(A),{args:w,keys:M}=(0,oe.D)(A),U=new ue.y(Ve=>{const{length:Je}=w;if(!Je)return void Ve.complete();const qn=new Array(Je);let fi=Je,xi=Je;for(let qr=0;qr<Je;qr++){let pi=!1;(0,ve.Xf)(w[qr]).subscribe((0,Le.x)(Ve,Gu=>{pi||(pi=!0,xi--),qn[qr]=Gu},()=>fi--,void 0,()=>{(!fi||!pi)&&(xi||Ve.next(M?(0,Y.n)(M,qn):qn),Ve.complete())}))}});return R?U.pipe((0,Me.Z)(R)):U}(ye(w,R).map(te)).pipe((0,ae.U)(ne))}}(Ge(A)):null}function dt(A,R){return null===A?[R]:Array.isArray(A)?[...A,R]:[A,R]}function $n(A){return A?Array.isArray(A)?A:[A]:[]}function Gt(A,R){return Array.isArray(A)?A.includes(R):A===R}function fr(A,R){const w=$n(R);return $n(A).forEach(U=>{Gt(w,U)||w.push(U)}),w}function ns(A,R){return $n(R).filter(w=>!Gt(A,w))}class ro{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(R){this._rawValidators=R||[],this._composedValidatorFn=Xn(this._rawValidators)}_setAsyncValidators(R){this._rawAsyncValidators=R||[],this._composedAsyncValidatorFn=Yt(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(R){this._onDestroyCallbacks.push(R)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(R=>R()),this._onDestroyCallbacks=[]}reset(R=void 0){this.control&&this.control.reset(R)}hasError(R,w){return!!this.control&&this.control.hasError(R,w)}getError(R,w){return this.control?this.control.getError(R,w):null}}class xn extends ro{get formDirective(){return null}get path(){return null}}class ii extends ro{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class Vi{constructor(R){this._cd=R}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let bt=(()=>{class A extends Vi{constructor(w){super(w)}static#e=this.\u0275fac=function(M){return new(M||A)(b.Y36(ii,2))};static#t=this.\u0275dir=b.lG2({type:A,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(M,U){2&M&&b.ekj("ng-untouched",U.isUntouched)("ng-touched",U.isTouched)("ng-pristine",U.isPristine)("ng-dirty",U.isDirty)("ng-valid",U.isValid)("ng-invalid",U.isInvalid)("ng-pending",U.isPending)},features:[b.qOj]})}return A})();const si="VALID",so="INVALID",Di="PENDING",Oo="DISABLED";function No(A){return null!=A&&!Array.isArray(A)&&"object"==typeof A}class At{constructor(R,w){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(R),this._assignAsyncValidators(w)}get validator(){return this._composedValidatorFn}set validator(R){this._rawValidators=this._composedValidatorFn=R}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(R){this._rawAsyncValidators=this._composedAsyncValidatorFn=R}get parent(){return this._parent}get valid(){return this.status===si}get invalid(){return this.status===so}get pending(){return this.status==Di}get disabled(){return this.status===Oo}get enabled(){return this.status!==Oo}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(R){this._assignValidators(R)}setAsyncValidators(R){this._assignAsyncValidators(R)}addValidators(R){this.setValidators(fr(R,this._rawValidators))}addAsyncValidators(R){this.setAsyncValidators(fr(R,this._rawAsyncValidators))}removeValidators(R){this.setValidators(ns(R,this._rawValidators))}removeAsyncValidators(R){this.setAsyncValidators(ns(R,this._rawAsyncValidators))}hasValidator(R){return Gt(this._rawValidators,R)}hasAsyncValidator(R){return Gt(this._rawAsyncValidators,R)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(R={}){this.touched=!0,this._parent&&!R.onlySelf&&this._parent.markAsTouched(R)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(R=>R.markAllAsTouched())}markAsUntouched(R={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(w=>{w.markAsUntouched({onlySelf:!0})}),this._parent&&!R.onlySelf&&this._parent._updateTouched(R)}markAsDirty(R={}){this.pristine=!1,this._parent&&!R.onlySelf&&this._parent.markAsDirty(R)}markAsPristine(R={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(w=>{w.markAsPristine({onlySelf:!0})}),this._parent&&!R.onlySelf&&this._parent._updatePristine(R)}markAsPending(R={}){this.status=Di,!1!==R.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!R.onlySelf&&this._parent.markAsPending(R)}disable(R={}){const w=this._parentMarkedDirty(R.onlySelf);this.status=Oo,this.errors=null,this._forEachChild(M=>{M.disable({...R,onlySelf:!0})}),this._updateValue(),!1!==R.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...R,skipPristineCheck:w}),this._onDisabledChange.forEach(M=>M(!0))}enable(R={}){const w=this._parentMarkedDirty(R.onlySelf);this.status=si,this._forEachChild(M=>{M.enable({...R,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:R.emitEvent}),this._updateAncestors({...R,skipPristineCheck:w}),this._onDisabledChange.forEach(M=>M(!1))}_updateAncestors(R){this._parent&&!R.onlySelf&&(this._parent.updateValueAndValidity(R),R.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(R){this._parent=R}getRawValue(){return this.value}updateValueAndValidity(R={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===si||this.status===Di)&&this._runAsyncValidator(R.emitEvent)),!1!==R.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!R.onlySelf&&this._parent.updateValueAndValidity(R)}_updateTreeValidity(R={emitEvent:!0}){this._forEachChild(w=>w._updateTreeValidity(R)),this.updateValueAndValidity({onlySelf:!0,emitEvent:R.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Oo:si}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(R){if(this.asyncValidator){this.status=Di,this._hasOwnPendingAsyncValidator=!0;const w=te(this.asyncValidator(this));this._asyncValidationSubscription=w.subscribe(M=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(M,{emitEvent:R})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(R,w={}){this.errors=R,this._updateControlsErrors(!1!==w.emitEvent)}get(R){let w=R;return null==w||(Array.isArray(w)||(w=w.split(".")),0===w.length)?null:w.reduce((M,U)=>M&&M._find(U),this)}getError(R,w){const M=w?this.get(w):this;return M&&M.errors?M.errors[R]:null}hasError(R,w){return!!this.getError(R,w)}get root(){let R=this;for(;R._parent;)R=R._parent;return R}_updateControlsErrors(R){this.status=this._calculateStatus(),R&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(R)}_initObservables(){this.valueChanges=new b.vpe,this.statusChanges=new b.vpe}_calculateStatus(){return this._allControlsDisabled()?Oo:this.errors?so:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Di)?Di:this._anyControlsHaveStatus(so)?so:si}_anyControlsHaveStatus(R){return this._anyControls(w=>w.status===R)}_anyControlsDirty(){return this._anyControls(R=>R.dirty)}_anyControlsTouched(){return this._anyControls(R=>R.touched)}_updatePristine(R={}){this.pristine=!this._anyControlsDirty(),this._parent&&!R.onlySelf&&this._parent._updatePristine(R)}_updateTouched(R={}){this.touched=this._anyControlsTouched(),this._parent&&!R.onlySelf&&this._parent._updateTouched(R)}_registerOnCollectionChange(R){this._onCollectionChange=R}_setUpdateStrategy(R){No(R)&&null!=R.updateOn&&(this._updateOn=R.updateOn)}_parentMarkedDirty(R){return!R&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(R){return null}_assignValidators(R){this._rawValidators=Array.isArray(R)?R.slice():R,this._composedValidatorFn=function Hh(A){return Array.isArray(A)?Xn(A):A||null}(this._rawValidators)}_assignAsyncValidators(R){this._rawAsyncValidators=Array.isArray(R)?R.slice():R,this._composedAsyncValidatorFn=function pr(A){return Array.isArray(A)?Yt(A):A||null}(this._rawAsyncValidators)}}const fn=new b.OlP("CallSetDisabledState",{providedIn:"root",factory:()=>Lo}),Lo="always";function gr(A,R,w=Lo){(function _t(A,R){const w=function on(A){return A._rawValidators}(A);null!==R.validator?A.setValidators(dt(w,R.validator)):"function"==typeof w&&A.setValidators([w]);const M=function kn(A){return A._rawAsyncValidators}(A);null!==R.asyncValidator?A.setAsyncValidators(dt(M,R.asyncValidator)):"function"==typeof M&&A.setAsyncValidators([M]);const U=()=>A.updateValueAndValidity();jr(R._rawValidators,U),jr(R._rawAsyncValidators,U)})(A,R),R.valueAccessor.writeValue(A.value),(A.disabled||"always"===w)&&R.valueAccessor.setDisabledState?.(A.disabled),function Si(A,R){R.valueAccessor.registerOnChange(w=>{A._pendingValue=w,A._pendingChange=!0,A._pendingDirty=!0,"change"===A.updateOn&&ss(A,R)})}(A,R),function Bi(A,R){const w=(M,U)=>{R.valueAccessor.writeValue(M),U&&R.viewToModelUpdate(M)};A.registerOnChange(w),R._registerOnDestroy(()=>{A._unregisterOnChange(w)})}(A,R),function Ui(A,R){R.valueAccessor.registerOnTouched(()=>{A._pendingTouched=!0,"blur"===A.updateOn&&A._pendingChange&&ss(A,R),"submit"!==A.updateOn&&A.markAsTouched()})}(A,R),function tr(A,R){if(R.valueAccessor.setDisabledState){const w=M=>{R.valueAccessor.setDisabledState(M)};A.registerOnDisabledChange(w),R._registerOnDestroy(()=>{A._unregisterOnDisabledChange(w)})}}(A,R)}function jr(A,R){A.forEach(w=>{w.registerOnValidatorChange&&w.registerOnValidatorChange(R)})}function ss(A,R){A._pendingDirty&&A.markAsDirty(),A.setValue(A._pendingValue,{emitModelToViewChange:!1}),R.viewToModelUpdate(A._pendingValue),A._pendingChange=!1}function Ri(A,R){const w=A.indexOf(R);w>-1&&A.splice(w,1)}function As(A){return"object"==typeof A&&null!==A&&2===Object.keys(A).length&&"value"in A&&"disabled"in A}const vn=class extends At{constructor(R=null,w,M){super(function Lu(A){return(No(A)?A.validators:A)||null}(w),function er(A,R){return(No(R)?R.asyncValidators:A)||null}(M,w)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(R),this._setUpdateStrategy(w),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),No(w)&&(w.nonNullable||w.initialValueIsDefault)&&(this.defaultValue=As(R)?R.value:R)}setValue(R,w={}){this.value=this._pendingValue=R,this._onChange.length&&!1!==w.emitModelToViewChange&&this._onChange.forEach(M=>M(this.value,!1!==w.emitViewToModelChange)),this.updateValueAndValidity(w)}patchValue(R,w={}){this.setValue(R,w)}reset(R=this.defaultValue,w={}){this._applyFormState(R),this.markAsPristine(w),this.markAsUntouched(w),this.setValue(this.value,w),this._pendingChange=!1}_updateValue(){}_anyControls(R){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(R){this._onChange.push(R)}_unregisterOnChange(R){Ri(this._onChange,R)}registerOnDisabledChange(R){this._onDisabledChange.push(R)}_unregisterOnDisabledChange(R){Ri(this._onDisabledChange,R)}_forEachChild(R){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(R){As(R)?(this.value=this._pendingValue=R.value,R.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=R}},st={provide:ii,useExisting:(0,b.Gpc)(()=>$o)},Ss=(()=>Promise.resolve())();let $o=(()=>{class A extends ii{constructor(w,M,U,Ve,Je,qn){super(),this._changeDetectorRef=Je,this.callSetDisabledState=qn,this.control=new vn,this._registered=!1,this.name="",this.update=new b.vpe,this._parent=w,this._setValidators(M),this._setAsyncValidators(U),this.valueAccessor=function Ds(A,R){if(!R)return null;let w,M,U;return Array.isArray(R),R.forEach(Ve=>{Ve.constructor===G?w=Ve:function Mn(A){return Object.getPrototypeOf(A.constructor)===me}(Ve)?M=Ve:U=Ve}),U||M||w||null}(0,Ve)}ngOnChanges(w){if(this._checkForErrors(),!this._registered||"name"in w){if(this._registered&&(this._checkName(),this.formDirective)){const M=w.name.previousValue;this.formDirective.removeControl({name:M,path:this._getPath(M)})}this._setUpControl()}"isDisabled"in w&&this._updateDisabled(w),function ct(A,R){if(!A.hasOwnProperty("model"))return!1;const w=A.model;return!!w.isFirstChange()||!Object.is(R,w.currentValue)}(w,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(w){this.viewModel=w,this.update.emit(w)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){gr(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(w){Ss.then(()=>{this.control.setValue(w,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(w){const M=w.isDisabled.currentValue,U=0!==M&&(0,b.VuI)(M);Ss.then(()=>{U&&!this.control.disabled?this.control.disable():!U&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(w){return this._parent?function bs(A,R){return[...R.path,A]}(w,this._parent):[w]}static#e=this.\u0275fac=function(M){return new(M||A)(b.Y36(xn,9),b.Y36(we,10),b.Y36(be,10),b.Y36(Ie,10),b.Y36(b.sBO,8),b.Y36(fn,8))};static#t=this.\u0275dir=b.lG2({type:A,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[b._Bn([st]),b.qOj,b.TTD]})}return A})(),$i=(()=>{class A{static#e=this.\u0275fac=function(M){return new(M||A)};static#t=this.\u0275mod=b.oAB({type:A});static#n=this.\u0275inj=b.cJS({})}return A})();const ci={provide:Ie,useExisting:(0,b.Gpc)(()=>Hi),multi:!0};function et(A,R){return null==A?`${R}`:(R&&"object"==typeof R&&(R="Object"),`${A}: ${R}`.slice(0,50))}let Hi=(()=>{class A extends me{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(w){this._compareWith=w}writeValue(w){this.value=w;const U=et(this._getOptionId(w),w);this.setProperty("value",U)}registerOnChange(w){this.onChange=M=>{this.value=this._getOptionValue(M),w(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(w){for(const M of this._optionMap.keys())if(this._compareWith(this._optionMap.get(M),w))return M;return null}_getOptionValue(w){const M=function lo(A){return A.split(":")[0]}(w);return this._optionMap.has(M)?this._optionMap.get(M):w}static#e=this.\u0275fac=function(){let w;return function(U){return(w||(w=b.n5z(A)))(U||A)}}();static#t=this.\u0275dir=b.lG2({type:A,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(M,U){1&M&&b.NdJ("change",function(Je){return U.onChange(Je.target.value)})("blur",function(){return U.onTouched()})},inputs:{compareWith:"compareWith"},features:[b._Bn([ci]),b.qOj]})}return A})(),Gr=(()=>{class A{constructor(w,M,U){this._element=w,this._renderer=M,this._select=U,this._select&&(this.id=this._select._registerOption())}set ngValue(w){null!=this._select&&(this._select._optionMap.set(this.id,w),this._setElementValue(et(this.id,w)),this._select.writeValue(this._select.value))}set value(w){this._setElementValue(w),this._select&&this._select.writeValue(this._select.value)}_setElementValue(w){this._renderer.setProperty(this._element.nativeElement,"value",w)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static#e=this.\u0275fac=function(M){return new(M||A)(b.Y36(b.SBq),b.Y36(b.Qsj),b.Y36(Hi,9))};static#t=this.\u0275dir=b.lG2({type:A,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}})}return A})();const un={provide:Ie,useExisting:(0,b.Gpc)(()=>li),multi:!0};function Gi(A,R){return null==A?`${R}`:("string"==typeof R&&(R=`'${R}'`),R&&"object"==typeof R&&(R="Object"),`${A}: ${R}`.slice(0,50))}let li=(()=>{class A extends me{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(w){this._compareWith=w}writeValue(w){let M;if(this.value=w,Array.isArray(w)){const U=w.map(Ve=>this._getOptionId(Ve));M=(Ve,Je)=>{Ve._setSelected(U.indexOf(Je.toString())>-1)}}else M=(U,Ve)=>{U._setSelected(!1)};this._optionMap.forEach(M)}registerOnChange(w){this.onChange=M=>{const U=[],Ve=M.selectedOptions;if(void 0!==Ve){const Je=Ve;for(let qn=0;qn<Je.length;qn++){const xi=this._getOptionValue(Je[qn].value);U.push(xi)}}else{const Je=M.options;for(let qn=0;qn<Je.length;qn++){const fi=Je[qn];if(fi.selected){const xi=this._getOptionValue(fi.value);U.push(xi)}}}this.value=U,w(U)}}_registerOption(w){const M=(this._idCounter++).toString();return this._optionMap.set(M,w),M}_getOptionId(w){for(const M of this._optionMap.keys())if(this._compareWith(this._optionMap.get(M)._value,w))return M;return null}_getOptionValue(w){const M=function ho(A){return A.split(":")[0]}(w);return this._optionMap.has(M)?this._optionMap.get(M)._value:w}static#e=this.\u0275fac=function(){let w;return function(U){return(w||(w=b.n5z(A)))(U||A)}}();static#t=this.\u0275dir=b.lG2({type:A,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(M,U){1&M&&b.NdJ("change",function(Je){return U.onChange(Je.target)})("blur",function(){return U.onTouched()})},inputs:{compareWith:"compareWith"},features:[b._Bn([un]),b.qOj]})}return A})(),Ho=(()=>{class A{constructor(w,M,U){this._element=w,this._renderer=M,this._select=U,this._select&&(this.id=this._select._registerOption(this))}set ngValue(w){null!=this._select&&(this._value=w,this._setElementValue(Gi(this.id,w)),this._select.writeValue(this._select.value))}set value(w){this._select?(this._value=w,this._setElementValue(Gi(this.id,w)),this._select.writeValue(this._select.value)):this._setElementValue(w)}_setElementValue(w){this._renderer.setProperty(this._element.nativeElement,"value",w)}_setSelected(w){this._renderer.setProperty(this._element.nativeElement,"selected",w)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static#e=this.\u0275fac=function(M){return new(M||A)(b.Y36(b.SBq),b.Y36(b.Qsj),b.Y36(li,9))};static#t=this.\u0275dir=b.lG2({type:A,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}})}return A})(),Hu=(()=>{class A{static#e=this.\u0275fac=function(M){return new(M||A)};static#t=this.\u0275mod=b.oAB({type:A});static#n=this.\u0275inj=b.cJS({imports:[$i]})}return A})(),Lm=(()=>{class A{static withConfig(w){return{ngModule:A,providers:[{provide:fn,useValue:w.callSetDisabledState??Lo}]}}static#e=this.\u0275fac=function(M){return new(M||A)};static#t=this.\u0275mod=b.oAB({type:A});static#n=this.\u0275inj=b.cJS({imports:[Hu]})}return A})()},2352:(Qe,he,k)=>{k.d(he,{PG:()=>ee,nm:()=>ze});var b=k(5879),g=k(95),H=k(2438),ue=k(6814);const oe=["editorContainer"],Te=new b.OlP("NGX_MONACO_EDITOR_CONFIG");let Me,Le=!1,Y=(()=>{class me{set insideNg(Q){this._insideNg=Q,this._editor&&(this._editor.dispose(),this.initMonaco(this._options,this.insideNg))}get insideNg(){return this._insideNg}constructor(Q){this.config=Q,this.onInit=new b.vpe,this._insideNg=!1}ngAfterViewInit(){Le?Me.then(()=>{this.initMonaco(this._options,this.insideNg)}):(Le=!0,Me=new Promise(Q=>{const Se=this.config.baseUrl||"./assets";if("object"==typeof window.monaco)return this.initMonaco(this._options,this.insideNg),void Q();const qe=G=>{let de=G||window.require,ce={paths:{vs:`${Se}/monaco/min/vs`}};Object.assign(ce,this.config.requireConfig||{}),de.config(ce),de(["vs/editor/editor.main"],()=>{"function"==typeof this.config.onMonacoLoad&&this.config.onMonacoLoad(),this.initMonaco(this._options,this.insideNg),Q()})};if(this.config.monacoRequire)qe(this.config.monacoRequire);else if(window.require)if(window.require.config)qe();else{var Et=`${Se}/monaco/min/vs/loader.js`,Ct=new XMLHttpRequest;Ct.addEventListener("load",()=>{let G=document.createElement("script");G.type="text/javascript",G.text=["var nodeRequire = require;",Ct.responseText.replace('"use strict";',""),"var monacoAmdRequire = require;","require = nodeRequire;","require.nodeRequire = require;"].join("\n"),document.body.appendChild(G),qe(window.monacoAmdRequire)}),Ct.open("GET",Et),Ct.send()}else{const G=document.createElement("script");G.type="text/javascript",G.src=`${Se}/monaco/min/vs/loader.js`,G.addEventListener("load",()=>{qe()}),document.body.appendChild(G)}}))}ngOnDestroy(){this._windowResizeSubscription&&this._windowResizeSubscription.unsubscribe(),this._editor&&(this._editor.dispose(),this._editor=void 0)}static#e=this.\u0275fac=function(Se){return new(Se||me)(b.Y36(Te))};static#t=this.\u0275cmp=b.Xpm({type:me,selectors:[["ng-component"]],viewQuery:function(Se,qe){if(1&Se&&b.Gf(oe,7),2&Se){let Et;b.iGM(Et=b.CRH())&&(qe._editorContainer=Et.first)}},inputs:{insideNg:"insideNg"},outputs:{onInit:"onInit"},decls:0,vars:0,template:function(Se,qe){},encapsulation:2})}return me})(),ee=(()=>{class me extends Y{set options(Q){this._options=Object.assign({},this.config.defaultOptions,Q),this._editor&&(this._editor.dispose(),this.initMonaco(Q,this.insideNg))}get options(){return this._options}set model(Q){this.options.model=Q,this._editor&&(this._editor.dispose(),this.initMonaco(this.options,this.insideNg))}constructor(Q,Se){super(Se),this.zone=Q,this.editorConfig=Se,this._value="",this.propagateChange=qe=>{},this.onTouched=()=>{}}writeValue(Q){this._value=Q||"",setTimeout(()=>{this._editor&&!this.options.model&&this._editor.setValue(this._value)})}registerOnChange(Q){this.propagateChange=Q}registerOnTouched(Q){this.onTouched=Q}initMonaco(Q,Se){const qe=!!Q.model;if(qe){const Et=monaco.editor.getModel(Q.model.uri||"");Et?(Q.model=Et,Q.model.setValue(this._value)):Q.model=monaco.editor.createModel(Q.model.value,Q.model.language,Q.model.uri)}Se?this._editor=monaco.editor.create(this._editorContainer.nativeElement,Q):this.zone.runOutsideAngular(()=>{this._editor=monaco.editor.create(this._editorContainer.nativeElement,Q)}),qe||this._editor.setValue(this._value),this._editor.onDidChangeModelContent(Et=>{const Ct=this._editor.getValue();this.zone.run(()=>{this.propagateChange(Ct),this._value=Ct})}),this._editor.onDidBlurEditorWidget(()=>{this.onTouched()}),this._windowResizeSubscription&&this._windowResizeSubscription.unsubscribe(),this._windowResizeSubscription=(0,H.R)(window,"resize").subscribe(()=>this._editor.layout()),this.onInit.emit(this._editor)}static#e=this.\u0275fac=function(Se){return new(Se||me)(b.Y36(b.R0b),b.Y36(Te))};static#t=this.\u0275cmp=b.Xpm({type:me,selectors:[["ngx-monaco-editor"]],inputs:{options:"options",model:"model"},features:[b._Bn([{provide:g.JU,useExisting:(0,b.Gpc)(()=>me),multi:!0}]),b.qOj],decls:2,vars:0,consts:[[1,"editor-container"],["editorContainer",""]],template:function(Se,qe){1&Se&&b._UZ(0,"div",0,1)},styles:["[_nghost-%COMP%]{display:block;height:200px}.editor-container[_ngcontent-%COMP%]{width:100%;height:98%}"]})}return me})(),ze=(()=>{class me{static forRoot(Q={}){return{ngModule:me,providers:[{provide:Te,useValue:Q}]}}static#e=this.\u0275fac=function(Se){return new(Se||me)};static#t=this.\u0275mod=b.oAB({type:me});static#n=this.\u0275inj=b.cJS({imports:[ue.ez]})}return me})()},7582:(Qe,he,k)=>{function ue(W,K){var te={};for(var ne in W)Object.prototype.hasOwnProperty.call(W,ne)&&K.indexOf(ne)<0&&(te[ne]=W[ne]);if(null!=W&&"function"==typeof Object.getOwnPropertySymbols){var ye=0;for(ne=Object.getOwnPropertySymbols(W);ye<ne.length;ye++)K.indexOf(ne[ye])<0&&Object.prototype.propertyIsEnumerable.call(W,ne[ye])&&(te[ne[ye]]=W[ne[ye]])}return te}function ae(W,K,te,ne){return new(te||(te=Promise))(function(Ee,Ge){function Ae(Yt){try{ot(ne.next(Yt))}catch(dt){Ge(dt)}}function Xn(Yt){try{ot(ne.throw(Yt))}catch(dt){Ge(dt)}}function ot(Yt){Yt.done?Ee(Yt.value):function ye(Ee){return Ee instanceof te?Ee:new te(function(Ge){Ge(Ee)})}(Yt.value).then(Ae,Xn)}ot((ne=ne.apply(W,K||[])).next())})}function G(W){return this instanceof G?(this.v=W,this):new G(W)}function de(W,K,te){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ye,ne=te.apply(W,K||[]),Ee=[];return ye={},Ge("next"),Ge("throw"),Ge("return"),ye[Symbol.asyncIterator]=function(){return this},ye;function Ge(on){ne[on]&&(ye[on]=function(kn){return new Promise(function($n,Gt){Ee.push([on,kn,$n,Gt])>1||Ae(on,kn)})})}function Ae(on,kn){try{!function Xn(on){on.value instanceof G?Promise.resolve(on.value.v).then(ot,Yt):dt(Ee[0][2],on)}(ne[on](kn))}catch($n){dt(Ee[0][3],$n)}}function ot(on){Ae("next",on)}function Yt(on){Ae("throw",on)}function dt(on,kn){on(kn),Ee.shift(),Ee.length&&Ae(Ee[0][0],Ee[0][1])}}function we(W){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var te,K=W[Symbol.asyncIterator];return K?K.call(W):(W=function Q(W){var K="function"==typeof Symbol&&Symbol.iterator,te=K&&W[K],ne=0;if(te)return te.call(W);if(W&&"number"==typeof W.length)return{next:function(){return W&&ne>=W.length&&(W=void 0),{value:W&&W[ne++],done:!W}}};throw new TypeError(K?"Object is not iterable.":"Symbol.iterator is not defined.")}(W),te={},ne("next"),ne("throw"),ne("return"),te[Symbol.asyncIterator]=function(){return this},te);function ne(Ee){te[Ee]=W[Ee]&&function(Ge){return new Promise(function(Ae,Xn){!function ye(Ee,Ge,Ae,Xn){Promise.resolve(Xn).then(function(ot){Ee({value:ot,done:Ae})},Ge)}(Ae,Xn,(Ge=W[Ee](Ge)).done,Ge.value)})}}}k.d(he,{FC:()=>de,KL:()=>we,_T:()=>ue,mG:()=>ae,qq:()=>G}),"function"==typeof SuppressedError&&SuppressedError}},Qe=>{Qe(Qe.s=3083)}]);